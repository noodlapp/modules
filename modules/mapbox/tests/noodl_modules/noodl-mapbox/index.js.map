{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@mapbox/fusspot/lib/index.js","webpack:///./node_modules/@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css?4c99","webpack:///../src/lib/mode_handler.js","webpack:///../node_modules/wgs84/index.js","webpack:///../node_modules/@mapbox/geojson-area/index.js","webpack:///../src/constants.js","webpack:///../src/lib/sort_features.js","webpack:///../src/lib/map_event_to_bounding_box.js","webpack:///../src/lib/string_set.js","webpack:///../src/lib/features_at.js","webpack:///../src/lib/get_features_and_set_cursor.js","webpack:///../src/lib/euclidean_distance.js","webpack:///../src/lib/is_click.js","webpack:///../src/lib/is_tap.js","webpack:///../node_modules/hat/index.js","webpack:///../src/feature_types/feature.js","webpack:///../src/feature_types/point.js","webpack:///../src/feature_types/line_string.js","webpack:///../src/feature_types/polygon.js","webpack:///../src/feature_types/multi_feature.js","webpack:///../src/modes/mode_interface_accessors.js","webpack:///../src/modes/mode_interface.js","webpack:///../src/modes/object_to_mode.js","webpack:///../src/lib/to_dense_array.js","webpack:///../src/render.js","webpack:///../src/store.js","webpack:///../node_modules/xtend/immutable.js","webpack:///../src/ui.js","webpack:///../src/setup.js","webpack:///../src/events.js","webpack:///../src/lib/theme.js","webpack:///../src/lib/common_selectors.js","webpack:///../node_modules/@mapbox/point-geometry/index.js","webpack:///../src/lib/mouse_event_point.js","webpack:///../src/lib/create_vertex.js","webpack:///../src/lib/create_midpoint.js","webpack:///../src/lib/create_supplementary_points.js","webpack:///../src/lib/double_click_zoom.js","webpack:///../node_modules/@mapbox/geojson-normalize/index.js","webpack:///../node_modules/geojson-flatten/dist/index.es.js","webpack:///../node_modules/@mapbox/geojson-coords/index.js","webpack:///../node_modules/@mapbox/geojson-coords/flatten.js","webpack:///../node_modules/traverse/index.js","webpack:///../node_modules/@mapbox/extent/index.js","webpack:///../node_modules/@mapbox/geojson-extent/index.js","webpack:///../src/lib/constrain_feature_movement.js","webpack:///../src/lib/move_features.js","webpack:///../src/modes/simple_select.js","webpack:///../src/modes/direct_select.js","webpack:///../src/modes/draw_point.js","webpack:///../src/lib/is_event_at_coordinates.js","webpack:///../src/modes/draw_polygon.js","webpack:///../src/modes/draw_line_string.js","webpack:///../src/modes/index.js","webpack:///../src/options.js","webpack:///../node_modules/lodash.isequal/index.js","webpack:///../src/lib/string_sets_are_equal.js","webpack:///../src/api.js","webpack:///../index.js","webpack:///./node_modules/@mapbox/mapbox-gl-geocoder/dist/mapbox-gl-geocoder.css?7198","webpack:///./node_modules/@mapbox/mapbox-gl-geocoder/lib/events.js","webpack:///./node_modules/@mapbox/mapbox-gl-geocoder/lib/exceptions.js","webpack:///./node_modules/@mapbox/mapbox-gl-geocoder/lib/geolocation.js","webpack:///./node_modules/@mapbox/mapbox-gl-geocoder/lib/index.js","webpack:///./node_modules/@mapbox/mapbox-gl-geocoder/lib/localization.js","webpack:///./node_modules/@mapbox/mapbox-gl-geocoder/lib/utils.js","webpack:///./node_modules/@mapbox/mapbox-sdk/index.js","webpack:///./node_modules/@mapbox/mapbox-sdk/lib/browser/browser-client.js","webpack:///./node_modules/@mapbox/mapbox-sdk/lib/browser/browser-layer.js","webpack:///./node_modules/@mapbox/mapbox-sdk/lib/classes/mapi-client.js","webpack:///./node_modules/@mapbox/mapbox-sdk/lib/classes/mapi-error.js","webpack:///./node_modules/@mapbox/mapbox-sdk/lib/classes/mapi-request.js","webpack:///./node_modules/@mapbox/mapbox-sdk/lib/classes/mapi-response.js","webpack:///./node_modules/@mapbox/mapbox-sdk/lib/constants.js","webpack:///./node_modules/@mapbox/mapbox-sdk/lib/helpers/parse-headers.js","webpack:///./node_modules/@mapbox/mapbox-sdk/lib/helpers/parse-link-header.js","webpack:///./node_modules/@mapbox/mapbox-sdk/lib/helpers/url-utils.js","webpack:///./node_modules/@mapbox/mapbox-sdk/services/geocoding.js","webpack:///./node_modules/@mapbox/mapbox-sdk/services/service-helpers/create-service-factory.js","webpack:///./node_modules/@mapbox/mapbox-sdk/services/service-helpers/object-map.js","webpack:///./node_modules/@mapbox/mapbox-sdk/services/service-helpers/pick.js","webpack:///./node_modules/@mapbox/mapbox-sdk/services/service-helpers/stringify-booleans.js","webpack:///./node_modules/@mapbox/mapbox-sdk/services/service-helpers/validator.js","webpack:///./node_modules/@mapbox/parse-mapbox-token/index.js","webpack:///./node_modules/@noodl/noodl-sdk/index.js","webpack:///./node_modules/base-64/base64.js","webpack:///./node_modules/@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css","webpack:///./node_modules/@mapbox/mapbox-gl-geocoder/dist/mapbox-gl-geocoder.css","webpack:///./node_modules/mapbox-gl/dist/mapbox-gl.css","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/eventemitter3/index.js","webpack:///./node_modules/events/events.js","webpack:///./node_modules/fuzzy/lib/fuzzy.js","webpack:///./node_modules/is-plain-obj/index.js","webpack:///./node_modules/lodash.debounce/index.js","webpack:///./node_modules/mapbox-gl/dist/mapbox-gl.css?e68d","webpack:///./node_modules/mapbox-gl/dist/mapbox-gl.js","webpack:///./node_modules/nanoid/index.browser.js","webpack:///./node_modules/nanoid/url-alphabet/index.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///./node_modules/style-loader/lib/urls.js","webpack:///./node_modules/subtag/subtag.js","webpack:///./node_modules/suggestions/index.js","webpack:///./node_modules/suggestions/src/list.js","webpack:///./node_modules/suggestions/src/suggestions.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///(webpack)/buildin/global.js","webpack:///(webpack)/buildin/module.js","webpack:///./node_modules/xtend/immutable.js","webpack:///./src/components/Map.js","webpack:///./src/components/controls/FullscreenControl.js","webpack:///./src/components/controls/GeolocateControl.js","webpack:///./src/components/controls/MapboxDraw.js","webpack:///./src/components/controls/MapboxGeocoder.js","webpack:///./src/components/controls/NavigationControl.js","webpack:///./src/components/controls/ScaleControl.js","webpack:///./src/constants.js","webpack:///./src/contexts/MapContext.js","webpack:///./src/index.js","webpack:///./src/reactNodes/map.js","webpack:///./src/reactNodes/marker.js","webpack:///./src/reactNodes/polygon.js","webpack:///external \"React\""],"names":["isPlainObject","require","xtend","DEFAULT_ERROR_PATH","NEWLINE_INDENT","v","assert","rootValidator","options","value","message","validate","errorMessage","processMessage","apiName","Error","shape","validatorObj","validators","objectEntries","shapeValidator","validationResult","plainObject","key","validator","errorMessages","i","length","push","concat","map","renderedMessage","split","join","objectId","path","ofPhrase","strictShape","strictShapeValidator","shapeResult","invalidKeys","Object","keys","reduce","memo","valueKey","undefined","arrayOf","createArrayValidator","tuple","Array","isArray","arguments","prototype","slice","call","validatingTuple","getValidator","index","arrayValidator","plainArray","required","requiredValidator","formatErrorMessage","isArrayCulprit","apply","__required","oneOfType","oneOfTypeValidator","messages","filter","Boolean","every","orList","m","max","arr","equal","compareWith","equalValidator","JSON","stringify","oneOf","range","min","rangeValidator","number","any","boolean","string","func","hasOwnProperty","result","len","prettifyResult","list","addArticle","nounPhrase","test","prettyResult","arrayCulprit","output","prepend","obj","module","exports","const","ModeHandler","mode","DrawContext","handlers","drag","click","mousemove","mousedown","mouseup","mouseout","keydown","keyup","touchstart","touchmove","touchend","tap","ctx","on","event","selector","fn","render","id","store","featureChanged","delegate","eventName","handles","iHandle","handle","ui","updateMapClasses","start","stop","trash","combineFeatures","uncombineFeatures","wgs84","require$$0","polygonArea","coords","area","Math","abs","ringArea","p1","p2","lowerIndex","middleIndex","upperIndex","coordsLength","rad","sin","RADIUS","_","PI","geojsonArea","geometry","type","coordinates","geometries","classes","CONTROL_BASE","CONTROL_PREFIX","CONTROL_BUTTON","CONTROL_BUTTON_LINE","CONTROL_BUTTON_POLYGON","CONTROL_BUTTON_POINT","CONTROL_BUTTON_TRASH","CONTROL_BUTTON_COMBINE_FEATURES","CONTROL_BUTTON_UNCOMBINE_FEATURES","CONTROL_GROUP","ATTRIBUTION","ACTIVE_BUTTON","BOX_SELECT","sources","HOT","COLD","cursors","ADD","MOVE","DRAG","POINTER","NONE","types","POLYGON","LINE","POINT","geojsonTypes","FEATURE","LINE_STRING","FEATURE_COLLECTION","MULTI_PREFIX","MULTI_POINT","MULTI_LINE_STRING","MULTI_POLYGON","modes","DRAW_LINE_STRING","DRAW_POLYGON","DRAW_POINT","SIMPLE_SELECT","DIRECT_SELECT","STATIC","events","CREATE","DELETE","UPDATE","SELECTION_CHANGE","MODE_CHANGE","ACTIONABLE","RENDER","COMBINE_FEATURES","UNCOMBINE_FEATURES","updateActions","CHANGE_COORDINATES","meta","MIDPOINT","VERTEX","activeStates","ACTIVE","INACTIVE","interactions","LAT_RENDERED_MIN","FEATURE_SORT_RANKS","Point","LineString","MultiLineString","Polygon","comparator","a","b","score","Constants.geojsonTypes","sortFeatures","features","feature","property","sort","mapEventToBoundingBox","mapEvent","buffer","point","x","y","StringSet","items","this","_items","_nums","_length","let","l","add","has","values","forEach","k","parse","clear","META_TYPES","Constants.meta","featuresAt","bbox","clickBuffer","touch","touchBuffer","box","queryParams","styles","layers","s","queryRenderedFeatures","indexOf","properties","featureIds","uniqueFeatures","featureId","getFeatureAtAndSetCursors","mouse","Constants.cursors","active","Constants.activeStates","currentModeName","queueMapClasses","sqrt","isClick","end","fineTolerance","grossTolerance","interval","time","moveDistance","euclideanDistance","isTap","tolerance","hat","bits","base","digits","log","pow","Infinity","rem","floor","res","random","toString","parsed","parseInt","rack","expandBy","data","iters","hats","get","set","Feature","geojson","changed","incomingCoords","setCoordinates","getCoordinates","setProperty","toGeoJSON","internal","userProperties","name","create","isValid","updateCoordinate","pathOrLng","lngOrLat","lat","getCoordinate","addCoordinate","lng","splice","removeCoordinate","ring","ids","parts","ringId","coordId","models","MultiPoint","MultiPolygon","takeAction","action","idx","tail","MultiFeature","model","TypeError","_coordinatesToFeatures","ModeInterface","drawConfig","_ctx","Model","bind","replace","f","getFeatures","setSelected","setSelectedCoordinates","c","feature_id","getSelected","getSelectedIds","isSelected","getFeature","select","deselect","deleteFeature","opts","addFeature","clearSelectedFeatures","clearSelected","clearSelectedCoordinates","setActionableState","actions","newSet","actionable","changeMode","eventOpts","updateUIClasses","activateUIButton","setActiveButton","bufferType","newFeature","isInstanceOf","doRender","onSetup","onDrag","onClick","onMouseMove","onMouseDown","onMouseUp","onMouseOut","onKeyUp","onKeyDown","onTouchStart","onTouchMove","onTouchEnd","onTap","onStop","onTrash","onCombineFeature","onUncombineFeature","toDisplayFeatures","eventMapper","eventKeys","modeObject","modeObjectKeys","startOpts","state","eh","modeHandler","e","onCombineFeatures","onUncombineFeatures","toDenseArray","getSource","Constants.sources","cleanup","newHotIds","newColdIds","isDirty","getAllIds","getChangedIds","hot","lastColdCount","cold","parent","coldChanged","renderFeature","source","featureInternal","currentModeRender","setData","_emitSelectionChange","fire","Constants.events","points","getSelectedCoordinates","coordinate","_deletedFeaturesToEmit","geojsonToEmit","clearChangedIds","Store","renderRequest","_features","_featureIds","_selectedFeatureIds","_selectedCoordinates","_changedFeatureIds","_mapInitialConfig","requestAnimationFrame","refreshSelectedCoordinates","newSelectedCoordinates","silent","createRenderBatch","holdRender","numRenders","setDirty","getAll","coord_path","setFeatureProperty","storeMapConfig","interaction","isEnabled","restoreMapConfig","enable","disable","getInitialConfigValue","target","classTypes","controlContainer","mapLoadedInterval","setup","onRemove","off","connect","clearInterval","removeLayers","removeButtons","removeEventListeners","clearMapClasses","container","parentNode","removeChild","addLayers","addEventListeners","onAdd","_fire","args","objectToMode","mouseDownInfo","touchStartInfo","currentMode","isDrag","Date","getTime","originalEvent","stopPropagation","mousedrag","endInfo","touchdrag","buttons","which","getFeaturesAndSetCursor","featureTarget","preventDefault","touchEnabled","isKeyModeValid","code","modename","nextModeOptions","eventOptions","modebuilder","setupModeHandler","srcElement","classList","keyCode","controls","Constants.modes","line_string","polygon","zoomend","changeZoom","dataType","some","style","getLayer","actionState","defaultMode","addEventListener","keybindings","removeEventListener","getMode","buttonElements","activeButton","currentMapClasses","nextMapClasses","classesToRemove","classesToAdd","ref","remove","ref$1","createControlButton","button","document","createElement","className","Constants.classes","setAttribute","title","appendChild","deactivateButtons","onDeactivate","onActivate","addButtons","controlGroup","Constants.types","combine_features","uncombine_features","buttonId","getContainer","boxSelect","boxZoom","dragPan","loaded","setInterval","addSource","addLayer","removeLayer","removeSource","paint","layout","isOfMetaType","isShiftMousedown","shiftKey","isActiveFeature","isInactiveFeature","noTarget","isFeature","isVertex","isShiftDown","isEscapeKey","isEnterKey","pointGeometry","mouseEventPoint","mouseEvent","rect","getBoundingClientRect","clientX","left","clientLeft","clientY","top","clientTop","parentId","selected","startVertex","endVertex","startCoord","endCoord","Constants.LAT_RENDERED_MIN","mid","createSupplementaryPoints","basePath","subType","supplementaryPoints","processLine","line","lineBasePath","firstPointString","lastVertex","pointIndex","pointPath","String","vertex","createVertex","isSelectedPath","midpoints","midpoint","createMidpoint","stringifiedPoint","selectedPaths","lineIndex","subCoordinates","subFeature","clone","p","_add","sub","_sub","multByPoint","_multByPoint","divByPoint","_divByPoint","mult","_mult","div","_div","rotate","_rotate","rotateAround","_rotateAround","matMult","_matMult","unit","_unit","perp","_perp","round","_round","mag","equals","other","dist","distSqr","dx","dy","angle","atan2","angleTo","angleWith","angleWithSep","cos","convert","doubleClickZoom","setTimeout","geojsonNormalize","gj","GeometryCollection","FeatureCollection","t","r","geojsonFlatten","flatten","_flatten","acc","item","Function","default","traverse","Traverse","walk","root","cb","immutable","parents","alive","walker","node_","node","copy","modifiers","keepGoing","isRoot","level","circular","update","stopHere","delete","before","after","pre","post","block","updateState","objectKeys","isLeaf","notLeaf","notRoot","ret","child","isLast","isFirst","pop","src","dst","toS","isRegExp","RegExp","isError","isBoolean","isNumber","Number","isString","getPrototypeOf","constructor","proto","__proto__","T","ps","init","skip","paths","nodes","xs","extent","Extent","_bbox","_valid","include","ll","center","union","contains","_fastContains","lon","intersect","body","geojsonCoords","normalized","require$$1","require$$2","geojsonTypesByDataAttributes","dataAttributes","getExtent","ext","geojsonExtentModule","geojsonExtent","attribute","geojsonFeatures","delta","northInnerEdge","LAT_MIN","southInnerEdge","northOuterEdge","southOuterEdge","westEdge","eastEdge","bounds","featureSouthEdge","featureNorthEdge","featureWestEdge","featureEastEdge","constrainedDelta","ceil","constrainFeatureMovement","nextCoordinates","currentCoordinates","moveCoordinate","coord","moveRing","multi","SimpleSelect","dragMoveLocation","boxSelectStartLocation","boxSelectElement","boxSelecting","canBoxSelect","dragMoving","canDragMove","initiallySelectedFeatureIds","fireActionable","Constants.updateActions","selectedFeatures","multiFeatures","featureType","allFeatures","stopExtendedInteractions","fireUpdate","CommonSelectors.noTarget","clickAnywhere","CommonSelectors.isOfMetaType","clickOnVertex","CommonSelectors.isFeature","clickOnFeature","wasSelected","coordPath","startPos","lngLat","startOnActiveFeature","isShiftClick","CommonSelectors.isShiftDown","selectedFeatureIds","isFeatureSelected","CommonSelectors.isActiveFeature","CommonSelectors.isShiftMousedown","startBoxSelect","dragMove","whileBoxSelect","current","minX","maxX","minY","maxY","translateValue","transform","WebkitTransform","width","height","moveFeatures","featuresInBox","idsToSelect","getUniqueIds","display","featuresCombined","includes","subcoords","multiFeature","createdFeatures","deletedFeatures","featuresUncombined","loop","isMidpoint","DirectSelect","selectedCoordPaths","startDragging","about","selectedIndex","selectedCoordinates","pathsToCoordinates","stopDragging","selectedCoords","localeCompare","numeric","onVertex","noCoords","onFeature","onMidpoint","dragVertex","dragFeature","clickNoTarget","clickActiveFeature","clickInactive","DrawPoint","isEventAtCoordinates","stopDrawingAndRemove","isActivePoint","CommonSelectors.isEscapeKey","CommonSelectors.isEnterKey","DrawPolygon","currentVertexPosition","CommonSelectors.isVertex","isActivePolygon","coordinateCount","endPos","lineCoordinates","DrawLineString","direction","from","lastCoord","isActiveLine","simple_select","direct_select","draw_point","draw_polygon","draw_line_string","defaultOptions","displayControlsDefault","showControls","hideControls","addSources","sourceBucket","HASH_UNDEFINED","MAX_SAFE_INTEGER","argsTag","arrayTag","boolTag","dateTag","errorTag","funcTag","mapTag","numberTag","objectTag","promiseTag","regexpTag","setTag","stringTag","symbolTag","weakMapTag","arrayBufferTag","dataViewTag","reIsHostCtor","reIsUint","typedArrayTags","freeGlobal","global","freeSelf","self","freeExports","nodeType","freeModule","moduleExports","freeProcess","process","nodeUtil","binding","nodeIsTypedArray","isTypedArray","arraySome","array","predicate","mapToArray","size","setToArray","uid","arrayProto","funcProto","objectProto","coreJsData","funcToString","maskSrcKey","exec","IE_PROTO","nativeObjectToString","reIsNative","Buffer","Symbol","Uint8Array","propertyIsEnumerable","symToStringTag","toStringTag","nativeGetSymbols","getOwnPropertySymbols","nativeIsBuffer","isBuffer","nativeKeys","arg","DataView","getNative","Map","Promise","Set","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","valueOf","Hash","entries","entry","ListCache","MapCache","SetCache","__data__","Stack","arrayLikeKeys","inherited","isArr","isArg","isArguments","isBuff","isType","skipIndexes","n","iteratee","baseTimes","isIndex","assocIndexOf","eq","baseGetTag","isOwn","tag","unmasked","getRawTag","objectToString","baseIsArguments","isObjectLike","baseIsEqual","bitmask","customizer","stack","object","equalFunc","objIsArr","othIsArr","objTag","getTag","othTag","objIsObj","othIsObj","isSameTag","equalArrays","byteLength","byteOffset","isPartial","stacked","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","objProps","getAllKeys","objLength","othLength","skipCtor","objValue","othValue","compared","objCtor","othCtor","equalObjects","baseIsEqualDeep","baseIsNative","isObject","isMasked","isFunction","baseKeys","Ctor","arrLength","seen","arrValue","othIndex","keysFunc","symbolsFunc","offset","arrayPush","baseGetAllKeys","getSymbols","getMapData","getValue","hash","pairs","LARGE_ARRAY_SIZE","resIndex","arrayFilter","symbol","ArrayBuffer","resolve","ctorString","isLength","baseUnary","featureTypes","setupDraw","api","withDefaults","setupOptions","getFeatureIdsAt","getSelectedPoints","featureCollection","renderBatch","toDelete","newIds","newIdsLookup","normalize","internalFeature","isEqual","deleteAll","modeOptions","stringSetsAreEqual","setupAPI","runSetup","MapboxDraw","constants","Constants","lib","nanoid","MapboxEventManager","origin","endpoint","access_token","accessToken","version","sessionID","generateSessionID","userAgent","getUserAgent","send","countries","language","limit","locale","navigator","enableEventLogging","shouldEnableLogging","eventQueue","flushInterval","maxQueueSize","timer","flush","lastSentInput","lastSentIndex","geocoder","resultIndex","getSelectedIndex","payload","getEventPayload","resultPlaceName","place_name","resultId","queryString","keyevent","keyEvent","metaKey","lastAction","callback","getRequestOptions","request","err","handleError","method","host","headers","proximity","longitude","latitude","zoom","_map","getZoom","created","sessionIdentifier","country","autocomplete","fuzzyMatch","routing","worldview","mapZoom","keyboardLocale","inputString","_inputEl","xhttp","XMLHttpRequest","onreadystatechange","readyState","status","statusText","open","header","headerValue","setRequestHeader","_typeahead","results","selectedID","resultIDs","selectedIdx","localGeocoder","clearTimeout","evt","forceFlush","Geolocation","isSupport","window","geolocation","getCurrentPosition","positionOptions","enableHighAccuracy","reject","Typeahead","debounce","extend","EventEmitter","exceptions","MapboxClient","mbxGeocoder","localization","subtag","utils","GEOCODE_REQUEST_TYPE","FORWARD","LOCAL","REVERSE","getFooterNode","innerHTML","MapboxGeocoder","_eventEmitter","fresh","lastSelected","flyTo","trackProximity","minLength","reverseGeocode","flipCoordinates","marker","mapboxgl","collapsed","clearAndBlurOnEsc","clearOnBlur","enableGeolocation","addressAccuracy","getItemValue","placeName","addTo","addToExistingContainer","el","_controlContainer","addControl","HTMLElement","querySelectorAll","setLanguage","localGeocoderOnly","geocoderService","eventManager","_onChange","_onKeyDown","_onPaste","_onBlur","_showButton","_hideButton","_onQueryResult","_updateProximity","_collapse","_unCollapse","_clear","_clearOnBlur","_geolocateUser","searchIcon","createIcon","setPlaceholder","_clearEl","buttonIcon","_loadingEl","_geolocateEl","geolocateIcon","_showGeolocateButton","typeahead","setRenderFunction","parentDraw","draw","footerNode","_footerNode","selectingListItem","element","mapMarker","_handleMarker","_mapboxgl","console","error","_hideGeolocateButton","_showLoadingIcon","then","geolocationPosition","_hideLoadingIcon","_fly","_showClearButton","config","query","text","_setInputValue","emit","resp","locationText","transformFeatureToGeolocationText","user_coordinates","_renderUserDeniedGeolocationError","_renderLocationError","_hideAttribution","icon","createElementNS","_removeMarker","focus","scrollLeft","setSelectionRange","clipboardData","getData","_geocode","ESC_KEY_CODE","TAB_KEY_CODE","blur","shadowRoot","activeElement","_hideClearButton","_showAttribution","flyOptions","short_code","fitBounds","defaultFlyOptions","_requestType","search","REVERSE_GEOCODE_COORD_RGX","_setupConfig","requestType","spacesOrCommaRgx","isCoordKey","parseFloat","reverse","trimmedSearch","trim","reverseGeocodeCoordRgx","searchInput","forwardGeocode","localGeocoderRes","externalGeocoderRes","geocoderError","response","statusCode","externalGeocoder","_renderNoResults","_renderError","ev","relatedTarget","getCenter","wrap","setProximity","_renderMessage","msg","renderError","_getPlaceholderText","placeholder","firstLanguage","localizedValue","setInput","disableTrackProximity","getProximity","getRenderFunction","browserLocale","userLanguage","browserLanguage","getLanguage","setZoom","getFlyTo","setFlyTo","getPlaceholder","getBbox","setBbox","getCountries","setCountries","getTypes","setTypes","getMinLength","setMinLength","getLimit","setLimit","getFilter","setFilter","setOrigin","getOrigin","setAccessToken","setAutocomplete","getAutocomplete","setFuzzyMatch","getFuzzyMatch","setRouting","getRouting","setWorldview","getWorldview","defaultMarkerOptions","color","markerOptions","Marker","setLngLat","removeListener","accuracy","addrInfo","getAddressInfo","currentAccuracy","accuracyIndex","houseNumber","address","street","context","layer","client","browser","MapiClient","BrowserClient","sendRequest","browserSend","abortRequest","browserAbort","createBrowserClient","MapiResponse","MapiError","parseHeaders","requestsUnderway","xhr","abort","createResponse","getAllResponseHeaders","normalizeBrowserProgressEvent","total","transferred","percent","sendRequestXhr","onprogress","emitter","EVENT_PROGRESS_DOWNLOAD","file","upload","EVENT_PROGRESS_UPLOAD","onerror","onabort","mapiError","ERROR_REQUEST_ABORTED","onload","createRequestXhr","url","parseToken","MapiRequest","API_ORIGIN","createRequest","requestOptions","errorType","ERROR_HTTP","urlUtils","requestId","defaultHeaders","headersWithDefaults","toLowerCase","_options","sent","aborted","params","encoding","sendFileAs","prependOrigin","appendQueryObject","routeParams","actualAccessToken","appendQueryParam","accessTokenOwnerId","user","ownerId","interpolateRouteParams","EVENT_RESPONSE","EVENT_ERROR","_nextPageRequest","eachPage","handleResponse","getNextPage","nextPageRequest","nextPage","getPage","_extend","extendedOptions","parseLinkHeader","responseData","rawBody","parseError","links","link","hasNextPage","next","parseSingleHeader","raw","boundary","substring","rawHeader","parseParam","param","match","parseLink","linkUrl","linkParams","rel","parsedLinkParams","linkHeader","splitRel","encodeArray","arrayValue","encodeURIComponent","encodeValue","punctuation","queryObject","delimiter","route","paramId","preppedValue","pick","stringifyBooleans","createServiceFactory","Geocoding","assertShape","reverseMode","createClient","ServicePrototype","clientOrConfig","isPrototypeOf","service","objectMap","val","stringifyBoolean","Blob","pipe","date","isNaN","base64","tokenCache","token","usage","rawPayload","parsedPayload","parsePaylod","u","authorization","expires","exp","iat","scopes","lastLogin","impersonator","iu","decode","_colors","Noodl","defineNode","def","_def","displayNodeName","displayName","usePortAsLabel","useInputAsLabel","category","getInspectInfo","docs","initialize","inputs","_outputs","outputs","_this","setOutputs","o","flagOutputDirty","clearWarnings","editorConnection","nodeScope","componentOwner","sendWarning","group","_key","signals","valueChangedToTrue","_fn","signal","scheduleAfterInputsHaveUpdated","getter","methods","prototypeExtensions","onNodeDeleted","_onNodeDeleted","defineCollectionNode","assign","Items","Fetch","sendSignalOnOutput","fetch","defineModelNode","Id","Fetched","_object","_changeListener","_o","defineReactNode","getReactComponent","inputProps","inputCss","outputProps","frame","InvalidCharacterError","TABLE","REGEX_SPACE_CHARACTERS","input","bitCounter","bitStorage","position","charAt","fromCharCode","encode","padding","d","charCodeAt","define","useSourceMap","content","cssWithMappingToString","modules","mediaQuery","alreadyImportedModules","cssMapping","btoa","sourceMapping","toComment","sourceURLs","sourceRoot","sourceMap","unescape","prefix","Events","EE","once","addListener","listener","_events","_eventsCount","clearEvent","eventNames","names","listeners","ee","listenerCount","a1","a2","a3","a4","a5","j","removeAllListeners","prefixed","R","Reflect","ReflectApply","receiver","ReflectOwnKeys","ownKeys","getOwnPropertyNames","ProcessEmitWarning","warning","warn","NumberIsNaN","_maxListeners","defaultMaxListeners","checkListener","defineProperty","enumerable","RangeError","setMaxListeners","_getMaxListeners","that","getMaxListeners","doError","er","handler","arrayClone","_addListener","existing","newListener","unshift","warned","w","count","prependListener","onceWrapper","fired","wrapFn","_onceWrap","wrapped","prependOnceListener","originalListener","shift","spliceOne","_listeners","unwrap","evlistener","unwrapListeners","rawListeners","errorListener","resolver","eventTargetAgnosticAddListener","addErrorHandlerIfEventEmitter","flags","wrapListener","fuzzy","simpleFilter","pattern","str","patternIdx","totalScore","currScore","compareString","caseSensitive","ch","rendered","prev","extract","original","compare","FUNC_ERROR_TEXT","NAN","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","nativeMax","nativeMin","now","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","toNumber","invokeFunc","thisArg","leadingEdge","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","shouldInvoke","trailingEdge","cancel","debounced","isInvoking","isSymbol","isBinary","bytes","crypto","getRandomValues","customRandom","alphabet","defaultSize","getRandom","mask","LN2","step","customAlphabet","byte","toUpperCase","urlAlphabet","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","timeout","run","nextTick","Item","env","argv","versions","noop","cwd","chdir","dir","umask","css","location","baseUrl","protocol","currentDir","pathname","fixedCss","fullMatch","origUrl","unquotedOrigUrl","$1","newUrl","make","empty","extlang","script","region","expose","part","Suggestions","List","component","wrapper","insertBefore","nextSibling","show","hide","isEmpty","isVisible","drawItem","li","handleMouseUp","move","previous","drawError","hideOnBlur","handleKeyUp","handleKeyDown","handleFocus","handleBlur","handlePaste","handleInputChange","getCandidates","revisedData","candidate","createEvent","initEvent","dispatchEvent","fireEvent","renderedString","sourceFormatting","boldString","indexString","indexOfQuery","lastIndexOf","endIndexOfQuery","g","webpackPolyfill","deprecate","children","props","mapboxStyle","interactive","latitute","bearing","outMap","outMapboxDraw","outLongitude","outLatitute","outZoom","outBearing","onLoaded","onMoved","onClickLongitude","onClickLatitude","containerRef","useRef","useState","setMap","useEffect","getProjectSettings","mapboxAccessToken","mapStyle","startsWith","resizeObserver","ResizeObserver","resize","observe","getBearing","disconnect","useMapboxGeocoder","useFullscreenControl","useGeolocateControl","useNavigationControl","useScaleControl","useMapboxDraw","DynamicPorts","condition","Inputs","c_FullscreenControlEnable","c_FullscreenControlPosition","AddControlPositionEnumType","control","FullscreenControl","removeControl","c_GeolocateControlEnable","c_GeolocateControlPosition","c_GeolocateControlShowAccuracyCircle","tooltip","c_GeolocateControlShowUserHeading","c_GeolocateControlShowUserLocation","c_GeolocateControlTrackUserLocation","GeolocateControl","showAccuracyCircle","showUserHeading","showUserLocation","trackUserLocation","c_MapboxDrawEnable","c_MapboxDrawPosition","c_MapboxDrawKeybindings","c_MapboxDrawTouch","c_MapboxDrawBoxSelect","c_MapboxDrawDisplayControls","c_MapboxDrawControlPoints","c_MapboxDrawControlLineString","c_MapboxDrawControlPloygon","c_MapboxDrawControlTrash","c_MapboxDrawControlCombineFeatures","c_MapboxDrawControlUncombineFeatures","setDraw","c_GeocoderEnable","c_GeocoderPosition","c_GeocoderPlaceholder","c_GeocoderShowMarker","c_NavigationControlEnable","c_NavigationControlPosition","c_NavigationControlShowCompass","c_NavigationControlShowZoom","c_NavigationControlVisualizePitch","NavigationControl","showCompass","showZoom","visualizePitch","c_ScaleControlEnable","c_ScaleControlPosition","c_ScaleControlMaxWidth","c_ScaleControlUnit","enums","label","ScaleControl","maxWidth","MapContext","createContext","MapContextProvider","useMapContext","useContext","defineModule","reactNodes","MapboxNode","MapboxMarker","MapboxPolygon","settings","plug","MapComponent","dynamicports","editorName","geopoint","draggable","rotation","rotationAlignment","pitchAlignment","offsetX","offsetY","occludedOpacity","outlatitude","onDragStart","onDragEnd","mapContext","setMarker","newMarker","updateLngLat","getLngLat","setDraggable","setRotation","setRotationAlignment","setPitchAlignment","setOffset","guid","s4","allowChildren","enabled","outMapbox","outFeatureId","outCoordinates","outCenter","outCentroid","outArea","onUpdated","onSelected","onUnselected","setFeatureId","onSelectionChange","find","otherFeaturesIds","onUpdate","updated","onselectionchange","onupdate","tsdef","Edit"],"mappings":"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;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA,KAAK,KAAwC,EAAE,EAE7C;;AAEF,QAAQ,sBAAiB;AACzB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;A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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","'use strict';\n/**\n * Validators are functions which assert certain type.\n * They can return a string which can then be used\n * to display a helpful error message.\n * They can also return a function for a custom error message.\n */\nvar isPlainObject = require('is-plain-obj');\nvar xtend = require('xtend');\n\nvar DEFAULT_ERROR_PATH = 'value';\nvar NEWLINE_INDENT = '\\n  ';\n\nvar v = {};\n\n/**\n * Runners\n *\n * Take root validators and run assertion\n */\nv.assert = function(rootValidator, options) {\n  options = options || {};\n  return function(value) {\n    var message = validate(rootValidator, value);\n    // all good\n    if (!message) {\n      return;\n    }\n\n    var errorMessage = processMessage(message, options);\n\n    if (options.apiName) {\n      errorMessage = options.apiName + ': ' + errorMessage;\n    }\n\n    throw new Error(errorMessage);\n  };\n};\n\n/**\n * Higher Order Validators\n *\n * validators which take other validators as input\n * and output a new validator\n */\nv.shape = function shape(validatorObj) {\n  var validators = objectEntries(validatorObj);\n  return function shapeValidator(value) {\n    var validationResult = validate(v.plainObject, value);\n\n    if (validationResult) {\n      return validationResult;\n    }\n\n    var key, validator;\n    var errorMessages = [];\n\n    for (var i = 0; i < validators.length; i++) {\n      key = validators[i].key;\n      validator = validators[i].value;\n      validationResult = validate(validator, value[key]);\n\n      if (validationResult) {\n        // return [key].concat(validationResult);\n        errorMessages.push([key].concat(validationResult));\n      }\n    }\n\n    if (errorMessages.length < 2) {\n      return errorMessages[0];\n    }\n\n    // enumerate all the error messages\n    return function(options) {\n      errorMessages = errorMessages.map(function(message) {\n        var key = message[0];\n        var renderedMessage = processMessage(message, options)\n          .split('\\n')\n          .join(NEWLINE_INDENT); // indents any inner nesting\n        return '- ' + key + ': ' + renderedMessage;\n      });\n\n      var objectId = options.path.join('.');\n      var ofPhrase = objectId === DEFAULT_ERROR_PATH ? '' : ' of ' + objectId;\n\n      return (\n        'The following properties' +\n        ofPhrase +\n        ' have invalid values:' +\n        NEWLINE_INDENT +\n        errorMessages.join(NEWLINE_INDENT)\n      );\n    };\n  };\n};\n\nv.strictShape = function strictShape(validatorObj) {\n  var shapeValidator = v.shape(validatorObj);\n  return function strictShapeValidator(value) {\n    var shapeResult = shapeValidator(value);\n    if (shapeResult) {\n      return shapeResult;\n    }\n\n    var invalidKeys = Object.keys(value).reduce(function(memo, valueKey) {\n      if (validatorObj[valueKey] === undefined) {\n        memo.push(valueKey);\n      }\n      return memo;\n    }, []);\n\n    if (invalidKeys.length !== 0) {\n      return function() {\n        return 'The following keys are invalid: ' + invalidKeys.join(', ');\n      };\n    }\n  };\n};\n\nv.arrayOf = function arrayOf(validator) {\n  return createArrayValidator(validator);\n};\n\nv.tuple = function tuple() {\n  var validators = Array.isArray(arguments[0])\n    ? arguments[0]\n    : Array.prototype.slice.call(arguments);\n  return createArrayValidator(validators);\n};\n\n// Currently array validation fails when the first invalid item is found.\nfunction createArrayValidator(validators) {\n  var validatingTuple = Array.isArray(validators);\n  var getValidator = function(index) {\n    if (validatingTuple) {\n      return validators[index];\n    }\n    return validators;\n  };\n\n  return function arrayValidator(value) {\n    var validationResult = validate(v.plainArray, value);\n    if (validationResult) {\n      return validationResult;\n    }\n\n    if (validatingTuple && value.length !== validators.length) {\n      return 'an array with ' + validators.length + ' items';\n    }\n\n    for (var i = 0; i < value.length; i++) {\n      validationResult = validate(getValidator(i), value[i]);\n      if (validationResult) {\n        return [i].concat(validationResult);\n      }\n    }\n  };\n}\n\nv.required = function required(validator) {\n  function requiredValidator(value) {\n    if (value == null) {\n      return function(options) {\n        return formatErrorMessage(\n          options,\n          isArrayCulprit(options.path)\n            ? 'cannot be undefined/null.'\n            : 'is required.'\n        );\n      };\n    }\n    return validator.apply(this, arguments);\n  }\n  requiredValidator.__required = true;\n\n  return requiredValidator;\n};\n\nv.oneOfType = function oneOfType() {\n  var validators = Array.isArray(arguments[0])\n    ? arguments[0]\n    : Array.prototype.slice.call(arguments);\n  return function oneOfTypeValidator(value) {\n    var messages = validators\n      .map(function(validator) {\n        return validate(validator, value);\n      })\n      .filter(Boolean);\n\n    // If we don't have as many messages as no. of validators,\n    // then at least one validator was ok with the value.\n    if (messages.length !== validators.length) {\n      return;\n    }\n\n    // check primitive type\n    if (\n      messages.every(function(message) {\n        return message.length === 1 && typeof message[0] === 'string';\n      })\n    ) {\n      return orList(\n        messages.map(function(m) {\n          return m[0];\n        })\n      );\n    }\n\n    // Complex oneOfTypes like\n    // `v.oneOftypes(v.shape({name: v.string})`, `v.shape({name: v.number}))`\n    // are complex ¯\\_(ツ)_/¯. For the current scope only returning the longest message.\n    return messages.reduce(function(max, arr) {\n      return arr.length > max.length ? arr : max;\n    });\n  };\n};\n\n/**\n * Meta Validators\n * which take options as argument (not validators)\n * and return a new primitive validator\n */\nv.equal = function equal(compareWith) {\n  return function equalValidator(value) {\n    if (value !== compareWith) {\n      return JSON.stringify(compareWith);\n    }\n  };\n};\n\nv.oneOf = function oneOf() {\n  var options = Array.isArray(arguments[0])\n    ? arguments[0]\n    : Array.prototype.slice.call(arguments);\n  var validators = options.map(function(value) {\n    return v.equal(value);\n  });\n\n  return v.oneOfType.apply(this, validators);\n};\n\nv.range = function range(compareWith) {\n  var min = compareWith[0];\n  var max = compareWith[1];\n  return function rangeValidator(value) {\n    var validationResult = validate(v.number, value);\n\n    if (validationResult || value < min || value > max) {\n      return 'number between ' + min + ' & ' + max + ' (inclusive)';\n    }\n  };\n};\n\n/**\n * Primitive validators\n *\n * simple validators which return a string or undefined\n */\nv.any = function any() {\n  return;\n};\n\nv.boolean = function boolean(value) {\n  if (typeof value !== 'boolean') {\n    return 'boolean';\n  }\n};\n\nv.number = function number(value) {\n  if (typeof value !== 'number') {\n    return 'number';\n  }\n};\n\nv.plainArray = function plainArray(value) {\n  if (!Array.isArray(value)) {\n    return 'array';\n  }\n};\n\nv.plainObject = function plainObject(value) {\n  if (!isPlainObject(value)) {\n    return 'object';\n  }\n};\n\nv.string = function string(value) {\n  if (typeof value !== 'string') {\n    return 'string';\n  }\n};\n\nv.func = function func(value) {\n  if (typeof value !== 'function') {\n    return 'function';\n  }\n};\n\nfunction validate(validator, value) {\n  // assertions are optional by default unless wrapped in v.require\n  if (value == null && !validator.hasOwnProperty('__required')) {\n    return;\n  }\n\n  var result = validator(value);\n\n  if (result) {\n    return Array.isArray(result) ? result : [result];\n  }\n}\n\nfunction processMessage(message, options) {\n  // message array follows the convention\n  // [...path, result]\n  // path is an array of object keys / array indices\n  // result is output of the validator\n  var len = message.length;\n\n  var result = message[len - 1];\n  var path = message.slice(0, len - 1);\n\n  if (path.length === 0) {\n    path = [DEFAULT_ERROR_PATH];\n  }\n  options = xtend(options, { path: path });\n\n  return typeof result === 'function'\n    ? result(options) // allows customization of result\n    : formatErrorMessage(options, prettifyResult(result));\n}\n\nfunction orList(list) {\n  if (list.length < 2) {\n    return list[0];\n  }\n  if (list.length === 2) {\n    return list.join(' or ');\n  }\n  return list.slice(0, -1).join(', ') + ', or ' + list.slice(-1);\n}\n\nfunction prettifyResult(result) {\n  return 'must be ' + addArticle(result) + '.';\n}\n\nfunction addArticle(nounPhrase) {\n  if (/^an? /.test(nounPhrase)) {\n    return nounPhrase;\n  }\n  if (/^[aeiou]/i.test(nounPhrase)) {\n    return 'an ' + nounPhrase;\n  }\n  if (/^[a-z]/i.test(nounPhrase)) {\n    return 'a ' + nounPhrase;\n  }\n  return nounPhrase;\n}\n\nfunction formatErrorMessage(options, prettyResult) {\n  var arrayCulprit = isArrayCulprit(options.path);\n  var output = options.path.join('.') + ' ' + prettyResult;\n  var prepend = arrayCulprit ? 'Item at position ' : '';\n\n  return prepend + output;\n}\n\nfunction isArrayCulprit(path) {\n  return typeof path[path.length - 1] == 'number' || typeof path[0] == 'number';\n}\n\nfunction objectEntries(obj) {\n  return Object.keys(obj || {}).map(function(key) {\n    return { key: key, value: obj[key] };\n  });\n}\n\nv.validate = validate;\nv.processMessage = processMessage;\n\nmodule.exports = v;\n","\nvar content = require(\"!!../../../css-loader/dist/cjs.js!./mapbox-gl-draw.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../css-loader/dist/cjs.js!./mapbox-gl-draw.css\", function() {\n\t\tvar newContent = require(\"!!../../../css-loader/dist/cjs.js!./mapbox-gl-draw.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nconst ModeHandler = function(mode, DrawContext) {\n\n  const handlers = {\n    drag: [],\n    click: [],\n    mousemove: [],\n    mousedown: [],\n    mouseup: [],\n    mouseout: [],\n    keydown: [],\n    keyup: [],\n    touchstart: [],\n    touchmove: [],\n    touchend: [],\n    tap: []\n  };\n\n  const ctx = {\n    on(event, selector, fn) {\n      if (handlers[event] === undefined) {\n        throw new Error(`Invalid event type: ${event}`);\n      }\n      handlers[event].push({\n        selector,\n        fn\n      });\n    },\n    render(id) {\n      DrawContext.store.featureChanged(id);\n    }\n  };\n\n  const delegate = function (eventName, event) {\n    const handles = handlers[eventName];\n    let iHandle = handles.length;\n    while (iHandle--) {\n      const handle = handles[iHandle];\n      if (handle.selector(event)) {\n        const skipRender = handle.fn.call(ctx, event);\n        if (!skipRender) {\n          DrawContext.store.render();\n        }\n        DrawContext.ui.updateMapClasses();\n\n        // ensure an event is only handled once\n        // we do this to let modes have multiple overlapping selectors\n        // and relay on order of oppertations to filter\n        break;\n      }\n    }\n  };\n\n  mode.start.call(ctx);\n\n  return {\n    render: mode.render,\n    stop() {\n      if (mode.stop) mode.stop();\n    },\n    trash() {\n      if (mode.trash) {\n        mode.trash();\n        DrawContext.store.render();\n      }\n    },\n    combineFeatures() {\n      if (mode.combineFeatures) {\n        mode.combineFeatures();\n      }\n    },\n    uncombineFeatures() {\n      if (mode.uncombineFeatures) {\n        mode.uncombineFeatures();\n      }\n    },\n    drag(event) {\n      delegate('drag', event);\n    },\n    click(event) {\n      delegate('click', event);\n    },\n    mousemove(event) {\n      delegate('mousemove', event);\n    },\n    mousedown(event) {\n      delegate('mousedown', event);\n    },\n    mouseup(event) {\n      delegate('mouseup', event);\n    },\n    mouseout(event) {\n      delegate('mouseout', event);\n    },\n    keydown(event) {\n      delegate('keydown', event);\n    },\n    keyup(event) {\n      delegate('keyup', event);\n    },\n    touchstart(event) {\n      delegate('touchstart', event);\n    },\n    touchmove(event) {\n      delegate('touchmove', event);\n    },\n    touchend(event) {\n      delegate('touchend', event);\n    },\n    tap(event) {\n      delegate('tap', event);\n    }\n  };\n};\n\nexport default ModeHandler;\n","module.exports.RADIUS = 6378137;\nmodule.exports.FLATTENING = 1/298.257223563;\nmodule.exports.POLAR_RADIUS = 6356752.3142;\n","var wgs84 = require('wgs84');\n\nmodule.exports.geometry = geometry;\nmodule.exports.ring = ringArea;\n\nfunction geometry(_) {\n    var area = 0, i;\n    switch (_.type) {\n        case 'Polygon':\n            return polygonArea(_.coordinates);\n        case 'MultiPolygon':\n            for (i = 0; i < _.coordinates.length; i++) {\n                area += polygonArea(_.coordinates[i]);\n            }\n            return area;\n        case 'Point':\n        case 'MultiPoint':\n        case 'LineString':\n        case 'MultiLineString':\n            return 0;\n        case 'GeometryCollection':\n            for (i = 0; i < _.geometries.length; i++) {\n                area += geometry(_.geometries[i]);\n            }\n            return area;\n    }\n}\n\nfunction polygonArea(coords) {\n    var area = 0;\n    if (coords && coords.length > 0) {\n        area += Math.abs(ringArea(coords[0]));\n        for (var i = 1; i < coords.length; i++) {\n            area -= Math.abs(ringArea(coords[i]));\n        }\n    }\n    return area;\n}\n\n/**\n * Calculate the approximate area of the polygon were it projected onto\n *     the earth.  Note that this area will be positive if ring is oriented\n *     clockwise, otherwise it will be negative.\n *\n * Reference:\n * Robert. G. Chamberlain and William H. Duquette, \"Some Algorithms for\n *     Polygons on a Sphere\", JPL Publication 07-03, Jet Propulsion\n *     Laboratory, Pasadena, CA, June 2007 http://trs-new.jpl.nasa.gov/dspace/handle/2014/40409\n *\n * Returns:\n * {float} The approximate signed geodesic area of the polygon in square\n *     meters.\n */\n\nfunction ringArea(coords) {\n    var p1, p2, p3, lowerIndex, middleIndex, upperIndex, i,\n    area = 0,\n    coordsLength = coords.length;\n\n    if (coordsLength > 2) {\n        for (i = 0; i < coordsLength; i++) {\n            if (i === coordsLength - 2) {// i = N-2\n                lowerIndex = coordsLength - 2;\n                middleIndex = coordsLength -1;\n                upperIndex = 0;\n            } else if (i === coordsLength - 1) {// i = N-1\n                lowerIndex = coordsLength - 1;\n                middleIndex = 0;\n                upperIndex = 1;\n            } else { // i = 0 to N-3\n                lowerIndex = i;\n                middleIndex = i+1;\n                upperIndex = i+2;\n            }\n            p1 = coords[lowerIndex];\n            p2 = coords[middleIndex];\n            p3 = coords[upperIndex];\n            area += ( rad(p3[0]) - rad(p1[0]) ) * Math.sin( rad(p2[1]));\n        }\n\n        area = area * wgs84.RADIUS * wgs84.RADIUS / 2;\n    }\n\n    return area;\n}\n\nfunction rad(_) {\n    return _ * Math.PI / 180;\n}","export const classes = {\n  CONTROL_BASE: 'mapboxgl-ctrl',\n  CONTROL_PREFIX: 'mapboxgl-ctrl-',\n  CONTROL_BUTTON: 'mapbox-gl-draw_ctrl-draw-btn',\n  CONTROL_BUTTON_LINE: 'mapbox-gl-draw_line',\n  CONTROL_BUTTON_POLYGON: 'mapbox-gl-draw_polygon',\n  CONTROL_BUTTON_POINT: 'mapbox-gl-draw_point',\n  CONTROL_BUTTON_TRASH: 'mapbox-gl-draw_trash',\n  CONTROL_BUTTON_COMBINE_FEATURES: 'mapbox-gl-draw_combine',\n  CONTROL_BUTTON_UNCOMBINE_FEATURES: 'mapbox-gl-draw_uncombine',\n  CONTROL_GROUP: 'mapboxgl-ctrl-group',\n  ATTRIBUTION: 'mapboxgl-ctrl-attrib',\n  ACTIVE_BUTTON: 'active',\n  BOX_SELECT: 'mapbox-gl-draw_boxselect'\n};\n\nexport const sources = {\n  HOT: 'mapbox-gl-draw-hot',\n  COLD: 'mapbox-gl-draw-cold'\n};\n\nexport const cursors = {\n  ADD: 'add',\n  MOVE: 'move',\n  DRAG: 'drag',\n  POINTER: 'pointer',\n  NONE: 'none'\n};\n\nexport const types = {\n  POLYGON: 'polygon',\n  LINE: 'line_string',\n  POINT: 'point'\n};\n\nexport const geojsonTypes = {\n  FEATURE: 'Feature',\n  POLYGON: 'Polygon',\n  LINE_STRING: 'LineString',\n  POINT: 'Point',\n  FEATURE_COLLECTION: 'FeatureCollection',\n  MULTI_PREFIX: 'Multi',\n  MULTI_POINT: 'MultiPoint',\n  MULTI_LINE_STRING: 'MultiLineString',\n  MULTI_POLYGON: 'MultiPolygon'\n};\n\nexport const modes = {\n  DRAW_LINE_STRING: 'draw_line_string',\n  DRAW_POLYGON: 'draw_polygon',\n  DRAW_POINT: 'draw_point',\n  SIMPLE_SELECT: 'simple_select',\n  DIRECT_SELECT: 'direct_select',\n  STATIC: 'static'\n};\n\nexport const events = {\n  CREATE: 'draw.create',\n  DELETE: 'draw.delete',\n  UPDATE: 'draw.update',\n  SELECTION_CHANGE: 'draw.selectionchange',\n  MODE_CHANGE: 'draw.modechange',\n  ACTIONABLE: 'draw.actionable',\n  RENDER: 'draw.render',\n  COMBINE_FEATURES: 'draw.combine',\n  UNCOMBINE_FEATURES: 'draw.uncombine'\n};\n\nexport const updateActions = {\n  MOVE: 'move',\n  CHANGE_COORDINATES: 'change_coordinates'\n};\n\nexport const meta = {\n  FEATURE: 'feature',\n  MIDPOINT: 'midpoint',\n  VERTEX: 'vertex'\n};\n\nexport const activeStates = {\n  ACTIVE: 'true',\n  INACTIVE: 'false'\n};\n\nexport const interactions = [\n  'scrollZoom',\n  'boxZoom',\n  'dragRotate',\n  'dragPan',\n  'keyboard',\n  'doubleClickZoom',\n  'touchZoomRotate'\n];\n\nexport const LAT_MIN = -90;\nexport const LAT_RENDERED_MIN = -85;\nexport const LAT_MAX = 90;\nexport const LAT_RENDERED_MAX = 85;\nexport const LNG_MIN = -270;\nexport const LNG_MAX = 270;\n","import area from '@mapbox/geojson-area';\nimport * as Constants from '../constants';\n\nconst FEATURE_SORT_RANKS = {\n  Point: 0,\n  LineString: 1,\n  MultiLineString: 1,\n  Polygon: 2\n};\n\nfunction comparator(a, b) {\n  const score = FEATURE_SORT_RANKS[a.geometry.type] - FEATURE_SORT_RANKS[b.geometry.type];\n\n  if (score === 0 && a.geometry.type === Constants.geojsonTypes.POLYGON) {\n    return a.area - b.area;\n  }\n\n  return score;\n}\n\n// Sort in the order above, then sort polygons by area ascending.\nfunction sortFeatures(features) {\n  return features.map((feature) => {\n    if (feature.geometry.type === Constants.geojsonTypes.POLYGON) {\n      feature.area = area.geometry({\n        type: Constants.geojsonTypes.FEATURE,\n        property: {},\n        geometry: feature.geometry\n      });\n    }\n    return feature;\n  }).sort(comparator).map((feature) => {\n    delete feature.area;\n    return feature;\n  });\n}\n\nexport default sortFeatures;\n","/**\n * Returns a bounding box representing the event's location.\n *\n * @param {Event} mapEvent - Mapbox GL JS map event, with a point properties.\n * @return {Array<Array<number>>} Bounding box.\n */\nfunction mapEventToBoundingBox(mapEvent, buffer = 0) {\n  return [\n    [mapEvent.point.x - buffer, mapEvent.point.y - buffer],\n    [mapEvent.point.x + buffer, mapEvent.point.y + buffer]\n  ];\n}\n\nexport default mapEventToBoundingBox;\n","function StringSet(items) {\n  this._items = {};\n  this._nums = {};\n  this._length = items ? items.length : 0;\n  if (!items) return;\n  for (let i = 0, l = items.length; i < l; i++) {\n    this.add(items[i]);\n    if (items[i] === undefined) continue;\n    if (typeof items[i] === 'string') this._items[items[i]] = i;\n    else this._nums[items[i]] = i;\n\n  }\n}\n\nStringSet.prototype.add = function(x) {\n  if (this.has(x)) return this;\n  this._length++;\n  if (typeof x === 'string') this._items[x] = this._length;\n  else this._nums[x] = this._length;\n  return this;\n};\n\nStringSet.prototype.delete = function(x) {\n  if (this.has(x) === false) return this;\n  this._length--;\n  delete this._items[x];\n  delete this._nums[x];\n  return this;\n};\n\nStringSet.prototype.has = function(x) {\n  if (typeof x !== 'string' && typeof x !== 'number') return false;\n  return this._items[x] !== undefined || this._nums[x] !== undefined;\n};\n\nStringSet.prototype.values = function() {\n  const values = [];\n  Object.keys(this._items).forEach((k) => {\n    values.push({ k, v: this._items[k] });\n  });\n  Object.keys(this._nums).forEach((k) => {\n    values.push({ k: JSON.parse(k), v: this._nums[k] });\n  });\n\n  return values.sort((a, b) => a.v - b.v).map(a => a.k);\n};\n\nStringSet.prototype.clear = function() {\n  this._length = 0;\n  this._items = {};\n  this._nums = {};\n  return this;\n};\n\nexport default StringSet;\n","import sortFeatures from './sort_features';\nimport mapEventToBoundingBox from './map_event_to_bounding_box';\nimport * as Constants from '../constants';\nimport StringSet from './string_set';\n\nconst META_TYPES = [\n  Constants.meta.FEATURE,\n  Constants.meta.MIDPOINT,\n  Constants.meta.VERTEX\n];\n\n// Requires either event or bbox\nexport default {\n  click: featuresAtClick,\n  touch: featuresAtTouch\n};\n\nfunction featuresAtClick(event, bbox, ctx) {\n  return featuresAt(event, bbox, ctx, ctx.options.clickBuffer);\n}\n\nfunction featuresAtTouch(event, bbox, ctx) {\n  return featuresAt(event, bbox, ctx, ctx.options.touchBuffer);\n}\n\nfunction featuresAt(event, bbox, ctx, buffer) {\n  if (ctx.map === null) return [];\n\n  const box = (event) ? mapEventToBoundingBox(event, buffer) : bbox;\n\n  const queryParams = {};\n  if (ctx.options.styles) queryParams.layers = ctx.options.styles.map(s => s.id);\n\n  const features = ctx.map.queryRenderedFeatures(box, queryParams)\n    .filter(feature => META_TYPES.indexOf(feature.properties.meta) !== -1);\n\n  const featureIds = new StringSet();\n  const uniqueFeatures = [];\n  features.forEach((feature) => {\n    const featureId = feature.properties.id;\n    if (featureIds.has(featureId)) return;\n    featureIds.add(featureId);\n    uniqueFeatures.push(feature);\n  });\n\n  return sortFeatures(uniqueFeatures);\n}\n","import featuresAt from './features_at';\nimport * as Constants from '../constants';\n\nexport default function getFeatureAtAndSetCursors(event, ctx) {\n  const features = featuresAt.click(event, null, ctx);\n  const classes = { mouse: Constants.cursors.NONE };\n\n  if (features[0]) {\n    classes.mouse = (features[0].properties.active === Constants.activeStates.ACTIVE) ?\n      Constants.cursors.MOVE : Constants.cursors.POINTER;\n    classes.feature = features[0].properties.meta;\n  }\n\n  if (ctx.events.currentModeName().indexOf('draw') !== -1) {\n    classes.mouse = Constants.cursors.ADD;\n  }\n\n  ctx.ui.queueMapClasses(classes);\n  ctx.ui.updateMapClasses();\n\n  return features[0];\n}\n","export default function(a, b) {\n  const x = a.x - b.x;\n  const y = a.y - b.y;\n  return Math.sqrt((x * x) + (y * y));\n}\n","import euclideanDistance from './euclidean_distance';\n\nconst FINE_TOLERANCE = 4;\nconst GROSS_TOLERANCE = 12;\nconst INTERVAL = 500;\n\nexport default function isClick(start, end, options = {}) {\n  const fineTolerance = (options.fineTolerance != null) ? options.fineTolerance : FINE_TOLERANCE;\n  const grossTolerance = (options.grossTolerance != null) ? options.grossTolerance : GROSS_TOLERANCE;\n  const interval = (options.interval != null) ? options.interval : INTERVAL;\n\n  start.point = start.point || end.point;\n  start.time = start.time || end.time;\n  const moveDistance = euclideanDistance(start.point, end.point);\n\n  return moveDistance < fineTolerance ||\n    (moveDistance < grossTolerance && (end.time - start.time) < interval);\n}\n","import euclideanDistance from './euclidean_distance';\n\nexport const TAP_TOLERANCE = 25;\nexport const TAP_INTERVAL = 250;\n\nexport default function isTap(start, end, options = {}) {\n  const tolerance = (options.tolerance != null) ? options.tolerance : TAP_TOLERANCE;\n  const interval = (options.interval != null) ? options.interval : TAP_INTERVAL;\n\n  start.point = start.point || end.point;\n  start.time = start.time || end.time;\n  const moveDistance = euclideanDistance(start.point, end.point);\n\n  return moveDistance < tolerance && (end.time - start.time) < interval;\n}\n","var hat = module.exports = function (bits, base) {\n    if (!base) base = 16;\n    if (bits === undefined) bits = 128;\n    if (bits <= 0) return '0';\n    \n    var digits = Math.log(Math.pow(2, bits)) / Math.log(base);\n    for (var i = 2; digits === Infinity; i *= 2) {\n        digits = Math.log(Math.pow(2, bits / i)) / Math.log(base) * i;\n    }\n    \n    var rem = digits - Math.floor(digits);\n    \n    var res = '';\n    \n    for (var i = 0; i < Math.floor(digits); i++) {\n        var x = Math.floor(Math.random() * base).toString(base);\n        res = x + res;\n    }\n    \n    if (rem) {\n        var b = Math.pow(base, rem);\n        var x = Math.floor(Math.random() * b).toString(base);\n        res = x + res;\n    }\n    \n    var parsed = parseInt(res, base);\n    if (parsed !== Infinity && parsed >= Math.pow(2, bits)) {\n        return hat(bits, base)\n    }\n    else return res;\n};\n\nhat.rack = function (bits, base, expandBy) {\n    var fn = function (data) {\n        var iters = 0;\n        do {\n            if (iters ++ > 10) {\n                if (expandBy) bits += expandBy;\n                else throw new Error('too many ID collisions, use more bits')\n            }\n            \n            var id = hat(bits, base);\n        } while (Object.hasOwnProperty.call(hats, id));\n        \n        hats[id] = data;\n        return id;\n    };\n    var hats = fn.hats = {};\n    \n    fn.get = function (id) {\n        return fn.hats[id];\n    };\n    \n    fn.set = function (id, value) {\n        fn.hats[id] = value;\n        return fn;\n    };\n    \n    fn.bits = bits || 128;\n    fn.base = base || 16;\n    return fn;\n};\n","import hat from 'hat';\nimport * as Constants from '../constants';\n\nconst Feature = function(ctx, geojson) {\n  this.ctx = ctx;\n  this.properties = geojson.properties || {};\n  this.coordinates = geojson.geometry.coordinates;\n  this.id = geojson.id || hat();\n  this.type = geojson.geometry.type;\n};\n\nFeature.prototype.changed = function() {\n  this.ctx.store.featureChanged(this.id);\n};\n\nFeature.prototype.incomingCoords = function(coords) {\n  this.setCoordinates(coords);\n};\n\nFeature.prototype.setCoordinates = function(coords) {\n  this.coordinates = coords;\n  this.changed();\n};\n\nFeature.prototype.getCoordinates = function() {\n  return JSON.parse(JSON.stringify(this.coordinates));\n};\n\nFeature.prototype.setProperty = function(property, value) {\n  this.properties[property] = value;\n};\n\nFeature.prototype.toGeoJSON = function() {\n  return JSON.parse(JSON.stringify({\n    id: this.id,\n    type: Constants.geojsonTypes.FEATURE,\n    properties: this.properties,\n    geometry: {\n      coordinates: this.getCoordinates(),\n      type: this.type\n    }\n  }));\n};\n\nFeature.prototype.internal = function(mode) {\n  const properties = {\n    id: this.id,\n    meta: Constants.meta.FEATURE,\n    'meta:type': this.type,\n    active: Constants.activeStates.INACTIVE,\n    mode\n  };\n\n  if (this.ctx.options.userProperties) {\n    for (const name in this.properties) {\n      properties[`user_${name}`] = this.properties[name];\n    }\n  }\n\n  return {\n    type: Constants.geojsonTypes.FEATURE,\n    properties,\n    geometry: {\n      coordinates: this.getCoordinates(),\n      type: this.type\n    }\n  };\n};\n\nexport default Feature;\n","import Feature from './feature';\n\nconst Point = function(ctx, geojson) {\n  Feature.call(this, ctx, geojson);\n};\n\nPoint.prototype = Object.create(Feature.prototype);\n\nPoint.prototype.isValid = function() {\n  return typeof this.coordinates[0] === 'number' &&\n    typeof this.coordinates[1] === 'number';\n};\n\nPoint.prototype.updateCoordinate = function(pathOrLng, lngOrLat, lat) {\n  if (arguments.length === 3) {\n    this.coordinates = [lngOrLat, lat];\n  } else {\n    this.coordinates = [pathOrLng, lngOrLat];\n  }\n  this.changed();\n};\n\nPoint.prototype.getCoordinate = function() {\n  return this.getCoordinates();\n};\n\nexport default Point;\n","import Feature from './feature';\n\nconst LineString = function(ctx, geojson) {\n  Feature.call(this, ctx, geojson);\n};\n\nLineString.prototype = Object.create(Feature.prototype);\n\nLineString.prototype.isValid = function() {\n  return this.coordinates.length > 1;\n};\n\nLineString.prototype.addCoordinate = function(path, lng, lat) {\n  this.changed();\n  const id = parseInt(path, 10);\n  this.coordinates.splice(id, 0, [lng, lat]);\n};\n\nLineString.prototype.getCoordinate = function(path) {\n  const id = parseInt(path, 10);\n  return JSON.parse(JSON.stringify(this.coordinates[id]));\n};\n\nLineString.prototype.removeCoordinate = function(path) {\n  this.changed();\n  this.coordinates.splice(parseInt(path, 10), 1);\n};\n\nLineString.prototype.updateCoordinate = function(path, lng, lat) {\n  const id = parseInt(path, 10);\n  this.coordinates[id] = [lng, lat];\n  this.changed();\n};\n\nexport default LineString;\n","import Feature from './feature';\n\nconst Polygon = function(ctx, geojson) {\n  Feature.call(this, ctx, geojson);\n  this.coordinates = this.coordinates.map(ring => ring.slice(0, -1));\n};\n\nPolygon.prototype = Object.create(Feature.prototype);\n\nPolygon.prototype.isValid = function() {\n  if (this.coordinates.length === 0) return false;\n  return this.coordinates.every(ring => ring.length > 2);\n};\n\n// Expects valid geoJSON polygon geometry: first and last positions must be equivalent.\nPolygon.prototype.incomingCoords = function(coords) {\n  this.coordinates = coords.map(ring => ring.slice(0, -1));\n  this.changed();\n};\n\n// Does NOT expect valid geoJSON polygon geometry: first and last positions should not be equivalent.\nPolygon.prototype.setCoordinates = function(coords) {\n  this.coordinates = coords;\n  this.changed();\n};\n\nPolygon.prototype.addCoordinate = function(path, lng, lat) {\n  this.changed();\n  const ids = path.split('.').map(x => parseInt(x, 10));\n\n  const ring = this.coordinates[ids[0]];\n\n  ring.splice(ids[1], 0, [lng, lat]);\n};\n\nPolygon.prototype.removeCoordinate = function(path) {\n  this.changed();\n  const ids = path.split('.').map(x => parseInt(x, 10));\n  const ring = this.coordinates[ids[0]];\n  if (ring) {\n    ring.splice(ids[1], 1);\n    if (ring.length < 3) {\n      this.coordinates.splice(ids[0], 1);\n    }\n  }\n};\n\nPolygon.prototype.getCoordinate = function(path) {\n  const ids = path.split('.').map(x => parseInt(x, 10));\n  const ring = this.coordinates[ids[0]];\n  return JSON.parse(JSON.stringify(ring[ids[1]]));\n};\n\nPolygon.prototype.getCoordinates = function() {\n  return this.coordinates.map(coords => coords.concat([coords[0]]));\n};\n\nPolygon.prototype.updateCoordinate = function(path, lng, lat) {\n  this.changed();\n  const parts = path.split('.');\n  const ringId = parseInt(parts[0], 10);\n  const coordId = parseInt(parts[1], 10);\n\n  if (this.coordinates[ringId] === undefined) {\n    this.coordinates[ringId] = [];\n  }\n\n  this.coordinates[ringId][coordId] = [lng, lat];\n};\n\nexport default Polygon;\n","import Feature from './feature';\nimport * as Constants from '../constants';\nimport hat from 'hat';\n\nimport MultiPoint from './point';\nimport MultiLineString from './line_string';\nimport MultiPolygon from './polygon';\n\nconst models = {\n  MultiPoint,\n  MultiLineString,\n  MultiPolygon\n};\n\nconst takeAction = (features, action, path, lng, lat) => {\n  const parts = path.split('.');\n  const idx = parseInt(parts[0], 10);\n  const tail = (!parts[1]) ? null : parts.slice(1).join('.');\n  return features[idx][action](tail, lng, lat);\n};\n\nconst MultiFeature = function(ctx, geojson) {\n  Feature.call(this, ctx, geojson);\n\n  delete this.coordinates;\n  this.model = models[geojson.geometry.type];\n  if (this.model === undefined) throw new TypeError(`${geojson.geometry.type} is not a valid type`);\n  this.features = this._coordinatesToFeatures(geojson.geometry.coordinates);\n};\n\nMultiFeature.prototype = Object.create(Feature.prototype);\n\nMultiFeature.prototype._coordinatesToFeatures = function(coordinates) {\n  const Model = this.model.bind(this);\n  return coordinates.map(coords => new Model(this.ctx, {\n    id: hat(),\n    type: Constants.geojsonTypes.FEATURE,\n    properties: {},\n    geometry: {\n      coordinates: coords,\n      type: this.type.replace('Multi', '')\n    }\n  }));\n};\n\nMultiFeature.prototype.isValid = function() {\n  return this.features.every(f => f.isValid());\n};\n\nMultiFeature.prototype.setCoordinates = function(coords) {\n  this.features = this._coordinatesToFeatures(coords);\n  this.changed();\n};\n\nMultiFeature.prototype.getCoordinate = function(path) {\n  return takeAction(this.features, 'getCoordinate', path);\n};\n\nMultiFeature.prototype.getCoordinates = function() {\n  return JSON.parse(JSON.stringify(this.features.map((f) => {\n    if (f.type === Constants.geojsonTypes.POLYGON) return f.getCoordinates();\n    return f.coordinates;\n  })));\n};\n\nMultiFeature.prototype.updateCoordinate = function(path, lng, lat) {\n  takeAction(this.features, 'updateCoordinate', path, lng, lat);\n  this.changed();\n};\n\nMultiFeature.prototype.addCoordinate = function(path, lng, lat) {\n  takeAction(this.features, 'addCoordinate', path, lng, lat);\n  this.changed();\n};\n\nMultiFeature.prototype.removeCoordinate = function(path) {\n  takeAction(this.features, 'removeCoordinate', path);\n  this.changed();\n};\n\nMultiFeature.prototype.getFeatures = function() {\n  return this.features;\n};\n\nexport default MultiFeature;\n","import * as Constants from '../constants';\nimport featuresAt from '../lib/features_at';\nimport Point from '../feature_types/point';\nimport LineString from '../feature_types/line_string';\nimport Polygon from '../feature_types/polygon';\nimport MultiFeature from '../feature_types/multi_feature';\n\nexport default function ModeInterface(ctx) {\n  this.map = ctx.map;\n  this.drawConfig = JSON.parse(JSON.stringify(ctx.options || {}));\n  this._ctx = ctx;\n}\n\n/**\n * Sets Draw's interal selected state\n * @name this.setSelected\n * @param {DrawFeature[]} - whats selected as a [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/main/src/feature_types/feature.js)\n */\nModeInterface.prototype.setSelected = function(features) {\n  return this._ctx.store.setSelected(features);\n};\n\n/**\n * Sets Draw's internal selected coordinate state\n * @name this.setSelectedCoordinates\n * @param {Object[]} coords - a array of {coord_path: 'string', feature_id: 'string'}\n */\nModeInterface.prototype.setSelectedCoordinates = function(coords) {\n  this._ctx.store.setSelectedCoordinates(coords);\n  coords.reduce((m, c) => {\n    if (m[c.feature_id] === undefined) {\n      m[c.feature_id] = true;\n      this._ctx.store.get(c.feature_id).changed();\n    }\n    return m;\n  }, {});\n};\n\n/**\n * Get all selected features as a [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/main/src/feature_types/feature.js)\n * @name this.getSelected\n * @returns {DrawFeature[]}\n */\nModeInterface.prototype.getSelected = function() {\n  return this._ctx.store.getSelected();\n};\n\n/**\n * Get the ids of all currently selected features\n * @name this.getSelectedIds\n * @returns {String[]}\n */\nModeInterface.prototype.getSelectedIds = function() {\n  return this._ctx.store.getSelectedIds();\n};\n\n/**\n * Check if a feature is selected\n * @name this.isSelected\n * @param {String} id - a feature id\n * @returns {Boolean}\n */\nModeInterface.prototype.isSelected = function(id) {\n  return this._ctx.store.isSelected(id);\n};\n\n/**\n * Get a [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/main/src/feature_types/feature.js) by its id\n * @name this.getFeature\n * @param {String} id - a feature id\n * @returns {DrawFeature}\n */\nModeInterface.prototype.getFeature = function(id) {\n  return this._ctx.store.get(id);\n};\n\n/**\n * Add a feature to draw's internal selected state\n * @name this.select\n * @param {String} id\n */\nModeInterface.prototype.select = function(id) {\n  return this._ctx.store.select(id);\n};\n\n/**\n * Remove a feature from draw's internal selected state\n * @name this.delete\n * @param {String} id\n */\nModeInterface.prototype.deselect = function(id) {\n  return this._ctx.store.deselect(id);\n};\n\n/**\n * Delete a feature from draw\n * @name this.deleteFeature\n * @param {String} id - a feature id\n */\nModeInterface.prototype.deleteFeature = function(id, opts = {}) {\n  return this._ctx.store.delete(id, opts);\n};\n\n/**\n * Add a [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/main/src/feature_types/feature.js) to draw.\n * See `this.newFeature` for converting geojson into a DrawFeature\n * @name this.addFeature\n * @param {DrawFeature} feature - the feature to add\n */\nModeInterface.prototype.addFeature = function(feature) {\n  return this._ctx.store.add(feature);\n};\n\n/**\n * Clear all selected features\n */\nModeInterface.prototype.clearSelectedFeatures = function() {\n  return this._ctx.store.clearSelected();\n};\n\n/**\n * Clear all selected coordinates\n */\nModeInterface.prototype.clearSelectedCoordinates = function() {\n  return this._ctx.store.clearSelectedCoordinates();\n};\n\n/**\n * Indicate if the different action are currently possible with your mode\n * See [draw.actionalbe](https://github.com/mapbox/mapbox-gl-draw/blob/main/API.md#drawactionable) for a list of possible actions. All undefined actions are set to **false** by default\n * @name this.setActionableState\n * @param {Object} actions\n */\nModeInterface.prototype.setActionableState = function(actions = {}) {\n  const newSet = {\n    trash: actions.trash || false,\n    combineFeatures: actions.combineFeatures || false,\n    uncombineFeatures: actions.uncombineFeatures || false\n  };\n  return this._ctx.events.actionable(newSet);\n};\n\n/**\n * Trigger a mode change\n * @name this.changeMode\n * @param {String} mode - the mode to transition into\n * @param {Object} opts - the options object to pass to the new mode\n * @param {Object} eventOpts - used to control what kind of events are emitted.\n */\nModeInterface.prototype.changeMode = function(mode, opts = {}, eventOpts = {}) {\n  return this._ctx.events.changeMode(mode, opts, eventOpts);\n};\n\n/**\n * Update the state of draw map classes\n * @name this.updateUIClasses\n * @param {Object} opts\n */\nModeInterface.prototype.updateUIClasses = function(opts) {\n  return this._ctx.ui.queueMapClasses(opts);\n};\n\n/**\n * If a name is provided it makes that button active, else if makes all buttons inactive\n * @name this.activateUIButton\n * @param {String?} name - name of the button to make active, leave as undefined to set buttons to be inactive\n */\nModeInterface.prototype.activateUIButton = function(name) {\n  return this._ctx.ui.setActiveButton(name);\n};\n\n/**\n * Get the features at the location of an event object or in a bbox\n * @name this.featuresAt\n * @param {Event||NULL} event - a mapbox-gl event object\n * @param {BBOX||NULL} bbox - the area to get features from\n * @param {String} bufferType - is this `click` or `tap` event, defaults to click\n */\nModeInterface.prototype.featuresAt = function(event, bbox, bufferType = 'click') {\n  if (bufferType !== 'click' && bufferType !== 'touch') throw new Error('invalid buffer type');\n  return featuresAt[bufferType](event, bbox, this._ctx);\n};\n\n/**\n * Create a new [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/main/src/feature_types/feature.js) from geojson\n * @name this.newFeature\n * @param {GeoJSONFeature} geojson\n * @returns {DrawFeature}\n */\nModeInterface.prototype.newFeature = function(geojson) {\n  const type = geojson.geometry.type;\n  if (type === Constants.geojsonTypes.POINT) return new Point(this._ctx, geojson);\n  if (type === Constants.geojsonTypes.LINE_STRING) return new LineString(this._ctx, geojson);\n  if (type === Constants.geojsonTypes.POLYGON) return new Polygon(this._ctx, geojson);\n  return new MultiFeature(this._ctx, geojson);\n};\n\n/**\n * Check is an object is an instance of a [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/main/src/feature_types/feature.js)\n * @name this.isInstanceOf\n * @param {String} type - `Point`, `LineString`, `Polygon`, `MultiFeature`\n * @param {Object} feature - the object that needs to be checked\n * @returns {Boolean}\n */\nModeInterface.prototype.isInstanceOf = function(type, feature) {\n  if (type === Constants.geojsonTypes.POINT) return feature instanceof Point;\n  if (type === Constants.geojsonTypes.LINE_STRING) return feature instanceof LineString;\n  if (type === Constants.geojsonTypes.POLYGON) return feature instanceof Polygon;\n  if (type === 'MultiFeature') return feature instanceof MultiFeature;\n  throw new Error(`Unknown feature class: ${type}`);\n};\n\n/**\n * Force draw to rerender the feature of the provided id\n * @name this.doRender\n * @param {String} id - a feature id\n */\nModeInterface.prototype.doRender = function(id) {\n  return this._ctx.store.featureChanged(id);\n};\n\n","import ModeInterface from './mode_interface_accessors';\nexport default ModeInterface;\n\n/**\n * Triggered while a mode is being transitioned into.\n * @param opts {Object} - this is the object passed via `draw.changeMode('mode', opts)`;\n * @name MODE.onSetup\n * @returns {Object} - this object will be passed to all other life cycle functions\n */\nModeInterface.prototype.onSetup = function() {};\n\n/**\n * Triggered when a drag event is detected on the map\n * @name MODE.onDrag\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onDrag = function() {};\n\n/**\n * Triggered when the mouse is clicked\n * @name MODE.onClick\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onClick = function() {};\n\n/**\n * Triggered with the mouse is moved\n * @name MODE.onMouseMove\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onMouseMove = function() {};\n\n/**\n * Triggered when the mouse button is pressed down\n * @name MODE.onMouseDown\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onMouseDown = function() {};\n\n/**\n * Triggered when the mouse button is released\n * @name MODE.onMouseUp\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onMouseUp = function() {};\n\n/**\n * Triggered when the mouse leaves the map's container\n * @name MODE.onMouseOut\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onMouseOut = function() {};\n\n/**\n * Triggered when a key up event is detected\n * @name MODE.onKeyUp\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onKeyUp = function() {};\n\n/**\n * Triggered when a key down event is detected\n * @name MODE.onKeyDown\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onKeyDown = function() {};\n\n/**\n * Triggered when a touch event is started\n * @name MODE.onTouchStart\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onTouchStart = function() {};\n\n/**\n * Triggered when one drags thier finger on a mobile device\n * @name MODE.onTouchMove\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onTouchMove = function() {};\n\n/**\n * Triggered when one removes their finger from the map\n * @name MODE.onTouchEnd\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onTouchEnd = function() {};\n\n/**\n * Triggered when one quicly taps the map\n * @name MODE.onTap\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onTap = function() {};\n\n/**\n * Triggered when the mode is being exited, to be used for cleaning up artifacts such as invalid features\n * @name MODE.onStop\n * @param state {Object} - a mutible state object created by onSetup\n */\nModeInterface.prototype.onStop = function() {};\n\n/**\n * Triggered when [draw.trash()](https://github.com/mapbox/mapbox-gl-draw/blob/main/API.md#trash-draw) is called.\n * @name MODE.onTrash\n * @param state {Object} - a mutible state object created by onSetup\n */\nModeInterface.prototype.onTrash = function() {};\n\n/**\n * Triggered when [draw.combineFeatures()](https://github.com/mapbox/mapbox-gl-draw/blob/main/API.md#combinefeatures-draw) is called.\n * @name MODE.onCombineFeature\n * @param state {Object} - a mutible state object created by onSetup\n */\nModeInterface.prototype.onCombineFeature = function() {};\n\n/**\n * Triggered when [draw.uncombineFeatures()](https://github.com/mapbox/mapbox-gl-draw/blob/main/API.md#uncombinefeatures-draw) is called.\n * @name MODE.onUncombineFeature\n * @param state {Object} - a mutible state object created by onSetup\n */\nModeInterface.prototype.onUncombineFeature = function() {};\n\n/**\n * Triggered per feature on render to convert raw features into set of features for display on the map\n * See [styling draw](https://github.com/mapbox/mapbox-gl-draw/blob/main/API.md#styling-draw) for information about what geojson properties Draw uses as part of rendering.\n * @name MODE.toDisplayFeatures\n * @param state {Object} - a mutible state object created by onSetup\n * @param geojson {Object} - a geojson being evaulated. To render, pass to `display`.\n * @param display {Function} - all geojson objects passed to this be rendered onto the map\n */\nModeInterface.prototype.toDisplayFeatures = function() {\n  throw new Error('You must overwrite toDisplayFeatures');\n};\n\n","import ModeInterface from './mode_interface';\n\nconst eventMapper = {\n  drag: 'onDrag',\n  click: 'onClick',\n  mousemove: 'onMouseMove',\n  mousedown: 'onMouseDown',\n  mouseup: 'onMouseUp',\n  mouseout: 'onMouseOut',\n  keyup: 'onKeyUp',\n  keydown: 'onKeyDown',\n  touchstart: 'onTouchStart',\n  touchmove: 'onTouchMove',\n  touchend: 'onTouchEnd',\n  tap: 'onTap'\n};\n\nconst eventKeys = Object.keys(eventMapper);\n\nexport default function(modeObject) {\n  const modeObjectKeys = Object.keys(modeObject);\n\n  return function(ctx, startOpts = {}) {\n    let state = {};\n\n    const mode = modeObjectKeys.reduce((m, k) => {\n      m[k] = modeObject[k];\n      return m;\n    }, new ModeInterface(ctx));\n\n    function wrapper(eh) {\n      return e => mode[eh](state, e);\n    }\n\n    return {\n      start() {\n        state = mode.onSetup(startOpts); // this should set ui buttons\n\n        // Adds event handlers for all event options\n        // add sets the selector to false for all\n        // handlers that are not present in the mode\n        // to reduce on render calls for functions that\n        // have no logic\n        eventKeys.forEach((key) => {\n          const modeHandler = eventMapper[key];\n          let selector = () => false;\n          if (modeObject[modeHandler]) {\n            selector = () => true;\n          }\n          this.on(key, selector, wrapper(modeHandler));\n        });\n\n      },\n      stop() {\n        mode.onStop(state);\n      },\n      trash() {\n        mode.onTrash(state);\n      },\n      combineFeatures() {\n        mode.onCombineFeatures(state);\n      },\n      uncombineFeatures() {\n        mode.onUncombineFeatures(state);\n      },\n      render(geojson, push) {\n        mode.toDisplayFeatures(state, geojson, push);\n      }\n    };\n  };\n}\n","/**\n * Derive a dense array (no `undefined`s) from a single value or array.\n *\n * @param {any} x\n * @return {Array<any>}\n */\nfunction toDenseArray(x) {\n  return [].concat(x).filter(y => y !== undefined);\n}\n\nexport default toDenseArray;\n","import * as Constants from './constants';\n\nexport default function render() {\n  // eslint-disable-next-line no-invalid-this\n  const store = this;\n  const mapExists = store.ctx.map && store.ctx.map.getSource(Constants.sources.HOT) !== undefined;\n  if (!mapExists) return cleanup();\n\n  const mode = store.ctx.events.currentModeName();\n\n  store.ctx.ui.queueMapClasses({ mode });\n\n  let newHotIds = [];\n  let newColdIds = [];\n\n  if (store.isDirty) {\n    newColdIds = store.getAllIds();\n  } else {\n    newHotIds = store.getChangedIds().filter(id => store.get(id) !== undefined);\n    newColdIds = store.sources.hot.filter(geojson => geojson.properties.id && newHotIds.indexOf(geojson.properties.id) === -1 && store.get(geojson.properties.id) !== undefined).map(geojson => geojson.properties.id);\n  }\n\n  store.sources.hot = [];\n  const lastColdCount = store.sources.cold.length;\n  store.sources.cold = store.isDirty ? [] : store.sources.cold.filter((geojson) => {\n    const id = geojson.properties.id || geojson.properties.parent;\n    return newHotIds.indexOf(id) === -1;\n  });\n\n  const coldChanged = lastColdCount !== store.sources.cold.length || newColdIds.length > 0;\n  newHotIds.forEach(id => renderFeature(id, 'hot'));\n  newColdIds.forEach(id => renderFeature(id, 'cold'));\n\n  function renderFeature(id, source) {\n    const feature = store.get(id);\n    const featureInternal = feature.internal(mode);\n    store.ctx.events.currentModeRender(featureInternal, (geojson) => {\n      store.sources[source].push(geojson);\n    });\n  }\n\n  if (coldChanged) {\n    store.ctx.map.getSource(Constants.sources.COLD).setData({\n      type: Constants.geojsonTypes.FEATURE_COLLECTION,\n      features: store.sources.cold\n    });\n  }\n\n  store.ctx.map.getSource(Constants.sources.HOT).setData({\n    type: Constants.geojsonTypes.FEATURE_COLLECTION,\n    features: store.sources.hot\n  });\n\n  if (store._emitSelectionChange) {\n    store.ctx.map.fire(Constants.events.SELECTION_CHANGE, {\n      features: store.getSelected().map(feature => feature.toGeoJSON()),\n      points: store.getSelectedCoordinates().map(coordinate => ({\n        type: Constants.geojsonTypes.FEATURE,\n        properties: {},\n        geometry: {\n          type: Constants.geojsonTypes.POINT,\n          coordinates: coordinate.coordinates\n        }\n      }))\n    });\n    store._emitSelectionChange = false;\n  }\n\n  if (store._deletedFeaturesToEmit.length) {\n    const geojsonToEmit = store._deletedFeaturesToEmit.map(feature => feature.toGeoJSON());\n\n    store._deletedFeaturesToEmit = [];\n\n    store.ctx.map.fire(Constants.events.DELETE, {\n      features: geojsonToEmit\n    });\n  }\n\n  cleanup();\n  store.ctx.map.fire(Constants.events.RENDER, {});\n\n  function cleanup() {\n    store.isDirty = false;\n    store.clearChangedIds();\n  }\n}\n","import toDenseArray from './lib/to_dense_array';\nimport StringSet from './lib/string_set';\nimport render from './render';\nimport {interactions} from './constants';\n\nexport default function Store(ctx) {\n  this._features = {};\n  this._featureIds = new StringSet();\n  this._selectedFeatureIds = new StringSet();\n  this._selectedCoordinates = [];\n  this._changedFeatureIds = new StringSet();\n  this._deletedFeaturesToEmit = [];\n  this._emitSelectionChange = false;\n  this._mapInitialConfig = {};\n  this.ctx = ctx;\n  this.sources = {\n    hot: [],\n    cold: []\n  };\n\n  // Deduplicate requests to render and tie them to animation frames.\n  let renderRequest;\n  this.render = () => {\n    if (!renderRequest) {\n      renderRequest = requestAnimationFrame(() => {\n        renderRequest = null;\n        render.call(this);\n      });\n    }\n  };\n  this.isDirty = false;\n}\n\n\n/**\n * Delays all rendering until the returned function is invoked\n * @return {Function} renderBatch\n */\nStore.prototype.createRenderBatch = function() {\n  const holdRender = this.render;\n  let numRenders = 0;\n  this.render = function() {\n    numRenders++;\n  };\n\n  return () => {\n    this.render = holdRender;\n    if (numRenders > 0) {\n      this.render();\n    }\n  };\n};\n\n/**\n * Sets the store's state to dirty.\n * @return {Store} this\n */\nStore.prototype.setDirty = function() {\n  this.isDirty = true;\n  return this;\n};\n\n/**\n * Sets a feature's state to changed.\n * @param {string} featureId\n * @return {Store} this\n */\nStore.prototype.featureChanged = function(featureId) {\n  this._changedFeatureIds.add(featureId);\n  return this;\n};\n\n/**\n * Gets the ids of all features currently in changed state.\n * @return {Store} this\n */\nStore.prototype.getChangedIds = function() {\n  return this._changedFeatureIds.values();\n};\n\n/**\n * Sets all features to unchanged state.\n * @return {Store} this\n */\nStore.prototype.clearChangedIds = function() {\n  this._changedFeatureIds.clear();\n  return this;\n};\n\n/**\n * Gets the ids of all features in the store.\n * @return {Store} this\n */\nStore.prototype.getAllIds = function() {\n  return this._featureIds.values();\n};\n\n/**\n * Adds a feature to the store.\n * @param {Object} feature\n *\n * @return {Store} this\n */\nStore.prototype.add = function(feature) {\n  this.featureChanged(feature.id);\n  this._features[feature.id] = feature;\n  this._featureIds.add(feature.id);\n  return this;\n};\n\n/**\n * Deletes a feature or array of features from the store.\n * Cleans up after the deletion by deselecting the features.\n * If changes were made, sets the state to the dirty\n * and fires an event.\n * @param {string | Array<string>} featureIds\n * @param {Object} [options]\n * @param {Object} [options.silent] - If `true`, this invocation will not fire an event.\n * @return {Store} this\n */\nStore.prototype.delete = function(featureIds, options = {}) {\n  toDenseArray(featureIds).forEach((id) => {\n    if (!this._featureIds.has(id)) return;\n    this._featureIds.delete(id);\n    this._selectedFeatureIds.delete(id);\n    if (!options.silent) {\n      if (this._deletedFeaturesToEmit.indexOf(this._features[id]) === -1) {\n        this._deletedFeaturesToEmit.push(this._features[id]);\n      }\n    }\n    delete this._features[id];\n    this.isDirty = true;\n  });\n  refreshSelectedCoordinates(this, options);\n  return this;\n};\n\n/**\n * Returns a feature in the store matching the specified value.\n * @return {Object | undefined} feature\n */\nStore.prototype.get = function(id) {\n  return this._features[id];\n};\n\n/**\n * Returns all features in the store.\n * @return {Array<Object>}\n */\nStore.prototype.getAll = function() {\n  return Object.keys(this._features).map(id => this._features[id]);\n};\n\n/**\n * Adds features to the current selection.\n * @param {string | Array<string>} featureIds\n * @param {Object} [options]\n * @param {Object} [options.silent] - If `true`, this invocation will not fire an event.\n * @return {Store} this\n */\nStore.prototype.select = function(featureIds, options = {}) {\n  toDenseArray(featureIds).forEach((id) => {\n    if (this._selectedFeatureIds.has(id)) return;\n    this._selectedFeatureIds.add(id);\n    this._changedFeatureIds.add(id);\n    if (!options.silent) {\n      this._emitSelectionChange = true;\n    }\n  });\n  return this;\n};\n\n/**\n * Deletes features from the current selection.\n * @param {string | Array<string>} featureIds\n * @param {Object} [options]\n * @param {Object} [options.silent] - If `true`, this invocation will not fire an event.\n * @return {Store} this\n */\nStore.prototype.deselect = function(featureIds, options = {}) {\n  toDenseArray(featureIds).forEach((id) => {\n    if (!this._selectedFeatureIds.has(id)) return;\n    this._selectedFeatureIds.delete(id);\n    this._changedFeatureIds.add(id);\n    if (!options.silent) {\n      this._emitSelectionChange = true;\n    }\n  });\n  refreshSelectedCoordinates(this, options);\n  return this;\n};\n\n/**\n * Clears the current selection.\n * @param {Object} [options]\n * @param {Object} [options.silent] - If `true`, this invocation will not fire an event.\n * @return {Store} this\n */\nStore.prototype.clearSelected = function(options = {}) {\n  this.deselect(this._selectedFeatureIds.values(), { silent: options.silent });\n  return this;\n};\n\n/**\n * Sets the store's selection, clearing any prior values.\n * If no feature ids are passed, the store is just cleared.\n * @param {string | Array<string> | undefined} featureIds\n * @param {Object} [options]\n * @param {Object} [options.silent] - If `true`, this invocation will not fire an event.\n * @return {Store} this\n */\nStore.prototype.setSelected = function(featureIds, options = {}) {\n  featureIds = toDenseArray(featureIds);\n\n  // Deselect any features not in the new selection\n  this.deselect(this._selectedFeatureIds.values().filter(id => featureIds.indexOf(id) === -1), { silent: options.silent });\n\n  // Select any features in the new selection that were not already selected\n  this.select(featureIds.filter(id => !this._selectedFeatureIds.has(id)), { silent: options.silent });\n\n  return this;\n};\n\n/**\n * Sets the store's coordinates selection, clearing any prior values.\n * @param {Array<Array<string>>} coordinates\n * @return {Store} this\n */\nStore.prototype.setSelectedCoordinates = function(coordinates) {\n  this._selectedCoordinates = coordinates;\n  this._emitSelectionChange = true;\n  return this;\n};\n\n/**\n * Clears the current coordinates selection.\n * @param {Object} [options]\n * @return {Store} this\n */\nStore.prototype.clearSelectedCoordinates = function() {\n  this._selectedCoordinates = [];\n  this._emitSelectionChange = true;\n  return this;\n};\n\n/**\n * Returns the ids of features in the current selection.\n * @return {Array<string>} Selected feature ids.\n */\nStore.prototype.getSelectedIds = function() {\n  return this._selectedFeatureIds.values();\n};\n\n/**\n * Returns features in the current selection.\n * @return {Array<Object>} Selected features.\n */\nStore.prototype.getSelected = function() {\n  return this._selectedFeatureIds.values().map(id => this.get(id));\n};\n\n/**\n * Returns selected coordinates in the currently selected feature.\n * @return {Array<Object>} Selected coordinates.\n */\nStore.prototype.getSelectedCoordinates = function() {\n  const selected = this._selectedCoordinates.map((coordinate) => {\n    const feature = this.get(coordinate.feature_id);\n    return {\n      coordinates: feature.getCoordinate(coordinate.coord_path)\n    };\n  });\n  return selected;\n};\n\n/**\n * Indicates whether a feature is selected.\n * @param {string} featureId\n * @return {boolean} `true` if the feature is selected, `false` if not.\n */\nStore.prototype.isSelected = function(featureId) {\n  return this._selectedFeatureIds.has(featureId);\n};\n\n/**\n * Sets a property on the given feature\n * @param {string} featureId\n * @param {string} property property\n * @param {string} property value\n*/\nStore.prototype.setFeatureProperty = function(featureId, property, value) {\n  this.get(featureId).setProperty(property, value);\n  this.featureChanged(featureId);\n};\n\nfunction refreshSelectedCoordinates(store, options) {\n  const newSelectedCoordinates = store._selectedCoordinates.filter(point => store._selectedFeatureIds.has(point.feature_id));\n  if (store._selectedCoordinates.length !== newSelectedCoordinates.length && !options.silent) {\n    store._emitSelectionChange = true;\n  }\n  store._selectedCoordinates = newSelectedCoordinates;\n}\n\n/**\n * Stores the initial config for a map, so that we can set it again after we're done.\n*/\nStore.prototype.storeMapConfig = function() {\n  interactions.forEach((interaction) => {\n    const interactionSet = this.ctx.map[interaction];\n    if (interactionSet) {\n      this._mapInitialConfig[interaction] = this.ctx.map[interaction].isEnabled();\n    }\n  });\n};\n\n/**\n * Restores the initial config for a map, ensuring all is well.\n*/\nStore.prototype.restoreMapConfig = function() {\n  Object.keys(this._mapInitialConfig).forEach((key) => {\n    const value = this._mapInitialConfig[key];\n    if (value) {\n      this.ctx.map[key].enable();\n    } else {\n      this.ctx.map[key].disable();\n    }\n  });\n};\n\n/**\n * Returns the initial state of an interaction setting.\n * @param {string} interaction\n * @return {boolean} `true` if the interaction is enabled, `false` if not.\n * Defaults to `true`. (Todo: include defaults.)\n*/\nStore.prototype.getInitialConfigValue = function(interaction) {\n  if (this._mapInitialConfig[interaction] !== undefined) {\n    return this._mapInitialConfig[interaction];\n  } else {\n    // This needs to be set to whatever the default is for that interaction\n    // It seems to be true for all cases currently, so let's send back `true`.\n    return true;\n  }\n};\n","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n","import xtend from 'xtend';\nimport * as Constants from './constants';\n\nconst classTypes = ['mode', 'feature', 'mouse'];\n\nexport default function(ctx) {\n\n\n  const buttonElements = {};\n  let activeButton = null;\n\n  let currentMapClasses = {\n    mode: null, // e.g. mode-direct_select\n    feature: null, // e.g. feature-vertex\n    mouse: null // e.g. mouse-move\n  };\n\n  let nextMapClasses = {\n    mode: null,\n    feature: null,\n    mouse: null\n  };\n\n  function clearMapClasses() {\n    queueMapClasses({mode:null, feature:null, mouse:null});\n    updateMapClasses();\n  }\n\n  function queueMapClasses(options) {\n    nextMapClasses = xtend(nextMapClasses, options);\n  }\n\n  function updateMapClasses() {\n    if (!ctx.container) return;\n\n    const classesToRemove = [];\n    const classesToAdd = [];\n\n    classTypes.forEach((type) => {\n      if (nextMapClasses[type] === currentMapClasses[type]) return;\n\n      classesToRemove.push(`${type}-${currentMapClasses[type]}`);\n      if (nextMapClasses[type] !== null) {\n        classesToAdd.push(`${type}-${nextMapClasses[type]}`);\n      }\n    });\n\n    if (classesToRemove.length > 0) {\n      ctx.container.classList.remove(...classesToRemove);\n    }\n\n    if (classesToAdd.length > 0) {\n      ctx.container.classList.add(...classesToAdd);\n    }\n\n    currentMapClasses = xtend(currentMapClasses, nextMapClasses);\n  }\n\n  function createControlButton(id, options = {}) {\n    const button = document.createElement('button');\n    button.className = `${Constants.classes.CONTROL_BUTTON} ${options.className}`;\n    button.setAttribute('title', options.title);\n    options.container.appendChild(button);\n\n    button.addEventListener('click', (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      const clickedButton = e.target;\n      if (clickedButton === activeButton) {\n        deactivateButtons();\n        options.onDeactivate();\n        return;\n      }\n\n      setActiveButton(id);\n      options.onActivate();\n    }, true);\n\n    return button;\n  }\n\n  function deactivateButtons() {\n    if (!activeButton) return;\n    activeButton.classList.remove(Constants.classes.ACTIVE_BUTTON);\n    activeButton = null;\n  }\n\n  function setActiveButton(id) {\n    deactivateButtons();\n\n    const button = buttonElements[id];\n    if (!button) return;\n\n    if (button && id !== 'trash') {\n      button.classList.add(Constants.classes.ACTIVE_BUTTON);\n      activeButton = button;\n    }\n  }\n\n  function addButtons() {\n    const controls = ctx.options.controls;\n    const controlGroup = document.createElement('div');\n    controlGroup.className = `${Constants.classes.CONTROL_GROUP} ${Constants.classes.CONTROL_BASE}`;\n\n    if (!controls) return controlGroup;\n\n    if (controls[Constants.types.LINE]) {\n      buttonElements[Constants.types.LINE] = createControlButton(Constants.types.LINE, {\n        container: controlGroup,\n        className: Constants.classes.CONTROL_BUTTON_LINE,\n        title: `LineString tool ${ctx.options.keybindings ? '(l)' : ''}`,\n        onActivate: () => ctx.events.changeMode(Constants.modes.DRAW_LINE_STRING),\n        onDeactivate: () => ctx.events.trash()\n      });\n    }\n\n    if (controls[Constants.types.POLYGON]) {\n      buttonElements[Constants.types.POLYGON] = createControlButton(Constants.types.POLYGON, {\n        container: controlGroup,\n        className: Constants.classes.CONTROL_BUTTON_POLYGON,\n        title: `Polygon tool ${ctx.options.keybindings ? '(p)' : ''}`,\n        onActivate: () => ctx.events.changeMode(Constants.modes.DRAW_POLYGON),\n        onDeactivate: () => ctx.events.trash()\n      });\n    }\n\n    if (controls[Constants.types.POINT]) {\n      buttonElements[Constants.types.POINT] = createControlButton(Constants.types.POINT, {\n        container: controlGroup,\n        className: Constants.classes.CONTROL_BUTTON_POINT,\n        title: `Marker tool ${ctx.options.keybindings ? '(m)' : ''}`,\n        onActivate: () => ctx.events.changeMode(Constants.modes.DRAW_POINT),\n        onDeactivate: () => ctx.events.trash()\n      });\n    }\n\n    if (controls.trash) {\n      buttonElements.trash = createControlButton('trash', {\n        container: controlGroup,\n        className: Constants.classes.CONTROL_BUTTON_TRASH,\n        title: 'Delete',\n        onActivate: () => {\n          ctx.events.trash();\n        }\n      });\n    }\n\n    if (controls.combine_features) {\n      buttonElements.combine_features = createControlButton('combineFeatures', {\n        container: controlGroup,\n        className: Constants.classes.CONTROL_BUTTON_COMBINE_FEATURES,\n        title: 'Combine',\n        onActivate: () => {\n          ctx.events.combineFeatures();\n        }\n      });\n    }\n\n    if (controls.uncombine_features) {\n      buttonElements.uncombine_features = createControlButton('uncombineFeatures', {\n        container: controlGroup,\n        className: Constants.classes.CONTROL_BUTTON_UNCOMBINE_FEATURES,\n        title: 'Uncombine',\n        onActivate: () => {\n          ctx.events.uncombineFeatures();\n        }\n      });\n    }\n\n    return controlGroup;\n  }\n\n  function removeButtons() {\n    Object.keys(buttonElements).forEach((buttonId) => {\n      const button = buttonElements[buttonId];\n      if (button.parentNode) {\n        button.parentNode.removeChild(button);\n      }\n      delete buttonElements[buttonId];\n    });\n  }\n\n  return {\n    setActiveButton,\n    queueMapClasses,\n    updateMapClasses,\n    clearMapClasses,\n    addButtons,\n    removeButtons\n  };\n}\n","import events from './events';\nimport Store from './store';\nimport ui from './ui';\nimport * as Constants from './constants';\nimport xtend from 'xtend';\n\nexport default function(ctx) {\n\n  let controlContainer = null;\n  let mapLoadedInterval = null;\n\n  const setup = {\n    onRemove() {\n      // Stop connect attempt in the event that control is removed before map is loaded\n      ctx.map.off('load', setup.connect);\n      clearInterval(mapLoadedInterval);\n\n      setup.removeLayers();\n      ctx.store.restoreMapConfig();\n      ctx.ui.removeButtons();\n      ctx.events.removeEventListeners();\n      ctx.ui.clearMapClasses();\n      ctx.map = null;\n      ctx.container = null;\n      ctx.store = null;\n\n      if (controlContainer && controlContainer.parentNode) controlContainer.parentNode.removeChild(controlContainer);\n      controlContainer = null;\n\n      return this;\n    },\n    connect() {\n      ctx.map.off('load', setup.connect);\n      clearInterval(mapLoadedInterval);\n      setup.addLayers();\n      ctx.store.storeMapConfig();\n      ctx.events.addEventListeners();\n    },\n    onAdd(map) {\n      if (process.env.NODE_ENV !== 'test') {\n        // Monkey patch to resolve breaking change to `fire` introduced by\n        // mapbox-gl-js. See mapbox/mapbox-gl-draw/issues/766.\n        const _fire = map.fire;\n        map.fire = function(type, event) {\n          // eslint-disable-next-line\n          let args = arguments;\n\n          if (_fire.length === 1 && arguments.length !== 1) {\n            args = [xtend({}, { type }, event)];\n          }\n\n          return _fire.apply(map, args);\n        };\n      }\n\n      ctx.map = map;\n      ctx.events = events(ctx);\n      ctx.ui = ui(ctx);\n      ctx.container = map.getContainer();\n      ctx.store = new Store(ctx);\n\n\n      controlContainer = ctx.ui.addButtons();\n\n      if (ctx.options.boxSelect) {\n        map.boxZoom.disable();\n        // Need to toggle dragPan on and off or else first\n        // dragPan disable attempt in simple_select doesn't work\n        map.dragPan.disable();\n        map.dragPan.enable();\n      }\n\n      if (map.loaded()) {\n        setup.connect();\n      } else {\n        map.on('load', setup.connect);\n        mapLoadedInterval = setInterval(() => { if (map.loaded()) setup.connect(); }, 16);\n      }\n\n      ctx.events.start();\n      return controlContainer;\n    },\n    addLayers() {\n      // drawn features style\n      ctx.map.addSource(Constants.sources.COLD, {\n        data: {\n          type: Constants.geojsonTypes.FEATURE_COLLECTION,\n          features: []\n        },\n        type: 'geojson'\n      });\n\n      // hot features style\n      ctx.map.addSource(Constants.sources.HOT, {\n        data: {\n          type: Constants.geojsonTypes.FEATURE_COLLECTION,\n          features: []\n        },\n        type: 'geojson'\n      });\n\n      ctx.options.styles.forEach((style) => {\n        ctx.map.addLayer(style);\n      });\n\n      ctx.store.setDirty(true);\n      ctx.store.render();\n    },\n    // Check for layers and sources before attempting to remove\n    // If user adds draw control and removes it before the map is loaded, layers and sources will be missing\n    removeLayers() {\n      ctx.options.styles.forEach((style) => {\n        if (ctx.map.getLayer(style.id)) {\n          ctx.map.removeLayer(style.id);\n        }\n      });\n\n      if (ctx.map.getSource(Constants.sources.COLD)) {\n        ctx.map.removeSource(Constants.sources.COLD);\n      }\n\n      if (ctx.map.getSource(Constants.sources.HOT)) {\n        ctx.map.removeSource(Constants.sources.HOT);\n      }\n    }\n  };\n\n  ctx.setup = setup;\n\n  return setup;\n}\n","import setupModeHandler from './lib/mode_handler';\nimport getFeaturesAndSetCursor from './lib/get_features_and_set_cursor';\nimport featuresAt from './lib/features_at';\nimport isClick from './lib/is_click';\nimport isTap from './lib/is_tap';\nimport * as Constants from './constants';\nimport objectToMode from './modes/object_to_mode';\n\nexport default function(ctx) {\n\n  const modes = Object.keys(ctx.options.modes).reduce((m, k) => {\n    m[k] = objectToMode(ctx.options.modes[k]);\n    return m;\n  }, {});\n\n  let mouseDownInfo = {};\n  let touchStartInfo = {};\n  const events = {};\n  let currentModeName = null;\n  let currentMode = null;\n\n  events.drag = function(event, isDrag) {\n    if (isDrag({\n      point: event.point,\n      time: new Date().getTime()\n    })) {\n      ctx.ui.queueMapClasses({ mouse: Constants.cursors.DRAG });\n      currentMode.drag(event);\n    } else {\n      event.originalEvent.stopPropagation();\n    }\n  };\n\n  events.mousedrag = function(event) {\n    events.drag(event, endInfo => !isClick(mouseDownInfo, endInfo));\n  };\n\n  events.touchdrag = function(event) {\n    events.drag(event, endInfo => !isTap(touchStartInfo, endInfo));\n  };\n\n  events.mousemove = function(event) {\n    const button = event.originalEvent.buttons !== undefined ? event.originalEvent.buttons : event.originalEvent.which;\n    if (button === 1) {\n      return events.mousedrag(event);\n    }\n    const target = getFeaturesAndSetCursor(event, ctx);\n    event.featureTarget = target;\n    currentMode.mousemove(event);\n  };\n\n  events.mousedown = function(event) {\n    mouseDownInfo = {\n      time: new Date().getTime(),\n      point: event.point\n    };\n    const target = getFeaturesAndSetCursor(event, ctx);\n    event.featureTarget = target;\n    currentMode.mousedown(event);\n  };\n\n  events.mouseup = function(event) {\n    const target = getFeaturesAndSetCursor(event, ctx);\n    event.featureTarget = target;\n\n    if (isClick(mouseDownInfo, {\n      point: event.point,\n      time: new Date().getTime()\n    })) {\n      currentMode.click(event);\n    } else {\n      currentMode.mouseup(event);\n    }\n  };\n\n  events.mouseout = function(event) {\n    currentMode.mouseout(event);\n  };\n\n  events.touchstart = function(event) {\n    // Prevent emulated mouse events because we will fully handle the touch here.\n    // This does not stop the touch events from propogating to mapbox though.\n    event.originalEvent.preventDefault();\n    if (!ctx.options.touchEnabled) {\n      return;\n    }\n\n    touchStartInfo = {\n      time: new Date().getTime(),\n      point: event.point\n    };\n    const target = featuresAt.touch(event, null, ctx)[0];\n    event.featureTarget = target;\n    currentMode.touchstart(event);\n  };\n\n  events.touchmove = function(event) {\n    event.originalEvent.preventDefault();\n    if (!ctx.options.touchEnabled) {\n      return;\n    }\n\n    currentMode.touchmove(event);\n    return events.touchdrag(event);\n  };\n\n  events.touchend = function(event) {\n    event.originalEvent.preventDefault();\n    if (!ctx.options.touchEnabled) {\n      return;\n    }\n\n    const target = featuresAt.touch(event, null, ctx)[0];\n    event.featureTarget = target;\n    if (isTap(touchStartInfo, {\n      time: new Date().getTime(),\n      point: event.point\n    })) {\n      currentMode.tap(event);\n    } else {\n      currentMode.touchend(event);\n    }\n  };\n\n  // 8 - Backspace\n  // 46 - Delete\n  const isKeyModeValid = code => !(code === 8 || code === 46 || (code >= 48 && code <= 57));\n\n  events.keydown = function(event) {\n    if ((event.srcElement || event.target).classList[0] !== 'mapboxgl-canvas') return; // we only handle events on the map\n\n    if ((event.keyCode === 8 || event.keyCode === 46) && ctx.options.controls.trash) {\n      event.preventDefault();\n      currentMode.trash();\n    } else if (isKeyModeValid(event.keyCode)) {\n      currentMode.keydown(event);\n    } else if (event.keyCode === 49 && ctx.options.controls.point) {\n      changeMode(Constants.modes.DRAW_POINT);\n    } else if (event.keyCode === 50 && ctx.options.controls.line_string) {\n      changeMode(Constants.modes.DRAW_LINE_STRING);\n    } else if (event.keyCode === 51 && ctx.options.controls.polygon) {\n      changeMode(Constants.modes.DRAW_POLYGON);\n    }\n  };\n\n  events.keyup = function(event) {\n    if (isKeyModeValid(event.keyCode)) {\n      currentMode.keyup(event);\n    }\n  };\n\n  events.zoomend = function() {\n    ctx.store.changeZoom();\n  };\n\n  events.data = function(event) {\n    if (event.dataType === 'style') {\n      const { setup, map, options, store } = ctx;\n      const hasLayers = options.styles.some(style => map.getLayer(style.id));\n      if (!hasLayers) {\n        setup.addLayers();\n        store.setDirty();\n        store.render();\n      }\n    }\n  };\n\n  function changeMode(modename, nextModeOptions, eventOptions = {}) {\n    currentMode.stop();\n\n    const modebuilder = modes[modename];\n    if (modebuilder === undefined) {\n      throw new Error(`${modename} is not valid`);\n    }\n    currentModeName = modename;\n    const mode = modebuilder(ctx, nextModeOptions);\n    currentMode = setupModeHandler(mode, ctx);\n\n    if (!eventOptions.silent) {\n      ctx.map.fire(Constants.events.MODE_CHANGE, { mode: modename});\n    }\n\n    ctx.store.setDirty();\n    ctx.store.render();\n  }\n\n  const actionState = {\n    trash: false,\n    combineFeatures: false,\n    uncombineFeatures: false\n  };\n\n  function actionable(actions) {\n    let changed = false;\n    Object.keys(actions).forEach((action) => {\n      if (actionState[action] === undefined) throw new Error('Invalid action type');\n      if (actionState[action] !== actions[action]) changed = true;\n      actionState[action] = actions[action];\n    });\n    if (changed) ctx.map.fire(Constants.events.ACTIONABLE, { actions: actionState });\n  }\n\n  const api = {\n    start() {\n      currentModeName = ctx.options.defaultMode;\n      currentMode = setupModeHandler(modes[currentModeName](ctx), ctx);\n    },\n    changeMode,\n    actionable,\n    currentModeName() {\n      return currentModeName;\n    },\n    currentModeRender(geojson, push) {\n      return currentMode.render(geojson, push);\n    },\n    fire(name, event) {\n      if (events[name]) {\n        events[name](event);\n      }\n    },\n    addEventListeners() {\n      ctx.map.on('mousemove', events.mousemove);\n      ctx.map.on('mousedown', events.mousedown);\n      ctx.map.on('mouseup', events.mouseup);\n      ctx.map.on('data', events.data);\n\n      ctx.map.on('touchmove', events.touchmove);\n      ctx.map.on('touchstart', events.touchstart);\n      ctx.map.on('touchend', events.touchend);\n\n      ctx.container.addEventListener('mouseout', events.mouseout);\n\n      if (ctx.options.keybindings) {\n        ctx.container.addEventListener('keydown', events.keydown);\n        ctx.container.addEventListener('keyup', events.keyup);\n      }\n    },\n    removeEventListeners() {\n      ctx.map.off('mousemove', events.mousemove);\n      ctx.map.off('mousedown', events.mousedown);\n      ctx.map.off('mouseup', events.mouseup);\n      ctx.map.off('data', events.data);\n\n      ctx.map.off('touchmove', events.touchmove);\n      ctx.map.off('touchstart', events.touchstart);\n      ctx.map.off('touchend', events.touchend);\n\n      ctx.container.removeEventListener('mouseout', events.mouseout);\n\n      if (ctx.options.keybindings) {\n        ctx.container.removeEventListener('keydown', events.keydown);\n        ctx.container.removeEventListener('keyup', events.keyup);\n      }\n    },\n    trash(options) {\n      currentMode.trash(options);\n    },\n    combineFeatures() {\n      currentMode.combineFeatures();\n    },\n    uncombineFeatures() {\n      currentMode.uncombineFeatures();\n    },\n    getMode() {\n      return currentModeName;\n    }\n  };\n\n  return api;\n}\n","export default [\n  {\n    'id': 'gl-draw-polygon-fill-inactive',\n    'type': 'fill',\n    'filter': ['all',\n      ['==', 'active', 'false'],\n      ['==', '$type', 'Polygon'],\n      ['!=', 'mode', 'static']\n    ],\n    'paint': {\n      'fill-color': '#3bb2d0',\n      'fill-outline-color': '#3bb2d0',\n      'fill-opacity': 0.1\n    }\n  },\n  {\n    'id': 'gl-draw-polygon-fill-active',\n    'type': 'fill',\n    'filter': ['all', ['==', 'active', 'true'], ['==', '$type', 'Polygon']],\n    'paint': {\n      'fill-color': '#fbb03b',\n      'fill-outline-color': '#fbb03b',\n      'fill-opacity': 0.1\n    }\n  },\n  {\n    'id': 'gl-draw-polygon-midpoint',\n    'type': 'circle',\n    'filter': ['all',\n      ['==', '$type', 'Point'],\n      ['==', 'meta', 'midpoint']],\n    'paint': {\n      'circle-radius': 3,\n      'circle-color': '#fbb03b'\n    }\n  },\n  {\n    'id': 'gl-draw-polygon-stroke-inactive',\n    'type': 'line',\n    'filter': ['all',\n      ['==', 'active', 'false'],\n      ['==', '$type', 'Polygon'],\n      ['!=', 'mode', 'static']\n    ],\n    'layout': {\n      'line-cap': 'round',\n      'line-join': 'round'\n    },\n    'paint': {\n      'line-color': '#3bb2d0',\n      'line-width': 2\n    }\n  },\n  {\n    'id': 'gl-draw-polygon-stroke-active',\n    'type': 'line',\n    'filter': ['all', ['==', 'active', 'true'], ['==', '$type', 'Polygon']],\n    'layout': {\n      'line-cap': 'round',\n      'line-join': 'round'\n    },\n    'paint': {\n      'line-color': '#fbb03b',\n      'line-dasharray': [0.2, 2],\n      'line-width': 2\n    }\n  },\n  {\n    'id': 'gl-draw-line-inactive',\n    'type': 'line',\n    'filter': ['all',\n      ['==', 'active', 'false'],\n      ['==', '$type', 'LineString'],\n      ['!=', 'mode', 'static']\n    ],\n    'layout': {\n      'line-cap': 'round',\n      'line-join': 'round'\n    },\n    'paint': {\n      'line-color': '#3bb2d0',\n      'line-width': 2\n    }\n  },\n  {\n    'id': 'gl-draw-line-active',\n    'type': 'line',\n    'filter': ['all',\n      ['==', '$type', 'LineString'],\n      ['==', 'active', 'true']\n    ],\n    'layout': {\n      'line-cap': 'round',\n      'line-join': 'round'\n    },\n    'paint': {\n      'line-color': '#fbb03b',\n      'line-dasharray': [0.2, 2],\n      'line-width': 2\n    }\n  },\n  {\n    'id': 'gl-draw-polygon-and-line-vertex-stroke-inactive',\n    'type': 'circle',\n    'filter': ['all',\n      ['==', 'meta', 'vertex'],\n      ['==', '$type', 'Point'],\n      ['!=', 'mode', 'static']\n    ],\n    'paint': {\n      'circle-radius': 5,\n      'circle-color': '#fff'\n    }\n  },\n  {\n    'id': 'gl-draw-polygon-and-line-vertex-inactive',\n    'type': 'circle',\n    'filter': ['all',\n      ['==', 'meta', 'vertex'],\n      ['==', '$type', 'Point'],\n      ['!=', 'mode', 'static']\n    ],\n    'paint': {\n      'circle-radius': 3,\n      'circle-color': '#fbb03b'\n    }\n  },\n  {\n    'id': 'gl-draw-point-point-stroke-inactive',\n    'type': 'circle',\n    'filter': ['all',\n      ['==', 'active', 'false'],\n      ['==', '$type', 'Point'],\n      ['==', 'meta', 'feature'],\n      ['!=', 'mode', 'static']\n    ],\n    'paint': {\n      'circle-radius': 5,\n      'circle-opacity': 1,\n      'circle-color': '#fff'\n    }\n  },\n  {\n    'id': 'gl-draw-point-inactive',\n    'type': 'circle',\n    'filter': ['all',\n      ['==', 'active', 'false'],\n      ['==', '$type', 'Point'],\n      ['==', 'meta', 'feature'],\n      ['!=', 'mode', 'static']\n    ],\n    'paint': {\n      'circle-radius': 3,\n      'circle-color': '#3bb2d0'\n    }\n  },\n  {\n    'id': 'gl-draw-point-stroke-active',\n    'type': 'circle',\n    'filter': ['all',\n      ['==', '$type', 'Point'],\n      ['==', 'active', 'true'],\n      ['!=', 'meta', 'midpoint']\n    ],\n    'paint': {\n      'circle-radius': 7,\n      'circle-color': '#fff'\n    }\n  },\n  {\n    'id': 'gl-draw-point-active',\n    'type': 'circle',\n    'filter': ['all',\n      ['==', '$type', 'Point'],\n      ['!=', 'meta', 'midpoint'],\n      ['==', 'active', 'true']],\n    'paint': {\n      'circle-radius': 5,\n      'circle-color': '#fbb03b'\n    }\n  },\n  {\n    'id': 'gl-draw-polygon-fill-static',\n    'type': 'fill',\n    'filter': ['all', ['==', 'mode', 'static'], ['==', '$type', 'Polygon']],\n    'paint': {\n      'fill-color': '#404040',\n      'fill-outline-color': '#404040',\n      'fill-opacity': 0.1\n    }\n  },\n  {\n    'id': 'gl-draw-polygon-stroke-static',\n    'type': 'line',\n    'filter': ['all', ['==', 'mode', 'static'], ['==', '$type', 'Polygon']],\n    'layout': {\n      'line-cap': 'round',\n      'line-join': 'round'\n    },\n    'paint': {\n      'line-color': '#404040',\n      'line-width': 2\n    }\n  },\n  {\n    'id': 'gl-draw-line-static',\n    'type': 'line',\n    'filter': ['all', ['==', 'mode', 'static'], ['==', '$type', 'LineString']],\n    'layout': {\n      'line-cap': 'round',\n      'line-join': 'round'\n    },\n    'paint': {\n      'line-color': '#404040',\n      'line-width': 2\n    }\n  },\n  {\n    'id': 'gl-draw-point-static',\n    'type': 'circle',\n    'filter': ['all', ['==', 'mode', 'static'], ['==', '$type', 'Point']],\n    'paint': {\n      'circle-radius': 5,\n      'circle-color': '#404040'\n    }\n  }\n];\n","import * as Constants from '../constants';\n\nexport function isOfMetaType(type) {\n  return function(e) {\n    const featureTarget = e.featureTarget;\n    if (!featureTarget) return false;\n    if (!featureTarget.properties) return false;\n    return featureTarget.properties.meta === type;\n  };\n}\n\nexport function isShiftMousedown(e) {\n  if (!e.originalEvent) return false;\n  if (!e.originalEvent.shiftKey) return false;\n  return e.originalEvent.button === 0;\n}\n\nexport function isActiveFeature(e) {\n  if (!e.featureTarget) return false;\n  if (!e.featureTarget.properties) return false;\n  return e.featureTarget.properties.active === Constants.activeStates.ACTIVE &&\n    e.featureTarget.properties.meta === Constants.meta.FEATURE;\n}\n\nexport function isInactiveFeature(e) {\n  if (!e.featureTarget) return false;\n  if (!e.featureTarget.properties) return false;\n  return e.featureTarget.properties.active === Constants.activeStates.INACTIVE &&\n    e.featureTarget.properties.meta === Constants.meta.FEATURE;\n}\n\nexport function noTarget(e) {\n  return e.featureTarget === undefined;\n}\n\nexport function isFeature(e) {\n  if (!e.featureTarget) return false;\n  if (!e.featureTarget.properties) return false;\n  return e.featureTarget.properties.meta === Constants.meta.FEATURE;\n}\n\nexport function isVertex(e) {\n  const featureTarget = e.featureTarget;\n  if (!featureTarget) return false;\n  if (!featureTarget.properties) return false;\n  return featureTarget.properties.meta === Constants.meta.VERTEX;\n}\n\nexport function isShiftDown(e) {\n  if (!e.originalEvent) return false;\n  return e.originalEvent.shiftKey === true;\n}\n\nexport function isEscapeKey(e) {\n  return e.keyCode === 27;\n}\n\nexport function isEnterKey(e) {\n  return e.keyCode === 13;\n}\n\nexport function isTrue() {\n  return true;\n}\n","'use strict';\n\nmodule.exports = Point;\n\n/**\n * A standalone point geometry with useful accessor, comparison, and\n * modification methods.\n *\n * @class Point\n * @param {Number} x the x-coordinate. this could be longitude or screen\n * pixels, or any other sort of unit.\n * @param {Number} y the y-coordinate. this could be latitude or screen\n * pixels, or any other sort of unit.\n * @example\n * var point = new Point(-77, 38);\n */\nfunction Point(x, y) {\n    this.x = x;\n    this.y = y;\n}\n\nPoint.prototype = {\n\n    /**\n     * Clone this point, returning a new point that can be modified\n     * without affecting the old one.\n     * @return {Point} the clone\n     */\n    clone: function() { return new Point(this.x, this.y); },\n\n    /**\n     * Add this point's x & y coordinates to another point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    add:     function(p) { return this.clone()._add(p); },\n\n    /**\n     * Subtract this point's x & y coordinates to from point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    sub:     function(p) { return this.clone()._sub(p); },\n\n    /**\n     * Multiply this point's x & y coordinates by point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    multByPoint:    function(p) { return this.clone()._multByPoint(p); },\n\n    /**\n     * Divide this point's x & y coordinates by point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    divByPoint:     function(p) { return this.clone()._divByPoint(p); },\n\n    /**\n     * Multiply this point's x & y coordinates by a factor,\n     * yielding a new point.\n     * @param {Point} k factor\n     * @return {Point} output point\n     */\n    mult:    function(k) { return this.clone()._mult(k); },\n\n    /**\n     * Divide this point's x & y coordinates by a factor,\n     * yielding a new point.\n     * @param {Point} k factor\n     * @return {Point} output point\n     */\n    div:     function(k) { return this.clone()._div(k); },\n\n    /**\n     * Rotate this point around the 0, 0 origin by an angle a,\n     * given in radians\n     * @param {Number} a angle to rotate around, in radians\n     * @return {Point} output point\n     */\n    rotate:  function(a) { return this.clone()._rotate(a); },\n\n    /**\n     * Rotate this point around p point by an angle a,\n     * given in radians\n     * @param {Number} a angle to rotate around, in radians\n     * @param {Point} p Point to rotate around\n     * @return {Point} output point\n     */\n    rotateAround:  function(a,p) { return this.clone()._rotateAround(a,p); },\n\n    /**\n     * Multiply this point by a 4x1 transformation matrix\n     * @param {Array<Number>} m transformation matrix\n     * @return {Point} output point\n     */\n    matMult: function(m) { return this.clone()._matMult(m); },\n\n    /**\n     * Calculate this point but as a unit vector from 0, 0, meaning\n     * that the distance from the resulting point to the 0, 0\n     * coordinate will be equal to 1 and the angle from the resulting\n     * point to the 0, 0 coordinate will be the same as before.\n     * @return {Point} unit vector point\n     */\n    unit:    function() { return this.clone()._unit(); },\n\n    /**\n     * Compute a perpendicular point, where the new y coordinate\n     * is the old x coordinate and the new x coordinate is the old y\n     * coordinate multiplied by -1\n     * @return {Point} perpendicular point\n     */\n    perp:    function() { return this.clone()._perp(); },\n\n    /**\n     * Return a version of this point with the x & y coordinates\n     * rounded to integers.\n     * @return {Point} rounded point\n     */\n    round:   function() { return this.clone()._round(); },\n\n    /**\n     * Return the magitude of this point: this is the Euclidean\n     * distance from the 0, 0 coordinate to this point's x and y\n     * coordinates.\n     * @return {Number} magnitude\n     */\n    mag: function() {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    },\n\n    /**\n     * Judge whether this point is equal to another point, returning\n     * true or false.\n     * @param {Point} other the other point\n     * @return {boolean} whether the points are equal\n     */\n    equals: function(other) {\n        return this.x === other.x &&\n               this.y === other.y;\n    },\n\n    /**\n     * Calculate the distance from this point to another point\n     * @param {Point} p the other point\n     * @return {Number} distance\n     */\n    dist: function(p) {\n        return Math.sqrt(this.distSqr(p));\n    },\n\n    /**\n     * Calculate the distance from this point to another point,\n     * without the square root step. Useful if you're comparing\n     * relative distances.\n     * @param {Point} p the other point\n     * @return {Number} distance\n     */\n    distSqr: function(p) {\n        var dx = p.x - this.x,\n            dy = p.y - this.y;\n        return dx * dx + dy * dy;\n    },\n\n    /**\n     * Get the angle from the 0, 0 coordinate to this point, in radians\n     * coordinates.\n     * @return {Number} angle\n     */\n    angle: function() {\n        return Math.atan2(this.y, this.x);\n    },\n\n    /**\n     * Get the angle from this point to another point, in radians\n     * @param {Point} b the other point\n     * @return {Number} angle\n     */\n    angleTo: function(b) {\n        return Math.atan2(this.y - b.y, this.x - b.x);\n    },\n\n    /**\n     * Get the angle between this point and another point, in radians\n     * @param {Point} b the other point\n     * @return {Number} angle\n     */\n    angleWith: function(b) {\n        return this.angleWithSep(b.x, b.y);\n    },\n\n    /*\n     * Find the angle of the two vectors, solving the formula for\n     * the cross product a x b = |a||b|sin(θ) for θ.\n     * @param {Number} x the x-coordinate\n     * @param {Number} y the y-coordinate\n     * @return {Number} the angle in radians\n     */\n    angleWithSep: function(x, y) {\n        return Math.atan2(\n            this.x * y - this.y * x,\n            this.x * x + this.y * y);\n    },\n\n    _matMult: function(m) {\n        var x = m[0] * this.x + m[1] * this.y,\n            y = m[2] * this.x + m[3] * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _add: function(p) {\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    },\n\n    _sub: function(p) {\n        this.x -= p.x;\n        this.y -= p.y;\n        return this;\n    },\n\n    _mult: function(k) {\n        this.x *= k;\n        this.y *= k;\n        return this;\n    },\n\n    _div: function(k) {\n        this.x /= k;\n        this.y /= k;\n        return this;\n    },\n\n    _multByPoint: function(p) {\n        this.x *= p.x;\n        this.y *= p.y;\n        return this;\n    },\n\n    _divByPoint: function(p) {\n        this.x /= p.x;\n        this.y /= p.y;\n        return this;\n    },\n\n    _unit: function() {\n        this._div(this.mag());\n        return this;\n    },\n\n    _perp: function() {\n        var y = this.y;\n        this.y = this.x;\n        this.x = -y;\n        return this;\n    },\n\n    _rotate: function(angle) {\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle),\n            x = cos * this.x - sin * this.y,\n            y = sin * this.x + cos * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _rotateAround: function(angle, p) {\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle),\n            x = p.x + cos * (this.x - p.x) - sin * (this.y - p.y),\n            y = p.y + sin * (this.x - p.x) + cos * (this.y - p.y);\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _round: function() {\n        this.x = Math.round(this.x);\n        this.y = Math.round(this.y);\n        return this;\n    }\n};\n\n/**\n * Construct a point from an array if necessary, otherwise if the input\n * is already a Point, or an unknown type, return it unchanged\n * @param {Array<Number>|Point|*} a any kind of input value\n * @return {Point} constructed point, or passed-through value.\n * @example\n * // this\n * var point = Point.convert([0, 1]);\n * // is equivalent to\n * var point = new Point(0, 1);\n */\nPoint.convert = function (a) {\n    if (a instanceof Point) {\n        return a;\n    }\n    if (Array.isArray(a)) {\n        return new Point(a[0], a[1]);\n    }\n    return a;\n};\n","import Point from '@mapbox/point-geometry';\n\n/**\n * Returns a Point representing a mouse event's position\n * relative to a containing element.\n *\n * @param {MouseEvent} mouseEvent\n * @param {Node} container\n * @returns {Point}\n */\nfunction mouseEventPoint(mouseEvent, container) {\n  const rect = container.getBoundingClientRect();\n  return new Point(\n    mouseEvent.clientX - rect.left - (container.clientLeft || 0),\n    mouseEvent.clientY - rect.top - (container.clientTop || 0)\n  );\n}\n\nexport default mouseEventPoint;\n","import * as Constants from '../constants';\n\n/**\n * Returns GeoJSON for a Point representing the\n * vertex of another feature.\n *\n * @param {string} parentId\n * @param {Array<number>} coordinates\n * @param {string} path - Dot-separated numbers indicating exactly\n *   where the point exists within its parent feature's coordinates.\n * @param {boolean} selected\n * @return {GeoJSON} Point\n */\nexport default function(parentId, coordinates, path, selected) {\n  return {\n    type: Constants.geojsonTypes.FEATURE,\n    properties: {\n      meta: Constants.meta.VERTEX,\n      parent: parentId,\n      coord_path: path,\n      active: (selected) ? Constants.activeStates.ACTIVE : Constants.activeStates.INACTIVE\n    },\n    geometry: {\n      type: Constants.geojsonTypes.POINT,\n      coordinates\n    }\n  };\n}\n","import * as Constants from '../constants';\n\nexport default function(parent, startVertex, endVertex) {\n  const startCoord = startVertex.geometry.coordinates;\n  const endCoord = endVertex.geometry.coordinates;\n\n  // If a coordinate exceeds the projection, we can't calculate a midpoint,\n  // so run away\n  if (startCoord[1] > Constants.LAT_RENDERED_MAX ||\n    startCoord[1] < Constants.LAT_RENDERED_MIN ||\n    endCoord[1] > Constants.LAT_RENDERED_MAX ||\n    endCoord[1] < Constants.LAT_RENDERED_MIN) {\n    return null;\n  }\n\n  const mid = {\n    lng: (startCoord[0] + endCoord[0]) / 2,\n    lat: (startCoord[1] + endCoord[1]) / 2\n  };\n\n  return {\n    type: Constants.geojsonTypes.FEATURE,\n    properties: {\n      meta: Constants.meta.MIDPOINT,\n      parent,\n      lng: mid.lng,\n      lat: mid.lat,\n      coord_path: endVertex.properties.coord_path\n    },\n    geometry: {\n      type: Constants.geojsonTypes.POINT,\n      coordinates: [mid.lng, mid.lat]\n    }\n  };\n}\n","import createVertex from './create_vertex';\nimport createMidpoint from './create_midpoint';\nimport * as Constants from '../constants';\n\nfunction createSupplementaryPoints(geojson, options = {}, basePath = null) {\n  const { type, coordinates } = geojson.geometry;\n  const featureId = geojson.properties && geojson.properties.id;\n\n  let supplementaryPoints = [];\n\n  if (type === Constants.geojsonTypes.POINT) {\n    // For points, just create a vertex\n    supplementaryPoints.push(createVertex(featureId, coordinates, basePath, isSelectedPath(basePath)));\n  } else if (type === Constants.geojsonTypes.POLYGON) {\n    // Cycle through a Polygon's rings and\n    // process each line\n    coordinates.forEach((line, lineIndex) => {\n      processLine(line, (basePath !== null) ? `${basePath}.${lineIndex}` : String(lineIndex));\n    });\n  } else if (type === Constants.geojsonTypes.LINE_STRING) {\n    processLine(coordinates, basePath);\n  } else if (type.indexOf(Constants.geojsonTypes.MULTI_PREFIX) === 0) {\n    processMultiGeometry();\n  }\n\n  function processLine(line, lineBasePath) {\n    let firstPointString = '';\n    let lastVertex = null;\n    line.forEach((point, pointIndex) => {\n      const pointPath = (lineBasePath !== undefined && lineBasePath !== null) ? `${lineBasePath}.${pointIndex}` : String(pointIndex);\n      const vertex = createVertex(featureId, point, pointPath, isSelectedPath(pointPath));\n\n      // If we're creating midpoints, check if there was a\n      // vertex before this one. If so, add a midpoint\n      // between that vertex and this one.\n      if (options.midpoints && lastVertex) {\n        const midpoint = createMidpoint(featureId, lastVertex, vertex);\n        if (midpoint) {\n          supplementaryPoints.push(midpoint);\n        }\n      }\n      lastVertex = vertex;\n\n      // A Polygon line's last point is the same as the first point. If we're on the last\n      // point, we want to draw a midpoint before it but not another vertex on it\n      // (since we already a vertex there, from the first point).\n      const stringifiedPoint = JSON.stringify(point);\n      if (firstPointString !== stringifiedPoint) {\n        supplementaryPoints.push(vertex);\n      }\n      if (pointIndex === 0) {\n        firstPointString = stringifiedPoint;\n      }\n    });\n  }\n\n  function isSelectedPath(path) {\n    if (!options.selectedPaths) return false;\n    return options.selectedPaths.indexOf(path) !== -1;\n  }\n\n  // Split a multi-geometry into constituent\n  // geometries, and accumulate the supplementary points\n  // for each of those constituents\n  function processMultiGeometry() {\n    const subType = type.replace(Constants.geojsonTypes.MULTI_PREFIX, '');\n    coordinates.forEach((subCoordinates, index) => {\n      const subFeature = {\n        type: Constants.geojsonTypes.FEATURE,\n        properties: geojson.properties,\n        geometry: {\n          type: subType,\n          coordinates: subCoordinates\n        }\n      };\n      supplementaryPoints = supplementaryPoints.concat(createSupplementaryPoints(subFeature, options, index));\n    });\n  }\n\n  return supplementaryPoints;\n}\n\nexport default createSupplementaryPoints;\n","export default {\n  enable(ctx) {\n    setTimeout(() => {\n      // First check we've got a map and some context.\n      if (!ctx.map || !ctx.map.doubleClickZoom || !ctx._ctx || !ctx._ctx.store || !ctx._ctx.store.getInitialConfigValue) return;\n      // Now check initial state wasn't false (we leave it disabled if so)\n      if (!ctx._ctx.store.getInitialConfigValue('doubleClickZoom')) return;\n      ctx.map.doubleClickZoom.enable();\n    }, 0);\n  },\n  disable(ctx) {\n    setTimeout(() => {\n      if (!ctx.map || !ctx.map.doubleClickZoom) return;\n      // Always disable here, as it's necessary in some cases.\n      ctx.map.doubleClickZoom.disable();\n    }, 0);\n  }\n};\n","module.exports = normalize;\n\nvar types = {\n    Point: 'geometry',\n    MultiPoint: 'geometry',\n    LineString: 'geometry',\n    MultiLineString: 'geometry',\n    Polygon: 'geometry',\n    MultiPolygon: 'geometry',\n    GeometryCollection: 'geometry',\n    Feature: 'feature',\n    FeatureCollection: 'featurecollection'\n};\n\n/**\n * Normalize a GeoJSON feature into a FeatureCollection.\n *\n * @param {object} gj geojson data\n * @returns {object} normalized geojson data\n */\nfunction normalize(gj) {\n    if (!gj || !gj.type) return null;\n    var type = types[gj.type];\n    if (!type) return null;\n\n    if (type === 'geometry') {\n        return {\n            type: 'FeatureCollection',\n            features: [{\n                type: 'Feature',\n                properties: {},\n                geometry: gj\n            }]\n        };\n    } else if (type === 'feature') {\n        return {\n            type: 'FeatureCollection',\n            features: [gj]\n        };\n    } else if (type === 'featurecollection') {\n        return gj;\n    }\n}\n","export default function e(t){switch(t&&t.type||null){case\"FeatureCollection\":return t.features=t.features.reduce(function(t,r){return t.concat(e(r))},[]),t;case\"Feature\":return t.geometry?e(t.geometry).map(function(e){var r={type:\"Feature\",properties:JSON.parse(JSON.stringify(t.properties)),geometry:e};return void 0!==t.id&&(r.id=t.id),r}):[t];case\"MultiPoint\":return t.coordinates.map(function(e){return{type:\"Point\",coordinates:e}});case\"MultiPolygon\":return t.coordinates.map(function(e){return{type:\"Polygon\",coordinates:e}});case\"MultiLineString\":return t.coordinates.map(function(e){return{type:\"LineString\",coordinates:e}});case\"GeometryCollection\":return t.geometries.map(e).reduce(function(e,t){return e.concat(t)},[]);case\"Point\":case\"Polygon\":case\"LineString\":return[t]}}\n//# sourceMappingURL=index.es.js.map\n","var geojsonNormalize = require('@mapbox/geojson-normalize'),\n    geojsonFlatten = require('geojson-flatten'),\n    flatten = require('./flatten');\n\nif (!(geojsonFlatten instanceof Function)) geojsonFlatten = geojsonFlatten.default;\n\nmodule.exports = function(_) {\n    if (!_) return [];\n    var normalized = geojsonFlatten(geojsonNormalize(_)),\n        coordinates = [];\n    normalized.features.forEach(function(feature) {\n        if (!feature.geometry) return;\n        coordinates = coordinates.concat(flatten(feature.geometry.coordinates));\n    });\n    return coordinates;\n};\n","module.exports = function flatten(list) {\n    return _flatten(list);\n\n    function _flatten(list) {\n        if (Array.isArray(list) && list.length &&\n            typeof list[0] === 'number') {\n            return [list];\n        }\n        return list.reduce(function (acc, item) {\n            if (Array.isArray(item) && Array.isArray(item[0])) {\n                return acc.concat(_flatten(item));\n            } else {\n                acc.push(item);\n                return acc;\n            }\n        }, []);\n    }\n};\n","var traverse = module.exports = function (obj) {\n    return new Traverse(obj);\n};\n\nfunction Traverse (obj) {\n    this.value = obj;\n}\n\nTraverse.prototype.get = function (ps) {\n    var node = this.value;\n    for (var i = 0; i < ps.length; i ++) {\n        var key = ps[i];\n        if (!node || !hasOwnProperty.call(node, key)) {\n            node = undefined;\n            break;\n        }\n        node = node[key];\n    }\n    return node;\n};\n\nTraverse.prototype.has = function (ps) {\n    var node = this.value;\n    for (var i = 0; i < ps.length; i ++) {\n        var key = ps[i];\n        if (!node || !hasOwnProperty.call(node, key)) {\n            return false;\n        }\n        node = node[key];\n    }\n    return true;\n};\n\nTraverse.prototype.set = function (ps, value) {\n    var node = this.value;\n    for (var i = 0; i < ps.length - 1; i ++) {\n        var key = ps[i];\n        if (!hasOwnProperty.call(node, key)) node[key] = {};\n        node = node[key];\n    }\n    node[ps[i]] = value;\n    return value;\n};\n\nTraverse.prototype.map = function (cb) {\n    return walk(this.value, cb, true);\n};\n\nTraverse.prototype.forEach = function (cb) {\n    this.value = walk(this.value, cb, false);\n    return this.value;\n};\n\nTraverse.prototype.reduce = function (cb, init) {\n    var skip = arguments.length === 1;\n    var acc = skip ? this.value : init;\n    this.forEach(function (x) {\n        if (!this.isRoot || !skip) {\n            acc = cb.call(this, acc, x);\n        }\n    });\n    return acc;\n};\n\nTraverse.prototype.paths = function () {\n    var acc = [];\n    this.forEach(function (x) {\n        acc.push(this.path); \n    });\n    return acc;\n};\n\nTraverse.prototype.nodes = function () {\n    var acc = [];\n    this.forEach(function (x) {\n        acc.push(this.node);\n    });\n    return acc;\n};\n\nTraverse.prototype.clone = function () {\n    var parents = [], nodes = [];\n    \n    return (function clone (src) {\n        for (var i = 0; i < parents.length; i++) {\n            if (parents[i] === src) {\n                return nodes[i];\n            }\n        }\n        \n        if (typeof src === 'object' && src !== null) {\n            var dst = copy(src);\n            \n            parents.push(src);\n            nodes.push(dst);\n            \n            forEach(objectKeys(src), function (key) {\n                dst[key] = clone(src[key]);\n            });\n            \n            parents.pop();\n            nodes.pop();\n            return dst;\n        }\n        else {\n            return src;\n        }\n    })(this.value);\n};\n\nfunction walk (root, cb, immutable) {\n    var path = [];\n    var parents = [];\n    var alive = true;\n    \n    return (function walker (node_) {\n        var node = immutable ? copy(node_) : node_;\n        var modifiers = {};\n        \n        var keepGoing = true;\n        \n        var state = {\n            node : node,\n            node_ : node_,\n            path : [].concat(path),\n            parent : parents[parents.length - 1],\n            parents : parents,\n            key : path.slice(-1)[0],\n            isRoot : path.length === 0,\n            level : path.length,\n            circular : null,\n            update : function (x, stopHere) {\n                if (!state.isRoot) {\n                    state.parent.node[state.key] = x;\n                }\n                state.node = x;\n                if (stopHere) keepGoing = false;\n            },\n            'delete' : function (stopHere) {\n                delete state.parent.node[state.key];\n                if (stopHere) keepGoing = false;\n            },\n            remove : function (stopHere) {\n                if (isArray(state.parent.node)) {\n                    state.parent.node.splice(state.key, 1);\n                }\n                else {\n                    delete state.parent.node[state.key];\n                }\n                if (stopHere) keepGoing = false;\n            },\n            keys : null,\n            before : function (f) { modifiers.before = f },\n            after : function (f) { modifiers.after = f },\n            pre : function (f) { modifiers.pre = f },\n            post : function (f) { modifiers.post = f },\n            stop : function () { alive = false },\n            block : function () { keepGoing = false }\n        };\n        \n        if (!alive) return state;\n        \n        function updateState() {\n            if (typeof state.node === 'object' && state.node !== null) {\n                if (!state.keys || state.node_ !== state.node) {\n                    state.keys = objectKeys(state.node)\n                }\n                \n                state.isLeaf = state.keys.length == 0;\n                \n                for (var i = 0; i < parents.length; i++) {\n                    if (parents[i].node_ === node_) {\n                        state.circular = parents[i];\n                        break;\n                    }\n                }\n            }\n            else {\n                state.isLeaf = true;\n                state.keys = null;\n            }\n            \n            state.notLeaf = !state.isLeaf;\n            state.notRoot = !state.isRoot;\n        }\n        \n        updateState();\n        \n        // use return values to update if defined\n        var ret = cb.call(state, state.node);\n        if (ret !== undefined && state.update) state.update(ret);\n        \n        if (modifiers.before) modifiers.before.call(state, state.node);\n        \n        if (!keepGoing) return state;\n        \n        if (typeof state.node == 'object'\n        && state.node !== null && !state.circular) {\n            parents.push(state);\n            \n            updateState();\n            \n            forEach(state.keys, function (key, i) {\n                path.push(key);\n                \n                if (modifiers.pre) modifiers.pre.call(state, state.node[key], key);\n                \n                var child = walker(state.node[key]);\n                if (immutable && hasOwnProperty.call(state.node, key)) {\n                    state.node[key] = child.node;\n                }\n                \n                child.isLast = i == state.keys.length - 1;\n                child.isFirst = i == 0;\n                \n                if (modifiers.post) modifiers.post.call(state, child);\n                \n                path.pop();\n            });\n            parents.pop();\n        }\n        \n        if (modifiers.after) modifiers.after.call(state, state.node);\n        \n        return state;\n    })(root).node;\n}\n\nfunction copy (src) {\n    if (typeof src === 'object' && src !== null) {\n        var dst;\n        \n        if (isArray(src)) {\n            dst = [];\n        }\n        else if (isDate(src)) {\n            dst = new Date(src.getTime ? src.getTime() : src);\n        }\n        else if (isRegExp(src)) {\n            dst = new RegExp(src);\n        }\n        else if (isError(src)) {\n            dst = { message: src.message };\n        }\n        else if (isBoolean(src)) {\n            dst = new Boolean(src);\n        }\n        else if (isNumber(src)) {\n            dst = new Number(src);\n        }\n        else if (isString(src)) {\n            dst = new String(src);\n        }\n        else if (Object.create && Object.getPrototypeOf) {\n            dst = Object.create(Object.getPrototypeOf(src));\n        }\n        else if (src.constructor === Object) {\n            dst = {};\n        }\n        else {\n            var proto =\n                (src.constructor && src.constructor.prototype)\n                || src.__proto__\n                || {}\n            ;\n            var T = function () {};\n            T.prototype = proto;\n            dst = new T;\n        }\n        \n        forEach(objectKeys(src), function (key) {\n            dst[key] = src[key];\n        });\n        return dst;\n    }\n    else return src;\n}\n\nvar objectKeys = Object.keys || function keys (obj) {\n    var res = [];\n    for (var key in obj) res.push(key)\n    return res;\n};\n\nfunction toS (obj) { return Object.prototype.toString.call(obj) }\nfunction isDate (obj) { return toS(obj) === '[object Date]' }\nfunction isRegExp (obj) { return toS(obj) === '[object RegExp]' }\nfunction isError (obj) { return toS(obj) === '[object Error]' }\nfunction isBoolean (obj) { return toS(obj) === '[object Boolean]' }\nfunction isNumber (obj) { return toS(obj) === '[object Number]' }\nfunction isString (obj) { return toS(obj) === '[object String]' }\n\nvar isArray = Array.isArray || function isArray (xs) {\n    return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nvar forEach = function (xs, fn) {\n    if (xs.forEach) return xs.forEach(fn)\n    else for (var i = 0; i < xs.length; i++) {\n        fn(xs[i], i, xs);\n    }\n};\n\nforEach(objectKeys(Traverse.prototype), function (key) {\n    traverse[key] = function (obj) {\n        var args = [].slice.call(arguments, 1);\n        var t = new Traverse(obj);\n        return t[key].apply(t, args);\n    };\n});\n\nvar hasOwnProperty = Object.hasOwnProperty || function (obj, key) {\n    return key in obj;\n};\n","module.exports = Extent;\n\nfunction Extent(bbox) {\n    if (!(this instanceof Extent)) {\n        return new Extent(bbox);\n    }\n    this._bbox = bbox || [Infinity, Infinity, -Infinity, -Infinity];\n    this._valid = !!bbox;\n}\n\nExtent.prototype.include = function(ll) {\n    this._valid = true;\n    this._bbox[0] = Math.min(this._bbox[0], ll[0]);\n    this._bbox[1] = Math.min(this._bbox[1], ll[1]);\n    this._bbox[2] = Math.max(this._bbox[2], ll[0]);\n    this._bbox[3] = Math.max(this._bbox[3], ll[1]);\n    return this;\n};\n\nExtent.prototype.equals = function(_) {\n    var other;\n    if (_ instanceof Extent) { other = _.bbox(); } else { other = _; }\n    return this._bbox[0] == other[0] &&\n        this._bbox[1] == other[1] &&\n        this._bbox[2] == other[2] &&\n        this._bbox[3] == other[3];\n};\n\nExtent.prototype.center = function(_) {\n    if (!this._valid) return null;\n    return [\n        (this._bbox[0] + this._bbox[2]) / 2,\n        (this._bbox[1] + this._bbox[3]) / 2]\n};\n\nExtent.prototype.union = function(_) {\n    this._valid = true;\n    var other;\n    if (_ instanceof Extent) { other = _.bbox(); } else { other = _; }\n    this._bbox[0] = Math.min(this._bbox[0], other[0]);\n    this._bbox[1] = Math.min(this._bbox[1], other[1]);\n    this._bbox[2] = Math.max(this._bbox[2], other[2]);\n    this._bbox[3] = Math.max(this._bbox[3], other[3]);\n    return this;\n};\n\nExtent.prototype.bbox = function() {\n    if (!this._valid) return null;\n    return this._bbox;\n};\n\nExtent.prototype.contains = function(ll) {\n    if (!ll) return this._fastContains();\n    if (!this._valid) return null;\n    var lon = ll[0], lat = ll[1];\n    return this._bbox[0] <= lon &&\n        this._bbox[1] <= lat &&\n        this._bbox[2] >= lon &&\n        this._bbox[3] >= lat;\n};\n\nExtent.prototype.intersect = function(_) {\n    if (!this._valid) return null;\n\n    var other;\n    if (_ instanceof Extent) { other = _.bbox(); } else { other = _; }\n\n    return !(\n      this._bbox[0] > other[2] ||\n      this._bbox[2] < other[0] ||\n      this._bbox[3] < other[1] ||\n      this._bbox[1] > other[3]\n    );\n};\n\nExtent.prototype._fastContains = function() {\n    if (!this._valid) return new Function('return null;');\n    var body = 'return ' +\n        this._bbox[0] + '<= ll[0] &&' +\n        this._bbox[1] + '<= ll[1] &&' +\n        this._bbox[2] + '>= ll[0] &&' +\n        this._bbox[3] + '>= ll[1]';\n    return new Function('ll', body);\n};\n\nExtent.prototype.polygon = function() {\n    if (!this._valid) return null;\n    return {\n        type: 'Polygon',\n        coordinates: [\n            [\n                // W, S\n                [this._bbox[0], this._bbox[1]],\n                // E, S\n                [this._bbox[2], this._bbox[1]],\n                // E, N\n                [this._bbox[2], this._bbox[3]],\n                // W, N\n                [this._bbox[0], this._bbox[3]],\n                // W, S\n                [this._bbox[0], this._bbox[1]]\n            ]\n        ]\n    };\n};\n","var geojsonCoords = require('@mapbox/geojson-coords'),\n    traverse = require('traverse'),\n    extent = require('@mapbox/extent');\n\nvar geojsonTypesByDataAttributes = {\n    features: ['FeatureCollection'],\n    coordinates: ['Point', 'MultiPoint', 'LineString', 'MultiLineString', 'Polygon', 'MultiPolygon'],\n    geometry: ['Feature'],\n    geometries: ['GeometryCollection']\n}\n\nvar dataAttributes = Object.keys(geojsonTypesByDataAttributes);\n\nmodule.exports = function(_) {\n    return getExtent(_).bbox();\n};\n\nmodule.exports.polygon = function(_) {\n    return getExtent(_).polygon();\n};\n\nmodule.exports.bboxify = function(_) {\n    return traverse(_).map(function(value) {\n        if (!value) return ;\n\n        var isValid = dataAttributes.some(function(attribute){\n            if(value[attribute]) {\n                return geojsonTypesByDataAttributes[attribute].indexOf(value.type) !== -1;\n            }\n            return false;\n        });\n\n        if(isValid){\n            value.bbox = getExtent(value).bbox();\n            this.update(value);\n        }\n\n    });\n};\n\nfunction getExtent(_) {\n    var ext = extent(),\n        coords = geojsonCoords(_);\n    for (var i = 0; i < coords.length; i++) ext.include(coords[i]);\n    return ext;\n}\n","import extent from '@mapbox/geojson-extent';\nimport * as Constants from '../constants';\n\nconst {\n  LAT_MIN,\n  LAT_MAX,\n  LAT_RENDERED_MIN,\n  LAT_RENDERED_MAX,\n  LNG_MIN,\n  LNG_MAX\n} = Constants;\n\n// Ensure that we do not drag north-south far enough for\n// - any part of any feature to exceed the poles\n// - any feature to be completely lost in the space between the projection's\n//   edge and the poles, such that it couldn't be re-selected and moved back\nexport default function(geojsonFeatures, delta) {\n  // \"inner edge\" = a feature's latitude closest to the equator\n  let northInnerEdge = LAT_MIN;\n  let southInnerEdge = LAT_MAX;\n  // \"outer edge\" = a feature's latitude furthest from the equator\n  let northOuterEdge = LAT_MIN;\n  let southOuterEdge = LAT_MAX;\n\n  let westEdge = LNG_MAX;\n  let eastEdge = LNG_MIN;\n\n  geojsonFeatures.forEach((feature) => {\n    const bounds = extent(feature);\n    const featureSouthEdge = bounds[1];\n    const featureNorthEdge = bounds[3];\n    const featureWestEdge = bounds[0];\n    const featureEastEdge = bounds[2];\n    if (featureSouthEdge > northInnerEdge) northInnerEdge = featureSouthEdge;\n    if (featureNorthEdge < southInnerEdge) southInnerEdge = featureNorthEdge;\n    if (featureNorthEdge > northOuterEdge) northOuterEdge = featureNorthEdge;\n    if (featureSouthEdge < southOuterEdge) southOuterEdge = featureSouthEdge;\n    if (featureWestEdge < westEdge) westEdge = featureWestEdge;\n    if (featureEastEdge > eastEdge) eastEdge = featureEastEdge;\n  });\n\n\n  // These changes are not mutually exclusive: we might hit the inner\n  // edge but also have hit the outer edge and therefore need\n  // another readjustment\n  const constrainedDelta = delta;\n  if (northInnerEdge + constrainedDelta.lat > LAT_RENDERED_MAX) {\n    constrainedDelta.lat = LAT_RENDERED_MAX - northInnerEdge;\n  }\n  if (northOuterEdge + constrainedDelta.lat > LAT_MAX) {\n    constrainedDelta.lat = LAT_MAX - northOuterEdge;\n  }\n  if (southInnerEdge + constrainedDelta.lat < LAT_RENDERED_MIN) {\n    constrainedDelta.lat = LAT_RENDERED_MIN - southInnerEdge;\n  }\n  if (southOuterEdge + constrainedDelta.lat < LAT_MIN) {\n    constrainedDelta.lat = LAT_MIN - southOuterEdge;\n  }\n  if (westEdge + constrainedDelta.lng <= LNG_MIN) {\n    constrainedDelta.lng += Math.ceil(Math.abs(constrainedDelta.lng) / 360) * 360;\n  }\n  if (eastEdge + constrainedDelta.lng >= LNG_MAX) {\n    constrainedDelta.lng -= Math.ceil(Math.abs(constrainedDelta.lng) / 360) * 360;\n  }\n\n  return constrainedDelta;\n}\n","import constrainFeatureMovement from './constrain_feature_movement';\nimport * as Constants from '../constants';\n\nexport default function(features, delta) {\n  const constrainedDelta = constrainFeatureMovement(features.map(feature => feature.toGeoJSON()), delta);\n\n  features.forEach((feature) => {\n    const currentCoordinates = feature.getCoordinates();\n\n    const moveCoordinate = (coord) => {\n      const point = {\n        lng: coord[0] + constrainedDelta.lng,\n        lat: coord[1] + constrainedDelta.lat\n      };\n      return [point.lng, point.lat];\n    };\n    const moveRing = ring => ring.map(coord => moveCoordinate(coord));\n    const moveMultiPolygon = multi => multi.map(ring => moveRing(ring));\n\n    let nextCoordinates;\n    if (feature.type === Constants.geojsonTypes.POINT) {\n      nextCoordinates = moveCoordinate(currentCoordinates);\n    } else if (feature.type === Constants.geojsonTypes.LINE_STRING || feature.type === Constants.geojsonTypes.MULTI_POINT) {\n      nextCoordinates = currentCoordinates.map(moveCoordinate);\n    } else if (feature.type === Constants.geojsonTypes.POLYGON || feature.type === Constants.geojsonTypes.MULTI_LINE_STRING) {\n      nextCoordinates = currentCoordinates.map(moveRing);\n    } else if (feature.type === Constants.geojsonTypes.MULTI_POLYGON) {\n      nextCoordinates = currentCoordinates.map(moveMultiPolygon);\n    }\n\n    feature.incomingCoords(nextCoordinates);\n  });\n}\n","import * as CommonSelectors from '../lib/common_selectors';\nimport mouseEventPoint from '../lib/mouse_event_point';\nimport createSupplementaryPoints from '../lib/create_supplementary_points';\nimport StringSet from '../lib/string_set';\nimport doubleClickZoom from '../lib/double_click_zoom';\nimport moveFeatures from '../lib/move_features';\nimport * as Constants from '../constants';\n\nconst SimpleSelect = {};\n\nSimpleSelect.onSetup = function(opts) {\n  // turn the opts into state.\n  const state = {\n    dragMoveLocation: null,\n    boxSelectStartLocation: null,\n    boxSelectElement: undefined,\n    boxSelecting: false,\n    canBoxSelect: false,\n    dragMoving: false,\n    canDragMove: false,\n    initiallySelectedFeatureIds: opts.featureIds || []\n  };\n\n  this.setSelected(state.initiallySelectedFeatureIds.filter(id => this.getFeature(id) !== undefined));\n  this.fireActionable();\n\n  this.setActionableState({\n    combineFeatures: true,\n    uncombineFeatures: true,\n    trash: true\n  });\n\n  return state;\n};\n\nSimpleSelect.fireUpdate = function() {\n  this.map.fire(Constants.events.UPDATE, {\n    action: Constants.updateActions.MOVE,\n    features: this.getSelected().map(f => f.toGeoJSON())\n  });\n};\n\nSimpleSelect.fireActionable = function() {\n  const selectedFeatures = this.getSelected();\n\n  const multiFeatures = selectedFeatures.filter(\n    feature => this.isInstanceOf('MultiFeature', feature)\n  );\n\n  let combineFeatures = false;\n\n  if (selectedFeatures.length > 1) {\n    combineFeatures = true;\n    const featureType = selectedFeatures[0].type.replace('Multi', '');\n    selectedFeatures.forEach((feature) => {\n      if (feature.type.replace('Multi', '') !== featureType) {\n        combineFeatures = false;\n      }\n    });\n  }\n\n  const uncombineFeatures = multiFeatures.length > 0;\n  const trash = selectedFeatures.length > 0;\n\n  this.setActionableState({\n    combineFeatures, uncombineFeatures, trash\n  });\n};\n\nSimpleSelect.getUniqueIds = function(allFeatures) {\n  if (!allFeatures.length) return [];\n  const ids = allFeatures.map(s => s.properties.id)\n    .filter(id => id !== undefined)\n    .reduce((memo, id) => {\n      memo.add(id);\n      return memo;\n    }, new StringSet());\n\n  return ids.values();\n};\n\nSimpleSelect.stopExtendedInteractions = function(state) {\n  if (state.boxSelectElement) {\n    if (state.boxSelectElement.parentNode) state.boxSelectElement.parentNode.removeChild(state.boxSelectElement);\n    state.boxSelectElement = null;\n  }\n\n  this.map.dragPan.enable();\n\n  state.boxSelecting = false;\n  state.canBoxSelect = false;\n  state.dragMoving = false;\n  state.canDragMove = false;\n};\n\nSimpleSelect.onStop = function() {\n  doubleClickZoom.enable(this);\n};\n\nSimpleSelect.onMouseMove = function(state) {\n  // On mousemove that is not a drag, stop extended interactions.\n  // This is useful if you drag off the canvas, release the button,\n  // then move the mouse back over the canvas --- we don't allow the\n  // interaction to continue then, but we do let it continue if you held\n  // the mouse button that whole time\n  this.stopExtendedInteractions(state);\n\n  // Skip render\n  return true;\n};\n\nSimpleSelect.onMouseOut = function(state) {\n  // As soon as you mouse leaves the canvas, update the feature\n  if (state.dragMoving) return this.fireUpdate();\n\n  // Skip render\n  return true;\n};\n\nSimpleSelect.onTap = SimpleSelect.onClick = function(state, e) {\n  // Click (with or without shift) on no feature\n  if (CommonSelectors.noTarget(e)) return this.clickAnywhere(state, e); // also tap\n  if (CommonSelectors.isOfMetaType(Constants.meta.VERTEX)(e)) return this.clickOnVertex(state, e); //tap\n  if (CommonSelectors.isFeature(e)) return this.clickOnFeature(state, e);\n};\n\nSimpleSelect.clickAnywhere = function (state) {\n  // Clear the re-render selection\n  const wasSelected = this.getSelectedIds();\n  if (wasSelected.length) {\n    this.clearSelectedFeatures();\n    wasSelected.forEach(id => this.doRender(id));\n  }\n  doubleClickZoom.enable(this);\n  this.stopExtendedInteractions(state);\n};\n\nSimpleSelect.clickOnVertex = function(state, e) {\n  // Enter direct select mode\n  this.changeMode(Constants.modes.DIRECT_SELECT, {\n    featureId: e.featureTarget.properties.parent,\n    coordPath: e.featureTarget.properties.coord_path,\n    startPos: e.lngLat\n  });\n  this.updateUIClasses({ mouse: Constants.cursors.MOVE });\n};\n\nSimpleSelect.startOnActiveFeature = function(state, e) {\n  // Stop any already-underway extended interactions\n  this.stopExtendedInteractions(state);\n\n  // Disable map.dragPan immediately so it can't start\n  this.map.dragPan.disable();\n\n  // Re-render it and enable drag move\n  this.doRender(e.featureTarget.properties.id);\n\n  // Set up the state for drag moving\n  state.canDragMove = true;\n  state.dragMoveLocation = e.lngLat;\n};\n\nSimpleSelect.clickOnFeature = function(state, e) {\n  // Stop everything\n  doubleClickZoom.disable(this);\n  this.stopExtendedInteractions(state);\n\n  const isShiftClick = CommonSelectors.isShiftDown(e);\n  const selectedFeatureIds = this.getSelectedIds();\n  const featureId = e.featureTarget.properties.id;\n  const isFeatureSelected = this.isSelected(featureId);\n\n  // Click (without shift) on any selected feature but a point\n  if (!isShiftClick && isFeatureSelected && this.getFeature(featureId).type !== Constants.geojsonTypes.POINT) {\n    // Enter direct select mode\n    return this.changeMode(Constants.modes.DIRECT_SELECT, {\n      featureId\n    });\n  }\n\n  // Shift-click on a selected feature\n  if (isFeatureSelected && isShiftClick) {\n    // Deselect it\n    this.deselect(featureId);\n    this.updateUIClasses({ mouse: Constants.cursors.POINTER });\n    if (selectedFeatureIds.length === 1) {\n      doubleClickZoom.enable(this);\n    }\n  // Shift-click on an unselected feature\n  } else if (!isFeatureSelected && isShiftClick) {\n    // Add it to the selection\n    this.select(featureId);\n    this.updateUIClasses({ mouse: Constants.cursors.MOVE });\n  // Click (without shift) on an unselected feature\n  } else if (!isFeatureSelected && !isShiftClick) {\n    // Make it the only selected feature\n    selectedFeatureIds.forEach(id => this.doRender(id));\n    this.setSelected(featureId);\n    this.updateUIClasses({ mouse: Constants.cursors.MOVE });\n  }\n\n  // No matter what, re-render the clicked feature\n  this.doRender(featureId);\n};\n\nSimpleSelect.onMouseDown = function(state, e) {\n  if (CommonSelectors.isActiveFeature(e)) return this.startOnActiveFeature(state, e);\n  if (this.drawConfig.boxSelect && CommonSelectors.isShiftMousedown(e)) return this.startBoxSelect(state, e);\n};\n\nSimpleSelect.startBoxSelect = function(state, e) {\n  this.stopExtendedInteractions(state);\n  this.map.dragPan.disable();\n  // Enable box select\n  state.boxSelectStartLocation = mouseEventPoint(e.originalEvent, this.map.getContainer());\n  state.canBoxSelect = true;\n};\n\nSimpleSelect.onTouchStart = function(state, e) {\n  if (CommonSelectors.isActiveFeature(e)) return this.startOnActiveFeature(state, e);\n};\n\nSimpleSelect.onDrag = function(state, e) {\n  if (state.canDragMove) return this.dragMove(state, e);\n  if (this.drawConfig.boxSelect && state.canBoxSelect) return this.whileBoxSelect(state, e);\n};\n\nSimpleSelect.whileBoxSelect = function(state, e) {\n  state.boxSelecting = true;\n  this.updateUIClasses({ mouse: Constants.cursors.ADD });\n\n  // Create the box node if it doesn't exist\n  if (!state.boxSelectElement) {\n    state.boxSelectElement = document.createElement('div');\n    state.boxSelectElement.classList.add(Constants.classes.BOX_SELECT);\n    this.map.getContainer().appendChild(state.boxSelectElement);\n  }\n\n  // Adjust the box node's width and xy position\n  const current = mouseEventPoint(e.originalEvent, this.map.getContainer());\n  const minX = Math.min(state.boxSelectStartLocation.x, current.x);\n  const maxX = Math.max(state.boxSelectStartLocation.x, current.x);\n  const minY = Math.min(state.boxSelectStartLocation.y, current.y);\n  const maxY = Math.max(state.boxSelectStartLocation.y, current.y);\n  const translateValue = `translate(${minX}px, ${minY}px)`;\n  state.boxSelectElement.style.transform = translateValue;\n  state.boxSelectElement.style.WebkitTransform = translateValue;\n  state.boxSelectElement.style.width = `${maxX - minX}px`;\n  state.boxSelectElement.style.height = `${maxY - minY}px`;\n};\n\nSimpleSelect.dragMove = function(state, e) {\n  // Dragging when drag move is enabled\n  state.dragMoving = true;\n  e.originalEvent.stopPropagation();\n\n  const delta = {\n    lng: e.lngLat.lng - state.dragMoveLocation.lng,\n    lat: e.lngLat.lat - state.dragMoveLocation.lat\n  };\n\n  moveFeatures(this.getSelected(), delta);\n\n  state.dragMoveLocation = e.lngLat;\n};\n\nSimpleSelect.onTouchEnd = SimpleSelect.onMouseUp = function(state, e) {\n  // End any extended interactions\n  if (state.dragMoving) {\n    this.fireUpdate();\n  } else if (state.boxSelecting) {\n    const bbox = [\n      state.boxSelectStartLocation,\n      mouseEventPoint(e.originalEvent, this.map.getContainer())\n    ];\n    const featuresInBox = this.featuresAt(null, bbox, 'click');\n    const idsToSelect = this.getUniqueIds(featuresInBox)\n      .filter(id => !this.isSelected(id));\n\n    if (idsToSelect.length) {\n      this.select(idsToSelect);\n      idsToSelect.forEach(id => this.doRender(id));\n      this.updateUIClasses({ mouse: Constants.cursors.MOVE });\n    }\n  }\n  this.stopExtendedInteractions(state);\n};\n\nSimpleSelect.toDisplayFeatures = function(state, geojson, display) {\n  geojson.properties.active = (this.isSelected(geojson.properties.id)) ?\n    Constants.activeStates.ACTIVE : Constants.activeStates.INACTIVE;\n  display(geojson);\n  this.fireActionable();\n  if (geojson.properties.active !== Constants.activeStates.ACTIVE ||\n    geojson.geometry.type === Constants.geojsonTypes.POINT) return;\n  createSupplementaryPoints(geojson).forEach(display);\n};\n\nSimpleSelect.onTrash = function() {\n  this.deleteFeature(this.getSelectedIds());\n  this.fireActionable();\n};\n\nSimpleSelect.onCombineFeatures = function() {\n  const selectedFeatures = this.getSelected();\n\n  if (selectedFeatures.length === 0 || selectedFeatures.length < 2) return;\n\n  const coordinates = [], featuresCombined = [];\n  const featureType = selectedFeatures[0].type.replace('Multi', '');\n\n  for (let i = 0; i < selectedFeatures.length; i++) {\n    const feature = selectedFeatures[i];\n\n    if (feature.type.replace('Multi', '') !== featureType) {\n      return;\n    }\n    if (feature.type.includes('Multi')) {\n      feature.getCoordinates().forEach((subcoords) => {\n        coordinates.push(subcoords);\n      });\n    } else {\n      coordinates.push(feature.getCoordinates());\n    }\n\n    featuresCombined.push(feature.toGeoJSON());\n  }\n\n  if (featuresCombined.length > 1) {\n    const multiFeature = this.newFeature({\n      type: Constants.geojsonTypes.FEATURE,\n      properties: featuresCombined[0].properties,\n      geometry: {\n        type: `Multi${featureType}`,\n        coordinates\n      }\n    });\n\n    this.addFeature(multiFeature);\n    this.deleteFeature(this.getSelectedIds(), { silent: true });\n    this.setSelected([multiFeature.id]);\n\n    this.map.fire(Constants.events.COMBINE_FEATURES, {\n      createdFeatures: [multiFeature.toGeoJSON()],\n      deletedFeatures: featuresCombined\n    });\n  }\n  this.fireActionable();\n};\n\nSimpleSelect.onUncombineFeatures = function() {\n  const selectedFeatures = this.getSelected();\n  if (selectedFeatures.length === 0) return;\n\n  const createdFeatures = [];\n  const featuresUncombined = [];\n\n  for (let i = 0; i < selectedFeatures.length; i++) {\n    const feature = selectedFeatures[i];\n\n    if (this.isInstanceOf('MultiFeature', feature)) {\n      feature.getFeatures().forEach((subFeature) => {\n        this.addFeature(subFeature);\n        subFeature.properties = feature.properties;\n        createdFeatures.push(subFeature.toGeoJSON());\n        this.select([subFeature.id]);\n      });\n      this.deleteFeature(feature.id, { silent: true });\n      featuresUncombined.push(feature.toGeoJSON());\n    }\n  }\n\n  if (createdFeatures.length > 1) {\n    this.map.fire(Constants.events.UNCOMBINE_FEATURES, {\n      createdFeatures,\n      deletedFeatures: featuresUncombined\n    });\n  }\n  this.fireActionable();\n};\n\nexport default SimpleSelect;\n","import {noTarget, isOfMetaType, isActiveFeature, isInactiveFeature, isShiftDown} from '../lib/common_selectors';\nimport createSupplementaryPoints from '../lib/create_supplementary_points';\nimport constrainFeatureMovement from '../lib/constrain_feature_movement';\nimport doubleClickZoom from '../lib/double_click_zoom';\nimport * as Constants from '../constants';\nimport moveFeatures from '../lib/move_features';\n\nconst isVertex = isOfMetaType(Constants.meta.VERTEX);\nconst isMidpoint = isOfMetaType(Constants.meta.MIDPOINT);\n\nconst DirectSelect = {};\n\n// INTERNAL FUCNTIONS\n\nDirectSelect.fireUpdate = function() {\n  this.map.fire(Constants.events.UPDATE, {\n    action: Constants.updateActions.CHANGE_COORDINATES,\n    features: this.getSelected().map(f => f.toGeoJSON())\n  });\n};\n\nDirectSelect.fireActionable = function(state) {\n  this.setActionableState({\n    combineFeatures: false,\n    uncombineFeatures: false,\n    trash: state.selectedCoordPaths.length > 0\n  });\n};\n\nDirectSelect.startDragging = function(state, e) {\n  this.map.dragPan.disable();\n  state.canDragMove = true;\n  state.dragMoveLocation = e.lngLat;\n};\n\nDirectSelect.stopDragging = function(state) {\n  this.map.dragPan.enable();\n  state.dragMoving = false;\n  state.canDragMove = false;\n  state.dragMoveLocation = null;\n};\n\nDirectSelect.onVertex = function (state, e) {\n  this.startDragging(state, e);\n  const about = e.featureTarget.properties;\n  const selectedIndex = state.selectedCoordPaths.indexOf(about.coord_path);\n  if (!isShiftDown(e) && selectedIndex === -1) {\n    state.selectedCoordPaths = [about.coord_path];\n  } else if (isShiftDown(e) && selectedIndex === -1) {\n    state.selectedCoordPaths.push(about.coord_path);\n  }\n\n  const selectedCoordinates = this.pathsToCoordinates(state.featureId, state.selectedCoordPaths);\n  this.setSelectedCoordinates(selectedCoordinates);\n};\n\nDirectSelect.onMidpoint = function(state, e) {\n  this.startDragging(state, e);\n  const about = e.featureTarget.properties;\n  state.feature.addCoordinate(about.coord_path, about.lng, about.lat);\n  this.fireUpdate();\n  state.selectedCoordPaths = [about.coord_path];\n};\n\nDirectSelect.pathsToCoordinates = function(featureId, paths) {\n  return paths.map(coord_path => ({ feature_id: featureId, coord_path }));\n};\n\nDirectSelect.onFeature = function(state, e) {\n  if (state.selectedCoordPaths.length === 0) this.startDragging(state, e);\n  else this.stopDragging(state);\n};\n\nDirectSelect.dragFeature = function(state, e, delta) {\n  moveFeatures(this.getSelected(), delta);\n  state.dragMoveLocation = e.lngLat;\n};\n\nDirectSelect.dragVertex = function(state, e, delta) {\n  const selectedCoords = state.selectedCoordPaths.map(coord_path => state.feature.getCoordinate(coord_path));\n  const selectedCoordPoints = selectedCoords.map(coords => ({\n    type: Constants.geojsonTypes.FEATURE,\n    properties: {},\n    geometry: {\n      type: Constants.geojsonTypes.POINT,\n      coordinates: coords\n    }\n  }));\n\n  const constrainedDelta = constrainFeatureMovement(selectedCoordPoints, delta);\n  for (let i = 0; i < selectedCoords.length; i++) {\n    const coord = selectedCoords[i];\n    state.feature.updateCoordinate(state.selectedCoordPaths[i], coord[0] + constrainedDelta.lng, coord[1] + constrainedDelta.lat);\n  }\n};\n\nDirectSelect.clickNoTarget = function () {\n  this.changeMode(Constants.modes.SIMPLE_SELECT);\n};\n\nDirectSelect.clickInactive = function () {\n  this.changeMode(Constants.modes.SIMPLE_SELECT);\n};\n\nDirectSelect.clickActiveFeature = function (state) {\n  state.selectedCoordPaths = [];\n  this.clearSelectedCoordinates();\n  state.feature.changed();\n};\n\n// EXTERNAL FUNCTIONS\n\nDirectSelect.onSetup = function(opts) {\n  const featureId = opts.featureId;\n  const feature = this.getFeature(featureId);\n\n  if (!feature) {\n    throw new Error('You must provide a featureId to enter direct_select mode');\n  }\n\n  if (feature.type === Constants.geojsonTypes.POINT) {\n    throw new TypeError('direct_select mode doesn\\'t handle point features');\n  }\n\n  const state = {\n    featureId,\n    feature,\n    dragMoveLocation: opts.startPos || null,\n    dragMoving: false,\n    canDragMove: false,\n    selectedCoordPaths: opts.coordPath ? [opts.coordPath] : []\n  };\n\n  this.setSelectedCoordinates(this.pathsToCoordinates(featureId, state.selectedCoordPaths));\n  this.setSelected(featureId);\n  doubleClickZoom.disable(this);\n\n  this.setActionableState({\n    trash: true\n  });\n\n  return state;\n};\n\nDirectSelect.onStop = function() {\n  doubleClickZoom.enable(this);\n  this.clearSelectedCoordinates();\n};\n\nDirectSelect.toDisplayFeatures = function(state, geojson, push) {\n  if (state.featureId === geojson.properties.id) {\n    geojson.properties.active = Constants.activeStates.ACTIVE;\n    push(geojson);\n    createSupplementaryPoints(geojson, {\n      map: this.map,\n      midpoints: true,\n      selectedPaths: state.selectedCoordPaths\n    }).forEach(push);\n  } else {\n    geojson.properties.active = Constants.activeStates.INACTIVE;\n    push(geojson);\n  }\n  this.fireActionable(state);\n};\n\nDirectSelect.onTrash = function(state) {\n  // Uses number-aware sorting to make sure '9' < '10'. Comparison is reversed because we want them\n  // in reverse order so that we can remove by index safely.\n  state.selectedCoordPaths\n    .sort((a, b) => b.localeCompare(a, 'en', { numeric: true }))\n    .forEach(id => state.feature.removeCoordinate(id));\n  this.fireUpdate();\n  state.selectedCoordPaths = [];\n  this.clearSelectedCoordinates();\n  this.fireActionable(state);\n  if (state.feature.isValid() === false) {\n    this.deleteFeature([state.featureId]);\n    this.changeMode(Constants.modes.SIMPLE_SELECT, {});\n  }\n};\n\nDirectSelect.onMouseMove = function(state, e) {\n  // On mousemove that is not a drag, stop vertex movement.\n  const isFeature = isActiveFeature(e);\n  const onVertex = isVertex(e);\n  const noCoords = state.selectedCoordPaths.length === 0;\n  if (isFeature && noCoords) this.updateUIClasses({ mouse: Constants.cursors.MOVE });\n  else if (onVertex && !noCoords) this.updateUIClasses({ mouse: Constants.cursors.MOVE });\n  else this.updateUIClasses({ mouse: Constants.cursors.NONE });\n  this.stopDragging(state);\n\n  // Skip render\n  return true;\n};\n\nDirectSelect.onMouseOut = function(state) {\n  // As soon as you mouse leaves the canvas, update the feature\n  if (state.dragMoving) this.fireUpdate();\n\n  // Skip render\n  return true;\n};\n\nDirectSelect.onTouchStart = DirectSelect.onMouseDown = function(state, e) {\n  if (isVertex(e)) return this.onVertex(state, e);\n  if (isActiveFeature(e)) return this.onFeature(state, e);\n  if (isMidpoint(e)) return this.onMidpoint(state, e);\n};\n\nDirectSelect.onDrag = function(state, e) {\n  if (state.canDragMove !== true) return;\n  state.dragMoving = true;\n  e.originalEvent.stopPropagation();\n\n  const delta = {\n    lng: e.lngLat.lng - state.dragMoveLocation.lng,\n    lat: e.lngLat.lat - state.dragMoveLocation.lat\n  };\n  if (state.selectedCoordPaths.length > 0) this.dragVertex(state, e, delta);\n  else this.dragFeature(state, e, delta);\n\n  state.dragMoveLocation = e.lngLat;\n};\n\nDirectSelect.onClick = function(state, e) {\n  if (noTarget(e)) return this.clickNoTarget(state, e);\n  if (isActiveFeature(e)) return this.clickActiveFeature(state, e);\n  if (isInactiveFeature(e)) return this.clickInactive(state, e);\n  this.stopDragging(state);\n};\n\nDirectSelect.onTap = function(state, e) {\n  if (noTarget(e)) return this.clickNoTarget(state, e);\n  if (isActiveFeature(e)) return this.clickActiveFeature(state, e);\n  if (isInactiveFeature(e)) return this.clickInactive(state, e);\n};\n\nDirectSelect.onTouchEnd = DirectSelect.onMouseUp = function(state) {\n  if (state.dragMoving) {\n    this.fireUpdate();\n  }\n  this.stopDragging(state);\n};\n\nexport default DirectSelect;\n\n","import * as CommonSelectors from '../lib/common_selectors';\nimport * as Constants from '../constants';\n\nconst DrawPoint = {};\n\nDrawPoint.onSetup = function() {\n  const point = this.newFeature({\n    type: Constants.geojsonTypes.FEATURE,\n    properties: {},\n    geometry: {\n      type: Constants.geojsonTypes.POINT,\n      coordinates: []\n    }\n  });\n\n  this.addFeature(point);\n\n  this.clearSelectedFeatures();\n  this.updateUIClasses({ mouse: Constants.cursors.ADD });\n  this.activateUIButton(Constants.types.POINT);\n\n  this.setActionableState({\n    trash: true\n  });\n\n  return { point };\n};\n\nDrawPoint.stopDrawingAndRemove = function(state) {\n  this.deleteFeature([state.point.id], { silent: true });\n  this.changeMode(Constants.modes.SIMPLE_SELECT);\n};\n\nDrawPoint.onTap = DrawPoint.onClick = function(state, e) {\n  this.updateUIClasses({ mouse: Constants.cursors.MOVE });\n  state.point.updateCoordinate('', e.lngLat.lng, e.lngLat.lat);\n  this.map.fire(Constants.events.CREATE, {\n    features: [state.point.toGeoJSON()]\n  });\n  this.changeMode(Constants.modes.SIMPLE_SELECT, { featureIds: [state.point.id] });\n};\n\nDrawPoint.onStop = function(state) {\n  this.activateUIButton();\n  if (!state.point.getCoordinate().length) {\n    this.deleteFeature([state.point.id], { silent: true });\n  }\n};\n\nDrawPoint.toDisplayFeatures = function(state, geojson, display) {\n  // Never render the point we're drawing\n  const isActivePoint = geojson.properties.id === state.point.id;\n  geojson.properties.active = (isActivePoint) ? Constants.activeStates.ACTIVE : Constants.activeStates.INACTIVE;\n  if (!isActivePoint) return display(geojson);\n};\n\nDrawPoint.onTrash = DrawPoint.stopDrawingAndRemove;\n\nDrawPoint.onKeyUp = function(state, e) {\n  if (CommonSelectors.isEscapeKey(e) || CommonSelectors.isEnterKey(e)) {\n    return this.stopDrawingAndRemove(state, e);\n  }\n};\n\nexport default DrawPoint;\n","function isEventAtCoordinates(event, coordinates) {\n  if (!event.lngLat) return false;\n  return event.lngLat.lng === coordinates[0] && event.lngLat.lat === coordinates[1];\n}\n\nexport default isEventAtCoordinates;\n","import * as CommonSelectors from '../lib/common_selectors';\nimport doubleClickZoom from '../lib/double_click_zoom';\nimport * as Constants from '../constants';\nimport isEventAtCoordinates from '../lib/is_event_at_coordinates';\nimport createVertex from '../lib/create_vertex';\n\nconst DrawPolygon = {};\n\nDrawPolygon.onSetup = function() {\n  const polygon = this.newFeature({\n    type: Constants.geojsonTypes.FEATURE,\n    properties: {},\n    geometry: {\n      type: Constants.geojsonTypes.POLYGON,\n      coordinates: [[]]\n    }\n  });\n\n  this.addFeature(polygon);\n\n  this.clearSelectedFeatures();\n  doubleClickZoom.disable(this);\n  this.updateUIClasses({ mouse: Constants.cursors.ADD });\n  this.activateUIButton(Constants.types.POLYGON);\n  this.setActionableState({\n    trash: true\n  });\n\n  return {\n    polygon,\n    currentVertexPosition: 0\n  };\n};\n\nDrawPolygon.clickAnywhere = function(state, e) {\n  if (state.currentVertexPosition > 0 && isEventAtCoordinates(e, state.polygon.coordinates[0][state.currentVertexPosition - 1])) {\n    return this.changeMode(Constants.modes.SIMPLE_SELECT, { featureIds: [state.polygon.id] });\n  }\n  this.updateUIClasses({ mouse: Constants.cursors.ADD });\n  state.polygon.updateCoordinate(`0.${state.currentVertexPosition}`, e.lngLat.lng, e.lngLat.lat);\n  state.currentVertexPosition++;\n  state.polygon.updateCoordinate(`0.${state.currentVertexPosition}`, e.lngLat.lng, e.lngLat.lat);\n};\n\nDrawPolygon.clickOnVertex = function(state) {\n  return this.changeMode(Constants.modes.SIMPLE_SELECT, { featureIds: [state.polygon.id] });\n};\n\nDrawPolygon.onMouseMove = function(state, e) {\n  state.polygon.updateCoordinate(`0.${state.currentVertexPosition}`, e.lngLat.lng, e.lngLat.lat);\n  if (CommonSelectors.isVertex(e)) {\n    this.updateUIClasses({ mouse: Constants.cursors.POINTER });\n  }\n};\n\nDrawPolygon.onTap = DrawPolygon.onClick = function(state, e) {\n  if (CommonSelectors.isVertex(e)) return this.clickOnVertex(state, e);\n  return this.clickAnywhere(state, e);\n};\n\nDrawPolygon.onKeyUp = function(state, e) {\n  if (CommonSelectors.isEscapeKey(e)) {\n    this.deleteFeature([state.polygon.id], { silent: true });\n    this.changeMode(Constants.modes.SIMPLE_SELECT);\n  } else if (CommonSelectors.isEnterKey(e)) {\n    this.changeMode(Constants.modes.SIMPLE_SELECT, { featureIds: [state.polygon.id] });\n  }\n};\n\nDrawPolygon.onStop = function(state) {\n  this.updateUIClasses({ mouse: Constants.cursors.NONE });\n  doubleClickZoom.enable(this);\n  this.activateUIButton();\n\n  // check to see if we've deleted this feature\n  if (this.getFeature(state.polygon.id) === undefined) return;\n\n  //remove last added coordinate\n  state.polygon.removeCoordinate(`0.${state.currentVertexPosition}`);\n  if (state.polygon.isValid()) {\n    this.map.fire(Constants.events.CREATE, {\n      features: [state.polygon.toGeoJSON()]\n    });\n  } else {\n    this.deleteFeature([state.polygon.id], { silent: true });\n    this.changeMode(Constants.modes.SIMPLE_SELECT, {}, { silent: true });\n  }\n};\n\nDrawPolygon.toDisplayFeatures = function(state, geojson, display) {\n  const isActivePolygon = geojson.properties.id === state.polygon.id;\n  geojson.properties.active = (isActivePolygon) ? Constants.activeStates.ACTIVE : Constants.activeStates.INACTIVE;\n  if (!isActivePolygon) return display(geojson);\n\n  // Don't render a polygon until it has two positions\n  // (and a 3rd which is just the first repeated)\n  if (geojson.geometry.coordinates.length === 0) return;\n\n  const coordinateCount = geojson.geometry.coordinates[0].length;\n  // 2 coordinates after selecting a draw type\n  // 3 after creating the first point\n  if (coordinateCount < 3) {\n    return;\n  }\n  geojson.properties.meta = Constants.meta.FEATURE;\n  display(createVertex(state.polygon.id, geojson.geometry.coordinates[0][0], '0.0', false));\n  if (coordinateCount > 3) {\n    // Add a start position marker to the map, clicking on this will finish the feature\n    // This should only be shown when we're in a valid spot\n    const endPos = geojson.geometry.coordinates[0].length - 3;\n    display(createVertex(state.polygon.id, geojson.geometry.coordinates[0][endPos], `0.${endPos}`, false));\n  }\n  if (coordinateCount <= 4) {\n    // If we've only drawn two positions (plus the closer),\n    // make a LineString instead of a Polygon\n    const lineCoordinates = [\n      [geojson.geometry.coordinates[0][0][0], geojson.geometry.coordinates[0][0][1]], [geojson.geometry.coordinates[0][1][0], geojson.geometry.coordinates[0][1][1]]\n    ];\n    // create an initial vertex so that we can track the first point on mobile devices\n    display({\n      type: Constants.geojsonTypes.FEATURE,\n      properties: geojson.properties,\n      geometry: {\n        coordinates: lineCoordinates,\n        type: Constants.geojsonTypes.LINE_STRING\n      }\n    });\n    if (coordinateCount === 3) {\n      return;\n    }\n  }\n  // render the Polygon\n  return display(geojson);\n};\n\nDrawPolygon.onTrash = function(state) {\n  this.deleteFeature([state.polygon.id], { silent: true });\n  this.changeMode(Constants.modes.SIMPLE_SELECT);\n};\n\nexport default DrawPolygon;\n","import * as CommonSelectors from '../lib/common_selectors';\nimport isEventAtCoordinates from '../lib/is_event_at_coordinates';\nimport doubleClickZoom from '../lib/double_click_zoom';\nimport * as Constants from '../constants';\nimport createVertex from '../lib/create_vertex';\n\nconst DrawLineString = {};\n\nDrawLineString.onSetup = function(opts) {\n  opts = opts || {};\n  const featureId = opts.featureId;\n\n  let line, currentVertexPosition;\n  let direction = 'forward';\n  if (featureId) {\n    line = this.getFeature(featureId);\n    if (!line) {\n      throw new Error('Could not find a feature with the provided featureId');\n    }\n    let from = opts.from;\n    if (from && from.type === 'Feature' && from.geometry && from.geometry.type === 'Point') {\n      from = from.geometry;\n    }\n    if (from && from.type === 'Point' && from.coordinates && from.coordinates.length === 2) {\n      from = from.coordinates;\n    }\n    if (!from || !Array.isArray(from)) {\n      throw new Error('Please use the `from` property to indicate which point to continue the line from');\n    }\n    const lastCoord = line.coordinates.length - 1;\n    if (line.coordinates[lastCoord][0] === from[0] && line.coordinates[lastCoord][1] === from[1]) {\n      currentVertexPosition = lastCoord + 1;\n      // add one new coordinate to continue from\n      line.addCoordinate(currentVertexPosition, ...line.coordinates[lastCoord]);\n    } else if (line.coordinates[0][0] === from[0] && line.coordinates[0][1] === from[1]) {\n      direction = 'backwards';\n      currentVertexPosition = 0;\n      // add one new coordinate to continue from\n      line.addCoordinate(currentVertexPosition, ...line.coordinates[0]);\n    } else {\n      throw new Error('`from` should match the point at either the start or the end of the provided LineString');\n    }\n  } else {\n    line = this.newFeature({\n      type: Constants.geojsonTypes.FEATURE,\n      properties: {},\n      geometry: {\n        type: Constants.geojsonTypes.LINE_STRING,\n        coordinates: []\n      }\n    });\n    currentVertexPosition = 0;\n    this.addFeature(line);\n  }\n\n  this.clearSelectedFeatures();\n  doubleClickZoom.disable(this);\n  this.updateUIClasses({ mouse: Constants.cursors.ADD });\n  this.activateUIButton(Constants.types.LINE);\n  this.setActionableState({\n    trash: true\n  });\n\n  return {\n    line,\n    currentVertexPosition,\n    direction\n  };\n};\n\nDrawLineString.clickAnywhere = function(state, e) {\n  if (state.currentVertexPosition > 0 && isEventAtCoordinates(e, state.line.coordinates[state.currentVertexPosition - 1]) ||\n      state.direction === 'backwards' && isEventAtCoordinates(e, state.line.coordinates[state.currentVertexPosition + 1])) {\n    return this.changeMode(Constants.modes.SIMPLE_SELECT, { featureIds: [state.line.id] });\n  }\n  this.updateUIClasses({ mouse: Constants.cursors.ADD });\n  state.line.updateCoordinate(state.currentVertexPosition, e.lngLat.lng, e.lngLat.lat);\n  if (state.direction === 'forward') {\n    state.currentVertexPosition++;\n    state.line.updateCoordinate(state.currentVertexPosition, e.lngLat.lng, e.lngLat.lat);\n  } else {\n    state.line.addCoordinate(0, e.lngLat.lng, e.lngLat.lat);\n  }\n};\n\nDrawLineString.clickOnVertex = function(state) {\n  return this.changeMode(Constants.modes.SIMPLE_SELECT, { featureIds: [state.line.id] });\n};\n\nDrawLineString.onMouseMove = function(state, e) {\n  state.line.updateCoordinate(state.currentVertexPosition, e.lngLat.lng, e.lngLat.lat);\n  if (CommonSelectors.isVertex(e)) {\n    this.updateUIClasses({ mouse: Constants.cursors.POINTER });\n  }\n};\n\nDrawLineString.onTap = DrawLineString.onClick = function(state, e) {\n  if (CommonSelectors.isVertex(e)) return this.clickOnVertex(state, e);\n  this.clickAnywhere(state, e);\n};\n\nDrawLineString.onKeyUp = function(state, e) {\n  if (CommonSelectors.isEnterKey(e)) {\n    this.changeMode(Constants.modes.SIMPLE_SELECT, { featureIds: [state.line.id] });\n  } else if (CommonSelectors.isEscapeKey(e)) {\n    this.deleteFeature([state.line.id], { silent: true });\n    this.changeMode(Constants.modes.SIMPLE_SELECT);\n  }\n};\n\nDrawLineString.onStop = function(state) {\n  doubleClickZoom.enable(this);\n  this.activateUIButton();\n\n  // check to see if we've deleted this feature\n  if (this.getFeature(state.line.id) === undefined) return;\n\n  //remove last added coordinate\n  state.line.removeCoordinate(`${state.currentVertexPosition}`);\n  if (state.line.isValid()) {\n    this.map.fire(Constants.events.CREATE, {\n      features: [state.line.toGeoJSON()]\n    });\n  } else {\n    this.deleteFeature([state.line.id], { silent: true });\n    this.changeMode(Constants.modes.SIMPLE_SELECT, {}, { silent: true });\n  }\n};\n\nDrawLineString.onTrash = function(state) {\n  this.deleteFeature([state.line.id], { silent: true });\n  this.changeMode(Constants.modes.SIMPLE_SELECT);\n};\n\nDrawLineString.toDisplayFeatures = function(state, geojson, display) {\n  const isActiveLine = geojson.properties.id === state.line.id;\n  geojson.properties.active = (isActiveLine) ? Constants.activeStates.ACTIVE : Constants.activeStates.INACTIVE;\n  if (!isActiveLine) return display(geojson);\n  // Only render the line if it has at least one real coordinate\n  if (geojson.geometry.coordinates.length < 2) return;\n  geojson.properties.meta = Constants.meta.FEATURE;\n  display(createVertex(\n    state.line.id,\n    geojson.geometry.coordinates[state.direction === 'forward' ? geojson.geometry.coordinates.length - 2 : 1],\n    `${state.direction === 'forward' ? geojson.geometry.coordinates.length - 2 : 1}`,\n    false\n  ));\n\n  display(geojson);\n};\n\nexport default DrawLineString;\n","\nimport simple_select from './simple_select';\nimport direct_select from './direct_select';\nimport draw_point from './draw_point';\nimport draw_polygon from './draw_polygon';\nimport draw_line_string from './draw_line_string';\n\nexport default {\n  simple_select,\n  direct_select,\n  draw_point,\n  draw_polygon,\n  draw_line_string,\n};\n","import xtend from 'xtend';\nimport * as Constants from './constants';\n\nimport styles from './lib/theme';\nimport modes from './modes/index';\n\nconst defaultOptions = {\n  defaultMode: Constants.modes.SIMPLE_SELECT,\n  keybindings: true,\n  touchEnabled: true,\n  clickBuffer: 2,\n  touchBuffer: 25,\n  boxSelect: true,\n  displayControlsDefault: true,\n  styles,\n  modes,\n  controls: {},\n  userProperties: false\n};\n\nconst showControls = {\n  point: true,\n  line_string: true,\n  polygon: true,\n  trash: true,\n  combine_features: true,\n  uncombine_features: true\n};\n\nconst hideControls = {\n  point: false,\n  line_string: false,\n  polygon: false,\n  trash: false,\n  combine_features: false,\n  uncombine_features: false\n};\n\nfunction addSources(styles, sourceBucket) {\n  return styles.map((style) => {\n    if (style.source) return style;\n    return xtend(style, {\n      id: `${style.id}.${sourceBucket}`,\n      source: (sourceBucket === 'hot') ? Constants.sources.HOT : Constants.sources.COLD\n    });\n  });\n}\n\nexport default function(options = {}) {\n  let withDefaults = xtend(options);\n\n  if (!options.controls) {\n    withDefaults.controls = {};\n  }\n\n  if (options.displayControlsDefault === false) {\n    withDefaults.controls = xtend(hideControls, options.controls);\n  } else {\n    withDefaults.controls = xtend(showControls, options.controls);\n  }\n\n  withDefaults = xtend(defaultOptions, withDefaults);\n\n  // Layers with a shared source should be adjacent for performance reasons\n  withDefaults.styles = addSources(withDefaults.styles, 'cold').concat(addSources(withDefaults.styles, 'hot'));\n\n  return withDefaults;\n}\n","/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = isEqual;\n","export default function(a, b) {\n  if (a.length !== b.length) return false;\n  return JSON.stringify(a.map(id => id).sort()) === JSON.stringify(b.map(id => id).sort());\n}\n","import isEqual from 'lodash.isequal';\nimport normalize from '@mapbox/geojson-normalize';\nimport hat from 'hat';\nimport featuresAt from './lib/features_at';\nimport stringSetsAreEqual from './lib/string_sets_are_equal';\nimport * as Constants from './constants';\nimport StringSet from './lib/string_set';\n\nimport Polygon from './feature_types/polygon';\nimport LineString from './feature_types/line_string';\nimport Point from './feature_types/point';\nimport MultiFeature from './feature_types/multi_feature';\n\nconst featureTypes = {\n  Polygon,\n  LineString,\n  Point,\n  MultiPolygon: MultiFeature,\n  MultiLineString: MultiFeature,\n  MultiPoint: MultiFeature\n};\n\nexport default function(ctx, api) {\n\n  api.modes = Constants.modes;\n\n  api.getFeatureIdsAt = function(point) {\n    const features = featuresAt.click({ point }, null, ctx);\n    return features.map(feature => feature.properties.id);\n  };\n\n  api.getSelectedIds = function () {\n    return ctx.store.getSelectedIds();\n  };\n\n  api.getSelected = function () {\n    return {\n      type: Constants.geojsonTypes.FEATURE_COLLECTION,\n      features: ctx.store.getSelectedIds().map(id => ctx.store.get(id)).map(feature => feature.toGeoJSON())\n    };\n  };\n\n  api.getSelectedPoints = function () {\n    return {\n      type: Constants.geojsonTypes.FEATURE_COLLECTION,\n      features: ctx.store.getSelectedCoordinates().map(coordinate => ({\n        type: Constants.geojsonTypes.FEATURE,\n        properties: {},\n        geometry: {\n          type: Constants.geojsonTypes.POINT,\n          coordinates: coordinate.coordinates\n        }\n      }))\n    };\n  };\n\n  api.set = function(featureCollection) {\n    if (featureCollection.type === undefined || featureCollection.type !== Constants.geojsonTypes.FEATURE_COLLECTION || !Array.isArray(featureCollection.features)) {\n      throw new Error('Invalid FeatureCollection');\n    }\n    const renderBatch = ctx.store.createRenderBatch();\n    let toDelete = ctx.store.getAllIds().slice();\n    const newIds = api.add(featureCollection);\n    const newIdsLookup = new StringSet(newIds);\n\n    toDelete = toDelete.filter(id => !newIdsLookup.has(id));\n    if (toDelete.length) {\n      api.delete(toDelete);\n    }\n\n    renderBatch();\n    return newIds;\n  };\n\n  api.add = function (geojson) {\n    const featureCollection = JSON.parse(JSON.stringify(normalize(geojson)));\n\n    const ids = featureCollection.features.map((feature) => {\n      feature.id = feature.id || hat();\n\n      if (feature.geometry === null) {\n        throw new Error('Invalid geometry: null');\n      }\n\n      if (ctx.store.get(feature.id) === undefined || ctx.store.get(feature.id).type !== feature.geometry.type) {\n        // If the feature has not yet been created ...\n        const Model = featureTypes[feature.geometry.type];\n        if (Model === undefined) {\n          throw new Error(`Invalid geometry type: ${feature.geometry.type}.`);\n        }\n        const internalFeature = new Model(ctx, feature);\n        ctx.store.add(internalFeature);\n      } else {\n        // If a feature of that id has already been created, and we are swapping it out ...\n        const internalFeature = ctx.store.get(feature.id);\n        internalFeature.properties = feature.properties;\n        if (!isEqual(internalFeature.getCoordinates(), feature.geometry.coordinates)) {\n          internalFeature.incomingCoords(feature.geometry.coordinates);\n        }\n      }\n      return feature.id;\n    });\n\n    ctx.store.render();\n    return ids;\n  };\n\n\n  api.get = function (id) {\n    const feature = ctx.store.get(id);\n    if (feature) {\n      return feature.toGeoJSON();\n    }\n  };\n\n  api.getAll = function() {\n    return {\n      type: Constants.geojsonTypes.FEATURE_COLLECTION,\n      features: ctx.store.getAll().map(feature => feature.toGeoJSON())\n    };\n  };\n\n  api.delete = function(featureIds) {\n    ctx.store.delete(featureIds, { silent: true });\n    // If we were in direct select mode and our selected feature no longer exists\n    // (because it was deleted), we need to get out of that mode.\n    if (api.getMode() === Constants.modes.DIRECT_SELECT && !ctx.store.getSelectedIds().length) {\n      ctx.events.changeMode(Constants.modes.SIMPLE_SELECT, undefined, { silent: true });\n    } else {\n      ctx.store.render();\n    }\n\n    return api;\n  };\n\n  api.deleteAll = function() {\n    ctx.store.delete(ctx.store.getAllIds(), { silent: true });\n    // If we were in direct select mode, now our selected feature no longer exists,\n    // so escape that mode.\n    if (api.getMode() === Constants.modes.DIRECT_SELECT) {\n      ctx.events.changeMode(Constants.modes.SIMPLE_SELECT, undefined, { silent: true });\n    } else {\n      ctx.store.render();\n    }\n\n    return api;\n  };\n\n  api.changeMode = function(mode, modeOptions = {}) {\n    // Avoid changing modes just to re-select what's already selected\n    if (mode === Constants.modes.SIMPLE_SELECT && api.getMode() === Constants.modes.SIMPLE_SELECT) {\n      if (stringSetsAreEqual((modeOptions.featureIds || []), ctx.store.getSelectedIds())) return api;\n      // And if we are changing the selection within simple_select mode, just change the selection,\n      // instead of stopping and re-starting the mode\n      ctx.store.setSelected(modeOptions.featureIds, { silent: true });\n      ctx.store.render();\n      return api;\n    }\n\n    if (mode === Constants.modes.DIRECT_SELECT && api.getMode() === Constants.modes.DIRECT_SELECT &&\n      modeOptions.featureId === ctx.store.getSelectedIds()[0]) {\n      return api;\n    }\n\n    ctx.events.changeMode(mode, modeOptions, { silent: true });\n    return api;\n  };\n\n  api.getMode = function() {\n    return ctx.events.getMode();\n  };\n\n  api.trash = function() {\n    ctx.events.trash({ silent: true });\n    return api;\n  };\n\n  api.combineFeatures = function() {\n    ctx.events.combineFeatures({ silent: true });\n    return api;\n  };\n\n  api.uncombineFeatures = function() {\n    ctx.events.uncombineFeatures({ silent: true });\n    return api;\n  };\n\n  api.setFeatureProperty = function(featureId, property, value) {\n    ctx.store.setFeatureProperty(featureId, property, value);\n    return api;\n  };\n\n  return api;\n}\n","import runSetup from './src/setup';\nimport setupOptions from './src/options';\nimport setupAPI from './src/api';\nimport * as Constants from './src/constants';\nimport * as lib from './src/lib';\n\nconst setupDraw = function(options, api) {\n  options = setupOptions(options);\n\n  const ctx = {\n    options\n  };\n\n  api = setupAPI(ctx, api);\n  ctx.api = api;\n\n  const setup = runSetup(ctx);\n\n  api.onAdd = setup.onAdd;\n  api.onRemove = setup.onRemove;\n  api.types = Constants.types;\n  api.options = options;\n\n  return api;\n};\n\nfunction MapboxDraw(options) {\n  setupDraw(options, this);\n}\n\nimport modes from './src/modes/index';\nMapboxDraw.modes = modes;\nMapboxDraw.constants = Constants;\nMapboxDraw.lib = lib;\n\nexport default MapboxDraw;\n","\nvar content = require(\"!!../../../css-loader/dist/cjs.js!./mapbox-gl-geocoder.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../css-loader/dist/cjs.js!./mapbox-gl-geocoder.css\", function() {\n\t\tvar newContent = require(\"!!../../../css-loader/dist/cjs.js!./mapbox-gl-geocoder.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\nvar nanoid = require('nanoid').nanoid;\n\n/**\n * Construct a new mapbox event client to send interaction events to the mapbox event service\n * @param {Object} options options with which to create the service\n * @param {String} options.accessToken the mapbox access token to make requests\n * @param {Number} [options.flushInterval=1000] the number of ms after which to flush the event queue\n * @param {Number} [options.maxQueueSize=100] the number of events to queue before flushing\n * @private\n */\nfunction MapboxEventManager(options) {\n  this.origin = options.origin || 'https://api.mapbox.com';\n  this.endpoint = 'events/v2';\n  this.access_token = options.accessToken;\n  this.version = '0.2.0'\n  this.sessionID = this.generateSessionID();\n  this.userAgent = this.getUserAgent();\n\n  this.options = options;\n  this.send = this.send.bind(this);\n\n\n  // parse global options to be sent with each request\n  this.countries = (options.countries) ? options.countries.split(\",\") : null;\n  this.types = (options.types) ? options.types.split(\",\") : null;\n  this.bbox = (options.bbox) ? options.bbox : null;\n  this.language = (options.language) ? options.language.split(\",\") : null;\n  this.limit = (options.limit) ? +options.limit : null;\n  this.locale = navigator.language || null;\n  this.enableEventLogging = this.shouldEnableLogging(options);\n  this.eventQueue = new Array();\n  this.flushInterval = options.flushInterval || 1000;\n  this.maxQueueSize = options.maxQueueSize || 100;\n  this.timer = (this.flushInterval) ? setTimeout(this.flush.bind(this), this.flushInterval) : null;\n  // keep some state to deduplicate requests if necessary\n  this.lastSentInput = \"\";\n  this.lastSentIndex = 0;\n}\n\nMapboxEventManager.prototype = {\n  /**\n     * Send a search.select event to the mapbox events service\n     * This event marks the array index of the item selected by the user out of the array of possible options\n     * @private\n     * @param {Object} selected the geojson feature selected by the user\n     * @param {Object} geocoder a mapbox-gl-geocoder instance\n     * @returns {Promise}\n     */\n  select: function(selected, geocoder){\n    var resultIndex = this.getSelectedIndex(selected, geocoder);\n    var payload = this.getEventPayload('search.select', geocoder);\n    payload.resultIndex = resultIndex;\n    payload.resultPlaceName  = selected.place_name;\n    payload.resultId = selected.id;\n    if ((resultIndex === this.lastSentIndex && payload.queryString === this.lastSentInput) || resultIndex == -1) {\n      // don't log duplicate events if the user re-selected the same feature on the same search\n      return;\n    }\n    this.lastSentIndex = resultIndex;\n    this.lastSentInput = payload.queryString;\n    if (!payload.queryString) return; // will be rejected\n    return this.push(payload)\n  },\n\n  /**\n     * Send a search-start event to the mapbox events service\n     * This turnstile event marks when a user starts a new search\n     * @private\n     * @param {Object} geocoder a mapbox-gl-geocoder instance\n     * @returns {Promise}\n     */\n  start: function(geocoder){\n    var payload = this.getEventPayload('search.start', geocoder);\n    if (!payload.queryString) return; // will be rejected\n    return this.push(payload);\n  },\n\n  /**\n   * Send a search-keyevent event to the mapbox events service\n   * This event records each keypress in sequence\n   * @private\n   * @param {Object} keyEvent the keydown event to log\n   * @param {Object} geocoder a mapbox-gl-geocoder instance\n   * \n   */\n  keyevent: function(keyEvent, geocoder){\n\n    //pass invalid event\n    if (!keyEvent.key) return;\n    // don't send events for keys that don't change the input\n    // TAB, ESC, LEFT, RIGHT, ENTER, UP, DOWN\n    if (keyEvent.metaKey || [9, 27, 37, 39, 13, 38, 40].indexOf(keyEvent.keyCode) !== -1) return;\n    var payload = this.getEventPayload('search.keystroke', geocoder);\n    payload.lastAction = keyEvent.key;\n    if (!payload.queryString) return; // will be rejected\n    return this.push(payload);\n  },\n\n  /**\n   * Send an event to the events service\n   *\n   * The event is skipped if the instance is not enabled to send logging events\n   *\n   * @private\n   * @param {Object} payload the http POST body of the event\n   * @param {Function} [callback] a callback function to invoke when the send has completed\n   * @returns {Promise}\n   */\n  send: function (payload, callback) {\n    if (!this.enableEventLogging) {\n      if (callback) return callback();\n      return;\n    }\n    var options = this.getRequestOptions(payload);\n    this.request(options, function(err){\n      if (err) return this.handleError(err, callback);\n      if (callback) {\n        return callback();\n      }\n    }.bind(this))\n  },\n  /**\n   * Get http request options\n   * @private\n   * @param {*} payload\n   */\n  getRequestOptions: function(payload){\n    if (!Array.isArray(payload)) payload = [payload];\n    var options = {\n      // events must be sent with POST\n      method: \"POST\",\n      host: this.origin,\n      path: this.endpoint +  \"?access_token=\" + this.access_token,\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body:JSON.stringify(payload) //events are arrays\n    }\n    return options\n  },\n\n  /**\n   * Get the event payload to send to the events service\n   * Most payload properties are shared across all events\n   * @private\n   * @param {String} event the name of the event to send to the events service. Valid options are 'search.start', 'search.select', 'search.feedback'.\n   * @param {Object} geocoder a mapbox-gl-geocoder instance\n   * @returns {Object} an event payload\n   */\n  getEventPayload: function (event, geocoder) {\n    // Handle proximity, whether null, lat/lng coordinate object, or 'ip'\n    var proximity;\n    if (!geocoder.options.proximity) {\n      proximity = null;\n    } else if (typeof geocoder.options.proximity === 'object') {\n      proximity = [geocoder.options.proximity.longitude, geocoder.options.proximity.latitude];\n    } else if (geocoder.options.proximity === 'ip') {\n      proximity = [999,999];  // Alias for 'ip' in event logs\n    } else {\n      proximity = geocoder.options.proximity;\n    }\n\n    var zoom = (geocoder._map) ? geocoder._map.getZoom() : undefined;\n    var payload = {\n      event: event,\n      created: +new Date(),\n      sessionIdentifier: this.sessionID,\n      country: this.countries,\n      userAgent: this.userAgent,\n      language: this.language,\n      bbox: this.bbox,\n      types: this.types,\n      endpoint: 'mapbox.places',\n      autocomplete: geocoder.options.autocomplete,\n      fuzzyMatch: geocoder.options.fuzzyMatch,\n      proximity: proximity,\n      limit: geocoder.options.limit,\n      routing: geocoder.options.routing,\n      worldview: geocoder.options.worldview,\n      mapZoom: zoom,\n      keyboardLocale: this.locale\n    }\n\n    // get the text in the search bar\n    if (event === \"search.select\"){\n      payload.queryString = geocoder.inputString;\n    }else if (event != \"search.select\" && geocoder._inputEl){\n      payload.queryString = geocoder._inputEl.value;\n    }else{\n      payload.queryString = geocoder.inputString;\n    }\n    return payload;\n  },\n\n  /**\n   * Wraps the request function for easier testing\n   * Make an http request and invoke a callback\n   * @private\n   * @param {Object} opts options describing the http request to be made\n   * @param {Function} callback the callback to invoke when the http request is completed\n   */\n  request: function (opts, callback) {\n    var xhttp = new XMLHttpRequest();\n    xhttp.onreadystatechange = function() {\n      if (this.readyState == 4 ) {\n        if (this.status == 204){\n          //success\n          return callback(null);\n        }else {\n          return callback(this.statusText);\n        }\n      }\n    };\n\n    xhttp.open(opts.method, opts.host + '/' + opts.path, true);\n    for (var header in opts.headers){\n      var headerValue = opts.headers[header];\n      xhttp.setRequestHeader(header, headerValue)\n    }\n    xhttp.send(opts.body);\n  },\n\n  /**\n   * Handle an error that occurred while making a request\n   * @param {Object} err an error instance to log\n   * @private\n   */\n  handleError: function (err, callback) {\n    if (callback) return callback(err);\n  },\n\n  /**\n   * Generate a session ID to be returned with all of the searches made by this geocoder instance\n   * ID is random and cannot be tracked across sessions\n   * @private\n   */\n  generateSessionID: function () {\n    return nanoid();\n  },\n\n  /**\n   * Get a user agent string to send with the request to the events service\n   * @private\n   */\n  getUserAgent: function () {\n    return 'mapbox-gl-geocoder.' + this.version + \".\" + navigator.userAgent;\n  },\n\n  /**\n     * Get the 0-based numeric index of the item that the user selected out of the list of options\n     * @private\n     * @param {Object} selected the geojson feature selected by the user\n     * @param {Object} geocoder a Mapbox-GL-Geocoder instance\n     * @returns {Number} the index of the selected result\n     */\n  getSelectedIndex: function(selected, geocoder){\n    if (!geocoder._typeahead) return;\n    var results = geocoder._typeahead.data;\n    var selectedID = selected.id;\n    var resultIDs = results.map(function (feature) {\n      return feature.id;\n    });\n    var selectedIdx = resultIDs.indexOf(selectedID);\n    return selectedIdx;\n  },\n\n  /**\n     * Check whether events should be logged\n     * Clients using a localGeocoder or an origin other than mapbox should not have events logged\n     * @private\n     */\n  shouldEnableLogging: function(options){\n    if (options.enableEventLogging === false) return false;\n    if (options.origin && options.origin !== 'https://api.mapbox.com') return false;\n    // hard to make sense of events when a local instance is suplementing results from origin\n    if (options.localGeocoder) return false;\n    // hard to make sense of events when a custom filter is in use\n    if (options.filter) return false;\n    return true;\n  },\n\n  /**\n   * Flush out the event queue by sending events to the events service\n   * @private\n   */\n  flush: function(){\n    if (this.eventQueue.length > 0){\n      this.send(this.eventQueue);\n      this.eventQueue = new Array();\n    }\n    // //reset the timer\n    if (this.timer)  clearTimeout(this.timer);\n    if (this.flushInterval) this.timer = setTimeout(this.flush.bind(this), this.flushInterval)\n  },\n\n  /**\n   * Push event into the pending queue\n   * @param {Object} evt the event to send to the events service\n   * @param {Boolean} forceFlush indicates that the event queue should be flushed after adding this event regardless of size of the queue\n   * @private\n   */\n  push: function(evt, forceFlush){\n    this.eventQueue.push(evt);\n    if (this.eventQueue.length >= this.maxQueueSize || forceFlush){\n      this.flush();\n    }\n  },\n\n  /**\n   * Flush any remaining events from the queue before it is removed\n   * @private\n   */\n  remove: function(){\n    this.flush();\n  }\n}\n\n\n\nmodule.exports = MapboxEventManager;\n","module.exports = {\n  'fr': {\n    'name': 'France',\n    'bbox': [[-4.59235, 41.380007], [9.560016, 51.148506]]\n  },\n  'us': {\n    'name': 'United States',\n    'bbox': [[-171.791111, 18.91619], [-66.96466, 71.357764]]\n  },\n  'ru': {\n    'name': 'Russia',\n    'bbox': [[19.66064, 41.151416], [190.10042, 81.2504]]\n  },\n  'ca': {\n    'name': 'Canada',\n    'bbox': [[-140.99778, 41.675105], [-52.648099, 83.23324]]\n  }\n};\n","function Geolocation() {}\n\nGeolocation.prototype = {\n\n  isSupport: function() {\n    return Boolean(window.navigator.geolocation);\n  },\n\n  getCurrentPosition: function() {\n    const positionOptions = {\n      enableHighAccuracy: true\n    };\n\n    return new Promise(function(resolve, reject) {\n      window.navigator.geolocation.getCurrentPosition(resolve, reject, positionOptions);\n    });\n  },\n}\n\nmodule.exports = Geolocation;\n","'use strict';\n\nvar Typeahead = require('suggestions');\nvar debounce = require('lodash.debounce');\nvar extend = require('xtend');\nvar EventEmitter = require('events').EventEmitter;\nvar exceptions = require('./exceptions');\nvar MapboxClient = require('@mapbox/mapbox-sdk');\nvar mbxGeocoder = require('@mapbox/mapbox-sdk/services/geocoding');\nvar MapboxEventManager = require('./events');\nvar localization = require('./localization');\nvar subtag = require('subtag');\nvar Geolocation = require('./geolocation');\nvar utils = require('./utils');\n\n\nconst GEOCODE_REQUEST_TYPE = {\n  FORWARD: 0,\n  LOCAL: 1,\n  REVERSE: 2,\n};\n\n/**\n * Don't include this as part of the options object when creating a new MapboxGeocoder instance.\n */\nfunction getFooterNode() {\n  var div = document.createElement('div');\n  div.className = 'mapboxgl-ctrl-geocoder--powered-by';\n  div.innerHTML = '<a href=\"https://www.mapbox.com/search-service\" target=\"_blank\">Powered by Mapbox</a>';\n\n  return div;\n}\n\n/**\n * A geocoder component using the [Mapbox Geocoding API](https://docs.mapbox.com/api/search/#geocoding)\n * @class MapboxGeocoder\n * @param {Object} options\n * @param {String} options.accessToken Required.\n * @param {String} [options.origin=https://api.mapbox.com] Use to set a custom API origin.\n * @param {Object} [options.mapboxgl] A [mapbox-gl](https://github.com/mapbox/mapbox-gl-js) instance to use when creating [Markers](https://docs.mapbox.com/mapbox-gl-js/api/#marker). Required if `options.marker` is `true`.\n * @param {Number} [options.zoom=16] On geocoded result what zoom level should the map animate to when a `bbox` isn't found in the response. If a `bbox` is found the map will fit to the `bbox`.\n * @param {Boolean|Object} [options.flyTo=true] If `false`, animating the map to a selected result is disabled. If `true`, animating the map will use the default animation parameters. If an object, it will be passed as `options` to the map [`flyTo`](https://docs.mapbox.com/mapbox-gl-js/api/#map#flyto) or [`fitBounds`](https://docs.mapbox.com/mapbox-gl-js/api/#map#fitbounds) method providing control over the animation of the transition.\n * @param {String} [options.placeholder=Search] Override the default placeholder attribute value.\n * @param {Object|'ip'} [options.proximity] a geographical point given as an object with `latitude` and `longitude` properties, or the string 'ip' to use a user's IP address location. Search results closer to this point will be given higher priority.\n * @param {Boolean} [options.trackProximity=true] If `true`, the geocoder proximity will dynamically update based on the current map view or user's IP location, depending on zoom level.\n * @param {Boolean} [options.collapsed=false] If `true`, the geocoder control will collapse until hovered or in focus.\n * @param {Boolean} [options.clearAndBlurOnEsc=false] If `true`, the geocoder control will clear it's contents and blur when user presses the escape key.\n * @param {Boolean} [options.clearOnBlur=false] If `true`, the geocoder control will clear its value when the input blurs.\n * @param {Array} [options.bbox] a bounding box argument: this is\n * a bounding box given as an array in the format `[minX, minY, maxX, maxY]`.\n * Search results will be limited to the bounding box.\n * @param {string} [options.countries] a comma separated list of country codes to\n * limit results to specified country or countries.\n * @param {string} [options.types] a comma seperated list of types that filter\n * results to match those specified. See https://docs.mapbox.com/api/search/#data-types\n * for available types.\n * If reverseGeocode is enabled and no type is specified, the type defaults to POIs. Otherwise, if you configure more than one type, the first type will be used.\n * @param {Number} [options.minLength=2] Minimum number of characters to enter before results are shown.\n * @param {Number} [options.limit=5] Maximum number of results to show.\n * @param {string} [options.language] Specify the language to use for response text and query result weighting. Options are IETF language tags comprised of a mandatory ISO 639-1 language code and optionally one or more IETF subtags for country or script. More than one value can also be specified, separated by commas. Defaults to the browser's language settings.\n * @param {Function} [options.filter] A function which accepts a Feature in the [Carmen GeoJSON](https://github.com/mapbox/carmen/blob/master/carmen-geojson.md) format to filter out results from the Geocoding API response before they are included in the suggestions list. Return `true` to keep the item, `false` otherwise.\n * @param {Function} [options.localGeocoder] A function accepting the query string which performs local geocoding to supplement results from the Mapbox Geocoding API. Expected to return an Array of GeoJSON Features in the [Carmen GeoJSON](https://github.com/mapbox/carmen/blob/master/carmen-geojson.md) format.\n * @param {Function} [options.externalGeocoder] A function accepting the query string and current features list which performs geocoding to supplement results from the Mapbox Geocoding API. Expected to return a Promise which resolves to an Array of GeoJSON Features in the [Carmen GeoJSON](https://github.com/mapbox/carmen/blob/master/carmen-geojson.md) format.\n * @param {distance|score} [options.reverseMode=distance] - Set the factors that are used to sort nearby results.\n * @param {boolean} [options.reverseGeocode=false] If `true`, enable reverse geocoding mode. In reverse geocoding, search input is expected to be coordinates in the form `lat, lon`, with suggestions being the reverse geocodes.\n * @param {boolean} [options.flipCoordinates=false] If `true`, search input coordinates for reverse geocoding is expected to be in the form `lon, lat` instead of the default `lat, lon`.\n * @param {Boolean} [options.enableEventLogging=true] Allow Mapbox to collect anonymous usage statistics from the plugin.\n * @param {Boolean|Object} [options.marker=true]  If `true`, a [Marker](https://docs.mapbox.com/mapbox-gl-js/api/#marker) will be added to the map at the location of the user-selected result using a default set of Marker options.  If the value is an object, the marker will be constructed using these options. If `false`, no marker will be added to the map. Requires that `options.mapboxgl` also be set.\n * @param {Function} [options.render] A function that specifies how the results should be rendered in the dropdown menu. This function should accepts a single [Carmen GeoJSON](https://github.com/mapbox/carmen/blob/master/carmen-geojson.md) object as input and return a string. Any HTML in the returned string will be rendered.\n * @param {Function} [options.getItemValue] A function that specifies how the selected result should be rendered in the search bar. This function should accept a single [Carmen GeoJSON](https://github.com/mapbox/carmen/blob/master/carmen-geojson.md) object as input and return a string. HTML tags in the output string will not be rendered. Defaults to `(item) => item.place_name`.\n * @param {String} [options.mode=mapbox.places] A string specifying the geocoding [endpoint](https://docs.mapbox.com/api/search/#endpoints) to query. Options are `mapbox.places` and `mapbox.places-permanent`. The `mapbox.places-permanent` mode requires an enterprise license for permanent geocodes.\n * @param {Boolean} [options.localGeocoderOnly=false] If `true`, indicates that the `localGeocoder` results should be the only ones returned to the user. If `false`, indicates that the `localGeocoder` results should be combined with those from the Mapbox API with the `localGeocoder` results ranked higher.\n * @param {Boolean} [options.autocomplete=true] Specify whether to return autocomplete results or not. When autocomplete is enabled, results will be included that start with the requested string, rather than just responses that match it exactly.\n * @param {Boolean} [options.fuzzyMatch=true] Specify whether the Geocoding API should attempt approximate, as well as exact, matching when performing searches, or whether it should opt out of this behavior and only attempt exact matching.\n * @param {Boolean} [options.routing=false] Specify whether to request additional metadata about the recommended navigation destination corresponding to the feature or not. Only applicable for address features.\n * @param {String} [options.worldview=\"us\"] Filter results to geographic features whose characteristics are defined differently by audiences belonging to various regional, cultural, or political groups.\n * @param {Boolean} [options.enableGeolocation=false] If `true` enable user geolocation feature.\n * @param {('address'|'street'|'place'|'country')} [options.addressAccuracy=\"street\"] The accuracy for the geolocation feature with which we define the address line to fill. The browser API returns the user's position with accuracy, and sometimes we can get the neighbor's address. To prevent receiving an incorrect address, you can reduce the accuracy of the definition.\n * @example\n * var geocoder = new MapboxGeocoder({ accessToken: mapboxgl.accessToken });\n * map.addControl(geocoder);\n * @return {MapboxGeocoder} `this`\n *\n */\n\nfunction MapboxGeocoder(options) {\n  this._eventEmitter = new EventEmitter();\n  this.options = extend({}, this.options, options);\n  this.inputString = '';\n  this.fresh = true;\n  this.lastSelected = null;\n  this.geolocation = new Geolocation();\n}\n\nMapboxGeocoder.prototype = {\n  options: {\n    zoom: 16,\n    flyTo: true,\n    trackProximity: true,\n    minLength: 2,\n    reverseGeocode: false,\n    flipCoordinates: false,\n    limit: 5,\n    origin: 'https://api.mapbox.com',\n    enableEventLogging: true,\n    marker: true,\n    mapboxgl: null,\n    collapsed: false,\n    clearAndBlurOnEsc: false,\n    clearOnBlur: false,\n    enableGeolocation: false,\n    addressAccuracy: 'street',\n    getItemValue: function(item) {\n      return item.place_name\n    },\n    render: function(item) {\n      var placeName = item.place_name.split(',');\n      return '<div class=\"mapboxgl-ctrl-geocoder--suggestion\"><div class=\"mapboxgl-ctrl-geocoder--suggestion-title\">' + placeName[0]+ '</div><div class=\"mapboxgl-ctrl-geocoder--suggestion-address\">' + placeName.splice(1, placeName.length).join(',') + '</div></div>';\n    }\n  },\n\n  /**\n   * Add the geocoder to a container. The container can be either a `mapboxgl.Map`, an `HTMLElement` or a CSS selector string.\n   *\n   * If the container is a [`mapboxgl.Map`](https://docs.mapbox.com/mapbox-gl-js/api/map/), this function will behave identically to [`Map.addControl(geocoder)`](https://docs.mapbox.com/mapbox-gl-js/api/map/#map#addcontrol).\n   * If the container is an instance of [`HTMLElement`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement), then the geocoder will be appended as a child of that [`HTMLElement`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement).\n   * If the container is a [CSS selector string](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors), the geocoder will be appended to the element returned from the query.\n   *\n   * This function will throw an error if the container is none of the above.\n   * It will also throw an error if the referenced HTML element cannot be found in the `document.body`.\n   *\n   * For example, if the HTML body contains the element `<div id='geocoder-container'></div>`, the following script will append the geocoder to `#geocoder-container`:\n   *\n   * ```javascript\n   * var geocoder = new MapboxGeocoder({ accessToken: mapboxgl.accessToken });\n   * geocoder.addTo('#geocoder-container');\n   * ```\n   * @param {String|HTMLElement|mapboxgl.Map} container A reference to the container to which to add the geocoder\n   */\n  addTo: function(container){\n\n    function addToExistingContainer (geocoder, container) {\n      if (!document.body.contains(container)) {\n        throw new Error(\"Element provided to #addTo() exists, but is not in the DOM\")\n      }\n      const el = geocoder.onAdd(); //returns the input elements, which are then added to the requested html container\n      container.appendChild(el);\n    }\n\n    // if the container is a map, add the control like normal\n    if (container._controlContainer){\n      //  it's a mapbox-gl map, add like normal\n      container.addControl(this);\n    }\n    // if the container is an HTMLElement, then set the parent to be that element\n    else if (container instanceof HTMLElement) {\n      addToExistingContainer(this, container);\n    }\n    // if the container is a string, treat it as a CSS query\n    else if (typeof container == 'string'){\n      const parent = document.querySelectorAll(container);\n      if (parent.length === 0){\n        throw new Error(\"Element \", container, \"not found.\")\n      }\n\n      if (parent.length > 1){\n        throw new Error(\"Geocoder can only be added to a single html element\")\n      }\n\n      addToExistingContainer(this, parent[0]);\n    }else{\n      throw new Error(\"Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element\")\n    }\n  },\n\n  onAdd: function(map) {\n    if (map && typeof map != 'string'){\n      this._map = map;\n    }\n\n    this.setLanguage();\n\n    if (!this.options.localGeocoderOnly){\n      this.geocoderService = mbxGeocoder(\n        MapboxClient({\n          accessToken: this.options.accessToken,\n          origin: this.options.origin\n        })\n      );\n    }\n\n    if (this.options.localGeocoderOnly && !this.options.localGeocoder){\n      throw new Error(\"A localGeocoder function must be specified to use localGeocoderOnly mode\")\n    }\n\n    this.eventManager = new MapboxEventManager(this.options);\n\n    this._onChange = this._onChange.bind(this);\n    this._onKeyDown = this._onKeyDown.bind(this);\n    this._onPaste = this._onPaste.bind(this);\n    this._onBlur = this._onBlur.bind(this);\n    this._showButton = this._showButton.bind(this);\n    this._hideButton = this._hideButton.bind(this);\n    this._onQueryResult = this._onQueryResult.bind(this);\n    this.clear = this.clear.bind(this);\n    this._updateProximity = this._updateProximity.bind(this);\n    this._collapse = this._collapse.bind(this);\n    this._unCollapse = this._unCollapse.bind(this);\n    this._clear = this._clear.bind(this);\n    this._clearOnBlur = this._clearOnBlur.bind(this);\n    this._geolocateUser = this._geolocateUser.bind(this);\n\n    var el = (this.container = document.createElement('div'));\n    el.className = 'mapboxgl-ctrl-geocoder mapboxgl-ctrl';\n\n    var searchIcon = this.createIcon('search', '<path d=\"M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z\"/>')\n\n    this._inputEl = document.createElement('input');\n    this._inputEl.type = 'text';\n    this._inputEl.className = 'mapboxgl-ctrl-geocoder--input';\n\n    this.setPlaceholder();\n\n    if (this.options.collapsed) {\n      this._collapse();\n      this.container.addEventListener('mouseenter', this._unCollapse);\n      this.container.addEventListener('mouseleave', this._collapse);\n      this._inputEl.addEventListener('focus', this._unCollapse);\n    }\n\n    if (this.options.collapsed || this.options.clearOnBlur) {\n      this._inputEl.addEventListener('blur', this._onBlur);\n    }\n\n    this._inputEl.addEventListener('keydown', debounce(this._onKeyDown, 200));\n    this._inputEl.addEventListener('paste', this._onPaste);\n    this._inputEl.addEventListener('change', this._onChange);\n    this.container.addEventListener('mouseenter', this._showButton);\n    this.container.addEventListener('mouseleave', this._hideButton);\n    this._inputEl.addEventListener('keyup', function(e){\n      this.eventManager.keyevent(e, this);\n    }.bind(this));\n\n    var actions = document.createElement('div');\n    actions.classList.add('mapboxgl-ctrl-geocoder--pin-right');\n\n    this._clearEl = document.createElement('button');\n    this._clearEl.setAttribute('aria-label', 'Clear');\n    this._clearEl.addEventListener('click', this.clear);\n    this._clearEl.className = 'mapboxgl-ctrl-geocoder--button';\n\n    var buttonIcon = this.createIcon('close', '<path d=\"M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z\"/>')\n    this._clearEl.appendChild(buttonIcon);\n\n    this._loadingEl = this.createIcon('loading', '<path fill=\"#333\" d=\"M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z\"/><path opacity=\".1\" d=\"M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z\"/>');\n\n    actions.appendChild(this._clearEl);\n    actions.appendChild(this._loadingEl);\n\n    el.appendChild(searchIcon);\n    el.appendChild(this._inputEl);\n    el.appendChild(actions);\n\n    if (this.options.enableGeolocation && this.geolocation.isSupport()) {\n      this._geolocateEl = document.createElement('button');\n      this._geolocateEl.setAttribute('aria-label', 'Geolocate');\n      this._geolocateEl.addEventListener('click', this._geolocateUser);\n      this._geolocateEl.className = 'mapboxgl-ctrl-geocoder--button';\n\n      var geolocateIcon = this.createIcon('geolocate', '<path d=\"M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z\" fill=\"#4264fb\"/>');\n      this._geolocateEl.appendChild(geolocateIcon);\n\n      actions.appendChild(this._geolocateEl);\n      this._showGeolocateButton();\n    }\n\n    var typeahead = this._typeahead = new Typeahead(this._inputEl, [], {\n      filter: false,\n      minLength: this.options.minLength,\n      limit: this.options.limit\n    });\n\n    this.setRenderFunction(this.options.render);\n    typeahead.getItemValue = this.options.getItemValue;\n\n    // Add support for footer.\n    var parentDraw = typeahead.list.draw;\n    var footerNode = this._footerNode = getFooterNode();\n    typeahead.list.draw = function() {\n      parentDraw.call(this);\n\n      footerNode.addEventListener('mousedown', function() {\n        this.selectingListItem = true;\n      }.bind(this));\n    \n      footerNode.addEventListener('mouseup', function() {\n        this.selectingListItem = false;\n      }.bind(this));\n\n      this.element.appendChild(footerNode);\n    };\n\n    this.mapMarker = null;\n    this._handleMarker = this._handleMarker.bind(this);\n    if (this._map){\n      if (this.options.trackProximity ) {\n        this._updateProximity();\n        this._map.on('moveend', this._updateProximity);\n      }\n      this._mapboxgl = this.options.mapboxgl;\n      if (!this._mapboxgl && this.options.marker) {\n        // eslint-disable-next-line no-console\n        console.error(\"No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl.\");\n        this.options.marker = false;\n      }\n    }\n    return el;\n  },\n\n  _geolocateUser: function () {\n    this._hideGeolocateButton();\n    this._showLoadingIcon();\n\n    this.geolocation.getCurrentPosition().then(function(geolocationPosition) {\n      this._hideLoadingIcon();\n\n      const geojson = {\n        geometry: {\n          type: 'Point',\n          coordinates: [geolocationPosition.coords.longitude, geolocationPosition.coords.latitude]\n        }\n      };\n\n      this._handleMarker(geojson);\n      this._fly(geojson);\n\n      this._typeahead.clear();\n      this._typeahead.selected = true;\n      this.lastSelected = JSON.stringify(geojson);\n      this._showClearButton();\n      this.fresh = false;\n\n      const config = {\n        limit: 1,\n        language: [this.options.language],\n        query: geojson.geometry.coordinates,\n        types: [\"address\"]\n      };\n\n      if (this.options.localGeocoderOnly) {\n        const text = geojson.geometry.coordinates[0] + ',' + geojson.geometry.coordinates[1]\n        this._setInputValue(text);\n\n        this._eventEmitter.emit('result', { result: geojson });\n      } else {\n        this.geocoderService.reverseGeocode(config).send().then(function (resp) {\n          const feature = resp.body.features[0];\n  \n          if (feature) {\n            const locationText = utils.transformFeatureToGeolocationText(feature, this.options.addressAccuracy);\n            this._setInputValue(locationText);\n  \n            feature.user_coordinates = geojson.geometry.coordinates;\n            this._eventEmitter.emit('result', { result: feature });\n          } else {\n            this._eventEmitter.emit('result', { result: { user_coordinates: geojson.geometry.coordinates } });\n          }\n        }.bind(this));\n      }\n    }.bind(this)).catch(function(error) {\n      if (error.code === 1) {\n        this._renderUserDeniedGeolocationError();\n      } else {\n        this._renderLocationError();\n      }\n\n      this._hideLoadingIcon();\n      this._showGeolocateButton();\n      this._hideAttribution();\n    }.bind(this));\n  },\n\n  createIcon: function(name, path) {\n    var icon = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    icon.setAttribute('class', 'mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-' + name);\n    icon.setAttribute('viewBox', '0 0 18 18');\n    icon.setAttribute('xml:space','preserve');\n    icon.setAttribute('width', 18);\n    icon.setAttribute('height', 18);\n    icon.innerHTML = path;\n    return icon;\n  },\n\n  onRemove: function() {\n    this.container.parentNode.removeChild(this.container);\n\n    if (this.options.trackProximity && this._map) {\n      this._map.off('moveend', this._updateProximity);\n    }\n\n    this._removeMarker();\n\n    this._map = null;\n\n    return this;\n  },\n\n  _setInputValue: function (value) {\n    this._inputEl.value = value;\n  \n    setTimeout(function () {\n      this._inputEl.focus();\n      this._inputEl.scrollLeft = 0;\n      this._inputEl.setSelectionRange(0, 0);\n    }.bind(this), 1);\n  },\n\n  _onPaste: function(e){\n    var value = (e.clipboardData || window.clipboardData).getData('text');\n    if (value.length >= this.options.minLength) {\n      this._geocode(value);\n    }\n  },\n\n  _onKeyDown: function(e) {\n    var ESC_KEY_CODE = 27,\n      TAB_KEY_CODE = 9;\n\n    if (e.keyCode === ESC_KEY_CODE && this.options.clearAndBlurOnEsc) {\n      this._clear(e);\n      return this._inputEl.blur();\n    }\n\n    // if target has shadowRoot, then get the actual active element inside the shadowRoot\n    var target = e.target && e.target.shadowRoot\n      ? e.target.shadowRoot.activeElement\n      : e.target;\n    var value = target ? target.value : '';\n\n    if (!value) {\n      this.fresh = true;\n      // the user has removed all the text\n      if (e.keyCode !== TAB_KEY_CODE) this.clear(e);\n      this._showGeolocateButton();\n      return this._hideClearButton();\n    }\n\n    this._hideGeolocateButton();\n\n    // TAB, ESC, LEFT, RIGHT, ENTER, UP, DOWN\n    if ((e.metaKey || [TAB_KEY_CODE, ESC_KEY_CODE, 37, 39, 13, 38, 40].indexOf(e.keyCode) !== -1))\n      return;\n\n    if (target.value.length >= this.options.minLength) {\n      this._geocode(target.value);\n    }\n  },\n\n  _showButton: function() {\n    if (this._typeahead.selected) this._showClearButton();\n  },\n\n  _hideButton: function() {\n    if (this._typeahead.selected) this._hideClearButton();\n  },\n\n  _showClearButton: function() {\n    this._clearEl.style.display = 'block';\n  },\n\n  _hideClearButton: function() {\n    this._clearEl.style.display = 'none'\n  },\n\n  _showGeolocateButton: function() {\n    if (this._geolocateEl && this.geolocation.isSupport()) {\n      this._geolocateEl.style.display = 'block';\n    }\n  },\n\n  _hideGeolocateButton: function() {\n    if (this._geolocateEl) {\n      this._geolocateEl.style.display = 'none';\n    }\n  },\n\n  _showLoadingIcon: function() {\n    this._loadingEl.style.display = 'block';\n  },\n  \n  _hideLoadingIcon: function() {\n    this._loadingEl.style.display = 'none';\n  },\n\n  _showAttribution: function() {\n    this._footerNode.style.display = 'block'\n  },\n  \n  _hideAttribution: function() {\n    this._footerNode.style.display = 'none'\n  },\n\n  _onBlur: function(e) {\n    if (this.options.clearOnBlur) {\n      this._clearOnBlur(e);\n    }\n    if (this.options.collapsed) {\n      this._collapse();\n    }\n  },\n  _onChange: function() {\n    var selected = this._typeahead.selected;\n    if (selected  && JSON.stringify(selected) !== this.lastSelected) {\n      this._hideClearButton();\n      if (this.options.flyTo) {\n        this._fly(selected);\n      }\n      if (this.options.marker && this._mapboxgl){\n        this._handleMarker(selected);\n      }\n\n      // After selecting a feature, re-focus the textarea and set\n      // cursor at start.\n      this._inputEl.focus();\n      this._inputEl.scrollLeft = 0;\n      this._inputEl.setSelectionRange(0, 0);\n      this.lastSelected = JSON.stringify(selected);\n      this._eventEmitter.emit('result', { result: selected });\n      this.eventManager.select(selected, this);\n    }\n  },\n\n  _fly: function(selected) {\n    var flyOptions;\n    if (selected.properties && exceptions[selected.properties.short_code]) {\n      // Certain geocoder search results return (and therefore zoom to fit)\n      // an unexpectedly large bounding box: for example, both Russia and the\n      // USA span both sides of -180/180, or France includes the island of\n      // Reunion in the Indian Ocean. An incomplete list of these exceptions\n      // at ./exceptions.json provides \"reasonable\" bounding boxes as a\n      // short-term solution; this may be amended as necessary.\n      flyOptions = extend({}, this.options.flyTo);\n      if (this._map){\n        this._map.fitBounds(exceptions[selected.properties.short_code].bbox, flyOptions);\n      }\n    } else if (selected.bbox) {\n      var bbox = selected.bbox;\n      flyOptions = extend({}, this.options.flyTo);\n      if (this._map){\n        this._map.fitBounds([[bbox[0], bbox[1]], [bbox[2], bbox[3]]], flyOptions);\n      }\n    } else {\n      var defaultFlyOptions = {\n        zoom: this.options.zoom\n      }\n      flyOptions = extend({}, defaultFlyOptions, this.options.flyTo);\n      //  ensure that center is not overriden by custom options\n      if (selected.center) {\n        flyOptions.center = selected.center;\n      } else if (selected.geometry && selected.geometry.type && selected.geometry.type === 'Point' && selected.geometry.coordinates) {\n        flyOptions.center = selected.geometry.coordinates;\n      }\n\n      if (this._map){\n        this._map.flyTo(flyOptions);\n      }\n    }\n  },\n\n  _requestType: function(options, search) {\n    var type;\n    if (options.localGeocoderOnly) {\n      type = GEOCODE_REQUEST_TYPE.LOCAL;\n    } else if (options.reverseGeocode && utils.REVERSE_GEOCODE_COORD_RGX.test(search)) {\n      type = GEOCODE_REQUEST_TYPE.REVERSE;\n    } else {\n      type = GEOCODE_REQUEST_TYPE.FORWARD;\n    }\n    return type;\n  },\n\n  _setupConfig: function(requestType, search) {\n    // Possible config properties to pass to client\n    const keys = [\n      'bbox',\n      'limit',\n      'proximity',\n      'countries',\n      'types',\n      'language',\n      'reverseMode',\n      'mode',\n      'autocomplete',\n      'fuzzyMatch',\n      'routing',\n      'worldview'\n    ];\n    const spacesOrCommaRgx = /[\\s,]+/;\n\n    var self = this;\n    var config = keys.reduce(function(config, key) {\n      // don't include undefined/null params, but allow boolean, among other, values\n      if (self.options[key] === undefined || self.options[key] === null) {\n        return config;\n      }\n\n      // countries, types, and language need to be passed in as arrays to client\n      // https://github.com/mapbox/mapbox-sdk-js/blob/master/services/geocoding.js#L38-L47\n      ['countries', 'types', 'language'].indexOf(key) > -1\n        ? (config[key] = self.options[key].split(spacesOrCommaRgx))\n        : (config[key] = self.options[key]);\n\n      const isCoordKey =\n        typeof self.options[key].longitude === 'number' &&\n        typeof self.options[key].latitude  === 'number';\n\n      if (key === 'proximity' && isCoordKey) {\n        const lng = self.options[key].longitude;\n        const lat = self.options[key].latitude;\n\n        config[key] = [lng, lat];\n      }\n\n      return config;\n    }, {});\n\n    switch (requestType) {\n    case GEOCODE_REQUEST_TYPE.REVERSE: {\n      var coords = search.split(spacesOrCommaRgx).map(function(c) {\n        return parseFloat(c, 10);\n      })\n      if (!self.options.flipCoordinates) {\n        coords.reverse();\n      }\n\n      // client only accepts one type for reverseGeocode, so\n      // use first config type if one, if not default to poi\n      config.types ? [config.types[0]] : [\"poi\"];\n      config = extend(config, { query: coords, limit: 1 });\n\n      // Remove config options not supported by the reverseGeocoder\n      ['proximity', 'autocomplete', 'fuzzyMatch', 'bbox'].forEach(function(key) {\n        if (key in config) {\n          delete config[key]\n        }\n      });\n    } break;\n    case GEOCODE_REQUEST_TYPE.FORWARD: {\n      // Ensure that any reverse geocoding looking request is cleaned up\n      // to be processed as only a forward geocoding request by the server.\n      const trimmedSearch = search.trim();\n      const reverseGeocodeCoordRgx = /^(-?\\d{1,3}(\\.\\d{0,256})?)[, ]+(-?\\d{1,3}(\\.\\d{0,256})?)?$/;\n      if (reverseGeocodeCoordRgx.test(trimmedSearch)) {\n        search = search.replace(/,/g, ' ');\n      }\n      config = extend(config, { query: search });\n    } break;\n    }\n\n    return config;\n  },\n\n  _geocode: function(searchInput) {\n    this.inputString = searchInput;\n    this._showLoadingIcon();\n    this._eventEmitter.emit('loading', { query: searchInput });\n\n    const requestType = this._requestType(this.options, searchInput);\n    const config = this._setupConfig(requestType, searchInput);\n\n    var request;\n    switch (requestType) {\n    case GEOCODE_REQUEST_TYPE.LOCAL:\n      request = Promise.resolve();\n      break;\n    case GEOCODE_REQUEST_TYPE.FORWARD:\n      request = this.geocoderService.forwardGeocode(config).send();\n      break;\n    case GEOCODE_REQUEST_TYPE.REVERSE:\n      request = this.geocoderService.reverseGeocode(config).send();\n      break;\n    }\n\n    var localGeocoderRes = this.options.localGeocoder ? this.options.localGeocoder(searchInput) || [] : [];\n    var externalGeocoderRes = [];\n\n    var geocoderError = null;\n    request.catch(function(error) {\n      geocoderError = error;\n    }.bind(this))\n      .then(\n        function(response) {\n          this._hideLoadingIcon();\n\n          var res = {};\n\n          if (!response){\n            res = {\n              type: 'FeatureCollection',\n              features: []\n            }\n          } else if (response.statusCode == '200') {\n            res = response.body;\n            res.request = response.request\n            res.headers = response.headers\n          }\n\n          res.config = config;\n\n          if (this.fresh){\n            this.eventManager.start(this);\n            this.fresh = false;\n          }\n\n          // supplement Mapbox Geocoding API results with locally populated results\n          res.features = res.features\n            ? localGeocoderRes.concat(res.features)\n            : localGeocoderRes;\n\n          if (this.options.externalGeocoder) {\n\n            externalGeocoderRes = this.options.externalGeocoder(searchInput, res.features) || Promise.resolve([]);\n            // supplement Mapbox Geocoding API results with features returned by a promise\n            return externalGeocoderRes.then(function(features) {\n              res.features = res.features ? features.concat(res.features) : features;\n              return res;\n            }, function(){\n              // on error, display the original result\n              return res;\n            });\n          }\n          return res;\n\n        }.bind(this)).then(\n        function(res) {\n          if (geocoderError) {\n            throw geocoderError;\n          }\n\n          // apply results filter if provided\n          if (this.options.filter && res.features.length) {\n            res.features = res.features.filter(this.options.filter);\n          }\n\n          if (res.features.length) {\n            this._showClearButton();\n            this._hideGeolocateButton();\n            this._showAttribution();\n            this._eventEmitter.emit('results', res);\n            this._typeahead.update(res.features);\n          } else {\n            this._hideClearButton();\n            this._hideAttribution();\n            this._typeahead.selected = null;\n            this._renderNoResults();\n            this._eventEmitter.emit('results', res);\n          }\n\n        }.bind(this)\n      ).catch(\n        function(err) {\n          this._hideLoadingIcon();\n          this._hideAttribution();\n\n          // in the event of an error in the Mapbox Geocoding API still display results from the localGeocoder\n          if ((localGeocoderRes.length && this.options.localGeocoder) || (externalGeocoderRes.length && this.options.externalGeocoder) ) {\n            this._showClearButton();\n            this._hideGeolocateButton();\n            this._typeahead.update(localGeocoderRes);\n          } else {\n            this._hideClearButton();\n            this._typeahead.selected = null;\n            this._renderError();\n          }\n\n          this._eventEmitter.emit('results', { features: localGeocoderRes });\n          this._eventEmitter.emit('error', { error: err });\n        }.bind(this)\n      );\n\n    return request;\n  },\n\n  /**\n   * Shared logic for clearing input\n   * @param {Event} [ev] the event that triggered the clear, if available\n   * @private\n   *\n   */\n  _clear: function(ev) {\n    if (ev) ev.preventDefault();\n    this._inputEl.value = '';\n    this._typeahead.selected = null;\n    this._typeahead.clear();\n    this._onChange();\n    this._hideClearButton();\n    this._showGeolocateButton();\n    this._removeMarker();\n    this.lastSelected = null;\n    this._eventEmitter.emit('clear');\n    this.fresh = true;\n  },\n\n  /**\n   * Clear and then focus the input.\n   * @param {Event} [ev] the event that triggered the clear, if available\n   *\n   */\n  clear: function(ev) {\n    this._clear(ev);\n    this._inputEl.focus();\n  },\n\n\n  /**\n   * Clear the input, without refocusing it. Used to implement clearOnBlur\n   * constructor option.\n   * @param {Event} [ev] the blur event\n   * @private\n   */\n  _clearOnBlur: function(ev) {\n    var ctx = this;\n\n    /*\n     * If relatedTarget is not found, assume user targeted the suggestions list.\n     * In that case, do not clear on blur. There are other edge cases where\n     * ev.relatedTarget could be null. Clicking on list always results in null\n     * relatedtarget because of upstream behavior in `suggestions`.\n     *\n     * The ideal solution would be to check if ev.relatedTarget is a child of\n     * the list. See issue #258 for details on why we can't do that yet.\n     */\n    if (ev.relatedTarget) {\n      ctx._clear(ev);\n    }\n  },\n\n  _onQueryResult: function(response) {\n    var results = response.body;\n    if (!results.features.length) return;\n    var result = results.features[0];\n    this._typeahead.selected = result;\n    this._inputEl.value = result.place_name;\n    this._onChange();\n  },\n\n  _updateProximity: function() {\n    // proximity is designed for local scale, if the user is looking at the whole world,\n    // it doesn't make sense to factor in the arbitrary centre of the map\n    if (!this._map || !this.options.trackProximity){\n      return;\n    }\n    if (this._map.getZoom() > 9) {\n      var center = this._map.getCenter().wrap();\n      this.setProximity({ longitude: center.lng, latitude: center.lat }, false);\n    } else {\n      this.setProximity(null, false);\n    }\n  },\n\n  _collapse: function() {\n    // do not collapse if input is in focus\n    if (!this._inputEl.value && this._inputEl !== document.activeElement) this.container.classList.add('mapboxgl-ctrl-geocoder--collapsed');\n  },\n\n  _unCollapse: function() {\n    this.container.classList.remove('mapboxgl-ctrl-geocoder--collapsed');\n  },\n\n  /**\n   * Set & query the input\n   * @param {string} searchInput location name or other search input\n   * @returns {MapboxGeocoder} this\n   */\n  query: function(searchInput) {\n    this._geocode(searchInput).then(this._onQueryResult);\n    return this;\n  },\n\n  _renderError: function(){\n    var errorMessage = \"<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>\"\n    this._renderMessage(errorMessage);\n  },\n\n  _renderLocationError: function(){\n    var errorMessage = \"<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>\"\n    this._renderMessage(errorMessage);\n  },\n\n  _renderNoResults: function(){\n    var errorMessage = \"<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>\";\n    this._renderMessage(errorMessage);\n  },\n\n  _renderUserDeniedGeolocationError: function() {\n    var errorMessage = \"<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>\"\n    this._renderMessage(errorMessage);\n  },\n\n  _renderMessage: function(msg){\n    this._typeahead.update([]);\n    this._typeahead.selected = null;\n    this._typeahead.clear();\n    this._typeahead.renderError(msg);\n  },\n\n  /**\n   * Get the text to use as the search bar placeholder\n   *\n   * If placeholder is provided in options, then use options.placeholder\n   * Otherwise, if language is provided in options, then use the localized string of the first language if available\n   * Otherwise use the default\n   *\n   * @returns {String} the value to use as the search bar placeholder\n   * @private\n   */\n  _getPlaceholderText: function(){\n    if (this.options.placeholder) return this.options.placeholder;\n    if (this.options.language){\n      var firstLanguage = this.options.language.split(\",\")[0];\n      var language = subtag.language(firstLanguage);\n      var localizedValue = localization.placeholder[language];\n      if (localizedValue)  return localizedValue;\n    }\n    return 'Search';\n  },\n\n  /**\n   * Set input\n   * @param {string} searchInput location name or other search input\n   * @returns {MapboxGeocoder} this\n   */\n  setInput: function(searchInput) {\n    // Set input value to passed value and clear everything else.\n    this._inputEl.value = searchInput;\n    this._typeahead.selected = null;\n    this._typeahead.clear();\n    if (searchInput.length >= this.options.minLength) {\n      this._geocode(searchInput);\n    }\n    return this;\n  },\n\n  /**\n   * Set proximity\n   * @param {Object|'ip'} proximity The new `options.proximity` value. This is a geographical point given as an object with `latitude` and `longitude` properties or the string 'ip'.\n   * @param {Boolean} disableTrackProximity If true, sets `trackProximity` to false. True by default to prevent `trackProximity` from unintentionally overriding an explicitly set proximity value.\n   * @returns {MapboxGeocoder} this\n   */\n  setProximity: function(proximity, disableTrackProximity = true) {\n    this.options.proximity = proximity;\n    if (disableTrackProximity) {\n      this.options.trackProximity = false;\n    }\n    return this;\n  },\n\n  /**\n   * Get proximity\n   * @returns {Object} The geocoder proximity\n   */\n  getProximity: function() {\n    return this.options.proximity;\n  },\n\n  /**\n   * Set the render function used in the results dropdown\n   * @param {Function} fn The function to use as a render function. This function accepts a single [Carmen GeoJSON](https://github.com/mapbox/carmen/blob/master/carmen-geojson.md) object as input and returns a string.\n   * @returns {MapboxGeocoder} this\n   */\n  setRenderFunction: function(fn){\n    if (fn && typeof(fn) == \"function\"){\n      this._typeahead.render = fn;\n    }\n    return this;\n  },\n\n  /**\n   * Get the function used to render the results dropdown\n   *\n   * @returns {Function} the render function\n   */\n  getRenderFunction: function(){\n    return this._typeahead.render;\n  },\n\n  /**\n   * Get the language to use in UI elements and when making search requests\n   *\n   * Look first at the explicitly set options otherwise use the browser's language settings\n   * @param {String} language Specify the language to use for response text and query result weighting. Options are IETF language tags comprised of a mandatory ISO 639-1 language code and optionally one or more IETF subtags for country or script. More than one value can also be specified, separated by commas.\n   * @returns {MapboxGeocoder} this\n   */\n  setLanguage: function(language){\n    var browserLocale = navigator.language || navigator.userLanguage || navigator.browserLanguage;\n    this.options.language = language || this.options.language || browserLocale;\n    return this;\n  },\n\n  /**\n   * Get the language to use in UI elements and when making search requests\n   * @returns {String} The language(s) used by the plugin, if any\n   */\n  getLanguage: function(){\n    return this.options.language;\n  },\n\n  /**\n   * Get the zoom level the map will move to when there is no bounding box on the selected result\n   * @returns {Number} the map zoom\n   */\n  getZoom: function(){\n    return this.options.zoom;\n  },\n\n  /**\n   * Set the zoom level\n   * @param {Number} zoom The zoom level that the map should animate to when a `bbox` isn't found in the response. If a `bbox` is found the map will fit to the `bbox`.\n   * @returns {MapboxGeocoder} this\n   */\n  setZoom: function(zoom){\n    this.options.zoom = zoom;\n    return this;\n  },\n\n  /**\n   * Get the parameters used to fly to the selected response, if any\n   * @returns {Boolean|Object} The `flyTo` option\n   */\n  getFlyTo: function(){\n    return this.options.flyTo;\n  },\n\n  /**\n   * Set the flyTo options\n   * @param {Boolean|Object} flyTo If false, animating the map to a selected result is disabled. If true, animating the map will use the default animation parameters. If an object, it will be passed as `options` to the map [`flyTo`](https://docs.mapbox.com/mapbox-gl-js/api/#map#flyto) or [`fitBounds`](https://docs.mapbox.com/mapbox-gl-js/api/#map#fitbounds) method providing control over the animation of the transition.\n   */\n  setFlyTo: function(flyTo){\n    this.options.flyTo = flyTo;\n    return this;\n  },\n\n  /**\n   * Get the value of the placeholder string\n   * @returns {String} The input element's placeholder value\n   */\n  getPlaceholder: function(){\n    return this.options.placeholder;\n  },\n\n  /**\n   * Set the value of the input element's placeholder\n   * @param {String} placeholder the text to use as the input element's placeholder\n   * @returns {MapboxGeocoder} this\n   */\n  setPlaceholder: function(placeholder){\n    this.placeholder = (placeholder) ? placeholder : this._getPlaceholderText();\n    this._inputEl.placeholder = this.placeholder;\n    this._inputEl.setAttribute('aria-label', this.placeholder);\n    return this\n  },\n\n  /**\n   * Get the bounding box used by the plugin\n   * @returns {Array<Number>} the bounding box, if any\n   */\n  getBbox: function(){\n    return this.options.bbox;\n  },\n\n  /**\n   * Set the bounding box to limit search results to\n   * @param {Array<Number>} bbox a bounding box given as an array in the format [minX, minY, maxX, maxY].\n   * @returns {MapboxGeocoder} this\n   */\n  setBbox: function(bbox){\n    this.options.bbox = bbox;\n    return this;\n  },\n\n  /**\n   * Get a list of the countries to limit search results to\n   * @returns {String} a comma separated list of countries to limit to, if any\n   */\n  getCountries: function(){\n    return this.options.countries;\n  },\n\n  /**\n   * Set the countries to limit search results to\n   * @param {String} countries a comma separated list of countries to limit to\n   * @returns {MapboxGeocoder} this\n   */\n  setCountries: function(countries){\n    this.options.countries = countries;\n    return this;\n  },\n\n  /**\n   * Get a list of the types to limit search results to\n   * @returns {String} a comma separated list of types to limit to\n   */\n  getTypes: function(){\n    return this.options.types;\n  },\n\n  /**\n   * Set the types to limit search results to\n   * @param {String} countries a comma separated list of types to limit to\n   * @returns {MapboxGeocoder} this\n   */\n  setTypes: function(types){\n    this.options.types = types;\n    return this;\n  },\n\n  /**\n   * Get the minimum number of characters typed to trigger results used in the plugin\n   * @returns {Number} The minimum length in characters before a search is triggered\n   */\n  getMinLength: function(){\n    return this.options.minLength;\n  },\n\n  /**\n   * Set the minimum number of characters typed to trigger results used by the plugin\n   * @param {Number} minLength the minimum length in characters\n   * @returns {MapboxGeocoder} this\n   */\n  setMinLength: function(minLength){\n    this.options.minLength = minLength;\n    if (this._typeahead)  this._typeahead.options.minLength = minLength;\n    return this;\n  },\n\n  /**\n   * Get the limit value for the number of results to display used by the plugin\n   * @returns {Number} The limit value for the number of results to display used by the plugin\n   */\n  getLimit: function(){\n    return this.options.limit;\n  },\n\n  /**\n   * Set the limit value for the number of results to display used by the plugin\n   * @param {Number} limit the number of search results to return\n   * @returns {MapboxGeocoder}\n   */\n  setLimit: function(limit){\n    this.options.limit = limit;\n    if (this._typeahead) this._typeahead.options.limit = limit;\n    return this;\n  },\n\n  /**\n   * Get the filter function used by the plugin\n   * @returns {Function} the filter function\n   */\n  getFilter: function(){\n    return this.options.filter;\n  },\n\n  /**\n   * Set the filter function used by the plugin.\n   * @param {Function} filter A function which accepts a Feature in the [Carmen GeoJSON](https://github.com/mapbox/carmen/blob/master/carmen-geojson.md) format to filter out results from the Geocoding API response before they are included in the suggestions list. Return `true` to keep the item, `false` otherwise.\n   * @returns {MapboxGeocoder} this\n   */\n  setFilter: function(filter){\n    this.options.filter = filter;\n    return this;\n  },\n\n  /**\n   * Set the geocoding endpoint used by the plugin.\n   * @param {Function} origin A function which accepts an HTTPS URL to specify the endpoint to query results from.\n   * @returns {MapboxGeocoder} this\n   */\n  setOrigin: function(origin){\n    this.options.origin = origin;\n    this.geocoderService = mbxGeocoder(\n      MapboxClient({\n        accessToken: this.options.accessToken,\n        origin: this.options.origin\n      })\n    );\n    return this;\n  },\n\n  /**\n   * Get the geocoding endpoint the plugin is currently set to\n   * @returns {Function} the endpoint URL\n   */\n  getOrigin: function(){\n    return this.options.origin;\n  },\n\n  /**\n   * Set the accessToken option used for the geocoding request endpoint.\n   * @param {String} accessToken value\n   * @returns {MapboxGeocoder} this\n   */\n  setAccessToken: function(accessToken){\n    this.options.accessToken = accessToken;\n    this.geocoderService = mbxGeocoder(\n      MapboxClient({\n        accessToken: this.options.accessToken,\n        origin: this.options.origin\n      })\n    );\n    return this;\n  },\n\n  /**\n   * Set the autocomplete option used for geocoding requests\n   * @param {Boolean} value The boolean value to set autocomplete to\n   * @returns\n   */\n  setAutocomplete: function(value){\n    this.options.autocomplete = value;\n    return this;\n  },\n\n  /**\n   * Get the current autocomplete parameter value used for requests\n   * @returns {Boolean} The autocomplete parameter value\n   */\n  getAutocomplete: function(){\n    return this.options.autocomplete\n  },\n\n  /**\n   * Set the fuzzyMatch option used for approximate matching in geocoding requests\n   * @param {Boolean} value The boolean value to set fuzzyMatch to\n   * @returns\n   */\n  setFuzzyMatch: function(value){\n    this.options.fuzzyMatch = value;\n    return this;\n  },\n\n  /**\n   * Get the current fuzzyMatch parameter value used for requests\n   * @returns {Boolean} The fuzzyMatch parameter value\n   */\n  getFuzzyMatch: function(){\n    return this.options.fuzzyMatch\n  },\n\n  /**\n   * Set the routing parameter used to ask for routable point metadata in geocoding requests\n   * @param {Boolean} value The boolean value to set routing to\n   * @returns\n   */\n  setRouting: function(value){\n    this.options.routing = value;\n    return this;\n  },\n\n  /**\n   * Get the current routing parameter value used for requests\n   * @returns {Boolean} The routing parameter value\n   */\n  getRouting: function(){\n    return this.options.routing\n  },\n\n  /**\n   * Set the worldview parameter\n   * @param {String} code The country code representing the worldview (e.g. \"us\" | \"cn\" | \"jp\", \"in\")\n   * @returns\n   */\n  setWorldview: function(code){\n    this.options.worldview = code;\n    return this;\n  },\n\n  /**\n   * Get the current worldview parameter value used for requests\n   * @returns {String} The worldview parameter value\n   */\n  getWorldview: function(){\n    return this.options.worldview\n  },\n\n  /**\n   * Handle the placement of a result marking the selected result\n   * @private\n   * @param {Object} selected the selected geojson feature\n   * @returns {MapboxGeocoder} this\n   */\n  _handleMarker: function(selected){\n    // clean up any old marker that might be present\n    if (!this._map){\n      return;\n    }\n    this._removeMarker();\n    var defaultMarkerOptions = {\n      color: '#4668F2'\n    }\n    var markerOptions = extend({}, defaultMarkerOptions, this.options.marker)\n    this.mapMarker = new this._mapboxgl.Marker(markerOptions);\n    if (selected.center) {\n      this.mapMarker\n        .setLngLat(selected.center)\n        .addTo(this._map);\n    } else if (selected.geometry && selected.geometry.type && selected.geometry.type === 'Point' && selected.geometry.coordinates) {\n      this.mapMarker\n        .setLngLat(selected.geometry.coordinates)\n        .addTo(this._map);\n    }\n    return this;\n  },\n\n  /**\n   * Handle the removal of a result marker\n   * @private\n   */\n  _removeMarker: function(){\n    if (this.mapMarker){\n      this.mapMarker.remove();\n      this.mapMarker = null;\n    }\n  },\n\n  /**\n   * Subscribe to events that happen within the plugin.\n   * @param {String} type name of event. Available events and the data passed into their respective event objects are:\n   *\n   * - __clear__ `Emitted when the input is cleared`\n   * - __loading__ `{ query } Emitted when the geocoder is looking up a query`\n   * - __results__ `{ results } Fired when the geocoder returns a response`\n   * - __result__ `{ result } Fired when input is set`\n   * - __error__ `{ error } Error as string`\n   * @param {Function} fn function that's called when the event is emitted.\n   * @returns {MapboxGeocoder} this;\n   */\n  on: function(type, fn) {\n    this._eventEmitter.on(type, fn);\n    return this;\n  },\n\n  /**\n   * Remove an event\n   * @returns {MapboxGeocoder} this\n   * @param {String} type Event name.\n   * @param {Function} fn Function that should unsubscribe to the event emitted.\n   */\n  off: function(type, fn) {\n    this._eventEmitter.removeListener(type, fn);\n    this.eventManager.remove();\n    return this;\n  }\n};\n\nmodule.exports = MapboxGeocoder;\n","'use strict';\n\n/**\n * Localized values for the placeholder string\n * \n * @private\n */\nvar placeholder = {\n  // list drawn from https://docs.mapbox.com/api/search/#language-coverage\n  'de': 'Suche', // german\n  'it': 'Ricerca', //italian\n  'en': 'Search', // english\n  'nl': 'Zoeken', //dutch\n  'fr': 'Chercher',  //french\n  'ca': 'Cerca', //catalan\n  'he': 'לחפש', //hebrew\n  'ja': 'サーチ',  //japanese\n  'lv': 'Meklēt', //latvian\n  'pt': 'Procurar', //portuguese \n  'sr': 'Претрага', //serbian\n  'zh': '搜索', //chinese-simplified\n  'cs': 'Vyhledávání', //czech\n  'hu': 'Keresés', //hungarian\n  'ka': 'ძიება', // georgian\n  'nb': 'Søke', //norwegian\n  'sk': 'Vyhľadávanie', //slovak\n  'th': 'ค้นหา', //thai\n  'fi': 'Hae',//finnish\n  'is': 'Leita',//icelandic\n  'ko': '수색',//korean\n  'pl':  'Szukaj', //polish\n  'sl': 'Iskanje', //slovenian\n  'fa': 'جستجو',  //persian(aka farsi)\n  'ru': 'Поиск'//russian\n}\n\nmodule.exports = {placeholder: placeholder};\n","/**\n * This function transforms the feature from reverse geocoding to plain text with specified accuracy\n * @param {object} feature \n * @param {string} accuracy \n * @returns \n */\nfunction transformFeatureToGeolocationText(feature, accuracy) {\n  const addrInfo = getAddressInfo(feature);\n\n  const addressAccuracy =  ['address', 'street', 'place', 'country'];\n  var currentAccuracy;\n\n  if (typeof accuracy === 'function') {\n    return accuracy(addrInfo)\n  }\n\n  const accuracyIndex = addressAccuracy.indexOf(accuracy);\n\n  if (accuracyIndex === -1) {\n    currentAccuracy = addressAccuracy;\n  } else {\n    currentAccuracy = addressAccuracy.slice(accuracyIndex);\n  }\n\n  return currentAccuracy.reduce(function(acc, name) {\n    if (!addrInfo[name]) {\n      return acc;\n    }\n\n    if (acc !== '') {\n      acc = acc + ', ';\n    }\n\n    return acc + addrInfo[name];\n  }, '');\n}\n/**\n * This function transforms the feature from reverse geocoding to AddressInfo object\n * @param {object} feature \n * @returns {object}\n */\nfunction getAddressInfo(feature) {\n  const houseNumber = feature.address || '';\n  const street = feature.text || '';\n  const placeName = feature.place_name || '';\n  const address = placeName.split(',')[0];\n\n  const addrInfo = {\n    address: address,\n    houseNumber: houseNumber,\n    street: street,\n    placeName: placeName,\n  }\n\n  feature.context.forEach(function (context) {\n    const layer = context.id.split('.')[0];\n    addrInfo[layer] = context.text;\n  });\n\n  return addrInfo;\n}\n\nconst REVERSE_GEOCODE_COORD_RGX = /^[ ]*(-?\\d{1,3}(\\.\\d{0,256})?)[, ]+(-?\\d{1,3}(\\.\\d{0,256})?)[ ]*$/;\n\nmodule.exports = {\n  transformFeatureToGeolocationText: transformFeatureToGeolocationText,\n  getAddressInfo: getAddressInfo,\n  REVERSE_GEOCODE_COORD_RGX: REVERSE_GEOCODE_COORD_RGX,\n}","'use strict';\n\nvar client = require('./lib/client');\n\nmodule.exports = client;\n","'use strict';\n\nvar browser = require('./browser-layer');\nvar MapiClient = require('../classes/mapi-client');\n\nfunction BrowserClient(options) {\n  MapiClient.call(this, options);\n}\nBrowserClient.prototype = Object.create(MapiClient.prototype);\nBrowserClient.prototype.constructor = BrowserClient;\n\nBrowserClient.prototype.sendRequest = browser.browserSend;\nBrowserClient.prototype.abortRequest = browser.browserAbort;\n\n/**\n * Create a client for the browser.\n *\n * @param {Object} options\n * @param {string} options.accessToken\n * @param {string} [options.origin]\n * @returns {MapiClient}\n */\nfunction createBrowserClient(options) {\n  return new BrowserClient(options);\n}\n\nmodule.exports = createBrowserClient;\n","'use strict';\n\nvar MapiResponse = require('../classes/mapi-response');\nvar MapiError = require('../classes/mapi-error');\nvar constants = require('../constants');\nvar parseHeaders = require('../helpers/parse-headers');\n\n// Keys are request IDs, values are XHRs.\nvar requestsUnderway = {};\n\nfunction browserAbort(request) {\n  var xhr = requestsUnderway[request.id];\n  if (!xhr) return;\n  xhr.abort();\n  delete requestsUnderway[request.id];\n}\n\nfunction createResponse(request, xhr) {\n  return new MapiResponse(request, {\n    body: xhr.response,\n    headers: parseHeaders(xhr.getAllResponseHeaders()),\n    statusCode: xhr.status\n  });\n}\n\nfunction normalizeBrowserProgressEvent(event) {\n  var total = event.total;\n  var transferred = event.loaded;\n  var percent = (100 * transferred) / total;\n  return {\n    total: total,\n    transferred: transferred,\n    percent: percent\n  };\n}\n\nfunction sendRequestXhr(request, xhr) {\n  return new Promise(function(resolve, reject) {\n    xhr.onprogress = function(event) {\n      request.emitter.emit(\n        constants.EVENT_PROGRESS_DOWNLOAD,\n        normalizeBrowserProgressEvent(event)\n      );\n    };\n\n    var file = request.file;\n    if (file) {\n      xhr.upload.onprogress = function(event) {\n        request.emitter.emit(\n          constants.EVENT_PROGRESS_UPLOAD,\n          normalizeBrowserProgressEvent(event)\n        );\n      };\n    }\n\n    xhr.onerror = function(error) {\n      reject(error);\n    };\n\n    xhr.onabort = function() {\n      var mapiError = new MapiError({\n        request: request,\n        type: constants.ERROR_REQUEST_ABORTED\n      });\n      reject(mapiError);\n    };\n\n    xhr.onload = function() {\n      delete requestsUnderway[request.id];\n      if (xhr.status < 200 || xhr.status >= 400) {\n        var mapiError = new MapiError({\n          request: request,\n          body: xhr.response,\n          statusCode: xhr.status\n        });\n        reject(mapiError);\n        return;\n      }\n      resolve(xhr);\n    };\n\n    var body = request.body;\n\n    // matching service needs to send a www-form-urlencoded request\n    if (typeof body === 'string') {\n      xhr.send(body);\n    } else if (body) {\n      xhr.send(JSON.stringify(body));\n    } else if (file) {\n      xhr.send(file);\n    } else {\n      xhr.send();\n    }\n\n    requestsUnderway[request.id] = xhr;\n  }).then(function(xhr) {\n    return createResponse(request, xhr);\n  });\n}\n\n// The accessToken argument gives this function flexibility\n// for Mapbox's internal client.\nfunction createRequestXhr(request, accessToken) {\n  var url = request.url(accessToken);\n  var xhr = new window.XMLHttpRequest();\n  xhr.open(request.method, url);\n  Object.keys(request.headers).forEach(function(key) {\n    xhr.setRequestHeader(key, request.headers[key]);\n  });\n  return xhr;\n}\n\nfunction browserSend(request) {\n  return Promise.resolve().then(function() {\n    var xhr = createRequestXhr(request, request.client.accessToken);\n    return sendRequestXhr(request, xhr);\n  });\n}\n\nmodule.exports = {\n  browserAbort: browserAbort,\n  sendRequestXhr: sendRequestXhr,\n  browserSend: browserSend,\n  createRequestXhr: createRequestXhr\n};\n","'use strict';\n\nvar parseToken = require('@mapbox/parse-mapbox-token');\nvar MapiRequest = require('./mapi-request');\nvar constants = require('../constants');\n\n/**\n * A low-level Mapbox API client. Use it to create service clients\n * that share the same configuration.\n *\n * Services and `MapiRequest`s use the underlying `MapiClient` to\n * determine how to create, send, and abort requests in a way\n * that is appropriate to the configuration and environment\n * (Node or the browser).\n *\n * @class MapiClient\n * @property {string} accessToken - The Mapbox access token assigned\n *   to this client.\n * @property {string} [origin] - The origin\n *   to use for API requests. Defaults to https://api.mapbox.com.\n */\n\nfunction MapiClient(options) {\n  if (!options || !options.accessToken) {\n    throw new Error('Cannot create a client without an access token');\n  }\n  // Try parsing the access token to determine right away if it's valid.\n  parseToken(options.accessToken);\n\n  this.accessToken = options.accessToken;\n  this.origin = options.origin || constants.API_ORIGIN;\n}\n\nMapiClient.prototype.createRequest = function createRequest(requestOptions) {\n  return new MapiRequest(this, requestOptions);\n};\n\nmodule.exports = MapiClient;\n","'use strict';\n\nvar constants = require('../constants');\n\n/**\n * A Mapbox API error.\n *\n * If there's an error during the API transaction,\n * the Promise returned by `MapiRequest`'s [`send`](#send)\n * method should reject with a `MapiError`.\n *\n * @class MapiError\n * @hideconstructor\n * @property {MapiRequest} request - The errored request.\n * @property {string} type - The type of error. Usually this is `'HttpError'`.\n *   If the request was aborted, so the error was\n *   not sent from the server, the type will be\n *   `'RequestAbortedError'`.\n * @property {number} [statusCode] - The numeric status code of\n *   the HTTP response.\n * @property {Object | string} [body] - If the server sent a response body,\n *   this property exposes that response, parsed as JSON if possible.\n * @property {string} [message] - Whatever message could be derived from the\n *   call site and HTTP response.\n *\n * @param {MapiRequest} options.request\n * @param {number} [options.statusCode]\n * @param {string} [options.body]\n * @param {string} [options.message]\n * @param {string} [options.type]\n */\nfunction MapiError(options) {\n  var errorType = options.type || constants.ERROR_HTTP;\n\n  var body;\n  if (options.body) {\n    try {\n      body = JSON.parse(options.body);\n    } catch (e) {\n      body = options.body;\n    }\n  } else {\n    body = null;\n  }\n\n  var message = options.message || null;\n  if (!message) {\n    if (typeof body === 'string') {\n      message = body;\n    } else if (body && typeof body.message === 'string') {\n      message = body.message;\n    } else if (errorType === constants.ERROR_REQUEST_ABORTED) {\n      message = 'Request aborted';\n    }\n  }\n\n  this.message = message;\n  this.type = errorType;\n  this.statusCode = options.statusCode || null;\n  this.request = options.request;\n  this.body = body;\n}\n\nmodule.exports = MapiError;\n","'use strict';\n\nvar parseToken = require('@mapbox/parse-mapbox-token');\nvar xtend = require('xtend');\nvar EventEmitter = require('eventemitter3');\nvar urlUtils = require('../helpers/url-utils');\nvar constants = require('../constants');\n\nvar requestId = 1;\n\n/**\n * A Mapbox API request.\n *\n * Note that creating a `MapiRequest` does *not* send the request automatically.\n * Use the request's `send` method to send it off and get a `Promise`.\n *\n * The `emitter` property is an `EventEmitter` that emits the following events:\n *\n * - `'response'` - Listeners will be called with a `MapiResponse`.\n * - `'error'` - Listeners will be called with a `MapiError`.\n * - `'downloadProgress'` - Listeners will be called with `ProgressEvents`.\n * - `'uploadProgress'` - Listeners will be called with `ProgressEvents`.\n *   Upload events are only available when the request includes a file.\n *\n * @class MapiRequest\n * @property {EventEmitter} emitter - An event emitter. See above.\n * @property {MapiClient} client - This request's `MapiClient`.\n * @property {MapiResponse|null} response - If this request has been sent and received\n *   a response, the response is available on this property.\n * @property {MapiError|Error|null} error - If this request has been sent and\n *   received an error in response, the error is available on this property.\n * @property {boolean} aborted - If the request has been aborted\n *   (via [`abort`](#abort)), this property will be `true`.\n * @property {boolean} sent - If the request has been sent, this property will\n *   be `true`. You cannot send the same request twice, so if you need to create\n *   a new request that is the equivalent of an existing one, use\n *   [`clone`](#clone).\n * @property {string} path - The request's path, including colon-prefixed route\n *   parameters.\n * @property {string} origin - The request's origin.\n * @property {string} method - The request's HTTP method.\n * @property {Object} query - A query object, which will be transformed into\n *   a URL query string.\n * @property {Object} params - A route parameters object, whose values will\n *   be interpolated the path.\n * @property {Object} headers - The request's headers.\n * @property {Object|string|null} body - Data to send with the request.\n *   If the request has a body, it will also be sent with the header\n *   `'Content-Type: application/json'`.\n * @property {Blob|ArrayBuffer|string|ReadStream} file - A file to\n *   send with the request. The browser client accepts Blobs and ArrayBuffers;\n *   the Node client accepts strings (filepaths) and ReadStreams.\n * @property {string} encoding - The encoding of the response.\n * @property {string} sendFileAs - The method to send the `file`. Options are\n *   `data` (x-www-form-urlencoded) or `form` (multipart/form-data).\n */\n\n/**\n * @ignore\n * @param {MapiClient} client\n * @param {Object} options\n * @param {string} options.method\n * @param {string} options.path\n * @param {Object} [options.query={}]\n * @param {Object} [options.params={}]\n * @param {string} [options.origin]\n * @param {Object} [options.headers]\n * @param {Object} [options.body=null]\n * @param {Blob|ArrayBuffer|string|ReadStream} [options.file=null]\n * @param {string} [options.encoding=utf8]\n */\nfunction MapiRequest(client, options) {\n  if (!client) {\n    throw new Error('MapiRequest requires a client');\n  }\n  if (!options || !options.path || !options.method) {\n    throw new Error(\n      'MapiRequest requires an options object with path and method properties'\n    );\n  }\n\n  var defaultHeaders = {};\n  if (options.body) {\n    defaultHeaders['content-type'] = 'application/json';\n  }\n\n  var headersWithDefaults = xtend(defaultHeaders, options.headers);\n\n  // Disallows duplicate header names of mixed case,\n  // e.g. Content-Type and content-type.\n  var headers = Object.keys(headersWithDefaults).reduce(function(memo, name) {\n    memo[name.toLowerCase()] = headersWithDefaults[name];\n    return memo;\n  }, {});\n\n  this.id = requestId++;\n  this._options = options;\n\n  this.emitter = new EventEmitter();\n  this.client = client;\n  this.response = null;\n  this.error = null;\n  this.sent = false;\n  this.aborted = false;\n  this.path = options.path;\n  this.method = options.method;\n  this.origin = options.origin || client.origin;\n  this.query = options.query || {};\n  this.params = options.params || {};\n  this.body = options.body || null;\n  this.file = options.file || null;\n  this.encoding = options.encoding || 'utf8';\n  this.sendFileAs = options.sendFileAs || null;\n  this.headers = headers;\n}\n\n/**\n * Get the URL of the request.\n *\n * @param {string} [accessToken] - By default, the access token of the request's\n *   client is used.\n * @return {string}\n */\nMapiRequest.prototype.url = function url(accessToken) {\n  var url = urlUtils.prependOrigin(this.path, this.origin);\n  url = urlUtils.appendQueryObject(url, this.query);\n  var routeParams = this.params;\n  var actualAccessToken =\n    accessToken == null ? this.client.accessToken : accessToken;\n  if (actualAccessToken) {\n    url = urlUtils.appendQueryParam(url, 'access_token', actualAccessToken);\n    var accessTokenOwnerId = parseToken(actualAccessToken).user;\n    routeParams = xtend({ ownerId: accessTokenOwnerId }, routeParams);\n  }\n  url = urlUtils.interpolateRouteParams(url, routeParams);\n  return url;\n};\n\n/**\n * Send the request. Returns a Promise that resolves with a `MapiResponse`.\n * You probably want to use `response.body`.\n *\n * `send` only retrieves the first page of paginated results. You can get\n * the next page by using the `MapiResponse`'s [`nextPage`](#nextpage)\n * function, or iterate through all pages using [`eachPage`](#eachpage)\n * instead of `send`.\n *\n * @returns {Promise<MapiResponse>}\n */\nMapiRequest.prototype.send = function send() {\n  var self = this;\n\n  if (self.sent) {\n    throw new Error(\n      'This request has already been sent. Check the response and error properties. Create a new request with clone().'\n    );\n  }\n  self.sent = true;\n\n  return self.client.sendRequest(self).then(\n    function(response) {\n      self.response = response;\n      self.emitter.emit(constants.EVENT_RESPONSE, response);\n      return response;\n    },\n    function(error) {\n      self.error = error;\n      self.emitter.emit(constants.EVENT_ERROR, error);\n      throw error;\n    }\n  );\n};\n\n/**\n * Abort the request.\n *\n * Any pending `Promise` returned by [`send`](#send) will be rejected with\n * an error with `type: 'RequestAbortedError'`. If you've created a request\n * that might be aborted, you need to catch and handle such errors.\n *\n * This method will also abort any requests created while fetching subsequent\n * pages via [`eachPage`](#eachpage).\n *\n * If the request has not been sent or has already been aborted, nothing\n * will happen.\n */\nMapiRequest.prototype.abort = function abort() {\n  if (this._nextPageRequest) {\n    this._nextPageRequest.abort();\n    delete this._nextPageRequest;\n  }\n\n  if (this.response || this.error || this.aborted) return;\n\n  this.aborted = true;\n  this.client.abortRequest(this);\n};\n\n/**\n * Invoke a callback for each page of a paginated API response.\n *\n * The callback should have the following signature:\n *\n * ```js\n * (\n *   error: MapiError,\n *   response: MapiResponse,\n *   next: () => void\n * ) => void\n * ```\n *\n * **The next page will not be fetched until you've invoked the\n * `next` callback**, indicating that you're ready for it.\n *\n * @param {Function} callback\n */\nMapiRequest.prototype.eachPage = function eachPage(callback) {\n  var self = this;\n\n  function handleResponse(response) {\n    function getNextPage() {\n      delete self._nextPageRequest;\n      var nextPageRequest = response.nextPage();\n      if (nextPageRequest) {\n        self._nextPageRequest = nextPageRequest;\n        getPage(nextPageRequest);\n      }\n    }\n    callback(null, response, getNextPage);\n  }\n\n  function handleError(error) {\n    callback(error, null, function() {});\n  }\n\n  function getPage(request) {\n    request.send().then(handleResponse, handleError);\n  }\n  getPage(this);\n};\n\n/**\n * Clone this request.\n *\n * Each request can only be sent *once*. So if you'd like to send the\n * same request again, clone it and send away.\n *\n * @returns {MapiRequest} - A new `MapiRequest` configured just like this one.\n */\nMapiRequest.prototype.clone = function clone() {\n  return this._extend();\n};\n\n/**\n * @ignore\n */\nMapiRequest.prototype._extend = function _extend(options) {\n  var extendedOptions = xtend(this._options, options);\n  return new MapiRequest(this.client, extendedOptions);\n};\n\nmodule.exports = MapiRequest;\n","'use strict';\n\nvar parseLinkHeader = require('../helpers/parse-link-header');\n\n/**\n * A Mapbox API response.\n *\n * @class MapiResponse\n * @property {Object} body - The response body, parsed as JSON.\n * @property {string} rawBody - The raw response body.\n * @property {number} statusCode - The response's status code.\n * @property {Object} headers - The parsed response headers.\n * @property {Object} links - The parsed response links.\n * @property {MapiRequest} request - The response's originating `MapiRequest`.\n */\n\n/**\n * @ignore\n * @param {MapiRequest} request\n * @param {Object} responseData\n * @param {Object} responseData.headers\n * @param {string} responseData.body\n * @param {number} responseData.statusCode\n */\nfunction MapiResponse(request, responseData) {\n  this.request = request;\n  this.headers = responseData.headers;\n  this.rawBody = responseData.body;\n  this.statusCode = responseData.statusCode;\n  try {\n    this.body = JSON.parse(responseData.body || '{}');\n  } catch (parseError) {\n    this.body = responseData.body;\n  }\n  this.links = parseLinkHeader(this.headers.link);\n}\n\n/**\n * Check if there is a next page that you can fetch.\n *\n * @returns {boolean}\n */\nMapiResponse.prototype.hasNextPage = function hasNextPage() {\n  return !!this.links.next;\n};\n\n/**\n * Create a request for the next page, if there is one.\n * If there is no next page, returns `null`.\n *\n * @returns {MapiRequest | null}\n */\nMapiResponse.prototype.nextPage = function nextPage() {\n  if (!this.hasNextPage()) return null;\n  return this.request._extend({\n    path: this.links.next.url\n  });\n};\n\nmodule.exports = MapiResponse;\n","'use strict';\n\nmodule.exports = {\n  API_ORIGIN: 'https://api.mapbox.com',\n  EVENT_PROGRESS_DOWNLOAD: 'downloadProgress',\n  EVENT_PROGRESS_UPLOAD: 'uploadProgress',\n  EVENT_ERROR: 'error',\n  EVENT_RESPONSE: 'response',\n  ERROR_HTTP: 'HttpError',\n  ERROR_REQUEST_ABORTED: 'RequestAbortedError'\n};\n","'use strict';\n\nfunction parseSingleHeader(raw) {\n  var boundary = raw.indexOf(':');\n  var name = raw\n    .substring(0, boundary)\n    .trim()\n    .toLowerCase();\n  var value = raw.substring(boundary + 1).trim();\n  return {\n    name: name,\n    value: value\n  };\n}\n\n/**\n * Parse raw headers into an object with lowercase properties.\n * Does not fully parse headings into more complete data structure,\n * as larger libraries might do. Also does not deal with duplicate\n * headers because Node doesn't seem to deal with those well, so\n * we shouldn't let the browser either, for consistency.\n *\n * @param {string} raw\n * @returns {Object}\n */\nfunction parseHeaders(raw) {\n  var headers = {};\n  if (!raw) {\n    return headers;\n  }\n\n  raw\n    .trim()\n    .split(/[\\r|\\n]+/)\n    .forEach(function(rawHeader) {\n      var parsed = parseSingleHeader(rawHeader);\n      headers[parsed.name] = parsed.value;\n    });\n\n  return headers;\n}\n\nmodule.exports = parseHeaders;\n","'use strict';\n\n// Like https://github.com/thlorenz/lib/parse-link-header but without any\n// additional dependencies.\n\nfunction parseParam(param) {\n  var parts = param.match(/\\s*(.+)\\s*=\\s*\"?([^\"]+)\"?/);\n  if (!parts) return null;\n\n  return {\n    key: parts[1],\n    value: parts[2]\n  };\n}\n\nfunction parseLink(link) {\n  var parts = link.match(/<?([^>]*)>(.*)/);\n  if (!parts) return null;\n\n  var linkUrl = parts[1];\n  var linkParams = parts[2].split(';');\n  var rel = null;\n  var parsedLinkParams = linkParams.reduce(function(result, param) {\n    var parsed = parseParam(param);\n    if (!parsed) return result;\n    if (parsed.key === 'rel') {\n      if (!rel) {\n        rel = parsed.value;\n      }\n      return result;\n    }\n    result[parsed.key] = parsed.value;\n    return result;\n  }, {});\n  if (!rel) return null;\n\n  return {\n    url: linkUrl,\n    rel: rel,\n    params: parsedLinkParams\n  };\n}\n\n/**\n * Parse a Link header.\n *\n * @param {string} linkHeader\n * @returns {{\n *   [string]: {\n *     url: string,\n *     params: { [string]: string }\n *   }\n * }}\n */\nfunction parseLinkHeader(linkHeader) {\n  if (!linkHeader) return {};\n\n  return linkHeader.split(/,\\s*</).reduce(function(result, link) {\n    var parsed = parseLink(link);\n    if (!parsed) return result;\n    // rel value can be multiple whitespace-separated rels.\n    var splitRel = parsed.rel.split(/\\s+/);\n    splitRel.forEach(function(rel) {\n      if (!result[rel]) {\n        result[rel] = {\n          url: parsed.url,\n          params: parsed.params\n        };\n      }\n    });\n    return result;\n  }, {});\n}\n\nmodule.exports = parseLinkHeader;\n","'use strict';\n\n// Encode each item of an array individually. The comma\n// delimiters should not themselves be encoded.\nfunction encodeArray(arrayValue) {\n  return arrayValue.map(encodeURIComponent).join(',');\n}\n\nfunction encodeValue(value) {\n  if (Array.isArray(value)) {\n    return encodeArray(value);\n  }\n  return encodeURIComponent(String(value));\n}\n\n/**\n * Append a query parameter to a URL.\n *\n * @param {string} url\n * @param {string} key\n * @param {string|number|boolean|Array<*>>} [value] - Provide an array\n *   if the value is a list and commas between values need to be\n *   preserved, unencoded.\n * @returns {string} - Modified URL.\n */\nfunction appendQueryParam(url, key, value) {\n  if (value === false || value === null) {\n    return url;\n  }\n  var punctuation = /\\?/.test(url) ? '&' : '?';\n  var query = encodeURIComponent(key);\n  if (value !== undefined && value !== '' && value !== true) {\n    query += '=' + encodeValue(value);\n  }\n  return '' + url + punctuation + query;\n}\n\n/**\n * Derive a query string from an object and append it\n * to a URL.\n *\n * @param {string} url\n * @param {Object} [queryObject] - Values should be primitives.\n * @returns {string} - Modified URL.\n */\nfunction appendQueryObject(url, queryObject) {\n  if (!queryObject) {\n    return url;\n  }\n\n  var result = url;\n  Object.keys(queryObject).forEach(function(key) {\n    var value = queryObject[key];\n    if (value === undefined) {\n      return;\n    }\n    if (Array.isArray(value)) {\n      value = value\n        .filter(function(v) {\n          return v !== null && v !== undefined;\n        })\n        .join(',');\n    }\n    result = appendQueryParam(result, key, value);\n  });\n  return result;\n}\n\n/**\n * Prepend an origin to a URL. If the URL already has an\n * origin, do nothing.\n *\n * @param {string} url\n * @param {string} origin\n * @returns {string} - Modified URL.\n */\nfunction prependOrigin(url, origin) {\n  if (!origin) {\n    return url;\n  }\n\n  if (url.slice(0, 4) === 'http') {\n    return url;\n  }\n\n  var delimiter = url[0] === '/' ? '' : '/';\n  return '' + origin.replace(/\\/$/, '') + delimiter + url;\n}\n\n/**\n * Interpolate values into a route with express-style,\n * colon-prefixed route parameters.\n *\n * @param {string} route\n * @param {Object} [params] - Values should be primitives\n *   or arrays of primitives. Provide an array if the value\n *   is a list and commas between values need to be\n *   preserved, unencoded.\n * @returns {string} - Modified URL.\n */\nfunction interpolateRouteParams(route, params) {\n  if (!params) {\n    return route;\n  }\n  return route.replace(/\\/:([a-zA-Z0-9]+)/g, function(_, paramId) {\n    var value = params[paramId];\n    if (value === undefined) {\n      throw new Error('Unspecified route parameter ' + paramId);\n    }\n    var preppedValue = encodeValue(value);\n    return '/' + preppedValue;\n  });\n}\n\nmodule.exports = {\n  appendQueryObject: appendQueryObject,\n  appendQueryParam: appendQueryParam,\n  prependOrigin: prependOrigin,\n  interpolateRouteParams: interpolateRouteParams\n};\n","'use strict';\n\nvar xtend = require('xtend');\nvar v = require('./service-helpers/validator');\nvar pick = require('./service-helpers/pick');\nvar stringifyBooleans = require('./service-helpers/stringify-booleans');\nvar createServiceFactory = require('./service-helpers/create-service-factory');\n\n/**\n * Geocoding API service.\n *\n * Learn more about this service and its responses in\n * [the HTTP service documentation](https://docs.mapbox.com/api/search/#geocoding).\n */\nvar Geocoding = {};\n\nvar featureTypes = [\n  'country',\n  'region',\n  'postcode',\n  'district',\n  'place',\n  'locality',\n  'neighborhood',\n  'address',\n  'poi',\n  'poi.landmark'\n];\n\n/**\n * Search for a place.\n *\n * See the [public documentation](https://docs.mapbox.com/api/search/#forward-geocoding).\n *\n * @param {Object} config\n * @param {string} config.query - A place name.\n * @param {'mapbox.places'|'mapbox.places-permanent'} [config.mode=\"mapbox.places\"] - Either `mapbox.places` for ephemeral geocoding, or `mapbox.places-permanent` for storing results and batch geocoding.\n * @param {Array<string>} [config.countries] - Limits results to the specified countries.\n *   Each item in the array should be an [ISO 3166 alpha 2 country code](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2).\n * @param {Coordinates|'ip'} [config.proximity] - Bias local results based on a provided coordinate location or a user's IP address.\n * @param {Array<'country'|'region'|'postcode'|'district'|'place'|'locality'|'neighborhood'|'address'|'poi'|'poi.landmark'>} [config.types] - Filter results by feature types.\n * @param {boolean} [config.autocomplete=true] - Return autocomplete results or not.\n * @param {BoundingBox} [config.bbox] - Limit results to a bounding box.\n * @param {number} [config.limit=5] - Limit the number of results returned.\n * @param {Array<string>} [config.language] - Specify the language to use for response text and, for forward geocoding, query result weighting.\n *  Options are [IETF language tags](https://en.wikipedia.org/wiki/IETF_language_tag) comprised of a mandatory\n *  [ISO 639-1 language code](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes) and optionally one or more IETF subtags for country or script.\n * @param {boolean} [config.routing=false] - Specify whether to request additional metadata about the recommended navigation destination. Only applicable for address features.\n * @param {boolean} [config.fuzzyMatch=true] - Specify whether the Geocoding API should attempt approximate, as well as exact, matching.\n * @param {String} [config.worldview=\"us\"] - Filter results to geographic features whose characteristics are defined differently by audiences belonging to various regional, cultural, or political groups.\n * @return {MapiRequest}\n *\n * @example\n * geocodingClient.forwardGeocode({\n *   query: 'Paris, France',\n *   limit: 2\n * })\n *   .send()\n *   .then(response => {\n *     const match = response.body;\n *   });\n *\n * @example\n * // geocoding with proximity\n * geocodingClient.forwardGeocode({\n *   query: 'Paris, France',\n *   proximity: [-95.4431142, 33.6875431]\n * })\n *   .send()\n *   .then(response => {\n *     const match = response.body;\n *   });\n *\n * // geocoding with countries\n * geocodingClient.forwardGeocode({\n *   query: 'Paris, France',\n *   countries: ['fr']\n * })\n *   .send()\n *   .then(response => {\n *     const match = response.body;\n *   });\n *\n * // geocoding with bounding box\n * geocodingClient.forwardGeocode({\n *   query: 'Paris, France',\n *   bbox: [2.14, 48.72, 2.55, 48.96]\n * })\n *   .send()\n *   .then(response => {\n *     const match = response.body;\n *   });\n */\nGeocoding.forwardGeocode = function(config) {\n  v.assertShape({\n    query: v.required(v.string),\n    mode: v.oneOf('mapbox.places', 'mapbox.places-permanent'),\n    countries: v.arrayOf(v.string),\n    proximity: v.oneOf(v.coordinates, 'ip'),\n    types: v.arrayOf(v.oneOf(featureTypes)),\n    autocomplete: v.boolean,\n    bbox: v.arrayOf(v.number),\n    limit: v.number,\n    language: v.arrayOf(v.string),\n    routing: v.boolean,\n    fuzzyMatch: v.boolean,\n    worldview: v.string\n  })(config);\n\n  config.mode = config.mode || 'mapbox.places';\n\n  var query = stringifyBooleans(\n    xtend(\n      { country: config.countries },\n      pick(config, [\n        'proximity',\n        'types',\n        'autocomplete',\n        'bbox',\n        'limit',\n        'language',\n        'routing',\n        'fuzzyMatch',\n        'worldview'\n      ])\n    )\n  );\n\n  return this.client.createRequest({\n    method: 'GET',\n    path: '/geocoding/v5/:mode/:query.json',\n    params: pick(config, ['mode', 'query']),\n    query: query\n  });\n};\n\n/**\n * Search for places near coordinates.\n *\n * See the [public documentation](https://docs.mapbox.com/api/search/#reverse-geocoding).\n *\n * @param {Object} config\n * @param {Coordinates} config.query - Coordinates at which features will be searched.\n * @param {'mapbox.places'|'mapbox.places-permanent'} [config.mode=\"mapbox.places\"] - Either `mapbox.places` for ephemeral geocoding, or `mapbox.places-permanent` for storing results and batch geocoding.\n * @param {Array<string>} [config.countries] - Limits results to the specified countries.\n *   Each item in the array should be an [ISO 3166 alpha 2 country code](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2).\n * @param {Array<'country'|'region'|'postcode'|'district'|'place'|'locality'|'neighborhood'|'address'|'poi'|'poi.landmark'>} [config.types] - Filter results by feature types.\n * @param {BoundingBox} [config.bbox] - Limit results to a bounding box.\n * @param {number} [config.limit=1] - Limit the number of results returned. If using this option, you must provide a single item for `types`.\n * @param {Array<string>} [config.language] - Specify the language to use for response text and, for forward geocoding, query result weighting.\n *  Options are [IETF language tags](https://en.wikipedia.org/wiki/IETF_language_tag) comprised of a mandatory\n *  [ISO 639-1 language code](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes) and optionally one or more IETF subtags for country or script.\n * @param {'distance'|'score'} [config.reverseMode='distance'] - Set the factors that are used to sort nearby results.\n * @param {boolean} [config.routing=false] - Specify whether to request additional metadata about the recommended navigation destination. Only applicable for address features.\n * @param {String} [config.worldview=\"us\"] - Filter results to geographic features whose characteristics are defined differently by audiences belonging to various regional, cultural, or political groups.\n * @return {MapiRequest}\n *\n * @example\n * geocodingClient.reverseGeocode({\n *   query: [-95.4431142, 33.6875431]\n * })\n *   .send()\n *   .then(response => {\n *     // GeoJSON document with geocoding matches\n *     const match = response.body;\n *   });\n */\nGeocoding.reverseGeocode = function(config) {\n  v.assertShape({\n    query: v.required(v.coordinates),\n    mode: v.oneOf('mapbox.places', 'mapbox.places-permanent'),\n    countries: v.arrayOf(v.string),\n    types: v.arrayOf(v.oneOf(featureTypes)),\n    bbox: v.arrayOf(v.number),\n    limit: v.number,\n    language: v.arrayOf(v.string),\n    reverseMode: v.oneOf('distance', 'score'),\n    routing: v.boolean,\n    worldview: v.string\n  })(config);\n\n  config.mode = config.mode || 'mapbox.places';\n\n  var query = stringifyBooleans(\n    xtend(\n      { country: config.countries },\n      pick(config, [\n        'country',\n        'types',\n        'bbox',\n        'limit',\n        'language',\n        'reverseMode',\n        'routing',\n        'worldview'\n      ])\n    )\n  );\n\n  return this.client.createRequest({\n    method: 'GET',\n    path: '/geocoding/v5/:mode/:query.json',\n    params: pick(config, ['mode', 'query']),\n    query: query\n  });\n};\n\nmodule.exports = createServiceFactory(Geocoding);\n","'use strict';\n\nvar MapiClient = require('../../lib/classes/mapi-client');\n// This will create the environment-appropriate client.\nvar createClient = require('../../lib/client');\n\nfunction createServiceFactory(ServicePrototype) {\n  return function(clientOrConfig) {\n    var client;\n    if (MapiClient.prototype.isPrototypeOf(clientOrConfig)) {\n      client = clientOrConfig;\n    } else {\n      client = createClient(clientOrConfig);\n    }\n    var service = Object.create(ServicePrototype);\n    service.client = client;\n    return service;\n  };\n}\n\nmodule.exports = createServiceFactory;\n","'use strict';\n\nfunction objectMap(obj, cb) {\n  return Object.keys(obj).reduce(function(result, key) {\n    result[key] = cb(key, obj[key]);\n    return result;\n  }, {});\n}\n\nmodule.exports = objectMap;\n","'use strict';\n\n/**\n * Create a new object by picking properties off an existing object.\n * The second param can be overloaded as a callback for\n * more fine grained picking of properties.\n * @param {Object} source\n * @param {Array<string>|function(string, Object):boolean} keys\n * @returns {Object}\n */\nfunction pick(source, keys) {\n  var filter = function(key, val) {\n    return keys.indexOf(key) !== -1 && val !== undefined;\n  };\n\n  if (typeof keys === 'function') {\n    filter = keys;\n  }\n\n  return Object.keys(source)\n    .filter(function(key) {\n      return filter(key, source[key]);\n    })\n    .reduce(function(result, key) {\n      result[key] = source[key];\n      return result;\n    }, {});\n}\n\nmodule.exports = pick;\n","'use strict';\n\nvar objectMap = require('./object-map');\n\n/**\n * Stringify all the boolean values in an object, so true becomes \"true\".\n *\n * @param {Object} obj\n * @returns {Object}\n */\nfunction stringifyBoolean(obj) {\n  return objectMap(obj, function(_, value) {\n    return typeof value === 'boolean' ? JSON.stringify(value) : value;\n  });\n}\n\nmodule.exports = stringifyBoolean;\n","'use strict';\n\nvar xtend = require('xtend');\nvar v = require('@mapbox/fusspot');\n\nfunction file(value) {\n  // If we're in a browser so Blob is available, the file must be that.\n  // In Node, however, it could be a filepath or a pipeable (Readable) stream.\n  if (typeof window !== 'undefined') {\n    if (value instanceof global.Blob || value instanceof global.ArrayBuffer) {\n      return;\n    }\n    return 'Blob or ArrayBuffer';\n  }\n  if (typeof value === 'string' || value.pipe !== undefined) {\n    return;\n  }\n  return 'Filename or Readable stream';\n}\n\nfunction assertShape(validatorObj, apiName) {\n  return v.assert(v.strictShape(validatorObj), apiName);\n}\n\nfunction date(value) {\n  var msg = 'date';\n  if (typeof value === 'boolean') {\n    return msg;\n  }\n  try {\n    var date = new Date(value);\n    if (date.getTime && isNaN(date.getTime())) {\n      return msg;\n    }\n  } catch (e) {\n    return msg;\n  }\n}\n\nfunction coordinates(value) {\n  return v.tuple(v.number, v.number)(value);\n}\n\nmodule.exports = xtend(v, {\n  file: file,\n  date: date,\n  coordinates: coordinates,\n  assertShape: assertShape\n});\n","'use strict';\n\nvar base64 = require('base-64');\n\nvar tokenCache = {};\n\nfunction parseToken(token) {\n  if (tokenCache[token]) {\n    return tokenCache[token];\n  }\n\n  var parts = token.split('.');\n  var usage = parts[0];\n  var rawPayload = parts[1];\n  if (!rawPayload) {\n    throw new Error('Invalid token');\n  }\n\n  var parsedPayload = parsePaylod(rawPayload);\n\n  var result = {\n    usage: usage,\n    user: parsedPayload.u\n  };\n  if (has(parsedPayload, 'a')) result.authorization = parsedPayload.a;\n  if (has(parsedPayload, 'exp')) result.expires = parsedPayload.exp * 1000;\n  if (has(parsedPayload, 'iat')) result.created = parsedPayload.iat * 1000;\n  if (has(parsedPayload, 'scopes')) result.scopes = parsedPayload.scopes;\n  if (has(parsedPayload, 'client')) result.client = parsedPayload.client;\n  if (has(parsedPayload, 'll')) result.lastLogin = parsedPayload.ll;\n  if (has(parsedPayload, 'iu')) result.impersonator = parsedPayload.iu;\n\n  tokenCache[token] = result;\n  return result;\n}\n\nfunction parsePaylod(rawPayload) {\n  try {\n    return JSON.parse(base64.decode(rawPayload));\n  } catch (parseError) {\n    throw new Error('Invalid token');\n  }\n}\n\nfunction has(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nmodule.exports = parseToken;\n","const _colors = {\n    \"purple\":\"component\",\n    \"green\":\"data\",\n    \"default\":\"default\",\n    \"grey\":\"default\"\n}\n\nNoodl.defineNode = function(def) {\n    const _def = {};\n\n    _def.name = def.name;\n    _def.displayNodeName = def.displayName;\n    _def.usePortAsLabel = def.useInputAsLabel;\n    _def.color = _colors[def.color || 'default'];\n    _def.category = def.category || 'Modules';\n    _def.getInspectInfo = def.getInspectInfo;\n    _def.docs = def.docs;\n    \n    _def.initialize = function() {\n        this.inputs = {};\n        var _outputs = this.outputs = {};\n        var _this = this;\n\n        // Function for quickly setting outputs\n        this.setOutputs = function(o) {\n            for(var key in o) {\n                _outputs[key] = o[key];\n                _this.flagOutputDirty(key);\n            }\n        }\n\n        // Sending warnings\n        this.clearWarnings = (function() {\n            if(this.context.editorConnection && this.nodeScope && this.nodeScope.componentOwner)\n                this.context.editorConnection.clearWarnings(this.nodeScope.componentOwner.name, this.id);\n        }).bind(this);\n\n        this.sendWarning = (function(name,message) {\n            if(this.context.editorConnection && this.nodeScope && this.nodeScope.componentOwner)\n                this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name, this.id, name, {\n                    message: message\n                });\n        }).bind(this);\n\n        if(typeof def.initialize === 'function')\n            def.initialize.apply(this);\n    }\n    _def.inputs = {};\n    _def.outputs = {};\n\n    for(var key in def.inputs) {\n        _def.inputs[key] = {\n            type:(typeof def.inputs[key] === 'object')?def.inputs[key].type:def.inputs[key],\n            displayName:(typeof def.inputs[key] === 'object')?def.inputs[key].displayName:undefined,\n            group:(typeof def.inputs[key] === 'object')?def.inputs[key].group:undefined,\n            default:(typeof def.inputs[key] === 'object')?def.inputs[key].default:undefined,\n            set:(function() { const _key = key; return function(value) {\n                this.inputs[_key] = value;\n                if(def.changed && typeof def.changed[_key] === 'function') {\n                    def.changed[_key].apply(this,[value]);\n                }\n            }})()\n        }\n    }\n\n    for(var key in def.signals) {\n        _def.inputs[key] = {\n            type:'signal',\n            displayName:(typeof def.signals[key] === 'object')?def.signals[key].displayName:undefined,\n            group:(typeof def.signals[key] === 'object')?def.signals[key].group:undefined,\n            valueChangedToTrue:(function() { const _key = key; return function() {\n                const _fn = (typeof def.signals[_key] === 'object')?def.signals[_key].signal:def.signals[_key]\n                if(typeof _fn === 'function') {\n                    this.scheduleAfterInputsHaveUpdated(() => {\n                        _fn.apply(this);\n                    }) \n                }\n            }})()\n        }\n    }\n\n    for(var key in def.outputs) {\n        if(def.outputs[key] === 'signal') {\n            _def.outputs[key] = {\n                type:'signal',\n            }\n        }\n        else {\n            _def.outputs[key] = {\n                type:(typeof def.outputs[key] === 'object')?def.outputs[key].type:def.outputs[key],\n                displayName:(typeof def.outputs[key] === 'object')?def.outputs[key].displayName:undefined,\n                group:(typeof def.outputs[key] === 'object')?def.outputs[key].group:undefined,\n                getter:(function() { const _key = key; return function() {\n                    return this.outputs[_key];\n                }})()\n            }\n        }\n    }\n\n    _def.methods = _def.prototypeExtensions = {};\n    for(var key in def.methods) {\n        _def.prototypeExtensions[key] = def.methods[key];\n    }\n    if(_def.methods.onNodeDeleted) { // Override the onNodeDeleted if required\n        _def.methods._onNodeDeleted = function() {\n            this.__proto__.__proto__._onNodeDeleted.call(this);\n            _def.methods.onNodeDeleted.value.call(this);\n        }\n    }\n\n    return {node:_def,setup:def.setup};\n}\n\nNoodl.defineCollectionNode = function(def) {\n    const _def = {\n        name:def.name,\n        category:def.category,\n        color:'data',\n        inputs:def.inputs,\n        outputs:Object.assign({\n            Items:'array',\n            'Fetch Started':'signal',\n            'Fetch Completed':'signal'\n        },def.outputs||{}),\n        signals:Object.assign({\n            Fetch:function() {\n                var _this = this;\n                this.sendSignalOnOutput('Fetch Started');\n                var a = def.fetch.call(this,function() {\n                    _this.sendSignalOnOutput('Fetch Completed');\n                });\n                this.setOutputs({\n                    Items:a\n                })\n            }\n        },def.signals||{})\n    }\n\n    return Noodl.defineNode(_def);\n}\n\nNoodl.defineModelNode = function(def) {\n    const _def = {\n        name:def.name,\n        category:def.category,\n        color:'data',\n        inputs:{\n            Id:'string'\n        },\n        outputs:{\n            Fetched:'signal'\n        },\n        changed:{\n            Id:function(value) {\n                if(this._object && this._changeListener)\n                    this._object.off('change',this._changeListener)\n                \n                this._object = Noodl.Object.get(value);\n                this._changeListener = (name,value) => {\n                    const _o = {}\n                    _o[name] = value;\n                    this.setOutputs(_o)\n                }\n                this._object.on('change',this._changeListener)\n\n                this.setOutputs(this._object.data);\n                this.sendSignalOnOutput('Fetched');\n            }\n        },\n        initialize:function() {\n\n        }\n    }\n\n    for(var key in def.properties) {\n        _def.inputs[key] = def.properties[key];\n        _def.outputs[key] = def.properties[key];\n        _def.changed[key] = (function() { const _key = key; return function(value) {\n            if(!this._object) return;\n            this._object.set(_key,value);\n        }})()\n    }\n \n    return Noodl.defineNode(_def);\n}\n\nNoodl.defineReactNode = function(def) {\n    var _def = Noodl.defineNode(def);\n\n    _def.node.getReactComponent = def.getReactComponent;\n    _def.node.inputProps = def.inputProps;\n    _def.node.inputCss = def.inputCss;\n    _def.node.outputProps = def.outputProps;\n    _def.node.setup = def.setup;\n    _def.node.frame = def.frame;\n\n    return _def.node;\n}\n\nmodule.exports = Noodl;","/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */\n;(function(root) {\n\n\t// Detect free variables `exports`.\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`.\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code, and use\n\t// it as `root`.\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar InvalidCharacterError = function(message) {\n\t\tthis.message = message;\n\t};\n\tInvalidCharacterError.prototype = new Error;\n\tInvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\n\tvar error = function(message) {\n\t\t// Note: the error messages used throughout this file match those used by\n\t\t// the native `atob`/`btoa` implementation in Chromium.\n\t\tthrow new InvalidCharacterError(message);\n\t};\n\n\tvar TABLE = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\t// http://whatwg.org/html/common-microsyntaxes.html#space-character\n\tvar REGEX_SPACE_CHARACTERS = /[\\t\\n\\f\\r ]/g;\n\n\t// `decode` is designed to be fully compatible with `atob` as described in the\n\t// HTML Standard. http://whatwg.org/html/webappapis.html#dom-windowbase64-atob\n\t// The optimized base64-decoding algorithm used is based on @atk’s excellent\n\t// implementation. https://gist.github.com/atk/1020396\n\tvar decode = function(input) {\n\t\tinput = String(input)\n\t\t\t.replace(REGEX_SPACE_CHARACTERS, '');\n\t\tvar length = input.length;\n\t\tif (length % 4 == 0) {\n\t\t\tinput = input.replace(/==?$/, '');\n\t\t\tlength = input.length;\n\t\t}\n\t\tif (\n\t\t\tlength % 4 == 1 ||\n\t\t\t// http://whatwg.org/C#alphanumeric-ascii-characters\n\t\t\t/[^+a-zA-Z0-9/]/.test(input)\n\t\t) {\n\t\t\terror(\n\t\t\t\t'Invalid character: the string to be decoded is not correctly encoded.'\n\t\t\t);\n\t\t}\n\t\tvar bitCounter = 0;\n\t\tvar bitStorage;\n\t\tvar buffer;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\twhile (++position < length) {\n\t\t\tbuffer = TABLE.indexOf(input.charAt(position));\n\t\t\tbitStorage = bitCounter % 4 ? bitStorage * 64 + buffer : buffer;\n\t\t\t// Unless this is the first of a group of 4 characters…\n\t\t\tif (bitCounter++ % 4) {\n\t\t\t\t// …convert the first 8 bits to a single ASCII character.\n\t\t\t\toutput += String.fromCharCode(\n\t\t\t\t\t0xFF & bitStorage >> (-2 * bitCounter & 6)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t};\n\n\t// `encode` is designed to be fully compatible with `btoa` as described in the\n\t// HTML Standard: http://whatwg.org/html/webappapis.html#dom-windowbase64-btoa\n\tvar encode = function(input) {\n\t\tinput = String(input);\n\t\tif (/[^\\0-\\xFF]/.test(input)) {\n\t\t\t// Note: no need to special-case astral symbols here, as surrogates are\n\t\t\t// matched, and the input is supposed to only contain ASCII anyway.\n\t\t\terror(\n\t\t\t\t'The string to be encoded contains characters outside of the ' +\n\t\t\t\t'Latin1 range.'\n\t\t\t);\n\t\t}\n\t\tvar padding = input.length % 3;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\tvar a;\n\t\tvar b;\n\t\tvar c;\n\t\tvar d;\n\t\tvar buffer;\n\t\t// Make sure any padding is handled outside of the loop.\n\t\tvar length = input.length - padding;\n\n\t\twhile (++position < length) {\n\t\t\t// Read three bytes, i.e. 24 bits.\n\t\t\ta = input.charCodeAt(position) << 16;\n\t\t\tb = input.charCodeAt(++position) << 8;\n\t\t\tc = input.charCodeAt(++position);\n\t\t\tbuffer = a + b + c;\n\t\t\t// Turn the 24 bits into four chunks of 6 bits each, and append the\n\t\t\t// matching character for each of them to the output.\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 18 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 12 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 6 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer & 0x3F)\n\t\t\t);\n\t\t}\n\n\t\tif (padding == 2) {\n\t\t\ta = input.charCodeAt(position) << 8;\n\t\t\tb = input.charCodeAt(++position);\n\t\t\tbuffer = a + b;\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 10) +\n\t\t\t\tTABLE.charAt((buffer >> 4) & 0x3F) +\n\t\t\t\tTABLE.charAt((buffer << 2) & 0x3F) +\n\t\t\t\t'='\n\t\t\t);\n\t\t} else if (padding == 1) {\n\t\t\tbuffer = input.charCodeAt(position);\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 2) +\n\t\t\t\tTABLE.charAt((buffer << 4) & 0x3F) +\n\t\t\t\t'=='\n\t\t\t);\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tvar base64 = {\n\t\t'encode': encode,\n\t\t'decode': decode,\n\t\t'version': '0.1.0'\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn base64;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = base64;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (var key in base64) {\n\t\t\t\tbase64.hasOwnProperty(key) && (freeExports[key] = base64[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.base64 = base64;\n\t}\n\n}(this));\n","exports = module.exports = require(\"../../../css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"\\n/* Override default control style */\\n.mapbox-gl-draw_ctrl-bottom-left,\\n.mapbox-gl-draw_ctrl-top-left {\\n  margin-left:0;\\n  border-radius:0 4px 4px 0;\\n}\\n.mapbox-gl-draw_ctrl-top-right,\\n.mapbox-gl-draw_ctrl-bottom-right {\\n  margin-right:0;\\n  border-radius:4px 0 0 4px;\\n}\\n\\n.mapbox-gl-draw_ctrl-draw-btn {\\n  border-color:rgba(0,0,0,0.9);\\n  color:rgba(255,255,255,0.5);\\n  width:30px;\\n  height:30px;\\n}\\n\\n.mapbox-gl-draw_ctrl-draw-btn.active,\\n.mapbox-gl-draw_ctrl-draw-btn.active:hover {\\n  background-color:rgb(0 0 0/5%);\\n}\\n.mapbox-gl-draw_ctrl-draw-btn {\\n  background-repeat: no-repeat;\\n  background-position: center;\\n}\\n\\n.mapbox-gl-draw_point {\\n  background-image: url('data:image/svg+xml;utf8,%3Csvg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"20\\\" height=\\\"20\\\">%3Cpath d=\\\"m10 2c-3.3 0-6 2.7-6 6s6 9 6 9 6-5.7 6-9-2.7-6-6-6zm0 2c2.1 0 3.8 1.7 3.8 3.8 0 1.5-1.8 3.9-2.9 5.2h-1.7c-1.1-1.4-2.9-3.8-2.9-5.2-.1-2.1 1.6-3.8 3.7-3.8z\\\"/>%3C/svg>');\\n}\\n.mapbox-gl-draw_polygon {\\n  background-image: url('data:image/svg+xml;utf8,%3Csvg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"20\\\" height=\\\"20\\\">%3Cpath d=\\\"m15 12.3v-4.6c.6-.3 1-1 1-1.7 0-1.1-.9-2-2-2-.7 0-1.4.4-1.7 1h-4.6c-.3-.6-1-1-1.7-1-1.1 0-2 .9-2 2 0 .7.4 1.4 1 1.7v4.6c-.6.3-1 1-1 1.7 0 1.1.9 2 2 2 .7 0 1.4-.4 1.7-1h4.6c.3.6 1 1 1.7 1 1.1 0 2-.9 2-2 0-.7-.4-1.4-1-1.7zm-8-.3v-4l1-1h4l1 1v4l-1 1h-4z\\\"/>%3C/svg>');\\n}\\n.mapbox-gl-draw_line {\\n  background-image: url('data:image/svg+xml;utf8,%3Csvg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"20\\\" height=\\\"20\\\">%3Cpath d=\\\"m13.5 3.5c-1.4 0-2.5 1.1-2.5 2.5 0 .3 0 .6.2.9l-3.8 3.8c-.3-.1-.6-.2-.9-.2-1.4 0-2.5 1.1-2.5 2.5s1.1 2.5 2.5 2.5 2.5-1.1 2.5-2.5c0-.3 0-.6-.2-.9l3.8-3.8c.3.1.6.2.9.2 1.4 0 2.5-1.1 2.5-2.5s-1.1-2.5-2.5-2.5z\\\"/>%3C/svg>');\\n}\\n.mapbox-gl-draw_trash {\\n  background-image: url('data:image/svg+xml;utf8,%3Csvg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"20\\\" height=\\\"20\\\">%3Cpath d=\\\"M10,3.4 c-0.8,0-1.5,0.5-1.8,1.2H5l-1,1v1h12v-1l-1-1h-3.2C11.5,3.9,10.8,3.4,10,3.4z M5,8v7c0,1,1,2,2,2h6c1,0,2-1,2-2V8h-2v5.5h-1.5V8h-3 v5.5H7V8H5z\\\"/>%3C/svg>');\\n}\\n.mapbox-gl-draw_uncombine {\\n  background-image: url('data:image/svg+xml;utf8,%3Csvg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"20\\\" height=\\\"20\\\">%3Cpath d=\\\"m12 2c-.3 0-.5.1-.7.3l-1 1c-.4.4-.4 1 0 1.4l1 1c.4.4 1 .4 1.4 0l1-1c.4-.4.4-1 0-1.4l-1-1c-.2-.2-.4-.3-.7-.3zm4 4c-.3 0-.5.1-.7.3l-1 1c-.4.4-.4 1 0 1.4l1 1c.4.4 1 .4 1.4 0l1-1c.4-.4.4-1 0-1.4l-1-1c-.2-.2-.4-.3-.7-.3zm-7 1c-1 0-1 1-.5 1.5.3.3 1 1 1 1l-1 1s-.5.5 0 1 1 0 1 0l1-1 1 1c.5.5 1.5.5 1.5-.5v-4zm-5 3c-.3 0-.5.1-.7.3l-1 1c-.4.4-.4 1 0 1.4l4.9 4.9c.4.4 1 .4 1.4 0l1-1c.4-.4.4-1 0-1.4l-4.9-4.9c-.1-.2-.4-.3-.7-.3z\\\"/>%3C/svg>');\\n}\\n.mapbox-gl-draw_combine {\\n  background-image: url('data:image/svg+xml;utf8,%3Csvg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"20\\\" height=\\\"20\\\">%3Cpath d=\\\"M12.1,2c-0.3,0-0.5,0.1-0.7,0.3l-1,1c-0.4,0.4-0.4,1,0,1.4l4.9,4.9c0.4,0.4,1,0.4,1.4,0l1-1 c0.4-0.4,0.4-1,0-1.4l-4.9-4.9C12.6,2.1,12.3,2,12.1,2z M8,8C7,8,7,9,7.5,9.5c0.3,0.3,1,1,1,1l-1,1c0,0-0.5,0.5,0,1s1,0,1,0l1-1l1,1 C11,13,12,13,12,12V8H8z M4,10c-0.3,0-0.5,0.1-0.7,0.3l-1,1c-0.4,0.4-0.4,1,0,1.4l1,1c0.4,0.4,1,0.4,1.4,0l1-1c0.4-0.4,0.4-1,0-1.4 l-1-1C4.5,10.1,4.3,10,4,10z M8,14c-0.3,0-0.5,0.1-0.7,0.3l-1,1c-0.4,0.4-0.4,1,0,1.4l1,1c0.4,0.4,1,0.4,1.4,0l1-1 c0.4-0.4,0.4-1,0-1.4l-1-1C8.5,14.1,8.3,14,8,14z\\\"/>%3C/svg>');\\n}\\n\\n.mapboxgl-map.mouse-pointer .mapboxgl-canvas-container.mapboxgl-interactive {\\n  cursor: pointer;\\n}\\n.mapboxgl-map.mouse-move .mapboxgl-canvas-container.mapboxgl-interactive {\\n  cursor: move;\\n}\\n.mapboxgl-map.mouse-add .mapboxgl-canvas-container.mapboxgl-interactive {\\n  cursor: crosshair;\\n}\\n.mapboxgl-map.mouse-move.mode-direct_select .mapboxgl-canvas-container.mapboxgl-interactive {\\n  cursor: grab;\\n  cursor: -moz-grab;\\n  cursor: -webkit-grab;\\n}\\n.mapboxgl-map.mode-direct_select.feature-vertex.mouse-move .mapboxgl-canvas-container.mapboxgl-interactive {\\n  cursor: move;\\n}\\n.mapboxgl-map.mode-direct_select.feature-midpoint.mouse-pointer .mapboxgl-canvas-container.mapboxgl-interactive {\\n  cursor: cell;\\n}\\n.mapboxgl-map.mode-direct_select.feature-feature.mouse-move .mapboxgl-canvas-container.mapboxgl-interactive {\\n  cursor: move;\\n}\\n.mapboxgl-map.mode-static.mouse-pointer  .mapboxgl-canvas-container.mapboxgl-interactive {\\n  cursor: grab;\\n  cursor: -moz-grab;\\n  cursor: -webkit-grab;\\n}\\n\\n.mapbox-gl-draw_boxselect {\\n    pointer-events: none;\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    width: 0;\\n    height: 0;\\n    background: rgba(0,0,0,.1);\\n    border: 2px dotted #fff;\\n    opacity: 0.5;\\n}\\n\", \"\"]);\n\n","exports = module.exports = require(\"../../../css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"/* Basics */\\n.mapboxgl-ctrl-geocoder,\\n.mapboxgl-ctrl-geocoder *,\\n.mapboxgl-ctrl-geocoder *:after,\\n.mapboxgl-ctrl-geocoder *:before {\\n  box-sizing: border-box;\\n}\\n\\n.mapboxgl-ctrl-geocoder {\\n  font-size: 18px;\\n  line-height: 24px;\\n  font-family: \\\"Open Sans\\\", -apple-system, BlinkMacSystemFont, \\\"Helvetica Neue\\\", Arial, Helvetica, sans-serif;\\n  position: relative;\\n  background-color: #fff;\\n  width: 100%;\\n  min-width: 240px;\\n  z-index: 1;\\n  border-radius: 4px;\\n  transition: width .25s, min-width .25s;\\n}\\n\\n.mapboxgl-ctrl-geocoder--input {\\n  font: inherit;\\n  width: 100%;\\n  border: 0;\\n  background-color: transparent;\\n  margin: 0;\\n  height: 50px;\\n  color: #404040; /* fallback */\\n  color: rgba(0, 0, 0, 0.75);\\n  padding: 6px 45px;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n  overflow: hidden;\\n}\\n\\n.mapboxgl-ctrl-geocoder--input::-ms-clear {\\n  display: none; /* hide input clear button in IE */\\n}\\n\\n.mapboxgl-ctrl-geocoder--input:focus {\\n  color: #404040; /* fallback */\\n  color: rgba(0, 0, 0, 0.75);\\n  outline: 0;\\n  box-shadow: none;\\n  outline: thin dotted;\\n}\\n\\n.mapboxgl-ctrl-geocoder .mapboxgl-ctrl-geocoder--pin-right > * {\\n  z-index: 2;\\n  position: absolute;\\n  right: 8px;\\n  top: 7px;\\n  display: none;\\n}\\n\\n.mapboxgl-ctrl-geocoder,\\n.mapboxgl-ctrl-geocoder .suggestions {\\n  box-shadow: 0 0 10px 2px rgba(0,0,0,.1);\\n}\\n\\n/* Collapsed */\\n.mapboxgl-ctrl-geocoder.mapboxgl-ctrl-geocoder--collapsed {\\n  width: 50px;\\n  min-width: 50px;\\n  transition: width .25s, min-width .25s;\\n}\\n\\n/* Suggestions */\\n.mapboxgl-ctrl-geocoder .suggestions {\\n  background-color: #fff;\\n  border-radius: 4px;\\n  left: 0;\\n  list-style: none;\\n  margin: 0;\\n  padding: 0;\\n  position: absolute;\\n  width: 100%;\\n  top: 110%; /* fallback */\\n  top: calc(100% + 6px);\\n  z-index: 1000;\\n  overflow: hidden;\\n  font-size: 15px;\\n}\\n\\n.mapboxgl-ctrl-bottom-left .suggestions,\\n.mapboxgl-ctrl-bottom-right .suggestions {\\n  top: auto;\\n  bottom: 100%;\\n}\\n\\n.mapboxgl-ctrl-geocoder .suggestions > li > a {\\n  cursor: default;\\n  display: block;\\n  padding: 6px 12px;\\n  color: #404040;\\n}\\n\\n.mapboxgl-ctrl-geocoder .suggestions > .active > a,\\n.mapboxgl-ctrl-geocoder .suggestions > li > a:hover {\\n  color: #404040;\\n  background-color: #f3f3f3;\\n  text-decoration: none;\\n  cursor: pointer;\\n}\\n\\n.mapboxgl-ctrl-geocoder--suggestion-title {\\n  font-weight: bold;\\n}\\n\\n.mapboxgl-ctrl-geocoder--suggestion-title,\\n.mapboxgl-ctrl-geocoder--suggestion-address {\\n  text-overflow: ellipsis;\\n  overflow: hidden;\\n  white-space: nowrap;\\n}\\n\\n/* Icons */\\n.mapboxgl-ctrl-geocoder--icon {\\n  display: inline-block;\\n  vertical-align: middle;\\n  speak: none;\\n  fill: #757575;\\n  top: 15px;\\n}\\n\\n.mapboxgl-ctrl-geocoder--icon-search {\\n  position: absolute;\\n  top: 13px;\\n  left: 12px;\\n  width: 23px;\\n  height: 23px;\\n}\\n\\n.mapboxgl-ctrl-geocoder--button {\\n  padding: 0;\\n  margin: 0;\\n  border: none;\\n  cursor: pointer;\\n  background: #fff;\\n  line-height: 1;\\n}\\n\\n.mapboxgl-ctrl-geocoder--icon-close {\\n  width: 20px;\\n  height: 20px;\\n  margin-top: 8px;\\n  margin-right: 3px;\\n}\\n\\n.mapboxgl-ctrl-geocoder--button:hover .mapboxgl-ctrl-geocoder--icon-close {\\n  fill: #909090;\\n}\\n\\n.mapboxgl-ctrl-geocoder--icon-geolocate {\\n  width: 22px;\\n  height: 22px;\\n  margin-top: 6px;\\n  margin-right: 3px;\\n}\\n\\n.mapboxgl-ctrl-geocoder--icon-loading {\\n  width: 26px;\\n  height: 26px;\\n  margin-top: 5px;\\n  margin-right: 0px;\\n  -moz-animation: rotate 0.8s infinite cubic-bezier(0.45, 0.05, 0.55, 0.95);\\n  -webkit-animation: rotate 0.8s infinite cubic-bezier(0.45, 0.05, 0.55, 0.95);\\n  animation: rotate 0.8s infinite cubic-bezier(0.45, 0.05, 0.55, 0.95);\\n}\\n\\n.mapboxgl-ctrl-geocoder--powered-by {\\n  display: block;\\n  float: left;\\n  padding: 6px 12px;\\n  padding-bottom: 9px;\\n  font-size: 13px;\\n}\\n\\n.mapboxgl-ctrl-geocoder--powered-by a {\\n  color: #909090;\\n}\\n\\n.mapboxgl-ctrl-geocoder--powered-by a:not(:hover) {\\n  text-decoration: none;  \\n}\\n\\n/* Animation */\\n@-webkit-keyframes rotate {\\n  from {\\n    -webkit-transform: rotate(0);\\n    transform: rotate(0);\\n  }\\n  to {\\n    -webkit-transform: rotate(360deg);\\n    transform: rotate(360deg);\\n  }\\n}\\n\\n@keyframes rotate {\\n  from {\\n    -webkit-transform: rotate(0);\\n    transform: rotate(0);\\n  }\\n  to {\\n    -webkit-transform: rotate(360deg);\\n    transform: rotate(360deg);\\n  }\\n}\\n\\n/* Media queries*/\\n@media screen and (min-width: 640px) {\\n\\n  .mapboxgl-ctrl-geocoder.mapboxgl-ctrl-geocoder--collapsed {\\n    width: 36px;\\n    min-width: 36px;\\n  }\\n\\n  .mapboxgl-ctrl-geocoder {\\n    width: 33.3333%;\\n    font-size: 15px;\\n    line-height: 20px;\\n    max-width: 360px;\\n  }\\n  .mapboxgl-ctrl-geocoder .suggestions {\\n    font-size: 13px;\\n  }\\n\\n  .mapboxgl-ctrl-geocoder--icon {\\n    top: 8px;\\n  }\\n\\n  .mapboxgl-ctrl-geocoder--icon-close {\\n    width: 16px;\\n    height: 16px;\\n    margin-top: 3px;\\n    margin-right: 0;\\n  }\\n\\n  .mapboxgl-ctrl-geocoder--icon-geolocate {\\n    width: 18px;\\n    height: 18px;\\n    margin-top: 2px;\\n    margin-right: 0;\\n  }\\n\\n  .mapboxgl-ctrl-geocoder--icon-search {\\n    left: 7px;\\n    width: 20px;\\n    height: 20px;\\n  }\\n\\n  .mapboxgl-ctrl-geocoder--input {\\n    height: 36px;\\n    padding: 6px 35px;\\n  }\\n\\n  .mapboxgl-ctrl-geocoder--icon-loading {\\n    width: 26px;\\n    height: 26px;\\n    margin-top: -2px;\\n    margin-right: -5px;\\n  }\\n\\n  .mapbox-gl-geocoder--error{\\n    color:#909090;\\n    padding: 6px 12px;\\n    font-size: 16px;\\n    text-align: center;\\n  }\\n\\n  .mapboxgl-ctrl-geocoder--powered-by {\\n    font-size: 11px !important;\\n  }\\n}\\n\", \"\"]);\n\n","exports = module.exports = require(\"../../css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".mapboxgl-map{-webkit-tap-highlight-color:rgb(0 0 0/0);font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative}.mapboxgl-canvas{left:0;position:absolute;top:0}.mapboxgl-map:-webkit-full-screen{height:100%;width:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:grab;-webkit-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{pointer-events:none;position:absolute;z-index:2}.mapboxgl-ctrl-top-left{left:0;top:0}.mapboxgl-ctrl-top-right{right:0;top:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{bottom:0;right:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{float:left;margin:10px 0 0 10px}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{float:right;margin:10px 10px 0 0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{float:left;margin:0 0 10px 10px}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{float:right;margin:0 10px 10px 0}.mapboxgl-ctrl-group{background:#fff;border-radius:4px}.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{background-color:transparent;border:0;box-sizing:border-box;cursor:pointer;display:block;height:29px;outline:none;overflow:hidden;padding:0;width:29px}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{background-position:50%;background-repeat:no-repeat;display:block;height:100%;width:100%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl-group button:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:only-child{border-radius:inherit}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgb(0 0 0/5%)}.mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\\\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\\\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\\\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\\\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23000'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\\\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23000'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\\\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\\\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\\\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\\\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\\\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23000'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\\\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23000'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\\\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath id='south' d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\\\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath id='south' d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E\\\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23000'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath id='south' d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\\\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E%3C/svg%3E\\\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' fill='%23f00'/%3E%3C/svg%3E\\\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E%3C/svg%3E\\\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E%3C/svg%3E\\\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2' display='none'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E%3C/svg%3E\\\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2' display='none'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E%3C/svg%3E\\\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E%3C/svg%3E\\\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' fill='%23f00'/%3E%3C/svg%3E\\\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E%3C/svg%3E\\\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E%3C/svg%3E\\\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2' display='none'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E%3C/svg%3E\\\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2' display='none'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E%3C/svg%3E\\\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23000'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E%3C/svg%3E\\\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' fill='%23f00'/%3E%3C/svg%3E\\\")}}@keyframes mapboxgl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='logo' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='text' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='clip'%3E%3Crect x='0' y='0' width='100%25' height='100%25' fill='white'/%3E%3Cuse xlink:href='%23logo'/%3E%3Cuse xlink:href='%23text'/%3E%3C/mask%3E%3Cg id='outline' opacity='0.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23clip)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23text' mask='url(%23clip)'/%3E%3C/g%3E%3Cg id='fill' opacity='0.9' fill='%23fff'%3E%3Cuse xlink:href='%23logo'/%3E%3Cuse xlink:href='%23text'/%3E%3C/g%3E%3C/svg%3E\\\");background-repeat:no-repeat;cursor:pointer;display:block;height:23px;margin:0 0 -4px -4px;overflow:hidden;width:88px}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='logo' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='text' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='clip'%3E%3Crect x='0' y='0' width='100%25' height='100%25' fill='white'/%3E%3Cuse xlink:href='%23logo'/%3E%3Cuse xlink:href='%23text'/%3E%3C/mask%3E%3Cg id='outline' opacity='1' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23clip)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23text' mask='url(%23clip)'/%3E%3C/g%3E%3Cg id='fill' opacity='1' fill='%23fff'%3E%3Cuse xlink:href='%23logo'/%3E%3Cuse xlink:href='%23text'/%3E%3C/g%3E%3C/svg%3E\\\")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='logo' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='text' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='clip'%3E%3Crect x='0' y='0' width='100%25' height='100%25' fill='white'/%3E%3Cuse xlink:href='%23logo'/%3E%3Cuse xlink:href='%23text'/%3E%3C/mask%3E%3Cg id='outline' opacity='1' stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23clip)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23text' mask='url(%23clip)'/%3E%3C/g%3E%3Cg id='fill' opacity='1' fill='%23000'%3E%3Cuse xlink:href='%23logo'/%3E%3Cuse xlink:href='%23text'/%3E%3C/g%3E%3C/svg%3E\\\")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{background-color:hsla(0,0%,100%,.5);margin:0;padding:0 5px}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{background-color:#fff;border-radius:12px;margin:10px;min-height:20px;padding:2px 24px 2px 0;position:relative}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{border-radius:12px;padding:2px 8px 2px 28px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{background-color:hsla(0,0%,100%,.5);background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E\\\");border:0;border-radius:12px;box-sizing:border-box;cursor:pointer;display:none;height:24px;outline:none;position:absolute;right:0;top:0;width:24px}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgb(0 0 0/5%)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{right:0;top:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{left:0;top:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E\\\")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E\\\")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);border:2px solid #333;border-top:#333;box-sizing:border-box;color:#333;font-size:10px;padding:0 5px;white-space:nowrap}.mapboxgl-popup{display:flex;left:0;pointer-events:none;position:absolute;top:0;will-change:transform}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{flex-direction:column-reverse}.mapboxgl-popup-anchor-left{flex-direction:row}.mapboxgl-popup-anchor-right{flex-direction:row-reverse}.mapboxgl-popup-tip{border:10px solid transparent;height:0;width:0;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{align-self:center;border-bottom-color:#fff;border-top:none}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{align-self:flex-start;border-bottom-color:#fff;border-left:none;border-top:none}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{align-self:flex-end;border-bottom-color:#fff;border-right:none;border-top:none}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{align-self:center;border-left-color:#fff;border-right:none}.mapboxgl-popup-close-button{background-color:transparent;border:0;border-radius:0 3px 0 0;cursor:pointer;position:absolute;right:0;top:0}.mapboxgl-popup-close-button:hover{background-color:rgb(0 0 0/5%)}.mapboxgl-popup-content{background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto;position:relative}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{left:0;opacity:1;position:absolute;top:0;transition:opacity .2s;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;border-radius:50%;height:15px;width:15px}.mapboxgl-user-location-dot:before{animation:mapboxgl-user-location-dot-pulse 2s infinite;content:\\\"\\\";position:absolute}.mapboxgl-user-location-dot:after{border:2px solid #fff;border-radius:50%;box-shadow:0 0 3px rgba(0,0,0,.35);box-sizing:border-box;content:\\\"\\\";height:19px;left:-2px;position:absolute;top:-2px;width:19px}.mapboxgl-user-location-show-heading .mapboxgl-user-location-heading{height:0;width:0}.mapboxgl-user-location-show-heading .mapboxgl-user-location-heading:after,.mapboxgl-user-location-show-heading .mapboxgl-user-location-heading:before{border-bottom:7.5px solid #4aa1eb;content:\\\"\\\";position:absolute}.mapboxgl-user-location-show-heading .mapboxgl-user-location-heading:before{border-left:7.5px solid transparent;transform:translateY(-28px) skewY(-20deg)}.mapboxgl-user-location-show-heading .mapboxgl-user-location-heading:after{border-right:7.5px solid transparent;transform:translate(7.5px,-28px) skewY(20deg)}@keyframes mapboxgl-user-location-dot-pulse{0%{opacity:1;transform:scale(1)}70%{opacity:0;transform:scale(3)}to{opacity:0;transform:scale(1)}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:#1da1f233;border-radius:100%;height:1px;width:1px}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{background:#fff;border:2px dotted #202020;height:0;left:0;opacity:.5;position:absolute;top:0;width:0}@media print{.mapbox-improve-map{display:none}}.mapboxgl-scroll-zoom-blocker,.mapboxgl-touch-pan-blocker{align-items:center;background:rgba(0,0,0,.7);color:#fff;display:flex;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif;height:100%;justify-content:center;left:0;opacity:0;pointer-events:none;position:absolute;text-align:center;top:0;transition:opacity .75s ease-in-out;transition-delay:1s;width:100%}.mapboxgl-scroll-zoom-blocker-show,.mapboxgl-touch-pan-blocker-show{opacity:1;transition:opacity .1s ease-in-out}.mapboxgl-canvas-container.mapboxgl-touch-pan-blocker-override.mapboxgl-scrollable-page,.mapboxgl-canvas-container.mapboxgl-touch-pan-blocker-override.mapboxgl-scrollable-page .mapboxgl-canvas{touch-action:pan-x pan-y}\", \"\"]);\n\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return '@media ' + item[2] + '{' + content + '}';\n      } else {\n        return content;\n      }\n    }).join('');\n  }; // import a list of modules into the list\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    for (var i = 0; i < this.length; i++) {\n      var id = this[i][0];\n\n      if (id != null) {\n        alreadyImportedModules[id] = true;\n      }\n    }\n\n    for (i = 0; i < modules.length; i++) {\n      var item = modules[i]; // skip already imported module\n      // this implementation is not 100% perfect for weird media query combinations\n      // when a module is imported multiple times with different media queries.\n      // I hope this will never occur (Hey this way we have smaller bundles)\n\n      if (item[0] == null || !alreadyImportedModules[item[0]]) {\n        if (mediaQuery && !item[2]) {\n          item[2] = mediaQuery;\n        } else if (mediaQuery) {\n          item[2] = '(' + item[2] + ') and (' + mediaQuery + ')';\n        }\n\n        list.push(item);\n      }\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || '';\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */';\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n  return '/*# ' + data + ' */';\n}","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","/*\n * Fuzzy\n * https://github.com/myork/fuzzy\n *\n * Copyright (c) 2012 Matt York\n * Licensed under the MIT license.\n */\n\n(function() {\n\nvar root = this;\n\nvar fuzzy = {};\n\n// Use in node or in browser\nif (typeof exports !== 'undefined') {\n  module.exports = fuzzy;\n} else {\n  root.fuzzy = fuzzy;\n}\n\n// Return all elements of `array` that have a fuzzy\n// match against `pattern`.\nfuzzy.simpleFilter = function(pattern, array) {\n  return array.filter(function(str) {\n    return fuzzy.test(pattern, str);\n  });\n};\n\n// Does `pattern` fuzzy match `str`?\nfuzzy.test = function(pattern, str) {\n  return fuzzy.match(pattern, str) !== null;\n};\n\n// If `pattern` matches `str`, wrap each matching character\n// in `opts.pre` and `opts.post`. If no match, return null\nfuzzy.match = function(pattern, str, opts) {\n  opts = opts || {};\n  var patternIdx = 0\n    , result = []\n    , len = str.length\n    , totalScore = 0\n    , currScore = 0\n    // prefix\n    , pre = opts.pre || ''\n    // suffix\n    , post = opts.post || ''\n    // String to compare against. This might be a lowercase version of the\n    // raw string\n    , compareString =  opts.caseSensitive && str || str.toLowerCase()\n    , ch;\n\n  pattern = opts.caseSensitive && pattern || pattern.toLowerCase();\n\n  // For each character in the string, either add it to the result\n  // or wrap in template if it's the next string in the pattern\n  for(var idx = 0; idx < len; idx++) {\n    ch = str[idx];\n    if(compareString[idx] === pattern[patternIdx]) {\n      ch = pre + ch + post;\n      patternIdx += 1;\n\n      // consecutive characters should increase the score more than linearly\n      currScore += 1 + currScore;\n    } else {\n      currScore = 0;\n    }\n    totalScore += currScore;\n    result[result.length] = ch;\n  }\n\n  // return rendered string if we have a match for every char\n  if(patternIdx === pattern.length) {\n    // if the string is an exact match with pattern, totalScore should be maxed\n    totalScore = (compareString === pattern) ? Infinity : totalScore;\n    return {rendered: result.join(''), score: totalScore};\n  }\n\n  return null;\n};\n\n// The normal entry point. Filters `arr` for matches against `pattern`.\n// It returns an array with matching values of the type:\n//\n//     [{\n//         string:   '<b>lah' // The rendered string\n//       , index:    2        // The index of the element in `arr`\n//       , original: 'blah'   // The original element in `arr`\n//     }]\n//\n// `opts` is an optional argument bag. Details:\n//\n//    opts = {\n//        // string to put before a matching character\n//        pre:     '<b>'\n//\n//        // string to put after matching character\n//      , post:    '</b>'\n//\n//        // Optional function. Input is an entry in the given arr`,\n//        // output should be the string to test `pattern` against.\n//        // In this example, if `arr = [{crying: 'koala'}]` we would return\n//        // 'koala'.\n//      , extract: function(arg) { return arg.crying; }\n//    }\nfuzzy.filter = function(pattern, arr, opts) {\n  if(!arr || arr.length === 0) {\n    return [];\n  }\n  if (typeof pattern !== 'string') {\n    return arr;\n  }\n  opts = opts || {};\n  return arr\n    .reduce(function(prev, element, idx, arr) {\n      var str = element;\n      if(opts.extract) {\n        str = opts.extract(element);\n      }\n      var rendered = fuzzy.match(pattern, str, opts);\n      if(rendered != null) {\n        prev[prev.length] = {\n            string: rendered.rendered\n          , score: rendered.score\n          , index: idx\n          , original: element\n        };\n      }\n      return prev;\n    }, [])\n\n    // Sort by score. Browsers are inconsistent wrt stable/unstable\n    // sorting, so force stable by using the index in the case of tie.\n    // See http://ofb.net/~sethml/is-sort-stable.html\n    .sort(function(a,b) {\n      var compare = b.score - a.score;\n      if(compare) return compare;\n      return a.index - b.index;\n    });\n};\n\n\n}());\n\n","'use strict';\nvar toString = Object.prototype.toString;\n\nmodule.exports = function (x) {\n\tvar prototype;\n\treturn toString.call(x) === '[object Object]' && (prototype = Object.getPrototypeOf(x), prototype === null || prototype === Object.getPrototypeOf({}));\n};\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n","\nvar content = require(\"!!../../css-loader/dist/cjs.js!./mapbox-gl.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../css-loader/dist/cjs.js!./mapbox-gl.css\", function() {\n\t\tvar newContent = require(\"!!../../css-loader/dist/cjs.js!./mapbox-gl.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/* Mapbox GL JS is Copyright © 2020 Mapbox and subject to the Mapbox Terms of Service ((https://www.mapbox.com/legal/tos/). */\n(function (global, factory) {\ntypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\ntypeof define === 'function' && define.amd ? define(factory) :\n(global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.mapboxgl = factory());\n})(this, (function () { 'use strict';\n\n/* eslint-disable */\n\nvar shared, worker, mapboxgl;\n// define gets called three times: one for each chunk. we rely on the order\n// they're imported to know which is which\nfunction define(_, chunk) {\nif (!shared) {\n    shared = chunk;\n} else if (!worker) {\n    worker = chunk;\n} else {\n    var workerBundleString = \"self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; (\" + shared + \")(sharedChunk); (\" + worker + \")(sharedChunk); self.onerror = null;\"\n\n    var sharedChunk = {};\n    shared(sharedChunk);\n    mapboxgl = chunk(sharedChunk);\n    if (typeof window !== 'undefined' && window && window.URL && window.URL.createObjectURL) {\n        mapboxgl.workerUrl = window.URL.createObjectURL(new Blob([workerBundleString], { type: 'text/javascript' }));\n    }\n}\n}\n\n\ndefine([\"exports\"],(function(t){\"use strict\";var e=\"undefined\"!=typeof self?self:{},r=\"2.12.1\";let n;const i={API_URL:\"https://api.mapbox.com\",get API_URL_REGEX(){if(null==n){const t=/^((https?:)?\\/\\/)?([^\\/]+\\.)?mapbox\\.c(n|om)(\\/|\\?|$)/i;try{n=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):t;}catch(e){n=t;}}return n},get API_TILEJSON_REGEX(){return /^((https?:)?\\/\\/)?([^\\/]+\\.)?mapbox\\.c(n|om)(\\/v[0-9]*\\/.*\\.json.*$)/i},get API_SPRITE_REGEX(){return /^((https?:)?\\/\\/)?([^\\/]+\\.)?mapbox\\.c(n|om)(\\/styles\\/v[0-9]*\\/)(.*\\/sprite.*\\..*$)/i},get API_FONTS_REGEX(){return /^((https?:)?\\/\\/)?([^\\/]+\\.)?mapbox\\.c(n|om)(\\/fonts\\/v[0-9]*\\/)(.*\\.pbf.*$)/i},get API_STYLE_REGEX(){return /^((https?:)?\\/\\/)?([^\\/]+\\.)?mapbox\\.c(n|om)(\\/styles\\/v[0-9]*\\/)(.*$)/i},get API_CDN_URL_REGEX(){return /^((https?:)?\\/\\/)?api\\.mapbox\\.c(n|om)(\\/mapbox-gl-js\\/)(.*$)/i},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf(\"https://api.mapbox.cn\")?\"https://events.mapbox.cn/events/v2\":0===this.API_URL.indexOf(\"https://api.mapbox.com\")?\"https://events.mapbox.com/events/v2\":null:null},SESSION_PATH:\"/map-sessions/v1\",FEEDBACK_URL:\"https://apps.mapbox.com/feedback\",TILE_URL_VERSION:\"v4\",RASTER_URL_PREFIX:\"raster/v1\",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},s={supported:!1,testSupport:function(t){!l&&o&&(u?c(t):a=t);}};let a,o,l=!1,u=!1;function c(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,o),t.isContextLost())return;s.supported=!0;}catch(t){}t.deleteTexture(e),l=!0;}e.document&&(o=e.document.createElement(\"img\"),o.onload=function(){a&&c(a),a=null,u=!0;},o.onerror=function(){l=!0,a=null;},o.src=\"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=\");const h=\"01\";var p=f;function f(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=r,this.p2y=n;}f.prototype={sampleCurveX:function(t){return ((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return ((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return (3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var r=t,n=0;n<8;n++){var i=this.sampleCurveX(r)-t;if(Math.abs(i)<e)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r-=i/s;}var a=0,o=1;for(r=t,n=0;n<20&&(i=this.sampleCurveX(r),!(Math.abs(i-t)<e));n++)t>i?a=r:o=r,r=.5*(o-a)+a;return r},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};var d=y;function y(t,e){this.x=t,this.y=e;}y.prototype={clone:function(){return new y(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=r*this.x+e*this.y;return this.x=e*this.x-r*this.y,this.y=n,this},_rotateAround:function(t,e){var r=Math.cos(t),n=Math.sin(t),i=e.y+n*(this.x-e.x)+r*(this.y-e.y);return this.x=e.x+r*(this.x-e.x)-n*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},y.convert=function(t){return t instanceof y?t:Array.isArray(t)?new y(t[0],t[1]):t};const m=Math.PI/180,g=180/Math.PI;function x(t){return t*m}function v(t){return t*g}const b=[[0,0],[1,0],[1,1],[0,1]];function w(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,r=e*t;return 4*(t<.5?r:3*(t-e)+r-.75)}function _(t,e,r,n){const i=new p(t,e,r,n);return function(t){return i.solve(t)}}const A=_(.25,.1,.25,1);function S(t,e,r){return Math.min(r,Math.max(e,t))}function k(t,e,r){return (r=S((r-t)/(e-t),0,1))*r*(3-2*r)}function I(t,e,r){const n=r-e,i=((t-e)%n+n)%n+e;return i===e?r:i}function M(t,e,r){if(!t.length)return r(null,[]);let n=t.length;const i=new Array(t.length);let s=null;t.forEach(((t,a)=>{e(t,((t,e)=>{t&&(s=t),i[a]=e,0==--n&&r(s,i);}));}));}function T(t){const e=[];for(const r in t)e.push(t[r]);return e}function z(t,...e){for(const r of e)for(const e in r)t[e]=r[e];return t}let B=1;function E(){return B++}function C(){return function t(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function P(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function D(t){return !!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function V(t,e){t.forEach((t=>{e[t]&&(e[t]=e[t].bind(e));}));}function L(t,e){return -1!==t.indexOf(e,t.length-e.length)}function F(t,e,r){const n={};for(const i in t)n[i]=e.call(r||this,t[i],i,t);return n}function R(t,e,r){const n={};for(const i in t)e.call(r||this,t[i],i,t)&&(n[i]=t[i]);return n}function j(t){return Array.isArray(t)?t.map(j):\"object\"==typeof t&&t?F(t,j):t}const U={};function $(t){U[t]||(\"undefined\"!=typeof console&&console.warn(t),U[t]=!0);}function O(t,e,r){return (r.y-t.y)*(e.x-t.x)>(e.y-t.y)*(r.x-t.x)}function q(t){let e=0;for(let r,n,i=0,s=t.length,a=s-1;i<s;a=i++)r=t[i],n=t[a],e+=(n.x-r.x)*(r.y+n.y);return e}function N(){return \"undefined\"!=typeof WorkerGlobalScope&&\"undefined\"!=typeof self&&self instanceof WorkerGlobalScope}function G(t){const e={};if(t.replace(/(?:^|(?:\\s*\\,\\s*))([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)(?:\\=(?:([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)|(?:\\\"((?:[^\"\\\\]|\\\\.)*)\\\")))?/g,((t,r,n,i)=>{const s=n||i;return e[r]=!s||s.toLowerCase(),\"\"})),e[\"max-age\"]){const t=parseInt(e[\"max-age\"],10);isNaN(t)?delete e[\"max-age\"]:e[\"max-age\"]=t;}return e}let X=null;function Z(t){if(null==X){const e=t.navigator?t.navigator.userAgent:null;X=!!t.safari||!(!e||!(/\\b(iPad|iPhone|iPod)\\b/.test(e)||e.match(\"Safari\")&&!e.match(\"Chrome\")));}return X}function K(t){try{const r=e[t];return r.setItem(\"_mapbox_test_\",1),r.removeItem(\"_mapbox_test_\"),!0}catch(t){return !1}}function Y(t,e){return [t[4*e],t[4*e+1],t[4*e+2],t[4*e+3]]}const H=\"mapbox-tiles\";let W,J,Q=500,tt=50;function et(){try{return e.caches}catch(t){}}function rt(){et()&&!W&&(W=e.caches.open(H));}function nt(t){const e=t.indexOf(\"?\");if(e<0)return t;const r=function(t){const e=t.indexOf(\"?\");return e>0?t.slice(e+1).split(\"&\"):[]}(t),n=r.filter((t=>{const e=t.split(\"=\");return \"language\"===e[0]||\"worldview\"===e[0]}));return n.length?`${t.slice(0,e)}?${n.join(\"&\")}`:t.slice(0,e)}let it=1/0;const st={Unknown:\"Unknown\",Style:\"Style\",Source:\"Source\",Tile:\"Tile\",Glyphs:\"Glyphs\",SpriteImage:\"SpriteImage\",SpriteJSON:\"SpriteJSON\",Image:\"Image\"};\"function\"==typeof Object.freeze&&Object.freeze(st);class at extends Error{constructor(t,e,r){401===e&&gt(r)&&(t+=\": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes\"),super(t),this.status=e,this.url=r;}toString(){return `${this.name}: ${this.message} (${this.status}): ${this.url}`}}const ot=N()?()=>self.worker&&self.worker.referrer:()=>(\"blob:\"===e.location.protocol?e.parent:e).location.href;const lt=function(t,r){if(!(/^file:/.test(n=t.url)||/^file:/.test(ot())&&!/^\\w+:/.test(n))){if(e.fetch&&e.Request&&e.AbortController&&e.Request.prototype.hasOwnProperty(\"signal\"))return function(t,r){const n=new e.AbortController,i=new e.Request(t.url,{method:t.method||\"GET\",body:t.body,credentials:t.credentials,headers:t.headers,referrer:ot(),signal:n.signal});let s=!1,a=!1;const o=(l=i.url).indexOf(\"sku=\")>0&&gt(l);var l;\"json\"===t.type&&i.headers.set(\"Accept\",\"application/json\");const u=(n,s,l)=>{if(a)return;if(n&&\"SecurityError\"!==n.message&&$(n),s&&l)return c(s);const u=Date.now();e.fetch(i).then((e=>{if(e.ok){const t=o?e.clone():null;return c(e,t,u)}return r(new at(e.statusText,e.status,t.url))})).catch((t=>{20!==t.code&&r(new Error(t.message));}));},c=(n,o,l)=>{(\"arrayBuffer\"===t.type?n.arrayBuffer():\"json\"===t.type?n.json():n.text()).then((t=>{a||(o&&l&&function(t,r,n){if(rt(),!W)return;const i={status:r.status,statusText:r.statusText,headers:new e.Headers};r.headers.forEach(((t,e)=>i.headers.set(e,t)));const s=G(r.headers.get(\"Cache-Control\")||\"\");if(s[\"no-store\"])return;s[\"max-age\"]&&i.headers.set(\"Expires\",new Date(n+1e3*s[\"max-age\"]).toUTCString());const a=i.headers.get(\"Expires\");a&&(new Date(a).getTime()-n<42e4||function(t,e){if(void 0===J)try{new Response(new ReadableStream),J=!0;}catch(t){J=!1;}J?e(t.body):t.blob().then(e);}(r,(r=>{const n=new e.Response(r,i);rt(),W&&W.then((e=>e.put(nt(t.url),n))).catch((t=>$(t.message)));})));}(i,o,l),s=!0,r(null,t,n.headers.get(\"Cache-Control\"),n.headers.get(\"Expires\")));})).catch((t=>{a||r(new Error(t.message));}));};return o?function(t,e){if(rt(),!W)return e(null);const r=nt(t.url);W.then((t=>{t.match(r).then((n=>{const i=function(t){if(!t)return !1;const e=new Date(t.headers.get(\"Expires\")||0),r=G(t.headers.get(\"Cache-Control\")||\"\");return e>Date.now()&&!r[\"no-cache\"]}(n);t.delete(r),i&&t.put(r,n.clone()),e(null,n,i);})).catch(e);})).catch(e);}(i,u):u(null,null),{cancel:()=>{a=!0,s||n.abort();}}}(t,r);if(N()&&self.worker&&self.worker.actor)return self.worker.actor.send(\"getResource\",t,r,void 0,!0)}var n;return function(t,r){const n=new e.XMLHttpRequest;n.open(t.method||\"GET\",t.url,!0),\"arrayBuffer\"===t.type&&(n.responseType=\"arraybuffer\");for(const e in t.headers)n.setRequestHeader(e,t.headers[e]);return \"json\"===t.type&&(n.responseType=\"text\",n.setRequestHeader(\"Accept\",\"application/json\")),n.withCredentials=\"include\"===t.credentials,n.onerror=()=>{r(new Error(n.statusText));},n.onload=()=>{if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){let e=n.response;if(\"json\"===t.type)try{e=JSON.parse(n.response);}catch(t){return r(t)}r(null,e,n.getResponseHeader(\"Cache-Control\"),n.getResponseHeader(\"Expires\"));}else r(new at(n.statusText,n.status,t.url));},n.send(t.body),{cancel:()=>n.abort()}}(t,r)},ut=function(t,e){return lt(z(t,{type:\"arrayBuffer\"}),e)};function ct(t){const r=e.document.createElement(\"a\");return r.href=t,r.protocol===e.document.location.protocol&&r.host===e.document.location.host}const ht=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=\";let pt,ft;pt=[],ft=0;const dt=function(t,r){if(s.supported&&(t.headers||(t.headers={}),t.headers.accept=\"image/webp,*/*\"),ft>=i.MAX_PARALLEL_IMAGE_REQUESTS){const e={requestParameters:t,callback:r,cancelled:!1,cancel(){this.cancelled=!0;}};return pt.push(e),e}ft++;let n=!1;const a=()=>{if(!n)for(n=!0,ft--;pt.length&&ft<i.MAX_PARALLEL_IMAGE_REQUESTS;){const t=pt.shift(),{requestParameters:e,callback:r,cancelled:n}=t;n||(t.cancel=dt(e,r).cancel);}},o=ut(t,((t,n,i,s)=>{a(),t?r(t):n&&(e.createImageBitmap?function(t,r){const n=new e.Blob([new Uint8Array(t)],{type:\"image/png\"});e.createImageBitmap(n).then((t=>{r(null,t);})).catch((t=>{r(new Error(`Could not load image because of ${t.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`));}));}(n,((t,e)=>r(t,e,i,s))):function(t,r){const n=new e.Image,i=e.URL;n.onload=()=>{r(null,n),i.revokeObjectURL(n.src),n.onload=null,e.requestAnimationFrame((()=>{n.src=ht;}));},n.onerror=()=>r(new Error(\"Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.\"));const s=new e.Blob([new Uint8Array(t)],{type:\"image/png\"});n.src=t.byteLength?i.createObjectURL(s):ht;}(n,((t,e)=>r(t,e,i,s))));}));return {cancel:()=>{o.cancel(),a();}}},yt=\"NO_ACCESS_TOKEN\";function mt(t){return 0===t.indexOf(\"mapbox:\")}function gt(t){return i.API_URL_REGEX.test(t)}function xt(t){return i.API_CDN_URL_REGEX.test(t)}function vt(t){return i.API_STYLE_REGEX.test(t)&&!bt(t)}function bt(t){return i.API_SPRITE_REGEX.test(t)}const wt=/^(\\w+):\\/\\/([^/?]*)(\\/[^?]+)?\\??(.+)?/;function _t(t){const e=t.match(wt);if(!e)throw new Error(\"Unable to parse URL object\");return {protocol:e[1],authority:e[2],path:e[3]||\"/\",params:e[4]?e[4].split(\"&\"):[]}}function At(t){const e=t.params.length?`?${t.params.join(\"&\")}`:\"\";return `${t.protocol}://${t.authority}${t.path}${e}`}function St(t){if(!t)return null;const r=t.split(\".\");if(!r||3!==r.length)return null;try{return JSON.parse(decodeURIComponent(e.atob(r[1]).split(\"\").map((t=>\"%\"+(\"00\"+t.charCodeAt(0).toString(16)).slice(-2))).join(\"\")))}catch(t){return null}}class kt{constructor(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null;}getStorageKey(t){const r=St(i.ACCESS_TOKEN);let n=\"\";return n=r&&r.u?e.btoa(encodeURIComponent(r.u).replace(/%([0-9A-F]{2})/g,((t,e)=>String.fromCharCode(Number(\"0x\"+e))))):i.ACCESS_TOKEN||\"\",t?`mapbox.eventData.${t}:${n}`:`mapbox.eventData:${n}`}fetchEventData(){const t=K(\"localStorage\"),r=this.getStorageKey(),n=this.getStorageKey(\"uuid\");if(t)try{const t=e.localStorage.getItem(r);t&&(this.eventData=JSON.parse(t));const i=e.localStorage.getItem(n);i&&(this.anonId=i);}catch(t){$(\"Unable to read from LocalStorage\");}}saveEventData(){const t=K(\"localStorage\"),r=this.getStorageKey(),n=this.getStorageKey(\"uuid\");if(t)try{e.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&e.localStorage.setItem(r,JSON.stringify(this.eventData));}catch(t){$(\"Unable to write to LocalStorage\");}}processRequests(t){}postEvent(t,e,r,n){if(!i.EVENTS_URL)return;const s=_t(i.EVENTS_URL);s.params.push(`access_token=${n||i.ACCESS_TOKEN||\"\"}`);const a={event:this.type,created:new Date(t).toISOString()},o=e?z(a,e):a,l={url:At(s),headers:{\"Content-Type\":\"text/plain\"},body:JSON.stringify([o])};this.pendingRequest=function(t,e){return lt(z(t,{method:\"POST\"}),e)}(l,(t=>{this.pendingRequest=null,r(t),this.saveEventData(),this.processRequests(n);}));}queueRequest(t,e){this.queue.push(t),this.processRequests(e);}}const It=new class extends kt{constructor(t){super(\"appUserTurnstile\"),this._customAccessToken=t;}postTurnstileEvent(t,e){i.EVENTS_URL&&i.ACCESS_TOKEN&&Array.isArray(t)&&t.some((t=>mt(t)||gt(t)))&&this.queueRequest(Date.now(),e);}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=St(i.ACCESS_TOKEN),n=e?e.u:i.ACCESS_TOKEN;let s=n!==this.eventData.tokenU;D(this.anonId)||(this.anonId=C(),s=!0);const a=this.queue.shift();if(this.eventData.lastSuccess){const t=new Date(this.eventData.lastSuccess),e=new Date(a),r=(a-this.eventData.lastSuccess)/864e5;s=s||r>=1||r<-1||t.getDate()!==e.getDate();}else s=!0;s?this.postEvent(a,{sdkIdentifier:\"mapbox-gl-js\",sdkVersion:r,skuId:h,\"enabled.telemetry\":!1,userId:this.anonId},(t=>{t||(this.eventData.lastSuccess=a,this.eventData.tokenU=n);}),t):this.processRequests();}},Mt=It.postTurnstileEvent.bind(It),Tt=new class extends kt{constructor(){super(\"map.load\"),this.success={},this.skuToken=\"\";}postMapLoadEvent(t,e,r,n){this.skuToken=e,this.errorCb=n,i.EVENTS_URL&&(r||i.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},r):this.errorCb(new Error(yt)));}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:n}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),D(this.anonId)||(this.anonId=C()),this.postEvent(n,{sdkIdentifier:\"mapbox-gl-js\",sdkVersion:r,skuId:h,skuToken:this.skuToken,userId:this.anonId},(t=>{t?this.errorCb(t):e&&(this.success[e]=!0);}),t));}},zt=Tt.postMapLoadEvent.bind(Tt),Bt=new class extends kt{constructor(){super(\"gljs.performance\");}postPerformanceEvent(t,e){i.EVENTS_URL&&(t||i.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:e},t);}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:n,performanceData:i}=this.queue.shift(),s=function(t){const n=e.performance.getEntriesByType(\"resource\"),i=e.performance.getEntriesByType(\"mark\"),s=function(t){const e={};if(t)for(const r in t)if(\"other\"!==r)for(const n of t[r]){const t=`${r}ResolveRangeMin`,i=`${r}ResolveRangeMax`,s=`${r}RequestCount`,a=`${r}RequestCachedCount`;e[t]=Math.min(e[t]||1/0,n.startTime),e[i]=Math.max(e[i]||-1/0,n.responseEnd);const o=t=>{void 0===e[t]&&(e[t]=0),++e[t];};void 0!==n.transferSize&&0===n.transferSize&&o(a),o(s);}return e}(function(t,e){const r={};if(t)for(const n of t){const t=e(n);void 0===r[t]&&(r[t]=[]),r[t].push(n);}return r}(n,Ft)),a=e.devicePixelRatio,o=e.navigator.connection||e.navigator.mozConnection||e.navigator.webkitConnection,l={counters:[],metadata:[],attributes:[]},u=(t,e,r)=>{null!=r&&t.push({name:e,value:r.toString()});};for(const t in s)u(l.counters,t,s[t]);if(t.interactionRange[0]!==1/0&&t.interactionRange[1]!==-1/0&&(u(l.counters,\"interactionRangeMin\",t.interactionRange[0]),u(l.counters,\"interactionRangeMax\",t.interactionRange[1])),i)for(const t of Object.keys(Vt)){const e=Vt[t],r=i.find((t=>t.name===e));r&&u(l.counters,e,r.startTime);}return u(l.counters,\"visibilityHidden\",t.visibilityHidden),u(l.attributes,\"style\",function(t){if(t)for(const e of t){const t=e.name.split(\"?\")[0];if(vt(t)){const e=t.split(\"/\").slice(-2);if(2===e.length)return `mapbox://styles/${e[0]}/${e[1]}`}}}(n)),u(l.attributes,\"terrainEnabled\",t.terrainEnabled?\"true\":\"false\"),u(l.attributes,\"fogEnabled\",t.fogEnabled?\"true\":\"false\"),u(l.attributes,\"projection\",t.projection),u(l.attributes,\"zoom\",t.zoom),u(l.metadata,\"devicePixelRatio\",a),u(l.metadata,\"connectionEffectiveType\",o?o.effectiveType:void 0),u(l.metadata,\"navigatorUserAgent\",e.navigator.userAgent),u(l.metadata,\"screenWidth\",e.screen.width),u(l.metadata,\"screenHeight\",e.screen.height),u(l.metadata,\"windowWidth\",e.innerWidth),u(l.metadata,\"windowHeight\",e.innerHeight),u(l.metadata,\"mapWidth\",t.width/a),u(l.metadata,\"mapHeight\",t.height/a),u(l.metadata,\"webglRenderer\",t.renderer),u(l.metadata,\"webglVendor\",t.vendor),u(l.metadata,\"sdkVersion\",r),u(l.metadata,\"sdkIdentifier\",\"mapbox-gl-js\"),l}(i);for(const t of s.metadata);for(const t of s.counters);for(const t of s.attributes);this.postEvent(n,s,(()=>{}),t);}},Et=Bt.postPerformanceEvent.bind(Bt),Ct=new class extends kt{constructor(){super(\"map.auth\"),this.success={},this.skuToken=\"\";}getSession(t,e,r,n){if(!i.API_URL||!i.SESSION_PATH)return;const s=_t(i.API_URL+i.SESSION_PATH);s.params.push(`sku=${e||\"\"}`),s.params.push(`access_token=${n||i.ACCESS_TOKEN||\"\"}`);const a={url:At(s),headers:{\"Content-Type\":\"text/plain\"}};this.pendingRequest=function(t,e){return lt(z(t,{method:\"GET\"}),e)}(a,(t=>{this.pendingRequest=null,r(t),this.saveEventData(),this.processRequests(n);}));}getSessionAPI(t,e,r,n){this.skuToken=e,this.errorCb=n,i.SESSION_PATH&&i.API_URL&&(r||i.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},r):this.errorCb(new Error(yt)));}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:r}=this.queue.shift();e&&this.success[e]||this.getSession(r,this.skuToken,(t=>{t?this.errorCb(t):e&&(this.success[e]=!0);}),t);}},Pt=Ct.getSessionAPI.bind(Ct),Dt=new Set,Vt={create:\"create\",load:\"load\",fullLoad:\"fullLoad\"},Lt={mark(t){e.performance.mark(t);},measure(t,r,n){e.performance.measure(t,r,n);}};function Ft(t){const e=t.name.split(\"?\")[0];return xt(e)&&e.includes(\"mapbox-gl.js\")?\"javascript\":xt(e)&&e.includes(\"mapbox-gl.css\")?\"css\":function(t){return i.API_FONTS_REGEX.test(t)}(e)?\"fontRange\":bt(e)?\"sprite\":vt(e)?\"style\":function(t){return i.API_TILEJSON_REGEX.test(t)}(e)?\"tilejson\":\"other\"}const Rt=e.performance;function jt(t){const e=t?t.url.toString():void 0;return Rt.getEntriesByName(e)}let Ut,$t,Ot,qt;const Nt={now:()=>void 0!==Ot?Ot:e.performance.now(),setNow(t){Ot=t;},restoreNow(){Ot=void 0;},frame(t){const r=e.requestAnimationFrame(t);return {cancel:()=>e.cancelAnimationFrame(r)}},getImageData(t,r=0){const{width:n,height:i}=t;qt||(qt=e.document.createElement(\"canvas\"));const s=qt.getContext(\"2d\",{willReadFrequently:!0});if(!s)throw new Error(\"failed to create canvas 2d context\");return (n>qt.width||i>qt.height)&&(qt.width=n,qt.height=i),s.clearRect(-r,-r,n+2*r,i+2*r),s.drawImage(t,0,0,n,i),s.getImageData(-r,-r,n+2*r,i+2*r)},resolveURL:t=>(Ut||(Ut=e.document.createElement(\"a\")),Ut.href=t,Ut.href),get devicePixelRatio(){return e.devicePixelRatio},get prefersReducedMotion(){return !!e.matchMedia&&(null==$t&&($t=e.matchMedia(\"(prefers-reduced-motion: reduce)\")),$t.matches)}};function Gt(t,e,r){r[t]&&-1!==r[t].indexOf(e)||(r[t]=r[t]||[],r[t].push(e));}function Xt(t,e,r){if(r&&r[t]){const n=r[t].indexOf(e);-1!==n&&r[t].splice(n,1);}}class Zt{constructor(t,e={}){z(this,e),this.type=t;}}class Kt extends Zt{constructor(t,e={}){super(\"error\",z({error:t},e));}}class Yt{on(t,e){return this._listeners=this._listeners||{},Gt(t,e,this._listeners),this}off(t,e){return Xt(t,e,this._listeners),Xt(t,e,this._oneTimeListeners),this}once(t,e){return e?(this._oneTimeListeners=this._oneTimeListeners||{},Gt(t,e,this._oneTimeListeners),this):new Promise((e=>this.once(t,e)))}fire(t,e){\"string\"==typeof t&&(t=new Zt(t,e||{}));const r=t.type;if(this.listens(r)){t.target=this;const e=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];for(const r of e)r.call(this,t);const n=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];for(const e of n)Xt(r,e,this._oneTimeListeners),e.call(this,t);const i=this._eventedParent;i&&(z(t,\"function\"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(t));}else t instanceof Kt&&console.error(t.error);return this}listens(t){return !!(this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t))}setEventedParent(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}var Ht=JSON.parse('{\"$version\":8,\"$root\":{\"version\":{\"required\":true,\"type\":\"enum\",\"values\":[8]},\"name\":{\"type\":\"string\"},\"metadata\":{\"type\":\"*\"},\"center\":{\"type\":\"array\",\"value\":\"number\"},\"zoom\":{\"type\":\"number\"},\"bearing\":{\"type\":\"number\",\"default\":0,\"period\":360,\"units\":\"degrees\"},\"pitch\":{\"type\":\"number\",\"default\":0,\"units\":\"degrees\"},\"light\":{\"type\":\"light\"},\"terrain\":{\"type\":\"terrain\"},\"fog\":{\"type\":\"fog\"},\"sources\":{\"required\":true,\"type\":\"sources\"},\"sprite\":{\"type\":\"string\"},\"glyphs\":{\"type\":\"string\"},\"transition\":{\"type\":\"transition\"},\"projection\":{\"type\":\"projection\"},\"layers\":{\"required\":true,\"type\":\"array\",\"value\":\"layer\"}},\"sources\":{\"*\":{\"type\":\"source\"}},\"source\":[\"source_vector\",\"source_raster\",\"source_raster_dem\",\"source_geojson\",\"source_video\",\"source_image\"],\"source_vector\":{\"type\":{\"required\":true,\"type\":\"enum\",\"values\":{\"vector\":{}}},\"url\":{\"type\":\"string\"},\"tiles\":{\"type\":\"array\",\"value\":\"string\"},\"bounds\":{\"type\":\"array\",\"value\":\"number\",\"length\":4,\"default\":[-180,-85.051129,180,85.051129]},\"scheme\":{\"type\":\"enum\",\"values\":{\"xyz\":{},\"tms\":{}},\"default\":\"xyz\"},\"minzoom\":{\"type\":\"number\",\"default\":0},\"maxzoom\":{\"type\":\"number\",\"default\":22},\"attribution\":{\"type\":\"string\"},\"promoteId\":{\"type\":\"promoteId\"},\"volatile\":{\"type\":\"boolean\",\"default\":false},\"*\":{\"type\":\"*\"}},\"source_raster\":{\"type\":{\"required\":true,\"type\":\"enum\",\"values\":{\"raster\":{}}},\"url\":{\"type\":\"string\"},\"tiles\":{\"type\":\"array\",\"value\":\"string\"},\"bounds\":{\"type\":\"array\",\"value\":\"number\",\"length\":4,\"default\":[-180,-85.051129,180,85.051129]},\"minzoom\":{\"type\":\"number\",\"default\":0},\"maxzoom\":{\"type\":\"number\",\"default\":22},\"tileSize\":{\"type\":\"number\",\"default\":512,\"units\":\"pixels\"},\"scheme\":{\"type\":\"enum\",\"values\":{\"xyz\":{},\"tms\":{}},\"default\":\"xyz\"},\"attribution\":{\"type\":\"string\"},\"volatile\":{\"type\":\"boolean\",\"default\":false},\"*\":{\"type\":\"*\"}},\"source_raster_dem\":{\"type\":{\"required\":true,\"type\":\"enum\",\"values\":{\"raster-dem\":{}}},\"url\":{\"type\":\"string\"},\"tiles\":{\"type\":\"array\",\"value\":\"string\"},\"bounds\":{\"type\":\"array\",\"value\":\"number\",\"length\":4,\"default\":[-180,-85.051129,180,85.051129]},\"minzoom\":{\"type\":\"number\",\"default\":0},\"maxzoom\":{\"type\":\"number\",\"default\":22},\"tileSize\":{\"type\":\"number\",\"default\":512,\"units\":\"pixels\"},\"attribution\":{\"type\":\"string\"},\"encoding\":{\"type\":\"enum\",\"values\":{\"terrarium\":{},\"mapbox\":{}},\"default\":\"mapbox\"},\"volatile\":{\"type\":\"boolean\",\"default\":false},\"*\":{\"type\":\"*\"}},\"source_geojson\":{\"type\":{\"required\":true,\"type\":\"enum\",\"values\":{\"geojson\":{}}},\"data\":{\"type\":\"*\"},\"maxzoom\":{\"type\":\"number\",\"default\":18},\"attribution\":{\"type\":\"string\"},\"buffer\":{\"type\":\"number\",\"default\":128,\"maximum\":512,\"minimum\":0},\"filter\":{\"type\":\"*\"},\"tolerance\":{\"type\":\"number\",\"default\":0.375},\"cluster\":{\"type\":\"boolean\",\"default\":false},\"clusterRadius\":{\"type\":\"number\",\"default\":50,\"minimum\":0},\"clusterMaxZoom\":{\"type\":\"number\"},\"clusterMinPoints\":{\"type\":\"number\"},\"clusterProperties\":{\"type\":\"*\"},\"lineMetrics\":{\"type\":\"boolean\",\"default\":false},\"generateId\":{\"type\":\"boolean\",\"default\":false},\"promoteId\":{\"type\":\"promoteId\"}},\"source_video\":{\"type\":{\"required\":true,\"type\":\"enum\",\"values\":{\"video\":{}}},\"urls\":{\"required\":true,\"type\":\"array\",\"value\":\"string\"},\"coordinates\":{\"required\":true,\"type\":\"array\",\"length\":4,\"value\":{\"type\":\"array\",\"length\":2,\"value\":\"number\"}}},\"source_image\":{\"type\":{\"required\":true,\"type\":\"enum\",\"values\":{\"image\":{}}},\"url\":{\"required\":true,\"type\":\"string\"},\"coordinates\":{\"required\":true,\"type\":\"array\",\"length\":4,\"value\":{\"type\":\"array\",\"length\":2,\"value\":\"number\"}}},\"layer\":{\"id\":{\"type\":\"string\",\"required\":true},\"type\":{\"type\":\"enum\",\"values\":{\"fill\":{},\"line\":{},\"symbol\":{},\"circle\":{},\"heatmap\":{},\"fill-extrusion\":{},\"raster\":{},\"hillshade\":{},\"background\":{},\"sky\":{}},\"required\":true},\"metadata\":{\"type\":\"*\"},\"source\":{\"type\":\"string\"},\"source-layer\":{\"type\":\"string\"},\"minzoom\":{\"type\":\"number\",\"minimum\":0,\"maximum\":24},\"maxzoom\":{\"type\":\"number\",\"minimum\":0,\"maximum\":24},\"filter\":{\"type\":\"filter\"},\"layout\":{\"type\":\"layout\"},\"paint\":{\"type\":\"paint\"}},\"layout\":[\"layout_fill\",\"layout_line\",\"layout_circle\",\"layout_heatmap\",\"layout_fill-extrusion\",\"layout_symbol\",\"layout_raster\",\"layout_hillshade\",\"layout_background\",\"layout_sky\"],\"layout_background\":{\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"layout_sky\":{\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"layout_fill\":{\"fill-sort-key\":{\"type\":\"number\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"layout_circle\":{\"circle-sort-key\":{\"type\":\"number\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"layout_heatmap\":{\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"layout_fill-extrusion\":{\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"},\"fill-extrusion-edge-radius\":{\"type\":\"number\",\"private\":true,\"default\":0,\"minimum\":0,\"maximum\":1,\"property-type\":\"constant\"}},\"layout_line\":{\"line-cap\":{\"type\":\"enum\",\"values\":{\"butt\":{},\"round\":{},\"square\":{}},\"default\":\"butt\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"line-join\":{\"type\":\"enum\",\"values\":{\"bevel\":{},\"round\":{},\"miter\":{}},\"default\":\"miter\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"line-miter-limit\":{\"type\":\"number\",\"default\":2,\"requires\":[{\"line-join\":\"miter\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"line-round-limit\":{\"type\":\"number\",\"default\":1.05,\"requires\":[{\"line-join\":\"round\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"line-sort-key\":{\"type\":\"number\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"layout_symbol\":{\"symbol-placement\":{\"type\":\"enum\",\"values\":{\"point\":{},\"line\":{},\"line-center\":{}},\"default\":\"point\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"symbol-spacing\":{\"type\":\"number\",\"default\":250,\"minimum\":1,\"units\":\"pixels\",\"requires\":[{\"symbol-placement\":\"line\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"symbol-avoid-edges\":{\"type\":\"boolean\",\"default\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"symbol-sort-key\":{\"type\":\"number\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"symbol-z-order\":{\"type\":\"enum\",\"values\":{\"auto\":{},\"viewport-y\":{},\"source\":{}},\"default\":\"auto\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-allow-overlap\":{\"type\":\"boolean\",\"default\":false,\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-ignore-placement\":{\"type\":\"boolean\",\"default\":false,\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-optional\":{\"type\":\"boolean\",\"default\":false,\"requires\":[\"icon-image\",\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-rotation-alignment\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{},\"auto\":{}},\"default\":\"auto\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-size\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"units\":\"factor of the original icon size\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"icon-text-fit\":{\"type\":\"enum\",\"values\":{\"none\":{},\"width\":{},\"height\":{},\"both\":{}},\"default\":\"none\",\"requires\":[\"icon-image\",\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-text-fit-padding\":{\"type\":\"array\",\"value\":\"number\",\"length\":4,\"default\":[0,0,0,0],\"units\":\"pixels\",\"requires\":[\"icon-image\",\"text-field\",{\"icon-text-fit\":[\"both\",\"width\",\"height\"]}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-image\":{\"type\":\"resolvedImage\",\"tokens\":true,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"icon-rotate\":{\"type\":\"number\",\"default\":0,\"period\":360,\"units\":\"degrees\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"icon-padding\":{\"type\":\"number\",\"default\":2,\"minimum\":0,\"units\":\"pixels\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-keep-upright\":{\"type\":\"boolean\",\"default\":false,\"requires\":[\"icon-image\",{\"icon-rotation-alignment\":\"map\"},{\"symbol-placement\":[\"line\",\"line-center\"]}],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-offset\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"default\":[0,0],\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"icon-anchor\":{\"type\":\"enum\",\"values\":{\"center\":{},\"left\":{},\"right\":{},\"top\":{},\"bottom\":{},\"top-left\":{},\"top-right\":{},\"bottom-left\":{},\"bottom-right\":{}},\"default\":\"center\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"icon-pitch-alignment\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{},\"auto\":{}},\"default\":\"auto\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-pitch-alignment\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{},\"auto\":{}},\"default\":\"auto\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-rotation-alignment\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{},\"auto\":{}},\"default\":\"auto\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-field\":{\"type\":\"formatted\",\"default\":\"\",\"tokens\":true,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-font\":{\"type\":\"array\",\"value\":\"string\",\"default\":[\"Open Sans Regular\",\"Arial Unicode MS Regular\"],\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-size\":{\"type\":\"number\",\"default\":16,\"minimum\":0,\"units\":\"pixels\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-max-width\":{\"type\":\"number\",\"default\":10,\"minimum\":0,\"units\":\"ems\",\"requires\":[\"text-field\",{\"symbol-placement\":[\"point\"]}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-line-height\":{\"type\":\"number\",\"default\":1.2,\"units\":\"ems\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-letter-spacing\":{\"type\":\"number\",\"default\":0,\"units\":\"ems\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-justify\":{\"type\":\"enum\",\"values\":{\"auto\":{},\"left\":{},\"center\":{},\"right\":{}},\"default\":\"center\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-radial-offset\":{\"type\":\"number\",\"units\":\"ems\",\"default\":0,\"requires\":[\"text-field\"],\"property-type\":\"data-driven\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]}},\"text-variable-anchor\":{\"type\":\"array\",\"value\":\"enum\",\"values\":{\"center\":{},\"left\":{},\"right\":{},\"top\":{},\"bottom\":{},\"top-left\":{},\"top-right\":{},\"bottom-left\":{},\"bottom-right\":{}},\"requires\":[\"text-field\",{\"symbol-placement\":[\"point\"]}],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-anchor\":{\"type\":\"enum\",\"values\":{\"center\":{},\"left\":{},\"right\":{},\"top\":{},\"bottom\":{},\"top-left\":{},\"top-right\":{},\"bottom-left\":{},\"bottom-right\":{}},\"default\":\"center\",\"requires\":[\"text-field\",{\"!\":\"text-variable-anchor\"}],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-max-angle\":{\"type\":\"number\",\"default\":45,\"units\":\"degrees\",\"requires\":[\"text-field\",{\"symbol-placement\":[\"line\",\"line-center\"]}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-writing-mode\":{\"type\":\"array\",\"value\":\"enum\",\"values\":{\"horizontal\":{},\"vertical\":{}},\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-rotate\":{\"type\":\"number\",\"default\":0,\"period\":360,\"units\":\"degrees\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-padding\":{\"type\":\"number\",\"default\":2,\"minimum\":0,\"units\":\"pixels\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-keep-upright\":{\"type\":\"boolean\",\"default\":true,\"requires\":[\"text-field\",{\"text-rotation-alignment\":\"map\"},{\"symbol-placement\":[\"line\",\"line-center\"]}],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-transform\":{\"type\":\"enum\",\"values\":{\"none\":{},\"uppercase\":{},\"lowercase\":{}},\"default\":\"none\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-offset\":{\"type\":\"array\",\"value\":\"number\",\"units\":\"ems\",\"length\":2,\"default\":[0,0],\"requires\":[\"text-field\",{\"!\":\"text-radial-offset\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-allow-overlap\":{\"type\":\"boolean\",\"default\":false,\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-ignore-placement\":{\"type\":\"boolean\",\"default\":false,\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-optional\":{\"type\":\"boolean\",\"default\":false,\"requires\":[\"text-field\",\"icon-image\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"layout_raster\":{\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"layout_hillshade\":{\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"filter\":{\"type\":\"array\",\"value\":\"*\"},\"filter_symbol\":{\"type\":\"boolean\",\"default\":false,\"transition\":false,\"property-type\":\"data-driven\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\",\"pitch\",\"distance-from-center\"]}},\"filter_fill\":{\"type\":\"boolean\",\"default\":false,\"transition\":false,\"property-type\":\"data-driven\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]}},\"filter_line\":{\"type\":\"boolean\",\"default\":false,\"transition\":false,\"property-type\":\"data-driven\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]}},\"filter_circle\":{\"type\":\"boolean\",\"default\":false,\"transition\":false,\"property-type\":\"data-driven\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]}},\"filter_fill-extrusion\":{\"type\":\"boolean\",\"default\":false,\"transition\":false,\"property-type\":\"data-driven\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]}},\"filter_heatmap\":{\"type\":\"boolean\",\"default\":false,\"transition\":false,\"property-type\":\"data-driven\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]}},\"filter_operator\":{\"type\":\"enum\",\"values\":{\"==\":{},\"!=\":{},\">\":{},\">=\":{},\"<\":{},\"<=\":{},\"in\":{},\"!in\":{},\"all\":{},\"any\":{},\"none\":{},\"has\":{},\"!has\":{},\"within\":{}}},\"geometry_type\":{\"type\":\"enum\",\"values\":{\"Point\":{},\"LineString\":{},\"Polygon\":{}}},\"function\":{\"expression\":{\"type\":\"expression\"},\"stops\":{\"type\":\"array\",\"value\":\"function_stop\"},\"base\":{\"type\":\"number\",\"default\":1,\"minimum\":0},\"property\":{\"type\":\"string\",\"default\":\"$zoom\"},\"type\":{\"type\":\"enum\",\"values\":{\"identity\":{},\"exponential\":{},\"interval\":{},\"categorical\":{}},\"default\":\"exponential\"},\"colorSpace\":{\"type\":\"enum\",\"values\":{\"rgb\":{},\"lab\":{},\"hcl\":{}},\"default\":\"rgb\"},\"default\":{\"type\":\"*\",\"required\":false}},\"function_stop\":{\"type\":\"array\",\"minimum\":0,\"maximum\":24,\"value\":[\"number\",\"color\"],\"length\":2},\"expression\":{\"type\":\"array\",\"value\":\"*\",\"minimum\":1},\"fog\":{\"range\":{\"type\":\"array\",\"default\":[0.5,10],\"minimum\":-20,\"maximum\":20,\"length\":2,\"value\":\"number\",\"property-type\":\"data-constant\",\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]}},\"color\":{\"type\":\"color\",\"property-type\":\"data-constant\",\"default\":\"#ffffff\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true},\"high-color\":{\"type\":\"color\",\"property-type\":\"data-constant\",\"default\":\"#245cdf\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true},\"space-color\":{\"type\":\"color\",\"property-type\":\"data-constant\",\"default\":[\"interpolate\",[\"linear\"],[\"zoom\"],4,\"#010b19\",7,\"#367ab9\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true},\"horizon-blend\":{\"type\":\"number\",\"property-type\":\"data-constant\",\"default\":[\"interpolate\",[\"linear\"],[\"zoom\"],4,0.2,7,0.1],\"minimum\":0,\"maximum\":1,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true},\"star-intensity\":{\"type\":\"number\",\"property-type\":\"data-constant\",\"default\":[\"interpolate\",[\"linear\"],[\"zoom\"],5,0.35,6,0],\"minimum\":0,\"maximum\":1,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true}},\"light\":{\"anchor\":{\"type\":\"enum\",\"default\":\"viewport\",\"values\":{\"map\":{},\"viewport\":{}},\"property-type\":\"data-constant\",\"transition\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]}},\"position\":{\"type\":\"array\",\"default\":[1.15,210,30],\"length\":3,\"value\":\"number\",\"property-type\":\"data-constant\",\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]}},\"color\":{\"type\":\"color\",\"property-type\":\"data-constant\",\"default\":\"#ffffff\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true},\"intensity\":{\"type\":\"number\",\"property-type\":\"data-constant\",\"default\":0.5,\"minimum\":0,\"maximum\":1,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true}},\"projection\":{\"name\":{\"type\":\"enum\",\"values\":{\"albers\":{},\"equalEarth\":{},\"equirectangular\":{},\"lambertConformalConic\":{},\"mercator\":{},\"naturalEarth\":{},\"winkelTripel\":{},\"globe\":{}},\"default\":\"mercator\",\"required\":true},\"center\":{\"type\":\"array\",\"length\":2,\"value\":\"number\",\"property-type\":\"data-constant\",\"minimum\":[-180,-90],\"maximum\":[180,90],\"transition\":false,\"requires\":[{\"name\":[\"albers\",\"lambertConformalConic\"]}]},\"parallels\":{\"type\":\"array\",\"length\":2,\"value\":\"number\",\"property-type\":\"data-constant\",\"minimum\":[-90,-90],\"maximum\":[90,90],\"transition\":false,\"requires\":[{\"name\":[\"albers\",\"lambertConformalConic\"]}]}},\"terrain\":{\"source\":{\"type\":\"string\",\"required\":true},\"exaggeration\":{\"type\":\"number\",\"property-type\":\"data-constant\",\"default\":1,\"minimum\":0,\"maximum\":1000,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true,\"requires\":[\"source\"]}},\"paint\":[\"paint_fill\",\"paint_line\",\"paint_circle\",\"paint_heatmap\",\"paint_fill-extrusion\",\"paint_symbol\",\"paint_raster\",\"paint_hillshade\",\"paint_background\",\"paint_sky\"],\"paint_fill\":{\"fill-antialias\":{\"type\":\"boolean\",\"default\":true,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"fill-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"requires\":[{\"!\":\"fill-pattern\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"fill-outline-color\":{\"type\":\"color\",\"transition\":true,\"requires\":[{\"!\":\"fill-pattern\"},{\"fill-antialias\":true}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"fill-translate\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"default\":[0,0],\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-translate-anchor\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"map\",\"requires\":[\"fill-translate\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-pattern\":{\"type\":\"resolvedImage\",\"transition\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"}},\"paint_fill-extrusion\":{\"fill-extrusion-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-extrusion-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"requires\":[{\"!\":\"fill-extrusion-pattern\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"fill-extrusion-translate\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"default\":[0,0],\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-extrusion-translate-anchor\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"map\",\"requires\":[\"fill-extrusion-translate\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-extrusion-pattern\":{\"type\":\"resolvedImage\",\"transition\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"fill-extrusion-height\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"units\":\"meters\",\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"fill-extrusion-base\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"units\":\"meters\",\"transition\":true,\"requires\":[\"fill-extrusion-height\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"fill-extrusion-vertical-gradient\":{\"type\":\"boolean\",\"default\":true,\"transition\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-extrusion-ambient-occlusion-intensity\":{\"property-type\":\"data-constant\",\"type\":\"number\",\"private\":true,\"default\":0,\"minimum\":0,\"maximum\":1,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true},\"fill-extrusion-ambient-occlusion-radius\":{\"property-type\":\"data-constant\",\"type\":\"number\",\"private\":true,\"default\":3,\"minimum\":0,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true,\"requires\":[\"fill-extrusion-edge-radius\"]}},\"paint_line\":{\"line-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"line-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"requires\":[{\"!\":\"line-pattern\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"line-translate\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"default\":[0,0],\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"line-translate-anchor\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"map\",\"requires\":[\"line-translate\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"line-width\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"line-gap-width\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"line-offset\":{\"type\":\"number\",\"default\":0,\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"line-blur\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"line-dasharray\":{\"type\":\"array\",\"value\":\"number\",\"minimum\":0,\"transition\":false,\"units\":\"line widths\",\"requires\":[{\"!\":\"line-pattern\"}],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"line-pattern\":{\"type\":\"resolvedImage\",\"transition\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"line-gradient\":{\"type\":\"color\",\"transition\":false,\"requires\":[{\"!\":\"line-pattern\"},{\"source\":\"geojson\",\"has\":{\"lineMetrics\":true}}],\"expression\":{\"interpolated\":true,\"parameters\":[\"line-progress\"]},\"property-type\":\"color-ramp\"},\"line-trim-offset\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"default\":[0,0],\"minimum\":[0,0],\"maximum\":[1,1],\"transition\":false,\"requires\":[{\"source\":\"geojson\",\"has\":{\"lineMetrics\":true}}],\"property-type\":\"constant\"}},\"paint_circle\":{\"circle-radius\":{\"type\":\"number\",\"default\":5,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"circle-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"circle-blur\":{\"type\":\"number\",\"default\":0,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"circle-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"circle-translate\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"default\":[0,0],\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"circle-translate-anchor\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"map\",\"requires\":[\"circle-translate\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"circle-pitch-scale\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"map\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"circle-pitch-alignment\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"viewport\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"circle-stroke-width\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"circle-stroke-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"circle-stroke-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"}},\"paint_heatmap\":{\"heatmap-radius\":{\"type\":\"number\",\"default\":30,\"minimum\":1,\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"heatmap-weight\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"transition\":false,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"heatmap-intensity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"heatmap-color\":{\"type\":\"color\",\"default\":[\"interpolate\",[\"linear\"],[\"heatmap-density\"],0,\"rgba(0, 0, 255, 0)\",0.1,\"royalblue\",0.3,\"cyan\",0.5,\"lime\",0.7,\"yellow\",1,\"red\"],\"transition\":false,\"expression\":{\"interpolated\":true,\"parameters\":[\"heatmap-density\"]},\"property-type\":\"color-ramp\"},\"heatmap-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"}},\"paint_symbol\":{\"icon-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"icon-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"icon-halo-color\":{\"type\":\"color\",\"default\":\"rgba(0, 0, 0, 0)\",\"transition\":true,\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"icon-halo-width\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"icon-halo-blur\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"icon-translate\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"default\":[0,0],\"transition\":true,\"units\":\"pixels\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-translate-anchor\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"map\",\"requires\":[\"icon-image\",\"icon-translate\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"text-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"overridable\":true,\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"text-halo-color\":{\"type\":\"color\",\"default\":\"rgba(0, 0, 0, 0)\",\"transition\":true,\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"text-halo-width\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"text-halo-blur\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"text-translate\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"default\":[0,0],\"transition\":true,\"units\":\"pixels\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-translate-anchor\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"map\",\"requires\":[\"text-field\",\"text-translate\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"}},\"paint_raster\":{\"raster-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-hue-rotate\":{\"type\":\"number\",\"default\":0,\"period\":360,\"transition\":true,\"units\":\"degrees\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-brightness-min\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-brightness-max\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-saturation\":{\"type\":\"number\",\"default\":0,\"minimum\":-1,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-contrast\":{\"type\":\"number\",\"default\":0,\"minimum\":-1,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-resampling\":{\"type\":\"enum\",\"values\":{\"linear\":{},\"nearest\":{}},\"default\":\"linear\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-fade-duration\":{\"type\":\"number\",\"default\":300,\"minimum\":0,\"transition\":false,\"units\":\"milliseconds\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"}},\"paint_hillshade\":{\"hillshade-illumination-direction\":{\"type\":\"number\",\"default\":335,\"minimum\":0,\"maximum\":359,\"transition\":false,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"hillshade-illumination-anchor\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"viewport\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"hillshade-exaggeration\":{\"type\":\"number\",\"default\":0.5,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"hillshade-shadow-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"hillshade-highlight-color\":{\"type\":\"color\",\"default\":\"#FFFFFF\",\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"hillshade-accent-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"}},\"paint_background\":{\"background-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"requires\":[{\"!\":\"background-pattern\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"background-pattern\":{\"type\":\"resolvedImage\",\"transition\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"background-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"}},\"paint_sky\":{\"sky-type\":{\"type\":\"enum\",\"values\":{\"gradient\":{},\"atmosphere\":{}},\"default\":\"atmosphere\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"sky-atmosphere-sun\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"units\":\"degrees\",\"minimum\":[0,0],\"maximum\":[360,180],\"transition\":false,\"requires\":[{\"sky-type\":\"atmosphere\"}],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"sky-atmosphere-sun-intensity\":{\"type\":\"number\",\"requires\":[{\"sky-type\":\"atmosphere\"}],\"default\":10,\"minimum\":0,\"maximum\":100,\"transition\":false,\"property-type\":\"data-constant\"},\"sky-gradient-center\":{\"type\":\"array\",\"requires\":[{\"sky-type\":\"gradient\"}],\"value\":\"number\",\"default\":[0,0],\"length\":2,\"units\":\"degrees\",\"minimum\":[0,0],\"maximum\":[360,180],\"transition\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"sky-gradient-radius\":{\"type\":\"number\",\"requires\":[{\"sky-type\":\"gradient\"}],\"default\":90,\"minimum\":0,\"maximum\":180,\"transition\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"sky-gradient\":{\"type\":\"color\",\"default\":[\"interpolate\",[\"linear\"],[\"sky-radial-progress\"],0.8,\"#87ceeb\",1,\"white\"],\"transition\":false,\"requires\":[{\"sky-type\":\"gradient\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"sky-radial-progress\"]},\"property-type\":\"color-ramp\"},\"sky-atmosphere-halo-color\":{\"type\":\"color\",\"default\":\"white\",\"transition\":false,\"requires\":[{\"sky-type\":\"atmosphere\"}],\"property-type\":\"data-constant\"},\"sky-atmosphere-color\":{\"type\":\"color\",\"default\":\"white\",\"transition\":false,\"requires\":[{\"sky-type\":\"atmosphere\"}],\"property-type\":\"data-constant\"},\"sky-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"}},\"transition\":{\"duration\":{\"type\":\"number\",\"default\":300,\"minimum\":0,\"units\":\"milliseconds\"},\"delay\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"units\":\"milliseconds\"}},\"property-type\":{\"data-driven\":{\"type\":\"property-type\"},\"color-ramp\":{\"type\":\"property-type\"},\"data-constant\":{\"type\":\"property-type\"},\"constant\":{\"type\":\"property-type\"}},\"promoteId\":{\"*\":{\"type\":\"string\"}}}');function Wt(t,...e){for(const r of e)for(const e in r)t[e]=r[e];return t}function Jt(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Qt(t){if(Array.isArray(t))return t.map(Qt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const r in t)e[r]=Qt(t[r]);return e}return Jt(t)}class te extends Error{constructor(t,e){super(e),this.message=e,this.key=t;}}var ee=te;class re{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[t,r]of e)this.bindings[t]=r;}concat(t){return new re(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return !!this.bindings[t]||!!this.parent&&this.parent.has(t)}}var ne=re;const ie={kind:\"null\"},se={kind:\"number\"},ae={kind:\"string\"},oe={kind:\"boolean\"},le={kind:\"color\"},ue={kind:\"object\"},ce={kind:\"value\"},he={kind:\"collator\"},pe={kind:\"formatted\"},fe={kind:\"resolvedImage\"};function de(t,e){return {kind:\"array\",itemType:t,N:e}}function ye(t){if(\"array\"===t.kind){const e=ye(t.itemType);return \"number\"==typeof t.N?`array<${e}, ${t.N}>`:\"value\"===t.itemType.kind?\"array\":`array<${e}>`}return t.kind}const me=[ie,se,ae,oe,le,pe,ue,de(ce),fe];function ge(t,e){if(\"error\"===e.kind)return null;if(\"array\"===t.kind){if(\"array\"===e.kind&&(0===e.N&&\"value\"===e.itemType.kind||!ge(t.itemType,e.itemType))&&(\"number\"!=typeof t.N||t.N===e.N))return null}else {if(t.kind===e.kind)return null;if(\"value\"===t.kind)for(const t of me)if(!ge(t,e))return null}return `Expected ${ye(t)} but found ${ye(e)} instead.`}function xe(t,e){return e.some((e=>e.kind===t.kind))}function ve(t,e){return e.some((e=>\"null\"===e?null===t:\"array\"===e?Array.isArray(t):\"object\"===e?t&&!Array.isArray(t)&&\"object\"==typeof t:e===typeof t))}var be,we={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function _e(t){return (t=Math.round(t))<0?0:t>255?255:t}function Ae(t){return _e(\"%\"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function Se(t){return (e=\"%\"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e;}function ke(t,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}try{be={}.parseCSSColor=function(t){var e,r=t.replace(/ /g,\"\").toLowerCase();if(r in we)return we[r].slice();if(\"#\"===r[0])return 4===r.length?(e=parseInt(r.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===r.length&&(e=parseInt(r.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var n=r.indexOf(\"(\"),i=r.indexOf(\")\");if(-1!==n&&i+1===r.length){var s=r.substr(0,n),a=r.substr(n+1,i-(n+1)).split(\",\"),o=1;switch(s){case\"rgba\":if(4!==a.length)return null;o=Se(a.pop());case\"rgb\":return 3!==a.length?null:[Ae(a[0]),Ae(a[1]),Ae(a[2]),o];case\"hsla\":if(4!==a.length)return null;o=Se(a.pop());case\"hsl\":if(3!==a.length)return null;var l=(parseFloat(a[0])%360+360)%360/360,u=Se(a[1]),c=Se(a[2]),h=c<=.5?c*(u+1):c+u-c*u,p=2*c-h;return [_e(255*ke(p,h,l+1/3)),_e(255*ke(p,h,l)),_e(255*ke(p,h,l-1/3)),o];default:return null}}return null};}catch(t){}class Ie{constructor(t,e,r,n=1){this.r=t,this.g=e,this.b=r,this.a=n;}static parse(t){if(!t)return;if(t instanceof Ie)return t;if(\"string\"!=typeof t)return;const e=be(t);return e?new Ie(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,r,n]=this.toArray();return `rgba(${Math.round(t)},${Math.round(e)},${Math.round(r)},${n})`}toArray(){const{r:t,g:e,b:r,a:n}=this;return 0===n?[0,0,0,0]:[255*t/n,255*e/n,255*r/n,n]}toArray01(){const{r:t,g:e,b:r,a:n}=this;return 0===n?[0,0,0,0]:[t/n,e/n,r/n,n]}toArray01PremultipliedAlpha(){const{r:t,g:e,b:r,a:n}=this;return [t,e,r,n]}}Ie.black=new Ie(0,0,0,1),Ie.white=new Ie(1,1,1,1),Ie.transparent=new Ie(0,0,0,0),Ie.red=new Ie(1,0,0,1),Ie.blue=new Ie(0,0,1,1);var Me=Ie;class Te{constructor(t,e,r){this.sensitivity=t?e?\"variant\":\"case\":e?\"accent\":\"base\",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:\"search\"});}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ze{constructor(t,e,r,n,i){this.text=t.normalize?t.normalize():t,this.image=e,this.scale=r,this.fontStack=n,this.textColor=i;}}class Be{constructor(t){this.sections=t;}static fromString(t){return new Be([new ze(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof Be?t:Be.fromString(t)}toString(){return 0===this.sections.length?\"\":this.sections.map((t=>t.text)).join(\"\")}serialize(){const t=[\"format\"];for(const e of this.sections){if(e.image){t.push([\"image\",e.image.name]);continue}t.push(e.text);const r={};e.fontStack&&(r[\"text-font\"]=[\"literal\",e.fontStack.split(\",\")]),e.scale&&(r[\"font-scale\"]=e.scale),e.textColor&&(r[\"text-color\"]=[\"rgba\"].concat(e.textColor.toArray())),t.push(r);}return t}}class Ee{constructor(t){this.name=t.name,this.available=t.available;}toString(){return this.name}static fromString(t){return t?new Ee({name:t,available:!1}):null}serialize(){return [\"image\",this.name]}}function Ce(t,e,r,n){return \"number\"==typeof t&&t>=0&&t<=255&&\"number\"==typeof e&&e>=0&&e<=255&&\"number\"==typeof r&&r>=0&&r<=255?void 0===n||\"number\"==typeof n&&n>=0&&n<=1?null:`Invalid rgba value [${[t,e,r,n].join(\", \")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(\"number\"==typeof n?[t,e,r,n]:[t,e,r]).join(\", \")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Pe(t){if(null===t)return !0;if(\"string\"==typeof t)return !0;if(\"boolean\"==typeof t)return !0;if(\"number\"==typeof t)return !0;if(t instanceof Me)return !0;if(t instanceof Te)return !0;if(t instanceof Be)return !0;if(t instanceof Ee)return !0;if(Array.isArray(t)){for(const e of t)if(!Pe(e))return !1;return !0}if(\"object\"==typeof t){for(const e in t)if(!Pe(t[e]))return !1;return !0}return !1}function De(t){if(null===t)return ie;if(\"string\"==typeof t)return ae;if(\"boolean\"==typeof t)return oe;if(\"number\"==typeof t)return se;if(t instanceof Me)return le;if(t instanceof Te)return he;if(t instanceof Be)return pe;if(t instanceof Ee)return fe;if(Array.isArray(t)){const e=t.length;let r;for(const e of t){const t=De(e);if(r){if(r===t)continue;r=ce;break}r=t;}return de(r||ce,e)}return ue}function Ve(t){const e=typeof t;return null===t?\"\":\"string\"===e||\"number\"===e||\"boolean\"===e?String(t):t instanceof Me||t instanceof Be||t instanceof Ee?t.toString():JSON.stringify(t)}class Le{constructor(t,e){this.type=t,this.value=e;}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Pe(t[1]))return e.error(\"invalid value\");const r=t[1];let n=De(r);const i=e.expectedType;return \"array\"!==n.kind||0!==n.N||!i||\"array\"!==i.kind||\"number\"==typeof i.N&&0!==i.N||(n=i),new Le(n,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return !0}serialize(){return \"array\"===this.type.kind||\"object\"===this.type.kind?[\"literal\",this.value]:this.value instanceof Me?[\"rgba\"].concat(this.value.toArray()):this.value instanceof Be?this.value.serialize():this.value}}var Fe=Le,Re=class{constructor(t){this.name=\"ExpressionEvaluationError\",this.message=t;}toJSON(){return this.message}};const je={string:ae,number:se,boolean:oe,object:ue};class Ue{constructor(t,e){this.type=t,this.args=e;}static parse(t,e){if(t.length<2)return e.error(\"Expected at least one argument.\");let r,n=1;const i=t[0];if(\"array\"===i){let i,s;if(t.length>2){const r=t[1];if(\"string\"!=typeof r||!(r in je)||\"object\"===r)return e.error('The item type argument of \"array\" must be one of string, number, boolean',1);i=je[r],n++;}else i=ce;if(t.length>3){if(null!==t[2]&&(\"number\"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to \"array\" must be a positive integer literal',2);s=t[2],n++;}r=de(i,s);}else r=je[i];const s=[];for(;n<t.length;n++){const r=e.parse(t[n],n,ce);if(!r)return null;s.push(r);}return new Ue(r,s)}evaluate(t){for(let e=0;e<this.args.length;e++){const r=this.args[e].evaluate(t);if(!ge(this.type,De(r)))return r;if(e===this.args.length-1)throw new Re(`Expected value to be of type ${ye(this.type)}, but found ${ye(De(r))} instead.`)}return null}eachChild(t){this.args.forEach(t);}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=this.type,e=[t.kind];if(\"array\"===t.kind){const r=t.itemType;if(\"string\"===r.kind||\"number\"===r.kind||\"boolean\"===r.kind){e.push(r.kind);const n=t.N;(\"number\"==typeof n||this.args.length>1)&&e.push(n);}}return e.concat(this.args.map((t=>t.serialize())))}}var $e=Ue;class Oe{constructor(t){this.type=pe,this.sections=t;}static parse(t,e){if(t.length<2)return e.error(\"Expected at least one argument.\");const r=t[1];if(!Array.isArray(r)&&\"object\"==typeof r)return e.error(\"First argument must be an image or text section.\");const n=[];let i=!1;for(let r=1;r<=t.length-1;++r){const s=t[r];if(i&&\"object\"==typeof s&&!Array.isArray(s)){i=!1;let t=null;if(s[\"font-scale\"]&&(t=e.parse(s[\"font-scale\"],1,se),!t))return null;let r=null;if(s[\"text-font\"]&&(r=e.parse(s[\"text-font\"],1,de(ae)),!r))return null;let a=null;if(s[\"text-color\"]&&(a=e.parse(s[\"text-color\"],1,le),!a))return null;const o=n[n.length-1];o.scale=t,o.font=r,o.textColor=a;}else {const s=e.parse(t[r],1,ce);if(!s)return null;const a=s.type.kind;if(\"string\"!==a&&\"value\"!==a&&\"null\"!==a&&\"resolvedImage\"!==a)return e.error(\"Formatted text type must be 'string', 'value', 'image' or 'null'.\");i=!0,n.push({content:s,scale:null,font:null,textColor:null});}}return new Oe(n)}evaluate(t){return new Be(this.sections.map((e=>{const r=e.content.evaluate(t);return De(r)===fe?new ze(\"\",r,null,null,null):new ze(Ve(r),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(\",\"):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor);}outputDefined(){return !1}serialize(){const t=[\"format\"];for(const e of this.sections){t.push(e.content.serialize());const r={};e.scale&&(r[\"font-scale\"]=e.scale.serialize()),e.font&&(r[\"text-font\"]=e.font.serialize()),e.textColor&&(r[\"text-color\"]=e.textColor.serialize()),t.push(r);}return t}}class qe{constructor(t){this.type=fe,this.input=t;}static parse(t,e){if(2!==t.length)return e.error(\"Expected two arguments.\");const r=e.parse(t[1],1,ae);return r?new qe(r):e.error(\"No image name provided.\")}evaluate(t){const e=this.input.evaluate(t),r=Ee.fromString(e);return r&&t.availableImages&&(r.available=t.availableImages.indexOf(e)>-1),r}eachChild(t){t(this.input);}outputDefined(){return !1}serialize(){return [\"image\",this.input.serialize()]}}const Ne={\"to-boolean\":oe,\"to-color\":le,\"to-number\":se,\"to-string\":ae};class Ge{constructor(t,e){this.type=t,this.args=e;}static parse(t,e){if(t.length<2)return e.error(\"Expected at least one argument.\");const r=t[0];if((\"to-boolean\"===r||\"to-string\"===r)&&2!==t.length)return e.error(\"Expected one argument.\");const n=Ne[r],i=[];for(let r=1;r<t.length;r++){const n=e.parse(t[r],r,ce);if(!n)return null;i.push(n);}return new Ge(n,i)}evaluate(t){if(\"boolean\"===this.type.kind)return Boolean(this.args[0].evaluate(t));if(\"color\"===this.type.kind){let e,r;for(const n of this.args){if(e=n.evaluate(t),r=null,e instanceof Me)return e;if(\"string\"==typeof e){const r=t.parseColor(e);if(r)return r}else if(Array.isArray(e)&&(r=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:Ce(e[0],e[1],e[2],e[3]),!r))return new Me(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Re(r||`Could not parse color from value '${\"string\"==typeof e?e:String(JSON.stringify(e))}'`)}if(\"number\"===this.type.kind){let e=null;for(const r of this.args){if(e=r.evaluate(t),null===e)return 0;const n=Number(e);if(!isNaN(n))return n}throw new Re(`Could not convert ${JSON.stringify(e)} to number.`)}return \"formatted\"===this.type.kind?Be.fromString(Ve(this.args[0].evaluate(t))):\"resolvedImage\"===this.type.kind?Ee.fromString(Ve(this.args[0].evaluate(t))):Ve(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t);}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){if(\"formatted\"===this.type.kind)return new Oe([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(\"resolvedImage\"===this.type.kind)return new qe(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild((e=>{t.push(e.serialize());})),t}}var Xe=Ge;const Ze=[\"Unknown\",\"Point\",\"LineString\",\"Polygon\"];var Ke=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null;}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?\"number\"==typeof this.feature.type?Ze[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&\"geometry\"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:r,y:n}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(r*e-t[0])+this.featureDistanceData.bearing[1]*(n*e-t[1])}return 0}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Me.parse(t)),e}};class Ye{constructor(t,e,r,n){this.name=t,this.type=e,this._evaluate=r,this.args=n;}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t);}outputDefined(){return !1}serialize(){return [this.name].concat(this.args.map((t=>t.serialize())))}static parse(t,e){const r=t[0],n=Ye.definitions[r];if(!n)return e.error(`Unknown expression \"${r}\". If you wanted a literal array, use [\"literal\", [...]].`,0);const i=Array.isArray(n)?n[0]:n.type,s=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,a=s.filter((([e])=>!Array.isArray(e)||e.length===t.length-1));let o=null;for(const[n,s]of a){o=new _r(e.registry,e.path,null,e.scope);const a=[];let l=!1;for(let e=1;e<t.length;e++){const r=t[e],i=Array.isArray(n)?n[e-1]:n.type,s=o.parse(r,1+a.length,i);if(!s){l=!0;break}a.push(s);}if(!l)if(Array.isArray(n)&&n.length!==a.length)o.error(`Expected ${n.length} arguments, but found ${a.length} instead.`);else {for(let t=0;t<a.length;t++){const e=Array.isArray(n)?n[t]:n.type,r=a[t];o.concat(t+1).checkSubtype(e,r.type);}if(0===o.errors.length)return new Ye(r,i,s,a)}}if(1===a.length)e.errors.push(...o.errors);else {const r=(a.length?a:s).map((([t])=>{return e=t,Array.isArray(e)?`(${e.map(ye).join(\", \")})`:`(${ye(e.type)}...)`;var e;})).join(\" | \"),n=[];for(let r=1;r<t.length;r++){const i=e.parse(t[r],1+n.length);if(!i)return null;n.push(ye(i.type));}e.error(`Expected arguments of type ${r}, but found (${n.join(\", \")}) instead.`);}return null}static register(t,e){Ye.definitions=e;for(const r in e)t[r]=Ye;}}var He=Ye;class We{constructor(t,e,r){this.type=he,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=e;}static parse(t,e){if(2!==t.length)return e.error(\"Expected one argument.\");const r=t[1];if(\"object\"!=typeof r||Array.isArray(r))return e.error(\"Collator options argument must be an object.\");const n=e.parse(void 0!==r[\"case-sensitive\"]&&r[\"case-sensitive\"],1,oe);if(!n)return null;const i=e.parse(void 0!==r[\"diacritic-sensitive\"]&&r[\"diacritic-sensitive\"],1,oe);if(!i)return null;let s=null;return r.locale&&(s=e.parse(r.locale,1,ae),!s)?null:new We(n,i,s)}evaluate(t){return new Te(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale);}outputDefined(){return !1}serialize(){const t={};return t[\"case-sensitive\"]=this.caseSensitive.serialize(),t[\"diacritic-sensitive\"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),[\"collator\",t]}}const Je=8192;function Qe(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1]);}function tr(t,e){return !(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function er(t,e){const r=(180+t[0])/360,n=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,i=Math.pow(2,e.z);return [Math.round(r*i*Je),Math.round(n*i*Je)]}function rr(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],s=t[0]-r[0],a=t[1]-r[1];return n*a-s*i==0&&n*s<=0&&i*a<=0}function nr(t,e){let r=!1;for(let a=0,o=e.length;a<o;a++){const o=e[a];for(let e=0,a=o.length;e<a-1;e++){if(rr(t,o[e],o[e+1]))return !1;(i=o[e])[1]>(n=t)[1]!=(s=o[e+1])[1]>n[1]&&n[0]<(s[0]-i[0])*(n[1]-i[1])/(s[1]-i[1])+i[0]&&(r=!r);}}var n,i,s;return r}function ir(t,e){for(let r=0;r<e.length;r++)if(nr(t,e[r]))return !0;return !1}function sr(t,e,r,n){const i=n[0]-r[0],s=n[1]-r[1],a=(t[0]-r[0])*s-i*(t[1]-r[1]),o=(e[0]-r[0])*s-i*(e[1]-r[1]);return a>0&&o<0||a<0&&o>0}function ar(t,e,r){for(const u of r)for(let r=0;r<u.length-1;++r)if(0!=(o=[(a=u[r+1])[0]-(s=u[r])[0],a[1]-s[1]])[0]*(l=[(i=e)[0]-(n=t)[0],i[1]-n[1]])[1]-o[1]*l[0]&&sr(n,i,s,a)&&sr(s,a,n,i))return !0;var n,i,s,a,o,l;return !1}function or(t,e){for(let r=0;r<t.length;++r)if(!nr(t[r],e))return !1;for(let r=0;r<t.length-1;++r)if(ar(t[r],t[r+1],e))return !1;return !0}function lr(t,e){for(let r=0;r<e.length;r++)if(or(t,e[r]))return !0;return !1}function ur(t,e,r){const n=[];for(let i=0;i<t.length;i++){const s=[];for(let n=0;n<t[i].length;n++){const a=er(t[i][n],r);Qe(e,a),s.push(a);}n.push(s);}return n}function cr(t,e,r){const n=[];for(let i=0;i<t.length;i++){const s=ur(t[i],e,r);n.push(s);}return n}function hr(t,e,r,n){if(t[0]<r[0]||t[0]>r[2]){const e=.5*n;let i=t[0]-r[0]>e?-n:r[0]-t[0]>e?n:0;0===i&&(i=t[0]-r[2]>e?-n:r[2]-t[0]>e?n:0),t[0]+=i;}Qe(e,t);}function pr(t,e,r,n){const i=Math.pow(2,n.z)*Je,s=[n.x*Je,n.y*Je],a=[];if(!t)return a;for(const n of t)for(const t of n){const n=[t.x+s[0],t.y+s[1]];hr(n,e,r,i),a.push(n);}return a}function fr(t,e,r,n){const i=Math.pow(2,n.z)*Je,s=[n.x*Je,n.y*Je],a=[];if(!t)return a;for(const r of t){const t=[];for(const n of r){const r=[n.x+s[0],n.y+s[1]];Qe(e,r),t.push(r);}a.push(t);}if(e[2]-e[0]<=i/2){(o=e)[0]=o[1]=1/0,o[2]=o[3]=-1/0;for(const t of a)for(const n of t)hr(n,e,r,i);}var o;return a}class dr{constructor(t,e){this.type=oe,this.geojson=t,this.geometries=e;}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Pe(t[1])){const e=t[1];if(\"FeatureCollection\"===e.type)for(let t=0;t<e.features.length;++t){const r=e.features[t].geometry.type;if(\"Polygon\"===r||\"MultiPolygon\"===r)return new dr(e,e.features[t].geometry)}else if(\"Feature\"===e.type){const t=e.geometry.type;if(\"Polygon\"===t||\"MultiPolygon\"===t)return new dr(e,e.geometry)}else if(\"Polygon\"===e.type||\"MultiPolygon\"===e.type)return new dr(e,e)}return e.error(\"'within' expression requires valid geojson object that contains polygon geometry type.\")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if(\"Point\"===t.geometryType())return function(t,e){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return !1;if(\"Polygon\"===e.type){const s=ur(e.coordinates,n,i),a=pr(t.geometry(),r,n,i);if(!tr(r,n))return !1;for(const t of a)if(!nr(t,s))return !1}if(\"MultiPolygon\"===e.type){const s=cr(e.coordinates,n,i),a=pr(t.geometry(),r,n,i);if(!tr(r,n))return !1;for(const t of a)if(!ir(t,s))return !1}return !0}(t,this.geometries);if(\"LineString\"===t.geometryType())return function(t,e){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return !1;if(\"Polygon\"===e.type){const s=ur(e.coordinates,n,i),a=fr(t.geometry(),r,n,i);if(!tr(r,n))return !1;for(const t of a)if(!or(t,s))return !1}if(\"MultiPolygon\"===e.type){const s=cr(e.coordinates,n,i),a=fr(t.geometry(),r,n,i);if(!tr(r,n))return !1;for(const t of a)if(!lr(t,s))return !1}return !0}(t,this.geometries)}return !1}eachChild(){}outputDefined(){return !0}serialize(){return [\"within\",this.geojson]}}var yr=dr;function mr(t){if(t instanceof He){if(\"get\"===t.name&&1===t.args.length)return !1;if(\"feature-state\"===t.name)return !1;if(\"has\"===t.name&&1===t.args.length)return !1;if(\"properties\"===t.name||\"geometry-type\"===t.name||\"id\"===t.name)return !1;if(/^filter-/.test(t.name))return !1}if(t instanceof yr)return !1;let e=!0;return t.eachChild((t=>{e&&!mr(t)&&(e=!1);})),e}function gr(t){if(t instanceof He&&\"feature-state\"===t.name)return !1;let e=!0;return t.eachChild((t=>{e&&!gr(t)&&(e=!1);})),e}function xr(t,e){if(t instanceof He&&e.indexOf(t.name)>=0)return !1;let r=!0;return t.eachChild((t=>{r&&!xr(t,e)&&(r=!1);})),r}class vr{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e;}static parse(t,e){if(2!==t.length||\"string\"!=typeof t[1])return e.error(\"'var' expression requires exactly one string literal argument.\");const r=t[1];return e.scope.has(r)?new vr(r,e.scope.get(r)):e.error(`Unknown variable \"${r}\". Make sure \"${r}\" has been bound in an enclosing \"let\" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return !1}serialize(){return [\"var\",this.name]}}var br=vr;class wr{constructor(t,e=[],r,n=new ne,i=[]){this.registry=t,this.path=e,this.key=e.map((t=>`[${t}]`)).join(\"\"),this.scope=n,this.errors=i,this.expectedType=r;}parse(t,e,r,n,i={}){return e?this.concat(e,r,n)._parse(t,i):this._parse(t,i)}_parse(t,e){function r(t,e,r){return \"assert\"===r?new $e(e,[t]):\"coerce\"===r?new Xe(e,[t]):t}if(null!==t&&\"string\"!=typeof t&&\"boolean\"!=typeof t&&\"number\"!=typeof t||(t=[\"literal\",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].');const n=t[0];if(\"string\"!=typeof n)return this.error(`Expression name must be a string, but found ${typeof n} instead. If you wanted a literal array, use [\"literal\", [...]].`,0),null;const i=this.registry[n];if(i){let n=i.parse(t,this);if(!n)return null;if(this.expectedType){const t=this.expectedType,i=n.type;if(\"string\"!==t.kind&&\"number\"!==t.kind&&\"boolean\"!==t.kind&&\"object\"!==t.kind&&\"array\"!==t.kind||\"value\"!==i.kind)if(\"color\"!==t.kind&&\"formatted\"!==t.kind&&\"resolvedImage\"!==t.kind||\"value\"!==i.kind&&\"string\"!==i.kind){if(this.checkSubtype(t,i))return null}else n=r(n,t,e.typeAnnotation||\"coerce\");else n=r(n,t,e.typeAnnotation||\"assert\");}if(!(n instanceof Fe)&&\"resolvedImage\"!==n.type.kind&&Ar(n)){const t=new Ke;try{n=new Fe(n.type,n.evaluate(t));}catch(t){return this.error(t.message),null}}return n}return this.error(`Unknown expression \"${n}\". If you wanted a literal array, use [\"literal\", [...]].`,0)}return this.error(void 0===t?\"'undefined' value invalid. Use null instead.\":\"object\"==typeof t?'Bare objects invalid. Use [\"literal\", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,e,r){const n=\"number\"==typeof t?this.path.concat(t):this.path,i=r?this.scope.concat(r):this.scope;return new wr(this.registry,n,e||null,i,this.errors)}error(t,...e){const r=`${this.key}${e.map((t=>`[${t}]`)).join(\"\")}`;this.errors.push(new ee(r,t));}checkSubtype(t,e){const r=ge(t,e);return r&&this.error(r),r}}var _r=wr;function Ar(t){if(t instanceof br)return Ar(t.boundExpression);if(t instanceof He&&\"error\"===t.name)return !1;if(t instanceof We)return !1;if(t instanceof yr)return !1;const e=t instanceof Xe||t instanceof $e;let r=!0;return t.eachChild((t=>{r=e?r&&Ar(t):r&&t instanceof Fe;})),!!r&&mr(t)&&xr(t,[\"zoom\",\"heatmap-density\",\"line-progress\",\"sky-radial-progress\",\"accumulated\",\"is-supported-script\",\"pitch\",\"distance-from-center\"])}function Sr(t,e){const r=t.length-1;let n,i,s=0,a=r,o=0;for(;s<=a;)if(o=Math.floor((s+a)/2),n=t[o],i=t[o+1],n<=e){if(o===r||e<i)return o;s=o+1;}else {if(!(n>e))throw new Re(\"Input is not a number.\");a=o-1;}return 0}class kr{constructor(t,e,r){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[t,e]of r)this.labels.push(t),this.outputs.push(e);}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error(\"Expected an even number of arguments.\");const r=e.parse(t[1],1,se);if(!r)return null;const n=[];let i=null;e.expectedType&&\"value\"!==e.expectedType.kind&&(i=e.expectedType);for(let r=1;r<t.length;r+=2){const s=1===r?-1/0:t[r],a=t[r+1],o=r,l=r+1;if(\"number\"!=typeof s)return e.error('Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.',o);if(n.length&&n[n.length-1][0]>=s)return e.error('Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.',o);const u=e.parse(a,l,i);if(!u)return null;i=i||u.type,n.push([s,u]);}return new kr(i,r,n)}evaluate(t){const e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);const i=e.length;return n>=e[i-1]?r[i-1].evaluate(t):r[Sr(e,n)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e);}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){const t=[\"step\",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}var Ir=kr;function Mr(t,e,r){return t*(1-r)+e*r}var Tr=Object.freeze({__proto__:null,number:Mr,color:function(t,e,r){return new Me(Mr(t.r,e.r,r),Mr(t.g,e.g,r),Mr(t.b,e.b,r),Mr(t.a,e.a,r))},array:function(t,e,r){return t.map(((t,n)=>Mr(t,e[n],r)))}});const zr=.95047,Br=1.08883,Er=4/29,Cr=6/29,Pr=3*Cr*Cr,Dr=Math.PI/180,Vr=180/Math.PI;function Lr(t){return t>.008856451679035631?Math.pow(t,1/3):t/Pr+Er}function Fr(t){return t>Cr?t*t*t:Pr*(t-Er)}function Rr(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function jr(t){return (t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ur(t){const e=jr(t.r),r=jr(t.g),n=jr(t.b),i=Lr((.4124564*e+.3575761*r+.1804375*n)/zr),s=Lr((.2126729*e+.7151522*r+.072175*n)/1);return {l:116*s-16,a:500*(i-s),b:200*(s-Lr((.0193339*e+.119192*r+.9503041*n)/Br)),alpha:t.a}}function $r(t){let e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=1*Fr(e),r=zr*Fr(r),n=Br*Fr(n),new Me(Rr(3.2404542*r-1.5371385*e-.4985314*n),Rr(-.969266*r+1.8760108*e+.041556*n),Rr(.0556434*r-.2040259*e+1.0572252*n),t.alpha)}function Or(t,e,r){const n=e-t;return t+r*(n>180||n<-180?n-360*Math.round(n/360):n)}const qr={forward:Ur,reverse:$r,interpolate:function(t,e,r){return {l:Mr(t.l,e.l,r),a:Mr(t.a,e.a,r),b:Mr(t.b,e.b,r),alpha:Mr(t.alpha,e.alpha,r)}}},Nr={forward:function(t){const{l:e,a:r,b:n}=Ur(t),i=Math.atan2(n,r)*Vr;return {h:i<0?i+360:i,c:Math.sqrt(r*r+n*n),l:e,alpha:t.a}},reverse:function(t){const e=t.h*Dr,r=t.c;return $r({l:t.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})},interpolate:function(t,e,r){return {h:Or(t.h,e.h,r),c:Mr(t.c,e.c,r),l:Mr(t.l,e.l,r),alpha:Mr(t.alpha,e.alpha,r)}}};var Gr=Object.freeze({__proto__:null,lab:qr,hcl:Nr});class Xr{constructor(t,e,r,n,i){this.type=t,this.operator=e,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(const[t,e]of i)this.labels.push(t),this.outputs.push(e);}static interpolationFactor(t,e,r,n){let i=0;if(\"exponential\"===t.name)i=Zr(e,t.base,r,n);else if(\"linear\"===t.name)i=Zr(e,1,r,n);else if(\"cubic-bezier\"===t.name){const s=t.controlPoints;i=new p(s[0],s[1],s[2],s[3]).solve(Zr(e,1,r,n));}return i}static parse(t,e){let[r,n,i,...s]=t;if(!Array.isArray(n)||0===n.length)return e.error(\"Expected an interpolation type expression.\",1);if(\"linear\"===n[0])n={name:\"linear\"};else if(\"exponential\"===n[0]){const t=n[1];if(\"number\"!=typeof t)return e.error(\"Exponential interpolation requires a numeric base.\",1,1);n={name:\"exponential\",base:t};}else {if(\"cubic-bezier\"!==n[0])return e.error(`Unknown interpolation type ${String(n[0])}`,1,0);{const t=n.slice(1);if(4!==t.length||t.some((t=>\"number\"!=typeof t||t<0||t>1)))return e.error(\"Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.\",1);n={name:\"cubic-bezier\",controlPoints:t};}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error(\"Expected an even number of arguments.\");if(i=e.parse(i,2,se),!i)return null;const a=[];let o=null;\"interpolate-hcl\"===r||\"interpolate-lab\"===r?o=le:e.expectedType&&\"value\"!==e.expectedType.kind&&(o=e.expectedType);for(let t=0;t<s.length;t+=2){const r=s[t],n=s[t+1],i=t+3,l=t+4;if(\"number\"!=typeof r)return e.error('Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.',i);if(a.length&&a[a.length-1][0]>=r)return e.error('Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.',i);const u=e.parse(n,l,o);if(!u)return null;o=o||u.type,a.push([r,u]);}return \"number\"===o.kind||\"color\"===o.kind||\"array\"===o.kind&&\"number\"===o.itemType.kind&&\"number\"==typeof o.N?new Xr(o,r,n,i,a):e.error(`Type ${ye(o)} is not interpolatable.`)}evaluate(t){const e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);const i=e.length;if(n>=e[i-1])return r[i-1].evaluate(t);const s=Sr(e,n),a=Xr.interpolationFactor(this.interpolation,n,e[s],e[s+1]),o=r[s].evaluate(t),l=r[s+1].evaluate(t);return \"interpolate\"===this.operator?Tr[this.type.kind.toLowerCase()](o,l,a):\"interpolate-hcl\"===this.operator?Nr.reverse(Nr.interpolate(Nr.forward(o),Nr.forward(l),a)):qr.reverse(qr.interpolate(qr.forward(o),qr.forward(l),a))}eachChild(t){t(this.input);for(const e of this.outputs)t(e);}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){let t;t=\"linear\"===this.interpolation.name?[\"linear\"]:\"exponential\"===this.interpolation.name?1===this.interpolation.base?[\"linear\"]:[\"exponential\",this.interpolation.base]:[\"cubic-bezier\"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let t=0;t<this.labels.length;t++)e.push(this.labels[t],this.outputs[t].serialize());return e}}function Zr(t,e,r,n){const i=n-r,s=t-r;return 0===i?0:1===e?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}var Kr=Xr;class Yr{constructor(t,e){this.type=t,this.args=e;}static parse(t,e){if(t.length<2)return e.error(\"Expectected at least one argument.\");let r=null;const n=e.expectedType;n&&\"value\"!==n.kind&&(r=n);const i=[];for(const n of t.slice(1)){const t=e.parse(n,1+i.length,r,void 0,{typeAnnotation:\"omit\"});if(!t)return null;r=r||t.type,i.push(t);}const s=n&&i.some((t=>ge(n,t.type)));return new Yr(s?ce:r,i)}evaluate(t){let e,r=null,n=0;for(const i of this.args){if(n++,r=i.evaluate(t),r&&r instanceof Ee&&!r.available&&(e||(e=r),r=null,n===this.args.length))return e;if(null!==r)break}return r}eachChild(t){this.args.forEach(t);}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=[\"coalesce\"];return this.eachChild((e=>{t.push(e.serialize());})),t}}var Hr=Yr;class Wr{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e;}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result);}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const r=[];for(let n=1;n<t.length-1;n+=2){const i=t[n];if(\"string\"!=typeof i)return e.error(`Expected string, but found ${typeof i} instead.`,n);if(/[^a-zA-Z0-9_]/.test(i))return e.error(\"Variable names must contain only alphanumeric characters or '_'.\",n);const s=e.parse(t[n+1],n+1);if(!s)return null;r.push([i,s]);}const n=e.parse(t[t.length-1],t.length-1,e.expectedType,r);return n?new Wr(r,n):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=[\"let\"];for(const[e,r]of this.bindings)t.push(e,r.serialize());return t.push(this.result.serialize()),t}}var Jr=Wr;class Qr{constructor(t,e,r){this.type=t,this.index=e,this.input=r;}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,se),n=e.parse(t[2],2,de(e.expectedType||ce));return r&&n?new Qr(n.type.itemType,r,n):null}evaluate(t){const e=this.index.evaluate(t),r=this.input.evaluate(t);if(e<0)throw new Re(`Array index out of bounds: ${e} < 0.`);if(e>=r.length)throw new Re(`Array index out of bounds: ${e} > ${r.length-1}.`);if(e!==Math.floor(e))throw new Re(`Array index must be an integer, but found ${e} instead.`);return r[e]}eachChild(t){t(this.index),t(this.input);}outputDefined(){return !1}serialize(){return [\"at\",this.index.serialize(),this.input.serialize()]}}var tn=Qr;class en{constructor(t,e){this.type=oe,this.needle=t,this.haystack=e;}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,ce),n=e.parse(t[2],2,ce);return r&&n?xe(r.type,[oe,ae,se,ie,ce])?new en(r,n):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${ye(r.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(null==r)return !1;if(!ve(e,[\"boolean\",\"string\",\"number\",\"null\"]))throw new Re(`Expected first argument to be of type boolean, string, number or null, but found ${ye(De(e))} instead.`);if(!ve(r,[\"string\",\"array\"]))throw new Re(`Expected second argument to be of type array or string, but found ${ye(De(r))} instead.`);return r.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack);}outputDefined(){return !0}serialize(){return [\"in\",this.needle.serialize(),this.haystack.serialize()]}}var rn=en;class nn{constructor(t,e,r){this.type=se,this.needle=t,this.haystack=e,this.fromIndex=r;}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,ce),n=e.parse(t[2],2,ce);if(!r||!n)return null;if(!xe(r.type,[oe,ae,se,ie,ce]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${ye(r.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,se);return i?new nn(r,n,i):null}return new nn(r,n)}evaluate(t){const e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!ve(e,[\"boolean\",\"string\",\"number\",\"null\"]))throw new Re(`Expected first argument to be of type boolean, string, number or null, but found ${ye(De(e))} instead.`);if(!ve(r,[\"string\",\"array\"]))throw new Re(`Expected second argument to be of type array or string, but found ${ye(De(r))} instead.`);if(this.fromIndex){const n=this.fromIndex.evaluate(t);return r.indexOf(e,n)}return r.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex);}outputDefined(){return !1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return [\"index-of\",this.needle.serialize(),this.haystack.serialize(),t]}return [\"index-of\",this.needle.serialize(),this.haystack.serialize()]}}var sn=nn;class an{constructor(t,e,r,n,i,s){this.inputType=t,this.type=e,this.input=r,this.cases=n,this.outputs=i,this.otherwise=s;}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error(\"Expected an even number of arguments.\");let r,n;e.expectedType&&\"value\"!==e.expectedType.kind&&(n=e.expectedType);const i={},s=[];for(let a=2;a<t.length-1;a+=2){let o=t[a];const l=t[a+1];Array.isArray(o)||(o=[o]);const u=e.concat(a);if(0===o.length)return u.error(\"Expected at least one branch label.\");for(const t of o){if(\"number\"!=typeof t&&\"string\"!=typeof t)return u.error(\"Branch labels must be numbers or strings.\");if(\"number\"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return u.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(\"number\"==typeof t&&Math.floor(t)!==t)return u.error(\"Numeric branch labels must be integer values.\");if(r){if(u.checkSubtype(r,De(t)))return null}else r=De(t);if(void 0!==i[String(t)])return u.error(\"Branch labels must be unique.\");i[String(t)]=s.length;}const c=e.parse(l,a,n);if(!c)return null;n=n||c.type,s.push(c);}const a=e.parse(t[1],1,ce);if(!a)return null;const o=e.parse(t[t.length-1],t.length-1,n);return o?\"value\"!==a.type.kind&&e.concat(1).checkSubtype(r,a.type)?null:new an(r,n,a,i,s,o):null}evaluate(t){const e=this.input.evaluate(t);return (De(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise);}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=[\"match\",this.input.serialize()],e=Object.keys(this.cases).sort(),r=[],n={};for(const t of e){const e=n[this.cases[t]];void 0===e?(n[this.cases[t]]=r.length,r.push([this.cases[t],[t]])):r[e][1].push(t);}const i=t=>\"number\"===this.inputType.kind?Number(t):t;for(const[e,n]of r)t.push(1===n.length?i(n[0]):n.map(i)),t.push(this.outputs[e].serialize());return t.push(this.otherwise.serialize()),t}}var on=an;class ln{constructor(t,e,r){this.type=t,this.branches=e,this.otherwise=r;}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error(\"Expected an odd number of arguments.\");let r;e.expectedType&&\"value\"!==e.expectedType.kind&&(r=e.expectedType);const n=[];for(let i=1;i<t.length-1;i+=2){const s=e.parse(t[i],i,oe);if(!s)return null;const a=e.parse(t[i+1],i+1,r);if(!a)return null;n.push([s,a]),r=r||a.type;}const i=e.parse(t[t.length-1],t.length-1,r);return i?new ln(r,n,i):null}evaluate(t){for(const[e,r]of this.branches)if(e.evaluate(t))return r.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,r]of this.branches)t(e),t(r);t(this.otherwise);}outputDefined(){return this.branches.every((([t,e])=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=[\"case\"];return this.eachChild((e=>{t.push(e.serialize());})),t}}var un=ln;class cn{constructor(t,e,r,n){this.type=t,this.input=e,this.beginIndex=r,this.endIndex=n;}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,ce),n=e.parse(t[2],2,se);if(!r||!n)return null;if(!xe(r.type,[de(ce),ae,ce]))return e.error(`Expected first argument to be of type array or string, but found ${ye(r.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,se);return i?new cn(r.type,r,n,i):null}return new cn(r.type,r,n)}evaluate(t){const e=this.input.evaluate(t),r=this.beginIndex.evaluate(t);if(!ve(e,[\"string\",\"array\"]))throw new Re(`Expected first argument to be of type array or string, but found ${ye(De(e))} instead.`);if(this.endIndex){const n=this.endIndex.evaluate(t);return e.slice(r,n)}return e.slice(r)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex);}outputDefined(){return !1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return [\"slice\",this.input.serialize(),this.beginIndex.serialize(),t]}return [\"slice\",this.input.serialize(),this.beginIndex.serialize()]}}var hn=cn;function pn(t,e){return \"==\"===t||\"!=\"===t?\"boolean\"===e.kind||\"string\"===e.kind||\"number\"===e.kind||\"null\"===e.kind||\"value\"===e.kind:\"string\"===e.kind||\"number\"===e.kind||\"value\"===e.kind}function fn(t,e,r,n){return 0===n.compare(e,r)}function dn(t,e,r){const n=\"==\"!==t&&\"!=\"!==t;return class i{constructor(t,e,r){this.type=oe,this.lhs=t,this.rhs=e,this.collator=r,this.hasUntypedArgument=\"value\"===t.type.kind||\"value\"===e.type.kind;}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error(\"Expected two or three arguments.\");const r=t[0];let s=e.parse(t[1],1,ce);if(!s)return null;if(!pn(r,s.type))return e.concat(1).error(`\"${r}\" comparisons are not supported for type '${ye(s.type)}'.`);let a=e.parse(t[2],2,ce);if(!a)return null;if(!pn(r,a.type))return e.concat(2).error(`\"${r}\" comparisons are not supported for type '${ye(a.type)}'.`);if(s.type.kind!==a.type.kind&&\"value\"!==s.type.kind&&\"value\"!==a.type.kind)return e.error(`Cannot compare types '${ye(s.type)}' and '${ye(a.type)}'.`);n&&(\"value\"===s.type.kind&&\"value\"!==a.type.kind?s=new $e(a.type,[s]):\"value\"!==s.type.kind&&\"value\"===a.type.kind&&(a=new $e(s.type,[a])));let o=null;if(4===t.length){if(\"string\"!==s.type.kind&&\"string\"!==a.type.kind&&\"value\"!==s.type.kind&&\"value\"!==a.type.kind)return e.error(\"Cannot use collator to compare non-string types.\");if(o=e.parse(t[3],3,he),!o)return null}return new i(s,a,o)}evaluate(i){const s=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(n&&this.hasUntypedArgument){const e=De(s),r=De(a);if(e.kind!==r.kind||\"string\"!==e.kind&&\"number\"!==e.kind)throw new Re(`Expected arguments for \"${t}\" to be (string, string) or (number, number), but found (${e.kind}, ${r.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const t=De(s),r=De(a);if(\"string\"!==t.kind||\"string\"!==r.kind)return e(i,s,a)}return this.collator?r(i,s,a,this.collator.evaluate(i)):e(i,s,a)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator);}outputDefined(){return !0}serialize(){const e=[t];return this.eachChild((t=>{e.push(t.serialize());})),e}}}const yn=dn(\"==\",(function(t,e,r){return e===r}),fn),mn=dn(\"!=\",(function(t,e,r){return e!==r}),(function(t,e,r,n){return !fn(0,e,r,n)})),gn=dn(\"<\",(function(t,e,r){return e<r}),(function(t,e,r,n){return n.compare(e,r)<0})),xn=dn(\">\",(function(t,e,r){return e>r}),(function(t,e,r,n){return n.compare(e,r)>0})),vn=dn(\"<=\",(function(t,e,r){return e<=r}),(function(t,e,r,n){return n.compare(e,r)<=0})),bn=dn(\">=\",(function(t,e,r){return e>=r}),(function(t,e,r,n){return n.compare(e,r)>=0}));class wn{constructor(t,e,r,n,i,s){this.type=ae,this.number=t,this.locale=e,this.currency=r,this.unit=n,this.minFractionDigits=i,this.maxFractionDigits=s;}static parse(t,e){if(3!==t.length)return e.error(\"Expected two arguments.\");const r=e.parse(t[1],1,se);if(!r)return null;const n=t[2];if(\"object\"!=typeof n||Array.isArray(n))return e.error(\"NumberFormat options argument must be an object.\");let i=null;if(n.locale&&(i=e.parse(n.locale,1,ae),!i))return null;let s=null;if(n.currency&&(s=e.parse(n.currency,1,ae),!s))return null;let a=null;if(n.unit&&(a=e.parse(n.unit,1,ae),!a))return null;let o=null;if(n[\"min-fraction-digits\"]&&(o=e.parse(n[\"min-fraction-digits\"],1,se),!o))return null;let l=null;return n[\"max-fraction-digits\"]&&(l=e.parse(n[\"max-fraction-digits\"],1,se),!l)?null:new wn(r,i,s,a,o,l)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:(this.currency?\"currency\":this.unit&&\"unit\")||\"decimal\",currency:this.currency?this.currency.evaluate(t):void 0,unit:this.unit?this.unit.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.unit&&t(this.unit),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits);}outputDefined(){return !1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.unit&&(t.unit=this.unit.serialize()),this.minFractionDigits&&(t[\"min-fraction-digits\"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t[\"max-fraction-digits\"]=this.maxFractionDigits.serialize()),[\"number-format\",this.number.serialize(),t]}}class _n{constructor(t){this.type=se,this.input=t;}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const r=e.parse(t[1],1);return r?\"array\"!==r.type.kind&&\"string\"!==r.type.kind&&\"value\"!==r.type.kind?e.error(`Expected argument of type string or array, but found ${ye(r.type)} instead.`):new _n(r):null}evaluate(t){const e=this.input.evaluate(t);if(\"string\"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Re(`Expected value to be of type string or array, but found ${ye(De(e))} instead.`)}eachChild(t){t(this.input);}outputDefined(){return !1}serialize(){const t=[\"length\"];return this.eachChild((e=>{t.push(e.serialize());})),t}}const An={\"==\":yn,\"!=\":mn,\">\":xn,\"<\":gn,\">=\":bn,\"<=\":vn,array:$e,at:tn,boolean:$e,case:un,coalesce:Hr,collator:We,format:Oe,image:qe,in:rn,\"index-of\":sn,interpolate:Kr,\"interpolate-hcl\":Kr,\"interpolate-lab\":Kr,length:_n,let:Jr,literal:Fe,match:on,number:$e,\"number-format\":wn,object:$e,slice:hn,step:Ir,string:$e,\"to-boolean\":Xe,\"to-color\":Xe,\"to-number\":Xe,\"to-string\":Xe,var:br,within:yr};function Sn(t,[e,r,n,i]){e=e.evaluate(t),r=r.evaluate(t),n=n.evaluate(t);const s=i?i.evaluate(t):1,a=Ce(e,r,n,s);if(a)throw new Re(a);return new Me(e/255*s,r/255*s,n/255*s,s)}function kn(t,e){return t in e}function In(t,e){const r=e[t];return void 0===r?null:r}function Mn(t){return {type:t}}He.register(An,{error:[{kind:\"error\"},[ae],(t,[e])=>{throw new Re(e.evaluate(t))}],typeof:[ae,[ce],(t,[e])=>ye(De(e.evaluate(t)))],\"to-rgba\":[de(se,4),[le],(t,[e])=>e.evaluate(t).toArray()],rgb:[le,[se,se,se],Sn],rgba:[le,[se,se,se,se],Sn],has:{type:oe,overloads:[[[ae],(t,[e])=>kn(e.evaluate(t),t.properties())],[[ae,ue],(t,[e,r])=>kn(e.evaluate(t),r.evaluate(t))]]},get:{type:ce,overloads:[[[ae],(t,[e])=>In(e.evaluate(t),t.properties())],[[ae,ue],(t,[e,r])=>In(e.evaluate(t),r.evaluate(t))]]},\"feature-state\":[ce,[ae],(t,[e])=>In(e.evaluate(t),t.featureState||{})],properties:[ue,[],t=>t.properties()],\"geometry-type\":[ae,[],t=>t.geometryType()],id:[ce,[],t=>t.id()],zoom:[se,[],t=>t.globals.zoom],pitch:[se,[],t=>t.globals.pitch||0],\"distance-from-center\":[se,[],t=>t.distanceFromCenter()],\"heatmap-density\":[se,[],t=>t.globals.heatmapDensity||0],\"line-progress\":[se,[],t=>t.globals.lineProgress||0],\"sky-radial-progress\":[se,[],t=>t.globals.skyRadialProgress||0],accumulated:[ce,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],\"+\":[se,Mn(se),(t,e)=>{let r=0;for(const n of e)r+=n.evaluate(t);return r}],\"*\":[se,Mn(se),(t,e)=>{let r=1;for(const n of e)r*=n.evaluate(t);return r}],\"-\":{type:se,overloads:[[[se,se],(t,[e,r])=>e.evaluate(t)-r.evaluate(t)],[[se],(t,[e])=>-e.evaluate(t)]]},\"/\":[se,[se,se],(t,[e,r])=>e.evaluate(t)/r.evaluate(t)],\"%\":[se,[se,se],(t,[e,r])=>e.evaluate(t)%r.evaluate(t)],ln2:[se,[],()=>Math.LN2],pi:[se,[],()=>Math.PI],e:[se,[],()=>Math.E],\"^\":[se,[se,se],(t,[e,r])=>Math.pow(e.evaluate(t),r.evaluate(t))],sqrt:[se,[se],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[se,[se],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[se,[se],(t,[e])=>Math.log(e.evaluate(t))],log2:[se,[se],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[se,[se],(t,[e])=>Math.sin(e.evaluate(t))],cos:[se,[se],(t,[e])=>Math.cos(e.evaluate(t))],tan:[se,[se],(t,[e])=>Math.tan(e.evaluate(t))],asin:[se,[se],(t,[e])=>Math.asin(e.evaluate(t))],acos:[se,[se],(t,[e])=>Math.acos(e.evaluate(t))],atan:[se,[se],(t,[e])=>Math.atan(e.evaluate(t))],min:[se,Mn(se),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[se,Mn(se),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[se,[se],(t,[e])=>Math.abs(e.evaluate(t))],round:[se,[se],(t,[e])=>{const r=e.evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[se,[se],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[se,[se],(t,[e])=>Math.ceil(e.evaluate(t))],\"filter-==\":[oe,[ae,ce],(t,[e,r])=>t.properties()[e.value]===r.value],\"filter-id-==\":[oe,[ce],(t,[e])=>t.id()===e.value],\"filter-type-==\":[oe,[ae],(t,[e])=>t.geometryType()===e.value],\"filter-<\":[oe,[ae,ce],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n<i}],\"filter-id-<\":[oe,[ce],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r<n}],\"filter->\":[oe,[ae,ce],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n>i}],\"filter-id->\":[oe,[ce],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r>n}],\"filter-<=\":[oe,[ae,ce],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n<=i}],\"filter-id-<=\":[oe,[ce],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r<=n}],\"filter->=\":[oe,[ae,ce],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n>=i}],\"filter-id->=\":[oe,[ce],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r>=n}],\"filter-has\":[oe,[ce],(t,[e])=>e.value in t.properties()],\"filter-has-id\":[oe,[],t=>null!==t.id()&&void 0!==t.id()],\"filter-type-in\":[oe,[de(ae)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],\"filter-id-in\":[oe,[de(ce)],(t,[e])=>e.value.indexOf(t.id())>=0],\"filter-in-small\":[oe,[ae,de(ce)],(t,[e,r])=>r.value.indexOf(t.properties()[e.value])>=0],\"filter-in-large\":[oe,[ae,de(ce)],(t,[e,r])=>function(t,e,r,n){for(;r<=n;){const i=r+n>>1;if(e[i]===t)return !0;e[i]>t?n=i-1:r=i+1;}return !1}(t.properties()[e.value],r.value,0,r.value.length-1)],all:{type:oe,overloads:[[[oe,oe],(t,[e,r])=>e.evaluate(t)&&r.evaluate(t)],[Mn(oe),(t,e)=>{for(const r of e)if(!r.evaluate(t))return !1;return !0}]]},any:{type:oe,overloads:[[[oe,oe],(t,[e,r])=>e.evaluate(t)||r.evaluate(t)],[Mn(oe),(t,e)=>{for(const r of e)if(r.evaluate(t))return !0;return !1}]]},\"!\":[oe,[oe],(t,[e])=>!e.evaluate(t)],\"is-supported-script\":[oe,[ae],(t,[e])=>{const r=t.globals&&t.globals.isSupportedScript;return !r||r(e.evaluate(t))}],upcase:[ae,[ae],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[ae,[ae],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[ae,Mn(ce),(t,e)=>e.map((e=>Ve(e.evaluate(t)))).join(\"\")],\"resolved-locale\":[ae,[he],(t,[e])=>e.evaluate(t).resolvedLocale()]});var Tn=An;function zn(t){return {result:\"success\",value:t}}function Bn(t){return {result:\"error\",value:t}}function En(t){return \"data-driven\"===t[\"property-type\"]}function Cn(t){return !!t.expression&&t.expression.parameters.indexOf(\"zoom\")>-1}function Pn(t){return !!t.expression&&t.expression.interpolated}function Dn(t){return t instanceof Number?\"number\":t instanceof String?\"string\":t instanceof Boolean?\"boolean\":Array.isArray(t)?\"array\":null===t?\"null\":typeof t}function Vn(t){return \"object\"==typeof t&&null!==t&&!Array.isArray(t)}function Ln(t){return t}function Fn(t,e){const r=\"color\"===e.type,n=t.stops&&\"object\"==typeof t.stops[0][0],i=n||!(n||void 0!==t.property),s=t.type||(Pn(e)?\"exponential\":\"interval\");if(r&&((t=Wt({},t)).stops&&(t.stops=t.stops.map((t=>[t[0],Me.parse(t[1])]))),t.default=Me.parse(t.default?t.default:e.default)),t.colorSpace&&\"rgb\"!==t.colorSpace&&!Gr[t.colorSpace])throw new Error(`Unknown color space: ${t.colorSpace}`);let a,o,l;if(\"exponential\"===s)a=$n;else if(\"interval\"===s)a=Un;else if(\"categorical\"===s){a=jn,o=Object.create(null);for(const e of t.stops)o[e[0]]=e[1];l=typeof t.stops[0][0];}else {if(\"identity\"!==s)throw new Error(`Unknown function type \"${s}\"`);a=On;}if(n){const r={},n=[];for(let e=0;e<t.stops.length;e++){const i=t.stops[e],s=i[0].zoom;void 0===r[s]&&(r[s]={zoom:s,type:t.type,property:t.property,default:t.default,stops:[]},n.push(s)),r[s].stops.push([i[0].value,i[1]]);}const i=[];for(const t of n)i.push([r[t].zoom,Fn(r[t],e)]);const s={name:\"linear\"};return {kind:\"composite\",interpolationType:s,interpolationFactor:Kr.interpolationFactor.bind(void 0,s),zoomStops:i.map((t=>t[0])),evaluate:({zoom:r},n)=>$n({stops:i,base:t.base},e,r).evaluate(r,n)}}if(i){const r=\"exponential\"===s?{name:\"exponential\",base:void 0!==t.base?t.base:1}:null;return {kind:\"camera\",interpolationType:r,interpolationFactor:Kr.interpolationFactor.bind(void 0,r),zoomStops:t.stops.map((t=>t[0])),evaluate:({zoom:r})=>a(t,e,r,o,l)}}return {kind:\"source\",evaluate(r,n){const i=n&&n.properties?n.properties[t.property]:void 0;return void 0===i?Rn(t.default,e.default):a(t,e,i,o,l)}}}function Rn(t,e,r){return void 0!==t?t:void 0!==e?e:void 0!==r?r:void 0}function jn(t,e,r,n,i){return Rn(typeof r===i?n[r]:void 0,t.default,e.default)}function Un(t,e,r){if(\"number\"!==Dn(r))return Rn(t.default,e.default);const n=t.stops.length;if(1===n)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[n-1][0])return t.stops[n-1][1];const i=Sr(t.stops.map((t=>t[0])),r);return t.stops[i][1]}function $n(t,e,r){const n=void 0!==t.base?t.base:1;if(\"number\"!==Dn(r))return Rn(t.default,e.default);const i=t.stops.length;if(1===i)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[i-1][0])return t.stops[i-1][1];const s=Sr(t.stops.map((t=>t[0])),r),a=function(t,e,r,n){const i=n-r,s=t-r;return 0===i?0:1===e?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}(r,n,t.stops[s][0],t.stops[s+1][0]),o=t.stops[s][1],l=t.stops[s+1][1];let u=Tr[e.type]||Ln;if(t.colorSpace&&\"rgb\"!==t.colorSpace){const e=Gr[t.colorSpace];u=(t,r)=>e.reverse(e.interpolate(e.forward(t),e.forward(r),a));}return \"function\"==typeof o.evaluate?{evaluate(...t){const e=o.evaluate.apply(void 0,t),r=l.evaluate.apply(void 0,t);if(void 0!==e&&void 0!==r)return u(e,r,a)}}:u(o,l,a)}function On(t,e,r){return \"color\"===e.type?r=Me.parse(r):\"formatted\"===e.type?r=Be.fromString(r.toString()):\"resolvedImage\"===e.type?r=Ee.fromString(r.toString()):Dn(r)===e.type||\"enum\"===e.type&&e.values[r]||(r=void 0),Rn(r,t.default,e.default)}class qn{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new Ke,this._defaultValue=e?function(t){return \"color\"===t.type&&(Vn(t.default)||Array.isArray(t.default))?new Me(0,0,0,0):\"color\"===t.type?Me.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&\"enum\"===e.type?e.values:null;}evaluateWithoutErrorHandling(t,e,r,n,i,s,a,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=r,this._evaluator.canonical=n||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=s,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=o||null,this.expression.evaluate(this._evaluator)}evaluate(t,e,r,n,i,s,a,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=r||null,this._evaluator.canonical=n||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=s||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=o||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||\"number\"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new Re(`Expected value to be one of ${Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(\", \")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,\"undefined\"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function Nn(t){return Array.isArray(t)&&t.length>0&&\"string\"==typeof t[0]&&t[0]in Tn}function Gn(t,e){const r=new _r(Tn,[],e?function(t){const e={color:le,string:ae,number:se,enum:ae,boolean:oe,formatted:pe,resolvedImage:fe};return \"array\"===t.type?de(e[t.value]||ce,t.length):e[t.type]}(e):void 0),n=r.parse(t,void 0,void 0,void 0,e&&\"string\"===e.type?{typeAnnotation:\"coerce\"}:void 0);return n?zn(new qn(n,e)):Bn(r.errors)}class Xn{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent=\"constant\"!==t&&!gr(e.expression);}evaluateWithoutErrorHandling(t,e,r,n,i,s){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,i,s)}evaluate(t,e,r,n,i,s){return this._styleExpression.evaluate(t,e,r,n,i,s)}}class Zn{constructor(t,e,r,n){this.kind=t,this.zoomStops=r,this._styleExpression=e,this.isStateDependent=\"camera\"!==t&&!gr(e.expression),this.interpolationType=n;}evaluateWithoutErrorHandling(t,e,r,n,i,s){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,i,s)}evaluate(t,e,r,n,i,s){return this._styleExpression.evaluate(t,e,r,n,i,s)}interpolationFactor(t,e,r){return this.interpolationType?Kr.interpolationFactor(this.interpolationType,t,e,r):0}}function Kn(t,e){if(\"error\"===(t=Gn(t,e)).result)return t;const r=t.value.expression,n=mr(r);if(!n&&!En(e))return Bn([new ee(\"\",\"data expressions not supported\")]);const i=xr(r,[\"zoom\",\"pitch\",\"distance-from-center\"]);if(!i&&!Cn(e))return Bn([new ee(\"\",\"zoom expressions not supported\")]);const s=Hn(r);return s||i?s instanceof ee?Bn([s]):s instanceof Kr&&!Pn(e)?Bn([new ee(\"\",'\"interpolate\" expressions cannot be used with this property')]):zn(s?new Zn(n?\"camera\":\"composite\",t.value,s.labels,s instanceof Kr?s.interpolation:void 0):new Xn(n?\"constant\":\"source\",t.value)):Bn([new ee(\"\",'\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.')])}class Yn{constructor(t,e){this._parameters=t,this._specification=e,Wt(this,Fn(this._parameters,this._specification));}static deserialize(t){return new Yn(t._parameters,t._specification)}static serialize(t){return {_parameters:t._parameters,_specification:t._specification}}}function Hn(t){let e=null;if(t instanceof Jr)e=Hn(t.result);else if(t instanceof Hr){for(const r of t.args)if(e=Hn(r),e)break}else (t instanceof Ir||t instanceof Kr)&&t.input instanceof He&&\"zoom\"===t.input.name&&(e=t);return e instanceof ee||t.eachChild((t=>{const r=Hn(t);r instanceof ee?e=r:!e&&r?e=new ee(\"\",'\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.'):e&&r&&e!==r&&(e=new ee(\"\",'Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression.'));})),e}class Wn{constructor(t,e,r,n){this.message=(t?`${t}: `:\"\")+r,n&&(this.identifier=n),null!=e&&e.__line__&&(this.line=e.__line__);}}function Jn(t){const e=t.key,r=t.value,n=t.valueSpec||{},i=t.objectElementValidators||{},s=t.style,a=t.styleSpec;let o=[];const l=Dn(r);if(\"object\"!==l)return [new Wn(e,r,`object expected, ${l} found`)];for(const t in r){const l=t.split(\".\")[0],u=n[l]||n[\"*\"];let c;i[l]?c=i[l]:n[l]?c=Ci:i[\"*\"]?c=i[\"*\"]:n[\"*\"]&&(c=Ci),c?o=o.concat(c({key:(e?`${e}.`:e)+t,value:r[t],valueSpec:u,style:s,styleSpec:a,object:r,objectKey:t},r)):o.push(new Wn(e,r[t],`unknown property \"${t}\"`));}for(const t in n)i[t]||n[t].required&&void 0===n[t].default&&void 0===r[t]&&o.push(new Wn(e,r,`missing required property \"${t}\"`));return o}function Qn(t){const e=t.value,r=t.valueSpec,n=t.style,i=t.styleSpec,s=t.key,a=t.arrayElementValidator||Ci;if(\"array\"!==Dn(e))return [new Wn(s,e,`array expected, ${Dn(e)} found`)];if(r.length&&e.length!==r.length)return [new Wn(s,e,`array length ${r.length} expected, length ${e.length} found`)];if(r[\"min-length\"]&&e.length<r[\"min-length\"])return [new Wn(s,e,`array length at least ${r[\"min-length\"]} expected, length ${e.length} found`)];let o={type:r.value,values:r.values,minimum:r.minimum,maximum:r.maximum,function:void 0};i.$version<7&&(o.function=r.function),\"object\"===Dn(r.value)&&(o=r.value);let l=[];for(let t=0;t<e.length;t++)l=l.concat(a({array:e,arrayIndex:t,value:e[t],valueSpec:o,style:n,styleSpec:i,key:`${s}[${t}]`}));return l}function ti(t){const e=t.key,r=t.value,n=t.valueSpec;let i=Dn(r);if(\"number\"===i&&r!=r&&(i=\"NaN\"),\"number\"!==i)return [new Wn(e,r,`number expected, ${i} found`)];if(\"minimum\"in n){let i=n.minimum;if(\"array\"===Dn(n.minimum)&&(i=n.minimum[t.arrayIndex]),r<i)return [new Wn(e,r,`${r} is less than the minimum value ${i}`)]}if(\"maximum\"in n){let i=n.maximum;if(\"array\"===Dn(n.maximum)&&(i=n.maximum[t.arrayIndex]),r>i)return [new Wn(e,r,`${r} is greater than the maximum value ${i}`)]}return []}function ei(t){const e=t.valueSpec,r=Jt(t.value.type);let n,i,s,a={};const o=\"categorical\"!==r&&void 0===t.value.property,l=!o,u=\"array\"===Dn(t.value.stops)&&\"array\"===Dn(t.value.stops[0])&&\"object\"===Dn(t.value.stops[0][0]),c=Jn({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if(\"identity\"===r)return [new Wn(t.key,t.value,'identity function may not have a \"stops\" property')];let e=[];const n=t.value;return e=e.concat(Qn({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),\"array\"===Dn(n)&&0===n.length&&e.push(new Wn(t.key,n,\"array must have at least one stop\")),e},default:function(t){return Ci({key:t.key,value:t.value,valueSpec:e,style:t.style,styleSpec:t.styleSpec})}}});return \"identity\"===r&&o&&c.push(new Wn(t.key,t.value,'missing required property \"property\"')),\"identity\"===r||t.value.stops||c.push(new Wn(t.key,t.value,'missing required property \"stops\"')),\"exponential\"===r&&t.valueSpec.expression&&!Pn(t.valueSpec)&&c.push(new Wn(t.key,t.value,\"exponential functions not supported\")),t.styleSpec.$version>=8&&(l&&!En(t.valueSpec)?c.push(new Wn(t.key,t.value,\"property functions not supported\")):o&&!Cn(t.valueSpec)&&c.push(new Wn(t.key,t.value,\"zoom functions not supported\"))),\"categorical\"!==r&&!u||void 0!==t.value.property||c.push(new Wn(t.key,t.value,'\"property\" property is required')),c;function h(t){let r=[];const n=t.value,o=t.key;if(\"array\"!==Dn(n))return [new Wn(o,n,`array expected, ${Dn(n)} found`)];if(2!==n.length)return [new Wn(o,n,`array length 2 expected, length ${n.length} found`)];if(u){if(\"object\"!==Dn(n[0]))return [new Wn(o,n,`object expected, ${Dn(n[0])} found`)];if(void 0===n[0].zoom)return [new Wn(o,n,\"object stop key must have zoom\")];if(void 0===n[0].value)return [new Wn(o,n,\"object stop key must have value\")];const e=Jt(n[0].zoom);if(\"number\"!=typeof e)return [new Wn(o,n[0].zoom,\"stop zoom values must be numbers\")];if(s&&s>e)return [new Wn(o,n[0].zoom,\"stop zoom values must appear in ascending order\")];e!==s&&(s=e,i=void 0,a={}),r=r.concat(Jn({key:`${o}[0]`,value:n[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:ti,value:p}}));}else r=r.concat(p({key:`${o}[0]`,value:n[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},n));return Nn(Qt(n[1]))?r.concat([new Wn(`${o}[1]`,n[1],\"expressions are not allowed in function stops.\")]):r.concat(Ci({key:`${o}[1]`,value:n[1],valueSpec:e,style:t.style,styleSpec:t.styleSpec}))}function p(t,s){const o=Dn(t.value),l=Jt(t.value),u=null!==t.value?t.value:s;if(n){if(o!==n)return [new Wn(t.key,u,`${o} stop domain type must match previous stop domain type ${n}`)]}else n=o;if(\"number\"!==o&&\"string\"!==o&&\"boolean\"!==o&&\"number\"!=typeof l&&\"string\"!=typeof l&&\"boolean\"!=typeof l)return [new Wn(t.key,u,\"stop domain value must be a number, string, or boolean\")];if(\"number\"!==o&&\"categorical\"!==r){let n=`number expected, ${o} found`;return En(e)&&void 0===r&&(n+='\\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`.'),[new Wn(t.key,u,n)]}return \"categorical\"!==r||\"number\"!==o||\"number\"==typeof l&&isFinite(l)&&Math.floor(l)===l?\"categorical\"!==r&&\"number\"===o&&\"number\"==typeof l&&\"number\"==typeof i&&void 0!==i&&l<i?[new Wn(t.key,u,\"stop domain values must appear in ascending order\")]:(i=l,\"categorical\"===r&&l in a?[new Wn(t.key,u,\"stop domain values must be unique\")]:(a[l]=!0,[])):[new Wn(t.key,u,`integer expected, found ${String(l)}`)]}}function ri(t){const e=(\"property\"===t.expressionContext?Kn:Gn)(Qt(t.value),t.valueSpec);if(\"error\"===e.result)return e.value.map((e=>new Wn(`${t.key}${e.key}`,t.value,e.message)));const r=e.value.expression||e.value._styleExpression.expression;if(\"property\"===t.expressionContext&&\"text-font\"===t.propertyKey&&!r.outputDefined())return [new Wn(t.key,t.value,`Invalid data expression for \"${t.propertyKey}\". Output values must be contained as literals within the expression.`)];if(\"property\"===t.expressionContext&&\"layout\"===t.propertyType&&!gr(r))return [new Wn(t.key,t.value,'\"feature-state\" data expressions are not supported with layout properties.')];if(\"filter\"===t.expressionContext)return ni(r,t);if(t.expressionContext&&0===t.expressionContext.indexOf(\"cluster\")){if(!xr(r,[\"zoom\",\"feature-state\"]))return [new Wn(t.key,t.value,'\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.')];if(\"cluster-initial\"===t.expressionContext&&!mr(r))return [new Wn(t.key,t.value,\"Feature data expressions are not supported with initial expression part of cluster properties.\")]}return []}function ni(t,e){const r=new Set([\"zoom\",\"feature-state\",\"pitch\",\"distance-from-center\"]);if(e.valueSpec&&e.valueSpec.expression)for(const t of e.valueSpec.expression.parameters)r.delete(t);if(0===r.size)return [];const n=[];return t instanceof He&&r.has(t.name)?[new Wn(e.key,e.value,`[\"${t.name}\"] expression is not supported in a filter for a ${e.object.type} layer with id: ${e.object.id}`)]:(t.eachChild((t=>{n.push(...ni(t,e));})),n)}function ii(t){const e=t.key,r=t.value,n=t.valueSpec,i=[];return Array.isArray(n.values)?-1===n.values.indexOf(Jt(r))&&i.push(new Wn(e,r,`expected one of [${n.values.join(\", \")}], ${JSON.stringify(r)} found`)):-1===Object.keys(n.values).indexOf(Jt(r))&&i.push(new Wn(e,r,`expected one of [${Object.keys(n.values).join(\", \")}], ${JSON.stringify(r)} found`)),i}function si(t){if(!0===t||!1===t)return !0;if(!Array.isArray(t)||0===t.length)return !1;switch(t[0]){case\"has\":return t.length>=2&&\"$id\"!==t[1]&&\"$type\"!==t[1];case\"in\":return t.length>=3&&(\"string\"!=typeof t[1]||Array.isArray(t[2]));case\"!in\":case\"!has\":case\"none\":return !1;case\"==\":case\"!=\":case\">\":case\">=\":case\"<\":case\"<=\":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case\"any\":case\"all\":for(const e of t.slice(1))if(!si(e)&&\"boolean\"!=typeof e)return !1;return !0;default:return !0}}function ai(t,e=\"fill\"){if(null==t)return {filter:()=>!0,needGeometry:!1,needFeature:!1};si(t)||(t=fi(t));const r=t;let n=!0;try{n=function(t){if(!ui(t))return t;let e=Qt(t);return li(e),e=oi(e),e}(r);}catch(t){console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\\nand paste the contents of this message in the report.\\nThank you!\\nFilter Expression:\\n${JSON.stringify(r,null,2)}\\n        `);}const i=Ht[`filter_${e}`],s=Gn(n,i);let a=null;if(\"error\"===s.result)throw new Error(s.value.map((t=>`${t.key}: ${t.message}`)).join(\", \"));a=(t,e,r)=>s.value.evaluate(t,e,{},r);let o=null,l=null;if(n!==r){const t=Gn(r,i);if(\"error\"===t.result)throw new Error(t.value.map((t=>`${t.key}: ${t.message}`)).join(\", \"));o=(e,r,n,i,s)=>t.value.evaluate(e,r,{},n,void 0,void 0,i,s),l=!mr(t.value.expression);}return {filter:a,dynamicFilter:o||void 0,needGeometry:pi(n),needFeature:!!l}}function oi(t){if(!Array.isArray(t))return t;const e=function(t){if(ci.has(t[0]))for(let e=1;e<t.length;e++)if(ui(t[e]))return !0;return t}(t);return !0===e?e:e.map((t=>oi(t)))}function li(t){let e=!1;const r=[];if(\"case\"===t[0]){for(let n=1;n<t.length-1;n+=2)e=e||ui(t[n]),r.push(t[n+1]);r.push(t[t.length-1]);}else if(\"match\"===t[0]){e=e||ui(t[1]);for(let e=2;e<t.length-1;e+=2)r.push(t[e+1]);r.push(t[t.length-1]);}else if(\"step\"===t[0]){e=e||ui(t[1]);for(let e=1;e<t.length-1;e+=2)r.push(t[e+1]);}e&&(t.length=0,t.push(\"any\",...r));for(let e=1;e<t.length;e++)li(t[e]);}function ui(t){if(!Array.isArray(t))return !1;if(\"pitch\"===(e=t[0])||\"distance-from-center\"===e)return !0;var e;for(let e=1;e<t.length;e++)if(ui(t[e]))return !0;return !1}const ci=new Set([\"in\",\"==\",\"!=\",\">\",\">=\",\"<\",\"<=\",\"to-boolean\"]);function hi(t,e){return t<e?-1:t>e?1:0}function pi(t){if(!Array.isArray(t))return !1;if(\"within\"===t[0])return !0;for(let e=1;e<t.length;e++)if(pi(t[e]))return !0;return !1}function fi(t){if(!t)return !0;const e=t[0];return t.length<=1?\"any\"!==e:\"==\"===e?di(t[1],t[2],\"==\"):\"!=\"===e?gi(di(t[1],t[2],\"==\")):\"<\"===e||\">\"===e||\"<=\"===e||\">=\"===e?di(t[1],t[2],e):\"any\"===e?(r=t.slice(1),[\"any\"].concat(r.map(fi))):\"all\"===e?[\"all\"].concat(t.slice(1).map(fi)):\"none\"===e?[\"all\"].concat(t.slice(1).map(fi).map(gi)):\"in\"===e?yi(t[1],t.slice(2)):\"!in\"===e?gi(yi(t[1],t.slice(2))):\"has\"===e?mi(t[1]):\"!has\"===e?gi(mi(t[1])):\"within\"!==e||t;var r;}function di(t,e,r){switch(t){case\"$type\":return [`filter-type-${r}`,e];case\"$id\":return [`filter-id-${r}`,e];default:return [`filter-${r}`,t,e]}}function yi(t,e){if(0===e.length)return !1;switch(t){case\"$type\":return [\"filter-type-in\",[\"literal\",e]];case\"$id\":return [\"filter-id-in\",[\"literal\",e]];default:return e.length>200&&!e.some((t=>typeof t!=typeof e[0]))?[\"filter-in-large\",t,[\"literal\",e.sort(hi)]]:[\"filter-in-small\",t,[\"literal\",e]]}}function mi(t){switch(t){case\"$type\":return !0;case\"$id\":return [\"filter-has-id\"];default:return [\"filter-has\",t]}}function gi(t){return [\"!\",t]}function xi(t){return si(Qt(t.value))?ri(Wt({},t,{expressionContext:\"filter\",valueSpec:t.styleSpec[`filter_${t.layerType||\"fill\"}`]})):vi(t)}function vi(t){const e=t.value,r=t.key;if(\"array\"!==Dn(e))return [new Wn(r,e,`array expected, ${Dn(e)} found`)];const n=t.styleSpec;let i,s=[];if(e.length<1)return [new Wn(r,e,\"filter array must have at least 1 element\")];switch(s=s.concat(ii({key:`${r}[0]`,value:e[0],valueSpec:n.filter_operator,style:t.style,styleSpec:t.styleSpec})),Jt(e[0])){case\"<\":case\"<=\":case\">\":case\">=\":e.length>=2&&\"$type\"===Jt(e[1])&&s.push(new Wn(r,e,`\"$type\" cannot be use with operator \"${e[0]}\"`));case\"==\":case\"!=\":3!==e.length&&s.push(new Wn(r,e,`filter array for operator \"${e[0]}\" must have 3 elements`));case\"in\":case\"!in\":e.length>=2&&(i=Dn(e[1]),\"string\"!==i&&s.push(new Wn(`${r}[1]`,e[1],`string expected, ${i} found`)));for(let a=2;a<e.length;a++)i=Dn(e[a]),\"$type\"===Jt(e[1])?s=s.concat(ii({key:`${r}[${a}]`,value:e[a],valueSpec:n.geometry_type,style:t.style,styleSpec:t.styleSpec})):\"string\"!==i&&\"number\"!==i&&\"boolean\"!==i&&s.push(new Wn(`${r}[${a}]`,e[a],`string, number, or boolean expected, ${i} found`));break;case\"any\":case\"all\":case\"none\":for(let n=1;n<e.length;n++)s=s.concat(vi({key:`${r}[${n}]`,value:e[n],style:t.style,styleSpec:t.styleSpec}));break;case\"has\":case\"!has\":i=Dn(e[1]),2!==e.length?s.push(new Wn(r,e,`filter array for \"${e[0]}\" operator must have 2 elements`)):\"string\"!==i&&s.push(new Wn(`${r}[1]`,e[1],`string expected, ${i} found`));break;case\"within\":i=Dn(e[1]),2!==e.length?s.push(new Wn(r,e,`filter array for \"${e[0]}\" operator must have 2 elements`)):\"object\"!==i&&s.push(new Wn(`${r}[1]`,e[1],`object expected, ${i} found`));}return s}function bi(t,e){const r=t.key,n=t.style,i=t.styleSpec,s=t.value,a=t.objectKey,o=i[`${e}_${t.layerType}`];if(!o)return [];const l=a.match(/^(.*)-transition$/);if(\"paint\"===e&&l&&o[l[1]]&&o[l[1]].transition)return Ci({key:r,value:s,valueSpec:i.transition,style:n,styleSpec:i});const u=t.valueSpec||o[a];if(!u)return [new Wn(r,s,`unknown property \"${a}\"`)];let c;if(\"string\"===Dn(s)&&En(u)&&!u.tokens&&(c=/^{([^}]+)}$/.exec(s)))return [new Wn(r,s,`\"${a}\" does not support interpolation syntax\\nUse an identity property function instead: \\`{ \"type\": \"identity\", \"property\": ${JSON.stringify(c[1])} }\\`.`)];const h=[];return \"symbol\"===t.layerType&&(\"text-field\"===a&&n&&!n.glyphs&&h.push(new Wn(r,s,'use of \"text-field\" requires a style \"glyphs\" property')),\"text-font\"===a&&Vn(Qt(s))&&\"identity\"===Jt(s.type)&&h.push(new Wn(r,s,'\"text-font\" does not support identity functions'))),h.concat(Ci({key:t.key,value:s,valueSpec:u,style:n,styleSpec:i,expressionContext:\"property\",propertyType:e,propertyKey:a}))}function wi(t){return bi(t,\"paint\")}function _i(t){return bi(t,\"layout\")}function Ai(t){let e=[];const r=t.value,n=t.key,i=t.style,s=t.styleSpec;r.type||r.ref||e.push(new Wn(n,r,'either \"type\" or \"ref\" is required'));let a=Jt(r.type);const o=Jt(r.ref);if(r.id){const s=Jt(r.id);for(let a=0;a<t.arrayIndex;a++){const t=i.layers[a];Jt(t.id)===s&&e.push(new Wn(n,r.id,`duplicate layer id \"${r.id}\", previously used at line ${t.id.__line__}`));}}if(\"ref\"in r){let t;[\"type\",\"source\",\"source-layer\",\"filter\",\"layout\"].forEach((t=>{t in r&&e.push(new Wn(n,r[t],`\"${t}\" is prohibited for ref layers`));})),i.layers.forEach((e=>{Jt(e.id)===o&&(t=e);})),t?t.ref?e.push(new Wn(n,r.ref,\"ref cannot reference another ref layer\")):a=Jt(t.type):\"string\"==typeof o&&e.push(new Wn(n,r.ref,`ref layer \"${o}\" not found`));}else if(\"background\"!==a&&\"sky\"!==a)if(r.source){const t=i.sources&&i.sources[r.source],s=t&&Jt(t.type);t?\"vector\"===s&&\"raster\"===a?e.push(new Wn(n,r.source,`layer \"${r.id}\" requires a raster source`)):\"raster\"===s&&\"raster\"!==a?e.push(new Wn(n,r.source,`layer \"${r.id}\" requires a vector source`)):\"vector\"!==s||r[\"source-layer\"]?\"raster-dem\"===s&&\"hillshade\"!==a?e.push(new Wn(n,r.source,\"raster-dem source can only be used with layer type 'hillshade'.\")):\"line\"!==a||!r.paint||!r.paint[\"line-gradient\"]&&!r.paint[\"line-trim-offset\"]||\"geojson\"===s&&t.lineMetrics||e.push(new Wn(n,r,`layer \"${r.id}\" specifies a line-gradient, which requires a GeoJSON source with \\`lineMetrics\\` enabled.`)):e.push(new Wn(n,r,`layer \"${r.id}\" must specify a \"source-layer\"`)):e.push(new Wn(n,r.source,`source \"${r.source}\" not found`));}else e.push(new Wn(n,r,'missing required property \"source\"'));return e=e.concat(Jn({key:n,value:r,valueSpec:s.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{\"*\":()=>[],type:()=>Ci({key:`${n}.type`,value:r.type,valueSpec:s.layer.type,style:t.style,styleSpec:t.styleSpec,object:r,objectKey:\"type\"}),filter:t=>xi(Wt({layerType:a},t)),layout:t=>Jn({layer:r,key:t.key,value:t.value,valueSpec:{},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{\"*\":t=>_i(Wt({layerType:a},t))}}),paint:t=>Jn({layer:r,key:t.key,value:t.value,valueSpec:{},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{\"*\":t=>wi(Wt({layerType:a},t))}})}})),e}function Si(t){const e=t.value,r=t.key,n=Dn(e);return \"string\"!==n?[new Wn(r,e,`string expected, ${n} found`)]:[]}const ki={promoteId:function({key:t,value:e}){if(\"string\"===Dn(e))return Si({key:t,value:e});{const r=[];for(const n in e)r.push(...Si({key:`${t}.${n}`,value:e[n]}));return r}}};function Ii(t){const e=t.value,r=t.key,n=t.styleSpec,i=t.style;if(!e.type)return [new Wn(r,e,'\"type\" is required')];const s=Jt(e.type);let a;switch(s){case\"vector\":case\"raster\":case\"raster-dem\":return a=Jn({key:r,value:e,valueSpec:n[`source_${s.replace(\"-\",\"_\")}`],style:t.style,styleSpec:n,objectElementValidators:ki}),a;case\"geojson\":if(a=Jn({key:r,value:e,valueSpec:n.source_geojson,style:i,styleSpec:n,objectElementValidators:ki}),e.cluster)for(const t in e.clusterProperties){const[n,i]=e.clusterProperties[t],s=\"string\"==typeof n?[n,[\"accumulated\"],[\"get\",t]]:n;a.push(...ri({key:`${r}.${t}.map`,value:i,expressionContext:\"cluster-map\"})),a.push(...ri({key:`${r}.${t}.reduce`,value:s,expressionContext:\"cluster-reduce\"}));}return a;case\"video\":return Jn({key:r,value:e,valueSpec:n.source_video,style:i,styleSpec:n});case\"image\":return Jn({key:r,value:e,valueSpec:n.source_image,style:i,styleSpec:n});case\"canvas\":return [new Wn(r,null,\"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.\",\"source.canvas\")];default:return ii({key:`${r}.type`,value:e.type,valueSpec:{values:Mi(n)},style:i,styleSpec:n})}}function Mi(t){return t.source.reduce(((e,r)=>{const n=t[r];return \"enum\"===n.type.type&&(e=e.concat(Object.keys(n.type.values))),e}),[])}function Ti(t){const e=t.value,r=t.styleSpec,n=r.light,i=t.style;let s=[];const a=Dn(e);if(void 0===e)return s;if(\"object\"!==a)return s=s.concat([new Wn(\"light\",e,`object expected, ${a} found`)]),s;for(const t in e){const a=t.match(/^(.*)-transition$/);s=s.concat(a&&n[a[1]]&&n[a[1]].transition?Ci({key:t,value:e[t],valueSpec:r.transition,style:i,styleSpec:r}):n[t]?Ci({key:t,value:e[t],valueSpec:n[t],style:i,styleSpec:r}):[new Wn(t,e[t],`unknown property \"${t}\"`)]);}return s}function zi(t){const e=t.value,r=t.key,n=t.style,i=t.styleSpec,s=i.terrain;let a=[];const o=Dn(e);if(void 0===e)return a;if(\"object\"!==o)return a=a.concat([new Wn(\"terrain\",e,`object expected, ${o} found`)]),a;for(const t in e){const r=t.match(/^(.*)-transition$/);a=a.concat(r&&s[r[1]]&&s[r[1]].transition?Ci({key:t,value:e[t],valueSpec:i.transition,style:n,styleSpec:i}):s[t]?Ci({key:t,value:e[t],valueSpec:s[t],style:n,styleSpec:i}):[new Wn(t,e[t],`unknown property \"${t}\"`)]);}if(e.source){const t=n.sources&&n.sources[e.source],i=t&&Jt(t.type);t?\"raster-dem\"!==i&&a.push(new Wn(r,e.source,`terrain cannot be used with a source of type ${String(i)}, it only be used with a \"raster-dem\" source type`)):a.push(new Wn(r,e.source,`source \"${e.source}\" not found`));}else a.push(new Wn(r,e,'terrain is missing required property \"source\"'));return a}function Bi(t){const e=t.value,r=t.style,n=t.styleSpec,i=n.fog;let s=[];const a=Dn(e);if(void 0===e)return s;if(\"object\"!==a)return s=s.concat([new Wn(\"fog\",e,`object expected, ${a} found`)]),s;for(const t in e){const a=t.match(/^(.*)-transition$/);s=s.concat(a&&i[a[1]]&&i[a[1]].transition?Ci({key:t,value:e[t],valueSpec:n.transition,style:r,styleSpec:n}):i[t]?Ci({key:t,value:e[t],valueSpec:i[t],style:r,styleSpec:n}):[new Wn(t,e[t],`unknown property \"${t}\"`)]);}return s}const Ei={\"*\":()=>[],array:Qn,boolean:function(t){const e=t.value,r=t.key,n=Dn(e);return \"boolean\"!==n?[new Wn(r,e,`boolean expected, ${n} found`)]:[]},number:ti,color:function(t){const e=t.key,r=t.value,n=Dn(r);return \"string\"!==n?[new Wn(e,r,`color expected, ${n} found`)]:null===be(r)?[new Wn(e,r,`color expected, \"${r}\" found`)]:[]},enum:ii,filter:xi,function:ei,layer:Ai,object:Jn,source:Ii,light:Ti,terrain:zi,fog:Bi,string:Si,formatted:function(t){return 0===Si(t).length?[]:ri(t)},resolvedImage:function(t){return 0===Si(t).length?[]:ri(t)},projection:function(t){const e=t.value,r=t.styleSpec,n=r.projection,i=t.style;let s=[];const a=Dn(e);if(\"object\"===a)for(const t in e)s=s.concat(Ci({key:t,value:e[t],valueSpec:n[t],style:i,styleSpec:r}));else \"string\"!==a&&(s=s.concat([new Wn(\"projection\",e,`object or string expected, ${a} found`)]));return s}};function Ci(t){const e=t.value,r=t.valueSpec,n=t.styleSpec;return r.expression&&Vn(Jt(e))?ei(t):r.expression&&Nn(Qt(e))?ri(t):r.type&&Ei[r.type]?Ei[r.type](t):Jn(Wt({},t,{valueSpec:r.type?n[r.type]:r}))}function Pi(t){const e=t.value,r=t.key,n=Si(t);return n.length||(-1===e.indexOf(\"{fontstack}\")&&n.push(new Wn(r,e,'\"glyphs\" url must include a \"{fontstack}\" token')),-1===e.indexOf(\"{range}\")&&n.push(new Wn(r,e,'\"glyphs\" url must include a \"{range}\" token'))),n}function Di(t,e=Ht){return Fi(Ci({key:\"\",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Pi,\"*\":()=>[]}}))}const Vi=t=>Fi(wi(t)),Li=t=>Fi(_i(t));function Fi(t){return t.slice().sort(((t,e)=>t.line&&e.line?t.line-e.line:0))}function Ri(t,e){let r=!1;if(e&&e.length)for(const n of e)t.fire(new Kt(new Error(n.message))),r=!0;return r}var ji=Ui;function Ui(t,e,r){var n=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],this.d=(e=i[1])+2*(r=i[2]);for(var s=0;s<this.d*this.d;s++){var a=i[3+s],o=i[3+s+1];n.push(a===o?null:i.subarray(a,o));}var l=i[3+n.length+1];this.keys=i.subarray(i[3+n.length],l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly;}else {this.d=e+2*r;for(var u=0;u<this.d*this.d;u++)n.push([]);this.keys=[],this.bboxes=[];}this.n=e,this.extent=t,this.padding=r,this.scale=e/t,this.uid=0;var c=r/e*t;this.min=-c,this.max=t+c;}Ui.prototype.insert=function(t,e,r,n,i){this._forEachCell(e,r,n,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i);},Ui.prototype._insertReadonly=function(){throw \"Cannot insert into a GridIndex created from an ArrayBuffer.\"},Ui.prototype._insertCell=function(t,e,r,n,i,s){this.cells[i].push(s);},Ui.prototype.query=function(t,e,r,n,i){var s=this.min,a=this.max;if(t<=s&&e<=s&&a<=r&&a<=n&&!i)return Array.prototype.slice.call(this.keys);var o=[];return this._forEachCell(t,e,r,n,this._queryCell,o,{},i),o},Ui.prototype._queryCell=function(t,e,r,n,i,s,a,o){var l=this.cells[i];if(null!==l)for(var u=this.keys,c=this.bboxes,h=0;h<l.length;h++){var p=l[h];if(void 0===a[p]){var f=4*p;(o?o(c[f+0],c[f+1],c[f+2],c[f+3]):t<=c[f+2]&&e<=c[f+3]&&r>=c[f+0]&&n>=c[f+1])?(a[p]=!0,s.push(u[p])):a[p]=!1;}}},Ui.prototype._forEachCell=function(t,e,r,n,i,s,a,o){for(var l=this._convertToCellCoord(t),u=this._convertToCellCoord(e),c=this._convertToCellCoord(r),h=this._convertToCellCoord(n),p=l;p<=c;p++)for(var f=u;f<=h;f++){var d=this.d*f+p;if((!o||o(this._convertFromCellCoord(p),this._convertFromCellCoord(f),this._convertFromCellCoord(p+1),this._convertFromCellCoord(f+1)))&&i.call(this,t,e,r,n,d,s,a,o))return}},Ui.prototype._convertFromCellCoord=function(t){return (t-this.padding)/this.scale},Ui.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Ui.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,r=0,n=0;n<this.cells.length;n++)r+=this.cells[n].length;var i=new Int32Array(e+r+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var s=e,a=0;a<t.length;a++){var o=t[a];i[3+a]=s,i.set(o,s),s+=o.length;}return i[3+t.length]=s,i.set(this.keys,s),i[3+t.length+1]=s+=this.keys.length,i.set(this.bboxes,s),s+=this.bboxes.length,i.buffer};const $i={};function Oi(t,e,r={}){Object.defineProperty(t,\"_classRegistryKey\",{value:e,writeable:!1}),$i[e]={klass:t,omit:r.omit||[]};}Oi(Object,\"Object\"),ji.serialize=function(t,e){const r=t.toArrayBuffer();return e&&e.push(r),{buffer:r}},ji.deserialize=function(t){return new ji(t.buffer)},Object.defineProperty(ji,\"name\",{value:\"Grid\"}),Oi(ji,\"Grid\"),Oi(Me,\"Color\"),Oi(Error,\"Error\"),Oi(at,\"AJAXError\"),Oi(Ee,\"ResolvedImage\"),Oi(Yn,\"StylePropertyFunction\"),Oi(qn,\"StyleExpression\",{omit:[\"_evaluator\"]}),Oi(Zn,\"ZoomDependentExpression\"),Oi(Xn,\"ZoomConstantExpression\"),Oi(He,\"CompoundExpression\",{omit:[\"_evaluate\"]});for(const t in Tn)$i[Tn[t]._classRegistryKey]||Oi(Tn[t],`Expression${t}`);function qi(t){return t&&\"undefined\"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&\"ArrayBuffer\"===t.constructor.name)}function Ni(t){return e.ImageBitmap&&t instanceof e.ImageBitmap}function Gi(t,r){if(null==t||\"boolean\"==typeof t||\"number\"==typeof t||\"string\"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(qi(t)||Ni(t))return r&&r.push(t),t;if(ArrayBuffer.isView(t)){const e=t;return r&&r.push(e.buffer),e}if(t instanceof e.ImageData)return r&&r.push(t.data.buffer),t;if(Array.isArray(t)){const e=[];for(const n of t)e.push(Gi(n,r));return e}if(\"object\"==typeof t){const e=t.constructor,n=e._classRegistryKey;if(!n)throw new Error(`can't serialize object of unregistered class ${n}`);const i=e.serialize?e.serialize(t,r):{};if(!e.serialize){for(const e in t)t.hasOwnProperty(e)&&($i[n].omit.indexOf(e)>=0||(i[e]=Gi(t[e],r)));t instanceof Error&&(i.message=t.message);}if(i.$name)throw new Error(\"$name property is reserved for worker serialization logic.\");return \"Object\"!==n&&(i.$name=n),i}throw new Error(\"can't serialize object of type \"+typeof t)}function Xi(t){if(null==t||\"boolean\"==typeof t||\"number\"==typeof t||\"string\"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||qi(t)||Ni(t)||ArrayBuffer.isView(t)||t instanceof e.ImageData)return t;if(Array.isArray(t))return t.map(Xi);if(\"object\"==typeof t){const e=t.$name||\"Object\",{klass:r}=$i[e];if(!r)throw new Error(`can't deserialize unregistered class ${e}`);if(r.deserialize)return r.deserialize(t);const n=Object.create(r.prototype);for(const e of Object.keys(t))\"$name\"!==e&&(n[e]=Xi(t[e]));return n}throw new Error(\"can't deserialize object of type \"+typeof t)}const Zi=t=>t>=1536&&t<=1791,Ki=t=>t>=1872&&t<=1919,Yi=t=>t>=2208&&t<=2303,Hi=t=>t>=11904&&t<=12031,Wi=t=>t>=12032&&t<=12255,Ji=t=>t>=12272&&t<=12287,Qi=t=>t>=12288&&t<=12351,ts=t=>t>=12352&&t<=12447,es=t=>t>=12448&&t<=12543,rs=t=>t>=12544&&t<=12591,ns=t=>t>=12704&&t<=12735,is=t=>t>=12736&&t<=12783,ss=t=>t>=12784&&t<=12799,as=t=>t>=12800&&t<=13055,os=t=>t>=13056&&t<=13311,ls=t=>t>=13312&&t<=19903,us=t=>t>=19968&&t<=40959,cs=t=>t>=40960&&t<=42127,hs=t=>t>=42128&&t<=42191,ps=t=>t>=44032&&t<=55215,fs=t=>t>=63744&&t<=64255,ds=t=>t>=64336&&t<=65023,ys=t=>t>=65040&&t<=65055,ms=t=>t>=65072&&t<=65103,gs=t=>t>=65104&&t<=65135,xs=t=>t>=65136&&t<=65279,vs=t=>t>=65280&&t<=65519;function bs(t){for(const e of t)if(As(e.charCodeAt(0)))return !0;return !1}function ws(t){for(const e of t)if(!_s(e.charCodeAt(0)))return !1;return !0}function _s(t){return !(Zi(t)||Ki(t)||Yi(t)||ds(t)||xs(t))}function As(t){return !(746!==t&&747!==t&&(t<4352||!(ns(t)||rs(t)||ms(t)&&!(t>=65097&&t<=65103)||fs(t)||os(t)||Hi(t)||is(t)||!(!Qi(t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||ls(t)||us(t)||as(t)||(t=>t>=12592&&t<=12687)(t)||(t=>t>=43360&&t<=43391)(t)||(t=>t>=55216&&t<=55295)(t)||(t=>t>=4352&&t<=4607)(t)||ps(t)||ts(t)||Ji(t)||(t=>t>=12688&&t<=12703)(t)||Wi(t)||ss(t)||es(t)&&12540!==t||!(!vs(t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!gs(t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||(t=>t>=5120&&t<=5759)(t)||(t=>t>=6320&&t<=6399)(t)||ys(t)||(t=>t>=19904&&t<=19967)(t)||cs(t)||hs(t))))}function Ss(t){return !(As(t)||function(t){return !!((t=>t>=128&&t<=255)(t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||(t=>t>=8192&&t<=8303)(t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||(t=>t>=8448&&t<=8527)(t)||(t=>t>=8528&&t<=8591)(t)||(t=>t>=8960&&t<=9215)(t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||(t=>t>=9216&&t<=9279)(t)&&9251!==t||(t=>t>=9280&&t<=9311)(t)||(t=>t>=9312&&t<=9471)(t)||(t=>t>=9632&&t<=9727)(t)||(t=>t>=9728&&t<=9983)(t)&&!(t>=9754&&t<=9759)||(t=>t>=11008&&t<=11263)(t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Qi(t)||es(t)||(t=>t>=57344&&t<=63743)(t)||ms(t)||gs(t)||vs(t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function ks(t){return t>=1424&&t<=2303||ds(t)||xs(t)}function Is(t,e){return !(!e&&ks(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||(t=>t>=6016&&t<=6143)(t))}function Ms(t){for(const e of t)if(ks(e.charCodeAt(0)))return !0;return !1}const Ts=\"deferred\",zs=\"loading\",Bs=\"loaded\";let Es=null,Cs=\"unavailable\",Ps=null;const Ds=function(t){t&&\"string\"==typeof t&&t.indexOf(\"NetworkError\")>-1&&(Cs=\"error\"),Es&&Es(t);};function Vs(){Ls.fire(new Zt(\"pluginStateChange\",{pluginStatus:Cs,pluginURL:Ps}));}const Ls=new Yt,Fs=function(){return Cs},Rs=function(){if(Cs!==Ts||!Ps)throw new Error(\"rtl-text-plugin cannot be downloaded unless a pluginURL is specified\");Cs=zs,Vs(),Ps&&ut({url:Ps},(t=>{t?Ds(t):(Cs=Bs,Vs());}));},js={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Cs===Bs||null!=js.applyArabicShaping,isLoading:()=>Cs===zs,setState(t){Cs=t.pluginStatus,Ps=t.pluginURL;},isParsed:()=>null!=js.applyArabicShaping&&null!=js.processBidirectionalText&&null!=js.processStyledBidirectionalText,getPluginURL:()=>Ps};class Us{constructor(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.transition=e.transition,this.pitch=e.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0);}isSupportedScript(t){return function(t,e){for(const r of t)if(!Is(r.charCodeAt(0),e))return !1;return !0}(t,js.isLoaded())}}class $s{constructor(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Vn(t))return new Yn(t,e);if(Nn(t)){const r=Kn(t,e);if(\"error\"===r.result)throw new Error(r.value.map((t=>`${t.key}: ${t.message}`)).join(\", \"));return r.value}{let r=t;return \"string\"==typeof t&&\"color\"===e.type&&(r=Me.parse(t)),{kind:\"constant\",evaluate:()=>r}}}(void 0===e?t.specification.default:e,t.specification);}isDataDriven(){return \"source\"===this.expression.kind||\"composite\"===this.expression.kind}possiblyEvaluate(t,e,r){return this.property.possiblyEvaluate(this,t,e,r)}}class Os{constructor(t){this.property=t,this.value=new $s(t,void 0);}transitioned(t,e){return new Ns(this.property,this.value,e,z({},t.transition,this.transition),t.now)}untransitioned(){return new Ns(this.property,this.value,null,{},0)}}class qs{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues);}getValue(t){return j(this._values[t].value.value)}setValue(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Os(this._values[t].property)),this._values[t].value=new $s(this._values[t].property,null===e?void 0:j(e));}getTransition(t){return j(this._values[t].transition)}setTransition(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Os(this._values[t].property)),this._values[t].transition=j(e)||void 0;}serialize(){const t={};for(const e of Object.keys(this._values)){const r=this.getValue(e);void 0!==r&&(t[e]=r);const n=this.getTransition(e);void 0!==n&&(t[`${e}-transition`]=n);}return t}transitioned(t,e){const r=new Gs(this._properties);for(const n of Object.keys(this._values))r._values[n]=this._values[n].transitioned(t,e._values[n]);return r}untransitioned(){const t=new Gs(this._properties);for(const e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class Ns{constructor(t,e,r,n,i){const s=n.delay||0,a=n.duration||0;i=i||0,this.property=t,this.value=e,this.begin=i+s,this.end=this.begin+a,t.specification.transition&&(n.delay||n.duration)&&(this.prior=r);}possiblyEvaluate(t,e,r){const n=t.now||0,i=this.value.possiblyEvaluate(t,e,r),s=this.prior;if(s){if(n>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(n<this.begin)return s.possiblyEvaluate(t,e,r);{const a=(n-this.begin)/(this.end-this.begin);return this.property.interpolate(s.possiblyEvaluate(t,e,r),i,w(a))}}return i}}class Gs{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues);}possiblyEvaluate(t,e,r){const n=new Ks(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].possiblyEvaluate(t,e,r);return n}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return !0;return !1}}class Xs{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues);}getValue(t){return j(this._values[t].value)}setValue(t,e){this._values[t]=new $s(this._values[t].property,null===e?void 0:j(e));}serialize(){const t={};for(const e of Object.keys(this._values)){const r=this.getValue(e);void 0!==r&&(t[e]=r);}return t}possiblyEvaluate(t,e,r){const n=new Ks(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].possiblyEvaluate(t,e,r);return n}}class Zs{constructor(t,e,r){this.property=t,this.value=e,this.parameters=r;}isConstant(){return \"constant\"===this.value.kind}constantOr(t){return \"constant\"===this.value.kind?this.value.value:t}evaluate(t,e,r,n){return this.property.evaluate(this.value,this.parameters,t,e,r,n)}}class Ks{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues);}get(t){return this._values[t]}}class Ys{constructor(t){this.specification=t;}possiblyEvaluate(t,e){return t.expression.evaluate(e)}interpolate(t,e,r){const n=Tr[this.specification.type];return n?n(t,e,r):t}}class Hs{constructor(t,e){this.specification=t,this.overrides=e;}possiblyEvaluate(t,e,r,n){return new Zs(this,\"constant\"===t.expression.kind||\"camera\"===t.expression.kind?{kind:\"constant\",value:t.expression.evaluate(e,null,{},r,n)}:t.expression,e)}interpolate(t,e,r){if(\"constant\"!==t.value.kind||\"constant\"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Zs(this,{kind:\"constant\",value:void 0},t.parameters);const n=Tr[this.specification.type];return n?new Zs(this,{kind:\"constant\",value:n(t.value.value,e.value.value,r)},t.parameters):t}evaluate(t,e,r,n,i,s){return \"constant\"===t.kind?t.value:t.evaluate(e,r,n,i,s)}}class Ws{constructor(t){this.specification=t;}possiblyEvaluate(t,e,r,n){return !!t.expression.evaluate(e,null,{},r,n)}interpolate(){return !1}}class Js{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const e=new Us(0,{});for(const r in t){const n=t[r];n.specification.overridable&&this.overridableProperties.push(r);const i=this.defaultPropertyValues[r]=new $s(n,void 0),s=this.defaultTransitionablePropertyValues[r]=new Os(n);this.defaultTransitioningPropertyValues[r]=s.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=i.possiblyEvaluate(e);}}}function Qs(t,e){return 256*(t=S(Math.floor(t),0,255))+S(Math.floor(e),0,255)}Oi(Hs,\"DataDrivenProperty\"),Oi(Ys,\"DataConstantProperty\"),Oi(Ws,\"ColorRampProperty\");const ta={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ea{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8;}}class ra{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0);}static serialize(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews());}clear(){this.length=0;}resize(t){this.reserve(t),this.length=t;}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const e=this.uint8;this._refreshViews(),e&&this.uint8.set(e);}}_refreshViews(){throw new Error(\"_refreshViews() must be implemented by each concrete StructArray layout\")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null;}}function na(t,e=1){let r=0,n=0;return {members:t.map((t=>{const i=ta[t.type].BYTES_PER_ELEMENT,s=r=ia(r,Math.max(e,i)),a=t.components||1;return n=Math.max(n,i),r+=i*a,{name:t.name,type:t.type,components:a,offset:s}})),size:ia(r,Math.max(n,e)),alignment:e}}function ia(t,e){return Math.ceil(t/e)*e}class sa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);}emplaceBack(t,e){const r=this.length;return this.resize(r+1),this.emplace(r,t,e)}emplace(t,e,r){const n=2*t;return this.int16[n+0]=e,this.int16[n+1]=r,t}}sa.prototype.bytesPerElement=4,Oi(sa,\"StructArrayLayout2i4\");class aa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);}emplaceBack(t,e,r){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)}emplace(t,e,r,n){const i=3*t;return this.int16[i+0]=e,this.int16[i+1]=r,this.int16[i+2]=n,t}}aa.prototype.bytesPerElement=6,Oi(aa,\"StructArrayLayout3i6\");class oa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);}emplaceBack(t,e,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)}emplace(t,e,r,n,i){const s=4*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,t}}oa.prototype.bytesPerElement=8,Oi(oa,\"StructArrayLayout4i8\");class la extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s,a){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,r,n,i,s,a)}emplace(t,e,r,n,i,s,a,o){const l=6*t,u=12*t,c=3*t;return this.int16[l+0]=e,this.int16[l+1]=r,this.uint8[u+4]=n,this.uint8[u+5]=i,this.uint8[u+6]=s,this.uint8[u+7]=a,this.float32[c+2]=o,t}}la.prototype.bytesPerElement=12,Oi(la,\"StructArrayLayout2i4ub1f12\");class ua extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);}emplaceBack(t,e,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)}emplace(t,e,r,n,i){const s=4*t;return this.float32[s+0]=e,this.float32[s+1]=r,this.float32[s+2]=n,this.float32[s+3]=i,t}}ua.prototype.bytesPerElement=16,Oi(ua,\"StructArrayLayout4f16\");class ca extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,r,n,i)}emplace(t,e,r,n,i,s){const a=6*t,o=3*t;return this.uint16[a+0]=e,this.uint16[a+1]=r,this.uint16[a+2]=n,this.uint16[a+3]=i,this.float32[o+2]=s,t}}ca.prototype.bytesPerElement=12,Oi(ca,\"StructArrayLayout4ui1f12\");class ha extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);}emplaceBack(t,e,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)}emplace(t,e,r,n,i){const s=4*t;return this.uint16[s+0]=e,this.uint16[s+1]=r,this.uint16[s+2]=n,this.uint16[s+3]=i,t}}ha.prototype.bytesPerElement=8,Oi(ha,\"StructArrayLayout4ui8\");class pa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,n,i,s)}emplace(t,e,r,n,i,s,a){const o=6*t;return this.int16[o+0]=e,this.int16[o+1]=r,this.int16[o+2]=n,this.int16[o+3]=i,this.int16[o+4]=s,this.int16[o+5]=a,t}}pa.prototype.bytesPerElement=12,Oi(pa,\"StructArrayLayout6i12\");class fa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s,a,o,l,u,c,h){const p=this.length;return this.resize(p+1),this.emplace(p,t,e,r,n,i,s,a,o,l,u,c,h)}emplace(t,e,r,n,i,s,a,o,l,u,c,h,p){const f=12*t;return this.int16[f+0]=e,this.int16[f+1]=r,this.int16[f+2]=n,this.int16[f+3]=i,this.uint16[f+4]=s,this.uint16[f+5]=a,this.uint16[f+6]=o,this.uint16[f+7]=l,this.int16[f+8]=u,this.int16[f+9]=c,this.int16[f+10]=h,this.int16[f+11]=p,t}}fa.prototype.bytesPerElement=24,Oi(fa,\"StructArrayLayout4i4ui4i24\");class da extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,n,i,s)}emplace(t,e,r,n,i,s,a){const o=10*t,l=5*t;return this.int16[o+0]=e,this.int16[o+1]=r,this.int16[o+2]=n,this.float32[l+2]=i,this.float32[l+3]=s,this.float32[l+4]=a,t}}da.prototype.bytesPerElement=20,Oi(da,\"StructArrayLayout3i3f20\");class ya extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer);}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint32[1*t+0]=e,t}}ya.prototype.bytesPerElement=4,Oi(ya,\"StructArrayLayout1ul4\");class ma extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s,a,o,l,u,c,h,p){const f=this.length;return this.resize(f+1),this.emplace(f,t,e,r,n,i,s,a,o,l,u,c,h,p)}emplace(t,e,r,n,i,s,a,o,l,u,c,h,p,f){const d=20*t,y=10*t;return this.int16[d+0]=e,this.int16[d+1]=r,this.int16[d+2]=n,this.int16[d+3]=i,this.int16[d+4]=s,this.float32[y+3]=a,this.float32[y+4]=o,this.float32[y+5]=l,this.float32[y+6]=u,this.int16[d+14]=c,this.uint32[y+8]=h,this.uint16[d+18]=p,this.uint16[d+19]=f,t}}ma.prototype.bytesPerElement=40,Oi(ma,\"StructArrayLayout5i4f1i1ul2ui40\");class ga extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s,a){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,r,n,i,s,a)}emplace(t,e,r,n,i,s,a,o){const l=8*t;return this.int16[l+0]=e,this.int16[l+1]=r,this.int16[l+2]=n,this.int16[l+4]=i,this.int16[l+5]=s,this.int16[l+6]=a,this.int16[l+7]=o,t}}ga.prototype.bytesPerElement=16,Oi(ga,\"StructArrayLayout3i2i2i16\");class xa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,r,n,i)}emplace(t,e,r,n,i,s){const a=4*t,o=8*t;return this.float32[a+0]=e,this.float32[a+1]=r,this.float32[a+2]=n,this.int16[o+6]=i,this.int16[o+7]=s,t}}xa.prototype.bytesPerElement=16,Oi(xa,\"StructArrayLayout2f1f2i16\");class va extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);}emplaceBack(t,e,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)}emplace(t,e,r,n,i){const s=12*t,a=3*t;return this.uint8[s+0]=e,this.uint8[s+1]=r,this.float32[a+1]=n,this.float32[a+2]=i,t}}va.prototype.bytesPerElement=12,Oi(va,\"StructArrayLayout2ub2f12\");class ba extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);}emplaceBack(t,e,r){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)}emplace(t,e,r,n){const i=3*t;return this.float32[i+0]=e,this.float32[i+1]=r,this.float32[i+2]=n,t}}ba.prototype.bytesPerElement=12,Oi(ba,\"StructArrayLayout3f12\");class wa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);}emplaceBack(t,e,r){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)}emplace(t,e,r,n){const i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=r,this.uint16[i+2]=n,t}}wa.prototype.bytesPerElement=6,Oi(wa,\"StructArrayLayout3ui6\");class _a extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s,a,o,l,u,c,h,p,f,d,y,m,g,x,v,b){const w=this.length;return this.resize(w+1),this.emplace(w,t,e,r,n,i,s,a,o,l,u,c,h,p,f,d,y,m,g,x,v,b)}emplace(t,e,r,n,i,s,a,o,l,u,c,h,p,f,d,y,m,g,x,v,b,w){const _=30*t,A=15*t,S=60*t;return this.int16[_+0]=e,this.int16[_+1]=r,this.int16[_+2]=n,this.float32[A+2]=i,this.float32[A+3]=s,this.uint16[_+8]=a,this.uint16[_+9]=o,this.uint32[A+5]=l,this.uint32[A+6]=u,this.uint32[A+7]=c,this.uint16[_+16]=h,this.uint16[_+17]=p,this.uint16[_+18]=f,this.float32[A+10]=d,this.float32[A+11]=y,this.uint8[S+48]=m,this.uint8[S+49]=g,this.uint8[S+50]=x,this.uint32[A+13]=v,this.int16[_+28]=b,this.uint8[S+58]=w,t}}_a.prototype.bytesPerElement=60,Oi(_a,\"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60\");class Aa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s,a,o,l,u,c,h,p,f,d,y,m,g,x,v,b,w,_,A,S,k,I,M,T,z){const B=this.length;return this.resize(B+1),this.emplace(B,t,e,r,n,i,s,a,o,l,u,c,h,p,f,d,y,m,g,x,v,b,w,_,A,S,k,I,M,T,z)}emplace(t,e,r,n,i,s,a,o,l,u,c,h,p,f,d,y,m,g,x,v,b,w,_,A,S,k,I,M,T,z,B){const E=38*t,C=19*t;return this.int16[E+0]=e,this.int16[E+1]=r,this.int16[E+2]=n,this.float32[C+2]=i,this.float32[C+3]=s,this.int16[E+8]=a,this.int16[E+9]=o,this.int16[E+10]=l,this.int16[E+11]=u,this.int16[E+12]=c,this.int16[E+13]=h,this.uint16[E+14]=p,this.uint16[E+15]=f,this.uint16[E+16]=d,this.uint16[E+17]=y,this.uint16[E+18]=m,this.uint16[E+19]=g,this.uint16[E+20]=x,this.uint16[E+21]=v,this.uint16[E+22]=b,this.uint16[E+23]=w,this.uint16[E+24]=_,this.uint16[E+25]=A,this.uint16[E+26]=S,this.uint16[E+27]=k,this.uint16[E+28]=I,this.uint32[C+15]=M,this.float32[C+16]=T,this.float32[C+17]=z,this.float32[C+18]=B,t}}Aa.prototype.bytesPerElement=76,Oi(Aa,\"StructArrayLayout3i2f6i15ui1ul3f76\");class Sa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.float32[1*t+0]=e,t}}Sa.prototype.bytesPerElement=4,Oi(Sa,\"StructArrayLayout1f4\");class ka extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,r,n,i)}emplace(t,e,r,n,i,s){const a=5*t;return this.float32[a+0]=e,this.float32[a+1]=r,this.float32[a+2]=n,this.float32[a+3]=i,this.float32[a+4]=s,t}}ka.prototype.bytesPerElement=20,Oi(ka,\"StructArrayLayout5f20\");class Ia extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);}emplaceBack(t,e,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)}emplace(t,e,r,n,i){const s=6*t;return this.uint32[3*t+0]=e,this.uint16[s+2]=r,this.uint16[s+3]=n,this.uint16[s+4]=i,t}}Ia.prototype.bytesPerElement=12,Oi(Ia,\"StructArrayLayout1ul3ui12\");class Ma extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);}emplaceBack(t,e){const r=this.length;return this.resize(r+1),this.emplace(r,t,e)}emplace(t,e,r){const n=2*t;return this.uint16[n+0]=e,this.uint16[n+1]=r,t}}Ma.prototype.bytesPerElement=4,Oi(Ma,\"StructArrayLayout2ui4\");class Ta extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint16[1*t+0]=e,t}}Ta.prototype.bytesPerElement=2,Oi(Ta,\"StructArrayLayout1ui2\");class za extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);}emplaceBack(t,e){const r=this.length;return this.resize(r+1),this.emplace(r,t,e)}emplace(t,e,r){const n=2*t;return this.float32[n+0]=e,this.float32[n+1]=r,t}}za.prototype.bytesPerElement=8,Oi(za,\"StructArrayLayout2f8\");class Ba extends ea{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Ba.prototype.size=40;class Ea extends ma{get(t){return new Ba(this,t)}}Oi(Ea,\"CollisionBoxArray\");class Ca extends ea{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(t){this._structArray.uint8[this._pos1+49]=t;}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(t){this._structArray.uint8[this._pos1+50]=t;}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(t){this._structArray.uint32[this._pos4+13]=t;}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(t){this._structArray.uint8[this._pos1+58]=t;}}Ca.prototype.size=60;class Pa extends _a{get(t){return new Ca(this,t)}}Oi(Pa,\"PlacedSymbolArray\");class Da extends ea{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(t){this._structArray.uint32[this._pos4+15]=t;}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Da.prototype.size=76;class Va extends Aa{get(t){return new Da(this,t)}}Oi(Va,\"SymbolInstanceArray\");class La extends Sa{getoffsetX(t){return this.float32[1*t+0]}}Oi(La,\"GlyphOffsetArray\");class Fa extends sa{getx(t){return this.int16[2*t+0]}gety(t){return this.int16[2*t+1]}}Oi(Fa,\"SymbolLineVertexArray\");class Ra extends ea{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Ra.prototype.size=12;class ja extends Ia{get(t){return new Ra(this,t)}}Oi(ja,\"FeatureIndexArray\");class Ua extends Ma{geta_centroid_pos0(t){return this.uint16[2*t+0]}geta_centroid_pos1(t){return this.uint16[2*t+1]}}Oi(Ua,\"FillExtrusionCentroidArray\");const $a=na([{name:\"a_pattern\",components:4,type:\"Uint16\"},{name:\"a_pixel_ratio\",components:1,type:\"Float32\"}]),Oa=na([{name:\"a_dash\",components:4,type:\"Uint16\"}]);var qa={exports:{}},Na={exports:{}};Na.exports=function(t,e){var r,n,i,s,a,o,l,u;for(n=t.length-(r=3&t.length),i=e,a=3432918353,o=461845907,u=0;u<n;)l=255&t.charCodeAt(u)|(255&t.charCodeAt(++u))<<8|(255&t.charCodeAt(++u))<<16|(255&t.charCodeAt(++u))<<24,++u,i=27492+(65535&(s=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(s>>>16)&65535)<<16);switch(l=0,r){case 3:l^=(255&t.charCodeAt(u+2))<<16;case 2:l^=(255&t.charCodeAt(u+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(u)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*o+(((l>>>16)*o&65535)<<16)&4294967295;}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0};var Ga={exports:{}};Ga.exports=function(t,e){for(var r,n=t.length,i=e^n,s=0;n>=4;)r=1540483477*(65535&(r=255&t.charCodeAt(s)|(255&t.charCodeAt(++s))<<8|(255&t.charCodeAt(++s))<<16|(255&t.charCodeAt(++s))<<24))+((1540483477*(r>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),n-=4,++s;switch(n){case 3:i^=(255&t.charCodeAt(s+2))<<16;case 2:i^=(255&t.charCodeAt(s+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(s)))+((1540483477*(i>>>16)&65535)<<16);}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0};var Xa=Na.exports,Za=Ga.exports;qa.exports=Xa,qa.exports.murmur3=Xa,qa.exports.murmur2=Za;class Ka{constructor(){this.ids=[],this.positions=[],this.indexed=!1;}add(t,e,r,n){this.ids.push(Ya(t)),this.positions.push(e,r,n);}getPositions(t){const e=Ya(t);let r=0,n=this.ids.length-1;for(;r<n;){const t=r+n>>1;this.ids[t]>=e?n=t:r=t+1;}const i=[];for(;this.ids[r]===e;)i.push({index:this.positions[3*r],start:this.positions[3*r+1],end:this.positions[3*r+2]}),r++;return i}static serialize(t,e){const r=new Float64Array(t.ids),n=new Uint32Array(t.positions);return Ha(r,n,0,r.length-1),e&&e.push(r.buffer,n.buffer),{ids:r,positions:n}}static deserialize(t){const e=new Ka;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e}}function Ya(t){const e=+t;return !isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:qa.exports(String(t))}function Ha(t,e,r,n){for(;r<n;){const i=t[r+n>>1];let s=r-1,a=n+1;for(;;){do{s++;}while(t[s]<i);do{a--;}while(t[a]>i);if(s>=a)break;Wa(t,s,a),Wa(e,3*s,3*a),Wa(e,3*s+1,3*a+1),Wa(e,3*s+2,3*a+2);}a-r<n-a?(Ha(t,e,r,a),r=a+1):(Ha(t,e,a+1,n),n=a);}}function Wa(t,e,r){const n=t[e];t[e]=t[r],t[r]=n;}Oi(Ka,\"FeaturePositionMap\");class Ja{constructor(t){this.gl=t.gl,this.initialized=!1;}fetchUniformLocation(t,e){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(t,e),this.initialized=!0),!!this.location}}class Qa extends Ja{constructor(t){super(t),this.current=0;}set(t,e,r){this.fetchUniformLocation(t,e)&&this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r));}}class to extends Ja{constructor(t){super(t),this.current=[0,0,0,0];}set(t,e,r){this.fetchUniformLocation(t,e)&&(r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3])));}}class eo extends Ja{constructor(t){super(t),this.current=Me.transparent;}set(t,e,r){this.fetchUniformLocation(t,e)&&(r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a)));}}const ro=new Float32Array(16),no=new Float32Array(9),io=new Float32Array(4);function so(t){return [Qs(255*t.r,255*t.g),Qs(255*t.b,255*t.a)]}class ao{constructor(t,e,r){this.value=t,this.uniformNames=e.map((t=>`u_${t}`)),this.type=r;}setUniform(t,e,r,n,i){e.set(t,i,n.constantOr(this.value));}getBinding(t,e){return \"color\"===this.type?new eo(t):new Qa(t)}}class oo{constructor(t,e){this.uniformNames=e.map((t=>`u_${t}`)),this.pattern=null,this.pixelRatio=1;}setConstantPatternPositions(t){this.pixelRatio=t.pixelRatio||1,this.pattern=t.tl.concat(t.br);}setUniform(t,e,r,n,i){const s=\"u_pattern\"===i||\"u_dash\"===i?this.pattern:\"u_pixel_ratio\"===i?this.pixelRatio:null;s&&e.set(t,i,s);}getBinding(t,e){return \"u_pattern\"===e||\"u_dash\"===e?new to(t):new Qa(t)}}class lo{constructor(t,e,r,n){this.expression=t,this.type=r,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:\"Float32\",components:\"color\"===r?2:1,offset:0}))),this.paintVertexArray=new n;}populatePaintArray(t,e,r,n,i,s){const a=this.paintVertexArray.length,o=this.expression.evaluate(new Us(0),e,{},i,n,s);this.paintVertexArray.resize(t),this._setPaintValue(a,t,o);}updatePaintArray(t,e,r,n,i){const s=this.expression.evaluate({zoom:0},r,n,void 0,i);this._setPaintValue(t,e,s);}_setPaintValue(t,e,r){if(\"color\"===this.type){const n=so(r);for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,n[0],n[1]);}else {for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,r);this.maxValue=Math.max(this.maxValue,Math.abs(r));}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent));}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy();}}class uo{constructor(t,e,r,n,i,s){this.expression=t,this.uniformNames=e.map((t=>`u_${t}_t`)),this.type=r,this.useIntegerZoom=n,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:\"Float32\",components:\"color\"===r?4:2,offset:0}))),this.paintVertexArray=new s;}populatePaintArray(t,e,r,n,i,s){const a=this.expression.evaluate(new Us(this.zoom),e,{},i,n,s),o=this.expression.evaluate(new Us(this.zoom+1),e,{},i,n,s),l=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(l,t,a,o);}updatePaintArray(t,e,r,n,i){const s=this.expression.evaluate({zoom:this.zoom},r,n,void 0,i),a=this.expression.evaluate({zoom:this.zoom+1},r,n,void 0,i);this._setPaintValue(t,e,s,a);}_setPaintValue(t,e,r,n){if(\"color\"===this.type){const i=so(r),s=so(n);for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,i[0],i[1],s[0],s[1]);}else {for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,r,n);this.maxValue=Math.max(this.maxValue,Math.abs(r),Math.abs(n));}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent));}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy();}setUniform(t,e,r,n,i){const s=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,a=S(this.expression.interpolationFactor(s,this.zoom,this.zoom+1),0,1);e.set(t,i,a);}getBinding(t,e){return new Qa(t)}}class co{constructor(t,e,r,n,i){this.expression=t,this.layerId=i,this.paintVertexAttributes=(\"array\"===r?Oa:$a).members;for(let t=0;t<e.length;++t);this.paintVertexArray=new n;}populatePaintArray(t,e,r){const n=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValues(n,t,e.patterns&&e.patterns[this.layerId],r);}updatePaintArray(t,e,r,n,i,s){this._setPaintValues(t,e,r.patterns&&r.patterns[this.layerId],s);}_setPaintValues(t,e,r,n){if(!n||!r)return;const i=n[r];if(!i)return;const{tl:s,br:a,pixelRatio:o}=i;for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,s[0],s[1],a[0],a[1],o);}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent));}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy();}}class ho{constructor(t,e,r=(()=>!0)){this.binders={},this._buffers=[];const n=[];for(const i in t.paint._values){if(!r(i))continue;const s=t.paint.get(i);if(!(s instanceof Zs&&En(s.property.specification)))continue;const a=yo(i,t.type),o=s.value,l=s.property.specification.type,u=s.property.useIntegerZoom,c=\"line-dasharray\"===i||i.endsWith(\"pattern\"),h=\"line-dasharray\"===i&&\"constant\"!==t.layout.get(\"line-cap\").value.kind;if(\"constant\"!==o.kind||h)if(\"source\"===o.kind||h||c){const e=xo(i,l,\"source\");this.binders[i]=c?new co(o,a,l,e,t.id):new lo(o,a,l,e),n.push(`/a_${i}`);}else {const t=xo(i,l,\"composite\");this.binders[i]=new uo(o,a,l,u,e,t),n.push(`/z_${i}`);}else this.binders[i]=c?new oo(o.value,a):new ao(o.value,a,l),n.push(`/u_${i}`);}this.cacheKey=n.sort().join(\"\");}getMaxValue(t){const e=this.binders[t];return e instanceof lo||e instanceof uo?e.maxValue:0}populatePaintArrays(t,e,r,n,i,s){for(const a in this.binders){const o=this.binders[a];(o instanceof lo||o instanceof uo||o instanceof co)&&o.populatePaintArray(t,e,r,n,i,s);}}setConstantPatternPositions(t){for(const e in this.binders){const r=this.binders[e];r instanceof oo&&r.setConstantPatternPositions(t);}}updatePaintArrays(t,e,r,n,i,s){let a=!1;for(const o in t){const l=e.getPositions(o);for(const e of l){const l=r.feature(e.index);for(const r in this.binders){const u=this.binders[r];if((u instanceof lo||u instanceof uo||u instanceof co)&&!0===u.expression.isStateDependent){const c=n.paint.get(r);u.expression=c.value,u.updatePaintArray(e.start,e.end,l,t[o],i,s),a=!0;}}}}return a}defines(){const t=[];for(const e in this.binders){const r=this.binders[e];(r instanceof ao||r instanceof oo)&&t.push(...r.uniformNames.map((t=>`#define HAS_UNIFORM_${t}`)));}return t}getBinderAttributes(){const t=[];for(const e in this.binders){const r=this.binders[e];if(r instanceof lo||r instanceof uo||r instanceof co)for(let e=0;e<r.paintVertexAttributes.length;e++)t.push(r.paintVertexAttributes[e].name);}return t}getBinderUniforms(){const t=[];for(const e in this.binders){const r=this.binders[e];if(r instanceof ao||r instanceof oo||r instanceof uo)for(const e of r.uniformNames)t.push(e);}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t){const e=[];for(const r in this.binders){const n=this.binders[r];if(n instanceof ao||n instanceof oo||n instanceof uo)for(const i of n.uniformNames)e.push({name:i,property:r,binding:n.getBinding(t,i)});}return e}setUniforms(t,e,r,n,i){for(const{name:e,property:s,binding:a}of r)this.binders[s].setUniform(t,a,i,n.get(s),e);}updatePaintBuffers(){this._buffers=[];for(const t in this.binders){const e=this.binders[t];(e instanceof lo||e instanceof uo||e instanceof co)&&e.paintVertexBuffer&&this._buffers.push(e.paintVertexBuffer);}}upload(t){for(const e in this.binders){const r=this.binders[e];(r instanceof lo||r instanceof uo||r instanceof co)&&r.upload(t);}this.updatePaintBuffers();}destroy(){for(const t in this.binders){const e=this.binders[t];(e instanceof lo||e instanceof uo||e instanceof co)&&e.destroy();}}}class po{constructor(t,e,r=(()=>!0)){this.programConfigurations={};for(const n of t)this.programConfigurations[n.id]=new ho(n,e,r);this.needsUpload=!1,this._featureMap=new Ka,this._bufferOffset=0;}populatePaintArrays(t,e,r,n,i,s,a){for(const r in this.programConfigurations)this.programConfigurations[r].populatePaintArrays(t,e,n,i,s,a);void 0!==e.id&&this._featureMap.add(e.id,r,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0;}updatePaintArrays(t,e,r,n,i){for(const s of r)this.needsUpload=this.programConfigurations[s.id].updatePaintArrays(t,this._featureMap,e,s,n,i)||this.needsUpload;}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1;}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy();}}const fo={\"text-opacity\":[\"opacity\"],\"icon-opacity\":[\"opacity\"],\"text-color\":[\"fill_color\"],\"icon-color\":[\"fill_color\"],\"text-halo-color\":[\"halo_color\"],\"icon-halo-color\":[\"halo_color\"],\"text-halo-blur\":[\"halo_blur\"],\"icon-halo-blur\":[\"halo_blur\"],\"text-halo-width\":[\"halo_width\"],\"icon-halo-width\":[\"halo_width\"],\"line-gap-width\":[\"gapwidth\"],\"line-pattern\":[\"pattern\",\"pixel_ratio\"],\"fill-pattern\":[\"pattern\",\"pixel_ratio\"],\"fill-extrusion-pattern\":[\"pattern\",\"pixel_ratio\"],\"line-dasharray\":[\"dash\"]};function yo(t,e){return fo[t]||[t.replace(`${e}-`,\"\").replace(/-/g,\"_\")]}const mo={\"line-pattern\":{source:ca,composite:ca},\"fill-pattern\":{source:ca,composite:ca},\"fill-extrusion-pattern\":{source:ca,composite:ca},\"line-dasharray\":{source:ha,composite:ha}},go={color:{source:za,composite:ua},number:{source:Sa,composite:za}};function xo(t,e,r){const n=mo[t];return n&&n[r]||go[e][r]}Oi(ao,\"ConstantBinder\"),Oi(oo,\"PatternConstantBinder\"),Oi(lo,\"SourceExpressionBinder\"),Oi(co,\"PatternCompositeBinder\"),Oi(uo,\"CompositeExpressionBinder\"),Oi(ho,\"ProgramConfiguration\",{omit:[\"_buffers\"]}),Oi(po,\"ProgramConfigurationSet\");const vo=\"-transition\";class bo extends Yt{constructor(t,e){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,\"custom\"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,\"background\"!==t.type&&\"sky\"!==t.type&&(this.source=t.source,this.sourceLayer=t[\"source-layer\"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new Xs(e.layout)),e.paint)){this._transitionablePaint=new qs(e.paint);for(const e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(const e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ks(e.paint);}}getLayoutProperty(t){return \"visibility\"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,e,r={}){null!=e&&this._validate(Li,`layers.${this.id}.layout.${t}`,t,e,r)||(\"visibility\"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e);}getPaintProperty(t){return L(t,vo)?this._transitionablePaint.getTransition(t.slice(0,-vo.length)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e,r={}){if(null!=e&&this._validate(Vi,`layers.${this.id}.paint.${t}`,t,e,r))return !1;if(L(t,vo))return this._transitionablePaint.setTransition(t.slice(0,-vo.length),e||void 0),!1;{const r=this._transitionablePaint._values[t],n=r.value.isDataDriven(),i=r.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);const s=this._transitionablePaint._values[t].value,a=s.isDataDriven(),o=L(t,\"pattern\")||\"line-dasharray\"===t;return a||n||o||this._handleOverridablePaintPropertyUpdate(t,i,s)}}_handleSpecialPaintPropertyUpdate(t){}getProgramIds(){return null}getProgramConfiguration(t){return null}_handleOverridablePaintPropertyUpdate(t,e,r){return !1}isHidden(t){return !!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||\"none\"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint);}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,e){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e);}serialize(){const t={id:this.id,type:this.type,source:this.source,\"source-layer\":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),R(t,((t,e)=>!(void 0===t||\"layout\"===e&&!Object.keys(t).length||\"paint\"===e&&!Object.keys(t).length)))}_validate(t,e,r,n,i={}){return (!i||!1!==i.validate)&&Ri(this,t.call(Di,{key:e,layerType:this.type,objectKey:r,value:n,styleSpec:Ht,style:{glyphs:!0,sprite:!0}}))}is3D(){return !1}isSky(){return !1}isTileClipped(){return !1}hasOffscreenPass(){return !1}resize(){}isStateDependent(){for(const t in this.paint._values){const e=this.paint.get(t);if(e instanceof Zs&&En(e.property.specification)&&(\"source\"===e.value.kind||\"composite\"===e.value.kind)&&e.value.isStateDependent)return !0}return !1}compileFilter(){this._filterCompiled||(this._featureFilter=ai(this.filter),this._filterCompiled=!0);}invalidateCompiledFilter(){this._filterCompiled=!1;}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const wo=na([{name:\"a_pos\",components:2,type:\"Int16\"}],4),_o=na([{name:\"a_pos_3\",components:3,type:\"Int16\"},{name:\"a_pos_normal_3\",components:3,type:\"Int16\"}]);class Ao{constructor(t=[]){this.segments=t;}prepareSegment(t,e,r,n){let i=this.segments[this.segments.length-1];return t>Ao.MAX_VERTEX_ARRAY_LENGTH&&$(`Max vertices per segment is ${Ao.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!i||i.vertexLength+t>Ao.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==n)&&(i={vertexOffset:e.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==n&&(i.sortKey=n),this.segments.push(i)),i}get(){return this.segments}destroy(){for(const t of this.segments)for(const e in t.vaos)t.vaos[e].destroy();}static simpleSegment(t,e,r,n){return new Ao([{vertexOffset:t,primitiveOffset:e,vertexLength:r,primitiveLength:n,vaos:{},sortKey:0}])}}Ao.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Oi(Ao,\"SegmentVector\");var So=8192;class ko{constructor(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]));}setNorthEast(t){return this._ne=t instanceof Mo?new Mo(t.lng,t.lat):Mo.convert(t),this}setSouthWest(t){return this._sw=t instanceof Mo?new Mo(t.lng,t.lat):Mo.convert(t),this}extend(t){const e=this._sw,r=this._ne;let n,i;if(t instanceof Mo)n=t,i=t;else {if(!(t instanceof ko))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(ko.convert(t)):this.extend(Mo.convert(t)):\"object\"==typeof t&&null!==t&&t.hasOwnProperty(\"lat\")&&t.hasOwnProperty(\"lon\")?this.extend(Mo.convert(t)):this;if(n=t._sw,i=t._ne,!n||!i)return this}return e||r?(e.lng=Math.min(n.lng,e.lng),e.lat=Math.min(n.lat,e.lat),r.lng=Math.max(i.lng,r.lng),r.lat=Math.max(i.lat,r.lat)):(this._sw=new Mo(n.lng,n.lat),this._ne=new Mo(i.lng,i.lat)),this}getCenter(){return new Mo((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Mo(this.getWest(),this.getNorth())}getSouthEast(){return new Mo(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return [this._sw.toArray(),this._ne.toArray()]}toString(){return `LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return !(this._sw&&this._ne)}contains(t){const{lng:e,lat:r}=Mo.convert(t);let n=this._sw.lng<=e&&e<=this._ne.lng;return this._sw.lng>this._ne.lng&&(n=this._sw.lng>=e&&e>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&n}static convert(t){return !t||t instanceof ko?t:new ko(t)}}const Io=6371008.8;class Mo{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error(`Invalid LngLat object: (${t}, ${e})`);if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error(\"Invalid LngLat latitude value: must be between -90 and 90\")}wrap(){return new Mo(I(this.lng,-180,180),this.lat)}toArray(){return [this.lng,this.lat]}toString(){return `LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const e=Math.PI/180,r=this.lat*e,n=t.lat*e,i=Math.sin(r)*Math.sin(n)+Math.cos(r)*Math.cos(n)*Math.cos((t.lng-this.lng)*e);return Io*Math.acos(Math.min(i,1))}toBounds(t=0){const e=360*t/40075017,r=e/Math.cos(Math.PI/180*this.lat);return new ko(new Mo(this.lng-r,this.lat-e),new Mo(this.lng+r,this.lat+e))}static convert(t){if(t instanceof Mo)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Mo(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&\"object\"==typeof t&&null!==t)return new Mo(Number(\"lng\"in t?t.lng:t.lon),Number(t.lat));throw new Error(\"`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]\")}}const To=2*Math.PI*Io;function zo(t){return To*Math.cos(t*Math.PI/180)}function Bo(t){return (180+t)/360}function Eo(t){return (180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Co(t,e){return t/zo(e)}function Po(t){return 360*t-180}function Do(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function Vo(t,e){return t*zo(Do(e))}const Lo=85.051129;function Fo(t){return 1/Math.cos(t*Math.PI/180)}class Ro{constructor(t,e,r=0){this.x=+t,this.y=+e,this.z=+r;}static fromLngLat(t,e=0){const r=Mo.convert(t);return new Ro(Bo(r.lng),Eo(r.lat),Co(e,r.lat))}toLngLat(){return new Mo(Po(this.x),Do(this.y))}toAltitude(){return Vo(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/To*Fo(Do(this.y))}}function jo(t,e,r,n,i,s,a,o,l){const u=(e+n)/2,c=(r+i)/2,h=new d(u,c);o(h),function(t,e,r,n,i,s){const a=r-i,o=n-s;return Math.abs((n-e)*a-(r-t)*o)/Math.hypot(a,o)}(h.x,h.y,s.x,s.y,a.x,a.y)>=l?(jo(t,e,r,u,c,s,h,o,l),jo(t,u,c,n,i,h,a,o,l)):t.push(a);}function Uo(t,e,r){let n=t[0],i=n.x,s=n.y;e(n);const a=[n];for(let o=1;o<t.length;o++){const l=t[o],{x:u,y:c}=l;e(l),jo(a,i,s,u,c,n,l,e,r),i=u,s=c,n=l;}return a}function $o(t,e,r,n){if(n(e,r)){const i=e.add(r)._mult(.5);$o(t,e,i,n),$o(t,i,r,n);}else t.push(r);}function Oo(t,e){let r=t[0];const n=[r];for(let i=1;i<t.length;i++){const s=t[i];$o(n,r,s,e),r=s;}return n}const qo=Math.pow(2,14)-1,No=-qo-1;function Go(t,e){const r=Math.round(t.x*e),n=Math.round(t.y*e);return t.x=S(r,No,qo),t.y=S(n,No,qo),(r<t.x||r>t.x+1||n<t.y||n>t.y+1)&&$(\"Geometry exceeds allowed extent, reduce your vector tile buffer size\"),t}function Xo(t,e,r){const n=t.loadGeometry(),i=t.extent,s=So/i;if(e&&r&&r.projection.isReprojectedInTileSpace){const s=1<<e.z,{scale:a,x:o,y:l,projection:u}=r,c=t=>{const r=Po((e.x+t.x/i)/s),n=Do((e.y+t.y/i)/s),c=u.project(r,n);t.x=(c.x*a-o)*i,t.y=(c.y*a-l)*i;};for(let e=0;e<n.length;e++)if(1!==t.type)n[e]=Uo(n[e],c,1);else {const t=[];for(const r of n[e])r.x<0||r.x>=i||r.y<0||r.y>=i||(c(r),t.push(r));n[e]=t;}}for(const t of n)for(const e of t)Go(e,s);return n}function Zo(t,e){return {type:t.type,id:t.id,properties:t.properties,geometry:e?Xo(t):[]}}function Ko(t,e,r,n,i){t.emplaceBack(2*e+(n+1)/2,2*r+(i+1)/2);}function Yo(t,e,r){const n=16384;t.emplaceBack(e.x,e.y,e.z,r[0]*n,r[1]*n,r[2]*n);}class Ho{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.projection=t.projection,this.layoutVertexArray=new sa,this.indexArray=new wa,this.segments=new Ao,this.programConfigurations=new po(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id));}populate(t,e,r,n){const i=this.layers[0],s=[];let a=null;\"circle\"===i.type&&(a=i.layout.get(\"circle-sort-key\"));for(const{feature:e,id:i,index:o,sourceLayerIndex:l}of t){const t=this.layers[0]._featureFilter.needGeometry,u=Zo(e,t);if(!this.layers[0]._featureFilter.filter(new Us(this.zoom),u,r))continue;const c=a?a.evaluate(u,{},r):void 0,h={id:i,properties:e.properties,type:e.type,sourceLayerIndex:l,index:o,geometry:t?u.geometry:Xo(e,r,n),patterns:{},sortKey:c};s.push(h);}a&&s.sort(((t,e)=>t.sortKey-e.sortKey));let o=null;\"globe\"===n.projection.name&&(this.globeExtVertexArray=new pa,o=n.projection);for(const n of s){const{geometry:i,index:s,sourceLayerIndex:a}=n,l=t[s].feature;this.addFeature(n,i,s,e.availableImages,r,o),e.featureIndex.insert(l,i,s,a,this.index);}}update(t,e,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r,n);}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return !this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,wo.members),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,_o.members))),this.programConfigurations.upload(t),this.uploaded=!0;}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy());}addFeature(t,e,r,n,i,s){for(const r of e)for(const e of r){const r=e.x,n=e.y;if(r<0||r>=So||n<0||n>=So)continue;if(s){const t=s.projectTilePoint(r,n,i),e=s.upVector(i,r,n),a=this.globeExtVertexArray;Yo(a,t,e),Yo(a,t,e),Yo(a,t,e),Yo(a,t,e);}const a=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),o=a.vertexLength;Ko(this.layoutVertexArray,r,n,-1,-1),Ko(this.layoutVertexArray,r,n,1,-1),Ko(this.layoutVertexArray,r,n,1,1),Ko(this.layoutVertexArray,r,n,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+2,o+3),a.vertexLength+=4,a.primitiveLength+=2;}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,{},n,i);}}function Wo(t,e){for(let r=0;r<t.length;r++)if(al(e,t[r]))return !0;for(let r=0;r<e.length;r++)if(al(t,e[r]))return !0;return !!el(t,e)}function Jo(t,e,r){return !!al(t,e)||!!nl(e,t,r)}function Qo(t,e){if(1===t.length)return sl(e,t[0]);for(let r=0;r<e.length;r++){const n=e[r];for(let e=0;e<n.length;e++)if(al(t,n[e]))return !0}for(let r=0;r<t.length;r++)if(sl(e,t[r]))return !0;for(let r=0;r<e.length;r++)if(el(t,e[r]))return !0;return !1}function tl(t,e,r){if(t.length>1){if(el(t,e))return !0;for(let n=0;n<e.length;n++)if(nl(e[n],t,r))return !0}for(let n=0;n<t.length;n++)if(nl(t[n],e,r))return !0;return !1}function el(t,e){if(0===t.length||0===e.length)return !1;for(let r=0;r<t.length-1;r++){const n=t[r],i=t[r+1];for(let t=0;t<e.length-1;t++)if(rl(n,i,e[t],e[t+1]))return !0}return !1}function rl(t,e,r,n){return O(t,r,n)!==O(e,r,n)&&O(t,e,r)!==O(t,e,n)}function nl(t,e,r){const n=r*r;if(1===e.length)return t.distSqr(e[0])<n;for(let r=1;r<e.length;r++)if(il(t,e[r-1],e[r])<n)return !0;return !1}function il(t,e,r){const n=e.distSqr(r);if(0===n)return t.distSqr(e);const i=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/n;return t.distSqr(i<0?e:i>1?r:r.sub(e)._mult(i)._add(e))}function sl(t,e){let r,n,i,s=!1;for(let a=0;a<t.length;a++){r=t[a];for(let t=0,a=r.length-1;t<r.length;a=t++)n=r[t],i=r[a],n.y>e.y!=i.y>e.y&&e.x<(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&&(s=!s);}return s}function al(t,e){let r=!1;for(let n=0,i=t.length-1;n<t.length;i=n++){const s=t[n],a=t[i];s.y>e.y!=a.y>e.y&&e.x<(a.x-s.x)*(e.y-s.y)/(a.y-s.y)+s.x&&(r=!r);}return r}function ol(t,e,r,n,i){for(const s of t)if(e<=s.x&&r<=s.y&&n>=s.x&&i>=s.y)return !0;const s=[new d(e,r),new d(e,i),new d(n,i),new d(n,r)];if(t.length>2)for(const e of s)if(al(t,e))return !0;for(let e=0;e<t.length-1;e++)if(ll(t[e],t[e+1],s))return !0;return !1}function ll(t,e,r){const n=r[0],i=r[2];if(t.x<n.x&&e.x<n.x||t.x>i.x&&e.x>i.x||t.y<n.y&&e.y<n.y||t.y>i.y&&e.y>i.y)return !1;const s=O(t,e,r[0]);return s!==O(t,e,r[1])||s!==O(t,e,r[2])||s!==O(t,e,r[3])}function ul(t,e,r){const n=e.paint.get(t).value;return \"constant\"===n.kind?n.value:r.programConfigurations.get(e.id).getMaxValue(t)}function cl(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function hl(t,e,r,n,i){if(!e[0]&&!e[1])return t;const s=d.convert(e)._mult(i);\"viewport\"===r&&s._rotate(-n);const a=[];for(let e=0;e<t.length;e++)a.push(t[e].sub(s));return a}function pl(t,e,r,n){const i=d.convert(t)._mult(n);return \"viewport\"===e&&i._rotate(-r),i}Oi(Ho,\"CircleBucket\",{omit:[\"layers\"]});const fl=new Js({\"circle-sort-key\":new Hs(Ht.layout_circle[\"circle-sort-key\"])});var dl={paint:new Js({\"circle-radius\":new Hs(Ht.paint_circle[\"circle-radius\"]),\"circle-color\":new Hs(Ht.paint_circle[\"circle-color\"]),\"circle-blur\":new Hs(Ht.paint_circle[\"circle-blur\"]),\"circle-opacity\":new Hs(Ht.paint_circle[\"circle-opacity\"]),\"circle-translate\":new Ys(Ht.paint_circle[\"circle-translate\"]),\"circle-translate-anchor\":new Ys(Ht.paint_circle[\"circle-translate-anchor\"]),\"circle-pitch-scale\":new Ys(Ht.paint_circle[\"circle-pitch-scale\"]),\"circle-pitch-alignment\":new Ys(Ht.paint_circle[\"circle-pitch-alignment\"]),\"circle-stroke-width\":new Hs(Ht.paint_circle[\"circle-stroke-width\"]),\"circle-stroke-color\":new Hs(Ht.paint_circle[\"circle-stroke-color\"]),\"circle-stroke-opacity\":new Hs(Ht.paint_circle[\"circle-stroke-opacity\"])}),layout:fl},yl=1e-6,ml=\"undefined\"!=typeof Float32Array?Float32Array:Array;function gl(){var t=new ml(9);return ml!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function xl(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=r[0],f=r[1],d=r[2],y=r[3],m=r[4],g=r[5],x=r[6],v=r[7],b=r[8];return t[0]=p*n+f*a+d*u,t[1]=p*i+f*o+d*c,t[2]=p*s+f*l+d*h,t[3]=y*n+m*a+g*u,t[4]=y*i+m*o+g*c,t[5]=y*s+m*l+g*h,t[6]=x*n+v*a+b*u,t[7]=x*i+v*o+b*c,t[8]=x*s+v*l+b*h,t}function vl(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function bl(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],f=e[11],d=e[12],y=e[13],m=e[14],g=e[15],x=r*o-n*a,v=r*l-i*a,b=r*u-s*a,w=n*l-i*o,_=n*u-s*o,A=i*u-s*l,S=c*y-h*d,k=c*m-p*d,I=c*g-f*d,M=h*m-p*y,T=h*g-f*y,z=p*g-f*m,B=x*z-v*T+b*M+w*I-_*k+A*S;return B?(t[0]=(o*z-l*T+u*M)*(B=1/B),t[1]=(i*T-n*z-s*M)*B,t[2]=(y*A-m*_+g*w)*B,t[3]=(p*_-h*A-f*w)*B,t[4]=(l*I-a*z-u*k)*B,t[5]=(r*z-i*I+s*k)*B,t[6]=(m*b-d*A-g*v)*B,t[7]=(c*A-p*b+f*v)*B,t[8]=(a*T-o*I+u*S)*B,t[9]=(n*I-r*T-s*S)*B,t[10]=(d*_-y*b+g*x)*B,t[11]=(h*b-c*_-f*x)*B,t[12]=(o*k-a*M-l*S)*B,t[13]=(r*M-n*k+i*S)*B,t[14]=(y*v-d*w-m*x)*B,t[15]=(c*w-h*v+p*x)*B,t):null}function wl(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],y=e[12],m=e[13],g=e[14],x=e[15],v=r[0],b=r[1],w=r[2],_=r[3];return t[0]=v*n+b*o+w*h+_*y,t[1]=v*i+b*l+w*p+_*m,t[2]=v*s+b*u+w*f+_*g,t[3]=v*a+b*c+w*d+_*x,t[4]=(v=r[4])*n+(b=r[5])*o+(w=r[6])*h+(_=r[7])*y,t[5]=v*i+b*l+w*p+_*m,t[6]=v*s+b*u+w*f+_*g,t[7]=v*a+b*c+w*d+_*x,t[8]=(v=r[8])*n+(b=r[9])*o+(w=r[10])*h+(_=r[11])*y,t[9]=v*i+b*l+w*p+_*m,t[10]=v*s+b*u+w*f+_*g,t[11]=v*a+b*c+w*d+_*x,t[12]=(v=r[12])*n+(b=r[13])*o+(w=r[14])*h+(_=r[15])*y,t[13]=v*i+b*l+w*p+_*m,t[14]=v*s+b*u+w*f+_*g,t[15]=v*a+b*c+w*d+_*x,t}function _l(t,e,r){var n,i,s,a,o,l,u,c,h,p,f,d,y=r[0],m=r[1],g=r[2];return e===t?(t[12]=e[0]*y+e[4]*m+e[8]*g+e[12],t[13]=e[1]*y+e[5]*m+e[9]*g+e[13],t[14]=e[2]*y+e[6]*m+e[10]*g+e[14],t[15]=e[3]*y+e[7]*m+e[11]*g+e[15]):(i=e[1],s=e[2],a=e[3],o=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],t[0]=n=e[0],t[1]=i,t[2]=s,t[3]=a,t[4]=o,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=p,t[10]=f,t[11]=d,t[12]=n*y+o*m+h*g+e[12],t[13]=i*y+l*m+p*g+e[13],t[14]=s*y+u*m+f*g+e[14],t[15]=a*y+c*m+d*g+e[15]),t}function Al(t,e,r){var n=r[0],i=r[1],s=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Sl(t,e,r){var n=Math.sin(r),i=Math.cos(r),s=e[4],a=e[5],o=e[6],l=e[7],u=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+u*n,t[5]=a*i+c*n,t[6]=o*i+h*n,t[7]=l*i+p*n,t[8]=u*i-s*n,t[9]=c*i-a*n,t[10]=h*i-o*n,t[11]=p*i-l*n,t}function kl(t,e,r){var n=Math.sin(r),i=Math.cos(r),s=e[0],a=e[1],o=e[2],l=e[3],u=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-u*n,t[1]=a*i-c*n,t[2]=o*i-h*n,t[3]=l*i-p*n,t[8]=s*n+u*i,t[9]=a*n+c*i,t[10]=o*n+h*i,t[11]=l*n+p*i,t}function Il(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ml(t,e,r){var n,i,s,a=r[0],o=r[1],l=r[2],u=Math.hypot(a,o,l);return u<yl?null:(a*=u=1/u,o*=u,l*=u,n=Math.sin(e),i=Math.cos(e),t[0]=a*a*(s=1-i)+i,t[1]=o*a*s+l*n,t[2]=l*a*s-o*n,t[3]=0,t[4]=a*o*s-l*n,t[5]=o*o*s+i,t[6]=l*o*s+a*n,t[7]=0,t[8]=a*l*s+o*n,t[9]=o*l*s-a*n,t[10]=l*l*s+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Tl=wl;function zl(){var t=new ml(3);return ml!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Bl(t){var e=new ml(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function El(t){return Math.hypot(t[0],t[1],t[2])}function Cl(t,e,r){var n=new ml(3);return n[0]=t,n[1]=e,n[2]=r,n}function Pl(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function Dl(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function Vl(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function Ll(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function Fl(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function Rl(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function jl(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function Ul(t,e){var r=e[0],n=e[1],i=e[2],s=r*r+n*n+i*i;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function $l(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ol(t,e,r){var n=e[0],i=e[1],s=e[2],a=r[0],o=r[1],l=r[2];return t[0]=i*l-s*o,t[1]=s*a-n*l,t[2]=n*o-i*a,t}function ql(t,e,r){var n=e[0],i=e[1],s=e[2],a=r[3]*n+r[7]*i+r[11]*s+r[15];return t[0]=(r[0]*n+r[4]*i+r[8]*s+r[12])/(a=a||1),t[1]=(r[1]*n+r[5]*i+r[9]*s+r[13])/a,t[2]=(r[2]*n+r[6]*i+r[10]*s+r[14])/a,t}function Nl(t,e,r){var n=r[0],i=r[1],s=r[2],a=e[0],o=e[1],l=e[2],u=i*l-s*o,c=s*a-n*l,h=n*o-i*a,p=i*h-s*c,f=s*u-n*h,d=n*c-i*u,y=2*r[3];return c*=y,h*=y,f*=2,d*=2,t[0]=a+(u*=y)+(p*=2),t[1]=o+c+f,t[2]=l+h+d,t}var Gl,Xl=Dl,Zl=Vl,Kl=El;function Yl(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function Hl(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=r*r+n*n+i*i+s*s;return a>0&&(a=1/Math.sqrt(a)),t[0]=r*a,t[1]=n*a,t[2]=i*a,t[3]=s*a,t}function Wl(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*s+r[12]*a,t[1]=r[1]*n+r[5]*i+r[9]*s+r[13]*a,t[2]=r[2]*n+r[6]*i+r[10]*s+r[14]*a,t[3]=r[3]*n+r[7]*i+r[11]*s+r[15]*a,t}function Jl(){var t=new ml(4);return ml!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Ql(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function tu(t,e,r){r*=.5;var n=e[0],i=e[1],s=e[2],a=e[3],o=Math.sin(r),l=Math.cos(r);return t[0]=n*l+a*o,t[1]=i*l+s*o,t[2]=s*l-i*o,t[3]=a*l-n*o,t}function eu(t,e,r){r*=.5;var n=e[0],i=e[1],s=e[2],a=e[3],o=Math.sin(r),l=Math.cos(r);return t[0]=n*l-s*o,t[1]=i*l+a*o,t[2]=s*l+n*o,t[3]=a*l-i*o,t}zl(),Gl=new ml(4),ml!=Float32Array&&(Gl[0]=0,Gl[1]=0,Gl[2]=0,Gl[3]=0);var ru=Hl;zl(),Cl(1,0,0),Cl(0,1,0),Jl(),Jl(),gl();class nu{constructor(t,e){this.pos=t,this.dir=e;}intersectsPlane(t,e,r){const n=$l(e,this.dir);if(Math.abs(n)<1e-6)return !1;const i=((t[0]-this.pos[0])*e[0]+(t[1]-this.pos[1])*e[1]+(t[2]-this.pos[2])*e[2])/n;return r[0]=this.pos[0]+this.dir[0]*i,r[1]=this.pos[1]+this.dir[1]*i,r[2]=this.pos[2]+this.dir[2]*i,!0}closestPointOnSphere(t,e,r){if(function(t,e){var r=t[0],n=t[1],i=t[2],s=e[0],a=e[1],o=e[2];return Math.abs(r-s)<=yl*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-a)<=yl*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-o)<=yl*Math.max(1,Math.abs(i),Math.abs(o))}(this.pos,t)||0===e)return r[0]=r[1]=r[2]=0,!1;const[n,i,s]=this.dir,a=this.pos[0]-t[0],o=this.pos[1]-t[1],l=this.pos[2]-t[2],u=n*n+i*i+s*s,c=2*(a*n+o*i+l*s),h=c*c-4*u*(a*a+o*o+l*l-e*e);if(h<0){const t=Math.max(-c/2,0),u=a+n*t,h=o+i*t,p=l+s*t,f=Math.hypot(u,h,p);return r[0]=u*e/f,r[1]=h*e/f,r[2]=p*e/f,!1}{const t=(-c-Math.sqrt(h))/(2*u);if(t<0){const t=Math.hypot(a,o,l);return r[0]=a*e/t,r[1]=o*e/t,r[2]=l*e/t,!1}return r[0]=a+n*t,r[1]=o+i*t,r[2]=l+s*t,!0}}}class iu{constructor(t,e,r,n,i){this.TL=t,this.TR=e,this.BR=r,this.BL=n,this.horizon=i;}static fromInvProjectionMatrix(t,e,r){const n=[-1,1,1],i=[1,1,1],s=[1,-1,1],a=[-1,-1,1],o=ql(n,n,t),l=ql(i,i,t),u=ql(s,s,t),c=ql(a,a,t);return new iu(o,l,u,c,e/r)}}class su{constructor(t,e){this.points=t,this.planes=e;}static fromInvProjectionMatrix(t,e,r,n){const i=Math.pow(2,r),s=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((r=>{const s=Wl([],r,t),a=1/s[3]/e*i;return function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}(s,s,[a,a,n?1/s[3]:a,a])})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((t=>{const e=Ul([],Ol([],Xl([],s[t[0]],s[t[1]]),Xl([],s[t[2]],s[t[1]]))),r=-$l(e,s[t[1]]);return e.concat(r)}));return new su(s,a)}}class au{static fromPoints(t){const e=[1/0,1/0,1/0],r=[-1/0,-1/0,-1/0];for(const n of t)Ll(e,e,n),Fl(r,r,n);return new au(e,r)}static applyTransform(t,e){const r=t.getCorners();for(let t=0;t<r.length;++t)ql(r[t],r[t],e);return au.fromPoints(r)}constructor(t,e){this.min=t,this.max=e,this.center=Rl([],Pl([],this.min,this.max),.5);}quadrant(t){const e=[t%2==0,t<2],r=Bl(this.min),n=Bl(this.max);for(let t=0;t<e.length;t++)r[t]=e[t]?this.min[t]:this.center[t],n[t]=e[t]?this.center[t]:this.max[t];return n[2]=this.max[2],new au(r,n)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}distanceZ(t){return Math.max(Math.min(this.max[2],t[2]),this.min[2])-t[2]}getCorners(){const t=this.min,e=this.max;return [[t[0],t[1],t[2]],[e[0],t[1],t[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],e[2]],[t[0],e[1],e[2]]]}intersects(t){const e=this.getCorners();let r=!0;for(let n=0;n<t.planes.length;n++){const i=t.planes[n];let s=0;for(let t=0;t<e.length;t++)s+=$l(i,e[t])+i[3]>=0;if(0===s)return 0;s!==e.length&&(r=!1);}if(r)return 2;for(let e=0;e<3;e++){let r=Number.MAX_VALUE,n=-Number.MAX_VALUE;for(let i=0;i<t.points.length;i++){const s=t.points[i][e]-this.min[e];r=Math.min(r,s),n=Math.max(n,s);}if(n<0||r>this.max[e]-this.min[e])return 0}return 1}}function ou(t,e,r,n,i,s,a,o,l){if(s&&t.queryGeometry.isAboveHorizon)return !1;s&&(l*=t.pixelToTileUnitsFactor);const u=t.tileID.canonical,c=r.projection.upVectorScale(u,r.center.lat,r.worldSize).metersToTile;for(const h of e)for(const e of h){const h=e.add(o),p=i&&r.elevation?r.elevation.exaggeration()*i.getElevationAt(h.x,h.y,!0):0,f=r.projection.projectTilePoint(h.x,h.y,u);if(p>0){const t=r.projection.upVector(u,h.x,h.y);f.x+=t[0]*c*p,f.y+=t[1]*c*p,f.z+=t[2]*c*p;}const d=s?h:lu(f.x,f.y,f.z,n),y=s?t.tilespaceRays.map((t=>hu(t,p))):t.queryGeometry.screenGeometry,m=Wl([],[f.x,f.y,f.z,1],n);if(!a&&s?l*=m[3]/r.cameraToCenterDistance:a&&!s&&(l*=r.cameraToCenterDistance/m[3]),s){const t=Do((e.y/So+u.y)/(1<<u.z));l/=r.projection.pixelsPerMeter(t,1)/Co(1,t);}if(Jo(y,d,l))return !0}return !1}function lu(t,e,r,n){const i=Wl([],[t,e,r,1],n);return new d(i[0]/i[3],i[1]/i[3])}const uu=Cl(0,0,0),cu=Cl(0,0,1);function hu(t,e){const r=zl();return uu[2]=e,t.intersectsPlane(uu,cu,r),new d(r[0],r[1])}class pu extends Ho{}function fu(t,{width:e,height:r},n,i){if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==e*r*n)throw new RangeError(\"mismatched image size\")}else i=new Uint8Array(e*r*n);return t.width=e,t.height=r,t.data=i,t}function du(t,e,r){const{width:n,height:i}=e;n===t.width&&i===t.height||(yu(t,e,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,n),height:Math.min(t.height,i)},r),t.width=n,t.height=i,t.data=e.data);}function yu(t,e,r,n,i,s){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError(\"out of range source coordinates for image copy\");if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError(\"out of range destination coordinates for image copy\");const a=t.data,o=e.data;for(let l=0;l<i.height;l++){const u=((r.y+l)*t.width+r.x)*s,c=((n.y+l)*e.width+n.x)*s;for(let t=0;t<i.width*s;t++)o[c+t]=a[u+t];}return e}Oi(pu,\"HeatmapBucket\",{omit:[\"layers\"]});class mu{constructor(t,e){fu(this,t,1,e);}resize(t){du(this,new mu(t),1);}clone(){return new mu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,r,n,i){yu(t,e,r,n,i,1);}}class gu{constructor(t,e){fu(this,t,4,e);}resize(t){du(this,new gu(t),4);}replace(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t;}clone(){return new gu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,r,n,i){yu(t,e,r,n,i,4);}}Oi(mu,\"AlphaImage\"),Oi(gu,\"RGBAImage\");var xu={paint:new Js({\"heatmap-radius\":new Hs(Ht.paint_heatmap[\"heatmap-radius\"]),\"heatmap-weight\":new Hs(Ht.paint_heatmap[\"heatmap-weight\"]),\"heatmap-intensity\":new Ys(Ht.paint_heatmap[\"heatmap-intensity\"]),\"heatmap-color\":new Ws(Ht.paint_heatmap[\"heatmap-color\"]),\"heatmap-opacity\":new Ys(Ht.paint_heatmap[\"heatmap-opacity\"])})};function vu(t){const e={},r=t.resolution||256,n=t.clips?t.clips.length:1,i=t.image||new gu({width:r,height:n}),s=(r,n,s)=>{e[t.evaluationKey]=s;const a=t.expression.evaluate(e);i.data[r+n+0]=Math.floor(255*a.r/a.a),i.data[r+n+1]=Math.floor(255*a.g/a.a),i.data[r+n+2]=Math.floor(255*a.b/a.a),i.data[r+n+3]=Math.floor(255*a.a);};if(t.clips)for(let e=0,i=0;e<n;++e,i+=4*r)for(let n=0,a=0;n<r;n++,a+=4){const o=n/(r-1),{start:l,end:u}=t.clips[e];s(i,a,l*(1-o)+u*o);}else for(let t=0,e=0;t<r;t++,e+=4)s(0,e,t/(r-1));return i}var bu={paint:new Js({\"hillshade-illumination-direction\":new Ys(Ht.paint_hillshade[\"hillshade-illumination-direction\"]),\"hillshade-illumination-anchor\":new Ys(Ht.paint_hillshade[\"hillshade-illumination-anchor\"]),\"hillshade-exaggeration\":new Ys(Ht.paint_hillshade[\"hillshade-exaggeration\"]),\"hillshade-shadow-color\":new Ys(Ht.paint_hillshade[\"hillshade-shadow-color\"]),\"hillshade-highlight-color\":new Ys(Ht.paint_hillshade[\"hillshade-highlight-color\"]),\"hillshade-accent-color\":new Ys(Ht.paint_hillshade[\"hillshade-accent-color\"])})};const wu=na([{name:\"a_pos\",components:2,type:\"Int16\"}],4),{members:_u}=wu;var Au={exports:{}};function Su(t,e,r){r=r||2;var n,i,s,a,o,l,u,c=e&&e.length,h=c?e[0]*r:t.length,p=ku(t,0,h,r,!0),f=[];if(!p||p.next===p.prev)return f;if(c&&(p=function(t,e,r,n){var i,s,a,o=[];for(i=0,s=e.length;i<s;i++)(a=ku(t,e[i]*n,i<s-1?e[i+1]*n:t.length,n,!1))===a.next&&(a.steiner=!0),o.push(Lu(a));for(o.sort(Cu),i=0;i<o.length;i++)r=Pu(o[i],r);return r}(t,e,p,r)),t.length>80*r){n=s=t[0],i=a=t[1];for(var d=r;d<h;d+=r)(o=t[d])<n&&(n=o),(l=t[d+1])<i&&(i=l),o>s&&(s=o),l>a&&(a=l);u=0!==(u=Math.max(s-n,a-i))?32767/u:0;}return Mu(p,f,r,n,i,u,0),f}function ku(t,e,r,n,i){var s,a;if(i===Yu(t,e,r,n)>0)for(s=e;s<r;s+=n)a=Xu(s,t[s],t[s+1],a);else for(s=r-n;s>=e;s-=n)a=Xu(s,t[s],t[s+1],a);return a&&Uu(a,a.next)&&(Zu(a),a=a.next),a}function Iu(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!Uu(n,n.next)&&0!==ju(n.prev,n,n.next))n=n.next;else {if(Zu(n),(n=e=n.prev)===n.next)break;r=!0;}}while(r||n!==e);return e}function Mu(t,e,r,n,i,s,a){if(t){!a&&s&&function(t,e,r,n){var i=t;do{0===i.z&&(i.z=Vu(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,s,a,o,l,u=1;do{for(r=t,t=null,s=null,a=0;r;){for(a++,n=r,o=0,e=0;e<u&&(o++,n=n.nextZ);e++);for(l=u;o>0||l>0&&n;)0!==o&&(0===l||!n||r.z<=n.z)?(i=r,r=r.nextZ,o--):(i=n,n=n.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;r=n;}s.nextZ=null,u*=2;}while(a>1)}(i);}(t,n,i,s);for(var o,l,u=t;t.prev!==t.next;)if(o=t.prev,l=t.next,s?zu(t,n,i,s):Tu(t))e.push(o.i/r|0),e.push(t.i/r|0),e.push(l.i/r|0),Zu(t),t=l.next,u=l.next;else if((t=l)===u){a?1===a?Mu(t=Bu(Iu(t),e,r),e,r,n,i,s,2):2===a&&Eu(t,e,r,n,i,s):Mu(Iu(t),e,r,n,i,s,1);break}}}function Tu(t){var e=t.prev,r=t,n=t.next;if(ju(e,r,n)>=0)return !1;for(var i=e.x,s=r.x,a=n.x,o=e.y,l=r.y,u=n.y,c=i<s?i<a?i:a:s<a?s:a,h=o<l?o<u?o:u:l<u?l:u,p=i>s?i>a?i:a:s>a?s:a,f=o>l?o>u?o:u:l>u?l:u,d=n.next;d!==e;){if(d.x>=c&&d.x<=p&&d.y>=h&&d.y<=f&&Fu(i,o,s,l,a,u,d.x,d.y)&&ju(d.prev,d,d.next)>=0)return !1;d=d.next;}return !0}function zu(t,e,r,n){var i=t.prev,s=t,a=t.next;if(ju(i,s,a)>=0)return !1;for(var o=i.x,l=s.x,u=a.x,c=i.y,h=s.y,p=a.y,f=o<l?o<u?o:u:l<u?l:u,d=c<h?c<p?c:p:h<p?h:p,y=o>l?o>u?o:u:l>u?l:u,m=c>h?c>p?c:p:h>p?h:p,g=Vu(f,d,e,r,n),x=Vu(y,m,e,r,n),v=t.prevZ,b=t.nextZ;v&&v.z>=g&&b&&b.z<=x;){if(v.x>=f&&v.x<=y&&v.y>=d&&v.y<=m&&v!==i&&v!==a&&Fu(o,c,l,h,u,p,v.x,v.y)&&ju(v.prev,v,v.next)>=0)return !1;if(v=v.prevZ,b.x>=f&&b.x<=y&&b.y>=d&&b.y<=m&&b!==i&&b!==a&&Fu(o,c,l,h,u,p,b.x,b.y)&&ju(b.prev,b,b.next)>=0)return !1;b=b.nextZ;}for(;v&&v.z>=g;){if(v.x>=f&&v.x<=y&&v.y>=d&&v.y<=m&&v!==i&&v!==a&&Fu(o,c,l,h,u,p,v.x,v.y)&&ju(v.prev,v,v.next)>=0)return !1;v=v.prevZ;}for(;b&&b.z<=x;){if(b.x>=f&&b.x<=y&&b.y>=d&&b.y<=m&&b!==i&&b!==a&&Fu(o,c,l,h,u,p,b.x,b.y)&&ju(b.prev,b,b.next)>=0)return !1;b=b.nextZ;}return !0}function Bu(t,e,r){var n=t;do{var i=n.prev,s=n.next.next;!Uu(i,s)&&$u(i,n,n.next,s)&&Nu(i,s)&&Nu(s,i)&&(e.push(i.i/r|0),e.push(n.i/r|0),e.push(s.i/r|0),Zu(n),Zu(n.next),n=t=s),n=n.next;}while(n!==t);return Iu(n)}function Eu(t,e,r,n,i,s){var a=t;do{for(var o=a.next.next;o!==a.prev;){if(a.i!==o.i&&Ru(a,o)){var l=Gu(a,o);return a=Iu(a,a.next),l=Iu(l,l.next),Mu(a,e,r,n,i,s,0),void Mu(l,e,r,n,i,s,0)}o=o.next;}a=a.next;}while(a!==t)}function Cu(t,e){return t.x-e.x}function Pu(t,e){var r=function(t,e){var r,n=e,i=t.x,s=t.y,a=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var o=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(o<=i&&o>a&&(a=o,r=n.x<n.next.x?n:n.next,o===i))return r}n=n.next;}while(n!==e);if(!r)return null;var l,u=r,c=r.x,h=r.y,p=1/0;n=r;do{i>=n.x&&n.x>=c&&i!==n.x&&Fu(s<h?i:a,s,c,h,s<h?a:i,s,n.x,n.y)&&(l=Math.abs(s-n.y)/(i-n.x),Nu(n,t)&&(l<p||l===p&&(n.x>r.x||n.x===r.x&&Du(r,n)))&&(r=n,p=l)),n=n.next;}while(n!==u);return r}(t,e);if(!r)return e;var n=Gu(r,t);return Iu(n,n.next),Iu(r,r.next)}function Du(t,e){return ju(t.prev,t,e.prev)<0&&ju(e.next,t,t.next)<0}function Vu(t,e,r,n,i){return (t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Lu(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;}while(e!==t);return r}function Fu(t,e,r,n,i,s,a,o){return (i-a)*(e-o)>=(t-a)*(s-o)&&(t-a)*(n-o)>=(r-a)*(e-o)&&(r-a)*(s-o)>=(i-a)*(n-o)}function Ru(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&$u(r,r.next,t,e))return !0;r=r.next;}while(r!==t);return !1}(t,e)&&(Nu(t,e)&&Nu(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do{r.y>s!=r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;}while(r!==t);return n}(t,e)&&(ju(t.prev,t,e.prev)||ju(t,e.prev,e))||Uu(t,e)&&ju(t.prev,t,t.next)>0&&ju(e.prev,e,e.next)>0)}function ju(t,e,r){return (e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Uu(t,e){return t.x===e.x&&t.y===e.y}function $u(t,e,r,n){var i=qu(ju(t,e,r)),s=qu(ju(t,e,n)),a=qu(ju(r,n,t)),o=qu(ju(r,n,e));return i!==s&&a!==o||!(0!==i||!Ou(t,r,e))||!(0!==s||!Ou(t,n,e))||!(0!==a||!Ou(r,t,n))||!(0!==o||!Ou(r,e,n))}function Ou(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function qu(t){return t>0?1:t<0?-1:0}function Nu(t,e){return ju(t.prev,t,t.next)<0?ju(t,e,t.next)>=0&&ju(t,t.prev,e)>=0:ju(t,e,t.prev)<0||ju(t,t.next,e)<0}function Gu(t,e){var r=new Ku(t.i,t.x,t.y),n=new Ku(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function Xu(t,e,r,n){var i=new Ku(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Zu(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ);}function Ku(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1;}function Yu(t,e,r,n){for(var i=0,s=e,a=r-n;s<r;s+=n)i+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;return i}function Hu(t,e,r,n,i){Wu(t,e,r||0,n||t.length-1,i||Qu);}function Wu(t,e,r,n,i){for(;n>r;){if(n-r>600){var s=n-r+1,a=e-r+1,o=Math.log(s),l=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*l*(s-l)/s)*(a-s/2<0?-1:1);Wu(t,e,Math.max(r,Math.floor(e-a*l/s+u)),Math.min(n,Math.floor(e+(s-a)*l/s+u)),i);}var c=t[e],h=r,p=n;for(Ju(t,r,e),i(t[n],c)>0&&Ju(t,r,n);h<p;){for(Ju(t,h,p),h++,p--;i(t[h],c)<0;)h++;for(;i(t[p],c)>0;)p--;}0===i(t[r],c)?Ju(t,r,p):Ju(t,++p,n),p<=e&&(r=p+1),e<=p&&(n=p-1);}}function Ju(t,e,r){var n=t[e];t[e]=t[r],t[r]=n;}function Qu(t,e){return t<e?-1:t>e?1:0}function tc(t,e){const r=t.length;if(r<=1)return [t];const n=[];let i,s;for(let e=0;e<r;e++){const r=q(t[e]);0!==r&&(t[e].area=Math.abs(r),void 0===s&&(s=r<0),s===r<0?(i&&n.push(i),i=[t[e]]):i.push(t[e]));}if(i&&n.push(i),e>1)for(let t=0;t<n.length;t++)n[t].length<=e||(Hu(n[t],e,1,n[t].length-1,ec),n[t]=n[t].slice(0,e));return n}function ec(t,e){return e.area-t.area}function rc(t,e,r){const n=r.patternDependencies;let i=!1;for(const r of e){const e=r.paint.get(`${t}-pattern`);e.isConstant()||(i=!0);const s=e.constantOr(null);s&&(i=!0,n[s]=!0);}return i}function nc(t,e,r,n,i){const s=i.patternDependencies;for(const a of e){const e=a.paint.get(`${t}-pattern`).value;if(\"constant\"!==e.kind){let t=e.evaluate({zoom:n},r,{},i.availableImages);t=t&&t.name?t.name:t,s[t]=!0,r.patterns[a.id]=t;}}return r}Au.exports=Su,Au.exports.default=Su,Su.deviation=function(t,e,r,n){var i=e&&e.length,s=Math.abs(Yu(t,0,i?e[0]*r:t.length,r));if(i)for(var a=0,o=e.length;a<o;a++)s-=Math.abs(Yu(t,e[a]*r,a<o-1?e[a+1]*r:t.length,r));var l=0;for(a=0;a<n.length;a+=3){var u=n[a]*r,c=n[a+1]*r,h=n[a+2]*r;l+=Math.abs((t[u]-t[h])*(t[c+1]-t[u+1])-(t[u]-t[c])*(t[h+1]-t[u+1]));}return 0===s&&0===l?0:Math.abs((l-s)/s)},Su.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var a=0;a<e;a++)r.vertices.push(t[i][s][a]);i>0&&r.holes.push(n+=t[i-1].length);}return r};class ic{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new sa,this.indexArray=new wa,this.indexArray2=new Ma,this.programConfigurations=new po(t.layers,t.zoom),this.segments=new Ao,this.segments2=new Ao,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.projection=t.projection;}populate(t,e,r,n){this.hasPattern=rc(\"fill\",this.layers,e);const i=this.layers[0].layout.get(\"fill-sort-key\"),s=[];for(const{feature:a,id:o,index:l,sourceLayerIndex:u}of t){const t=this.layers[0]._featureFilter.needGeometry,c=Zo(a,t);if(!this.layers[0]._featureFilter.filter(new Us(this.zoom),c,r))continue;const h=i?i.evaluate(c,{},r,e.availableImages):void 0,p={id:o,properties:a.properties,type:a.type,sourceLayerIndex:u,index:l,geometry:t?c.geometry:Xo(a,r,n),patterns:{},sortKey:h};s.push(p);}i&&s.sort(((t,e)=>t.sortKey-e.sortKey));for(const n of s){const{geometry:i,index:s,sourceLayerIndex:a}=n;if(this.hasPattern){const t=nc(\"fill\",this.layers,n,this.zoom,e);this.patternFeatures.push(t);}else this.addFeature(n,i,s,r,{},e.availableImages);e.featureIndex.insert(t[s].feature,i,s,a,this.index);}}update(t,e,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r,n);}addFeatures(t,e,r,n,i){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,r,n);}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return !this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,_u),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0;}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy());}addFeature(t,e,r,n,i,s=[]){for(const t of tc(e,500)){let e=0;for(const r of t)e+=r.length;const r=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray),n=r.vertexLength,i=[],s=[];for(const e of t){if(0===e.length)continue;e!==t[0]&&s.push(i.length/2);const r=this.segments2.prepareSegment(e.length,this.layoutVertexArray,this.indexArray2),n=r.vertexLength;this.layoutVertexArray.emplaceBack(e[0].x,e[0].y),this.indexArray2.emplaceBack(n+e.length-1,n),i.push(e[0].x),i.push(e[0].y);for(let t=1;t<e.length;t++)this.layoutVertexArray.emplaceBack(e[t].x,e[t].y),this.indexArray2.emplaceBack(n+t-1,n+t),i.push(e[t].x),i.push(e[t].y);r.vertexLength+=e.length,r.primitiveLength+=e.length;}const a=Au.exports(i,s);for(let t=0;t<a.length;t+=3)this.indexArray.emplaceBack(n+a[t],n+a[t+1],n+a[t+2]);r.vertexLength+=e,r.primitiveLength+=a.length/3;}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,i,s,n);}}Oi(ic,\"FillBucket\",{omit:[\"layers\",\"patternFeatures\"]});const sc=new Js({\"fill-sort-key\":new Hs(Ht.layout_fill[\"fill-sort-key\"])});var ac={paint:new Js({\"fill-antialias\":new Ys(Ht.paint_fill[\"fill-antialias\"]),\"fill-opacity\":new Hs(Ht.paint_fill[\"fill-opacity\"]),\"fill-color\":new Hs(Ht.paint_fill[\"fill-color\"]),\"fill-outline-color\":new Hs(Ht.paint_fill[\"fill-outline-color\"]),\"fill-translate\":new Ys(Ht.paint_fill[\"fill-translate\"]),\"fill-translate-anchor\":new Ys(Ht.paint_fill[\"fill-translate-anchor\"]),\"fill-pattern\":new Hs(Ht.paint_fill[\"fill-pattern\"])}),layout:sc};const oc=na([{name:\"a_pos_normal_ed\",components:4,type:\"Int16\"}]),lc=na([{name:\"a_centroid_pos\",components:2,type:\"Uint16\"}]),uc=na([{name:\"a_pos_3\",components:3,type:\"Int16\"},{name:\"a_pos_normal_3\",components:3,type:\"Int16\"}]),{members:cc}=oc;var hc={},pc=d,fc=dc;function dc(t,e,r,n,i){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=i,t.readFields(yc,this,e);}function yc(t,e,r){1==t?e.id=r.readVarint():2==t?function(t,e){for(var r=t.readVarint()+t.pos;t.pos<r;){var n=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[n]=i;}}(r,e):3==t?e.type=r.readVarint():4==t&&(e._geometry=r.pos);}function mc(t){for(var e,r,n=0,i=0,s=t.length,a=s-1;i<s;a=i++)n+=((r=t[a]).x-(e=t[i]).x)*(e.y+r.y);return n}dc.types=[\"Unknown\",\"Point\",\"LineString\",\"Polygon\"],dc.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r=t.readVarint()+t.pos,n=1,i=0,s=0,a=0,o=[];t.pos<r;){if(i<=0){var l=t.readVarint();n=7&l,i=l>>3;}if(i--,1===n||2===n)s+=t.readSVarint(),a+=t.readSVarint(),1===n&&(e&&o.push(e),e=[]),e.push(new pc(s,a));else {if(7!==n)throw new Error(\"unknown command \"+n);e&&e.push(e[0].clone());}}return e&&o.push(e),o},dc.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,n=0,i=0,s=0,a=1/0,o=-1/0,l=1/0,u=-1/0;t.pos<e;){if(n<=0){var c=t.readVarint();r=7&c,n=c>>3;}if(n--,1===r||2===r)(i+=t.readSVarint())<a&&(a=i),i>o&&(o=i),(s+=t.readSVarint())<l&&(l=s),s>u&&(u=s);else if(7!==r)throw new Error(\"unknown command \"+r)}return [a,l,o,u]},dc.prototype.toGeoJSON=function(t,e,r){var n,i,s=this.extent*Math.pow(2,r),a=this.extent*t,o=this.extent*e,l=this.loadGeometry(),u=dc.types[this.type];function c(t){for(var e=0;e<t.length;e++){var r=t[e];t[e]=[360*(r.x+a)/s-180,360/Math.PI*Math.atan(Math.exp((180-360*(r.y+o)/s)*Math.PI/180))-90];}}switch(this.type){case 1:var h=[];for(n=0;n<l.length;n++)h[n]=l[n][0];c(l=h);break;case 2:for(n=0;n<l.length;n++)c(l[n]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return [t];for(var r,n,i=[],s=0;s<e;s++){var a=mc(t[s]);0!==a&&(void 0===n&&(n=a<0),n===a<0?(r&&i.push(r),r=[t[s]]):r.push(t[s]));}return r&&i.push(r),i}(l),n=0;n<l.length;n++)for(i=0;i<l[n].length;i++)c(l[n][i]);}1===l.length?l=l[0]:u=\"Multi\"+u;var p={type:\"Feature\",geometry:{type:u,coordinates:l},properties:this.properties};return \"id\"in this&&(p.id=this.id),p};var gc=fc,xc=vc;function vc(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(bc,this,e),this.length=this._features.length;}function bc(t,e,r){15===t?e.version=r.readVarint():1===t?e.name=r.readString():5===t?e.extent=r.readVarint():2===t?e._features.push(r.pos):3===t?e._keys.push(r.readString()):4===t&&e._values.push(function(t){for(var e=null,r=t.readVarint()+t.pos;t.pos<r;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null;}return e}(r));}vc.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error(\"feature index out of bounds\");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new gc(this._pbf,e,this.extent,this._keys,this._values)};var wc=xc;function _c(t,e,r){if(3===t){var n=new wc(r,r.readVarint()+r.pos);n.length&&(e[n.name]=n);}}var Ac=hc.VectorTile=function(t,e){this.layers=t.readFields(_c,{},e);},Sc=hc.VectorTileFeature=fc;function kc(t,e,r,n){const i=[],s=0===n?(t,e,r,n,i,s)=>{t.push(new d(s,r+(s-e)/(n-e)*(i-r)));}:(t,e,r,n,i,s)=>{t.push(new d(e+(s-r)/(i-r)*(n-e),s));};for(const a of t){const t=[];for(const i of a){if(i.length<=2)continue;const a=[];for(let t=0;t<i.length-1;t++){const o=i[t].x,l=i[t].y,u=i[t+1].x,c=i[t+1].y,h=0===n?o:l,p=0===n?u:c;h<e?p>e&&s(a,o,l,u,c,e):h>r?p<r&&s(a,o,l,u,c,r):a.push(i[t]),p<e&&h>=e&&s(a,o,l,u,c,e),p>r&&h<=r&&s(a,o,l,u,c,r);}let o=i[i.length-1];const l=0===n?o.x:o.y;l>=e&&l<=r&&a.push(o),a.length&&(o=a[a.length-1],a[0].x===o.x&&a[0].y===o.y||a.push(a[0]),t.push(a));}t.length&&i.push(t);}return i}hc.VectorTileLayer=xc;const Ic=Sc.types,Mc=Math.pow(2,13);function Tc(t,e,r,n,i,s,a,o){t.emplaceBack((e<<1)+a,(r<<1)+s,(Math.floor(n*Mc)<<1)+i,Math.round(o));}function zc(t,e,r){const n=16384;t.emplaceBack(e.x,e.y,e.z,r[0]*n,r[1]*n,r[2]*n);}class Bc{constructor(){this.acc=new d(0,0),this.polyCount=[];}startRing(t){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new d(t.x,t.y),this.max=new d(t.x,t.y));}append(t,e){this.currentPolyCount.edges++,this.acc._add(t);const r=this.min,n=this.max;t.x<r.x?r.x=t.x:t.x>n.x&&(n.x=t.x),t.y<r.y?r.y=t.y:t.y>n.y&&(n.y=t.y),((0===t.x||t.x===So)&&t.x===e.x)!=((0===t.y||t.y===So)&&t.y===e.y)&&this.processBorderOverlap(t,e),e.x<0!=t.x<0&&this.addBorderIntersection(0,Mr(e.y,t.y,(0-e.x)/(t.x-e.x))),e.x>So!=t.x>So&&this.addBorderIntersection(1,Mr(e.y,t.y,(So-e.x)/(t.x-e.x))),e.y<0!=t.y<0&&this.addBorderIntersection(2,Mr(e.x,t.x,(0-e.y)/(t.y-e.y))),e.y>So!=t.y>So&&this.addBorderIntersection(3,Mr(e.x,t.x,(So-e.y)/(t.y-e.y)));}addBorderIntersection(t,e){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const r=this.borders[t];e<r[0]&&(r[0]=e),e>r[1]&&(r[1]=e);}processBorderOverlap(t,e){if(t.x===e.x){if(t.y===e.y)return;const r=0===t.x?0:1;this.addBorderIntersection(r,e.y),this.addBorderIntersection(r,t.y);}else {const r=0===t.y?2:3;this.addBorderIntersection(r,e.x),this.addBorderIntersection(r,t.x);}}centroid(){const t=this.polyCount.reduce(((t,e)=>t+e.edges),0);return 0!==t?this.acc.div(t)._round():new d(0,0)}span(){return new d(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((t,e)=>t+ +(e[0]!==Number.MAX_VALUE)),0)}}class Ec{constructor(t){this.zoom=t.zoom,this.canonical=t.canonical,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=t.projection,this.layoutVertexArray=new oa,this.centroidVertexArray=new Ua,this.indexArray=new wa,this.programConfigurations=new po(t.layers,t.zoom),this.segments=new Ao,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.enableTerrain=t.enableTerrain;}populate(t,e,r,n){this.features=[],this.hasPattern=rc(\"fill-extrusion\",this.layers,e),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(t){const e=Math.exp(Math.PI*(1-t.y/(1<<t.z)*2));return 80150034*e/(e*e+1)/So/(1<<t.z)}(r),this.edgeRadius=this.layers[0].layout.get(\"fill-extrusion-edge-radius\")/this.tileToMeter;for(const{feature:i,id:s,index:a,sourceLayerIndex:o}of t){const t=this.layers[0]._featureFilter.needGeometry,l=Zo(i,t);if(!this.layers[0]._featureFilter.filter(new Us(this.zoom),l,r))continue;const u={id:s,sourceLayerIndex:o,index:a,geometry:t?l.geometry:Xo(i,r,n),properties:i.properties,type:i.type,patterns:{}},c=this.layoutVertexArray.length;this.hasPattern?this.features.push(nc(\"fill-extrusion\",this.layers,u,this.zoom,e)):this.addFeature(u,u.geometry,a,r,{},e.availableImages,n),e.featureIndex.insert(i,u.geometry,a,o,this.index,c);}this.sortBorders();}addFeatures(t,e,r,n,i){for(const t of this.features){const{geometry:s}=t;this.addFeature(t,s,t.index,e,r,n,i);}this.sortBorders();}update(t,e,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r,n);}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return !this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,cc),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=t.createVertexBuffer(this.layoutVertexExtArray,uc.members,!0))),this.programConfigurations.upload(t),this.uploaded=!0;}uploadCentroid(t){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,lc.members,!0),this.needsCentroidUpdate=!1);}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy());}addFeature(t,e,r,n,i,s,a){const o=[new d(0,0),new d(So,So)],l=a.projection,u=\"globe\"===l.name,c=this.enableTerrain&&!u?new Bc:null,h=\"Polygon\"===Ic[t.type];u&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new pa);const p=tc(e,500);for(let t=p.length-1;t>=0;t--){const e=p[t];(0===e.length||(f=e[0]).every((t=>t.x<=0))||f.every((t=>t.x>=So))||f.every((t=>t.y<=0))||f.every((t=>t.y>=So)))&&p.splice(t,1);}var f;let y;if(u)y=jc(p,o,n);else {y=[];for(const t of p)y.push({polygon:t,bounds:o});}const m=h?this.edgeRadius:0;for(const{polygon:t,bounds:e}of y){let r=0,i=0;for(const e of t)h&&!e[0].equals(e[e.length-1])&&e.push(e[0]),i+=h?e.length-1:e.length;const s=this.segments.prepareSegment((h?5:4)*i,this.layoutVertexArray,this.indexArray);if(h){const e=[],i=[];r=s.vertexLength;for(const r of t){let a,o;r.length&&r!==t[0]&&i.push(e.length/2),a=r[1].sub(r[0])._perp()._unit();for(let t=1;t<r.length;t++){const i=r[t],c=r[t===r.length-1?1:t+1];let{x:h,y:p}=i;if(m){o=c.sub(i)._perp()._unit();const t=a.add(o)._unit(),e=m*Math.min(4,1/(a.x*t.x+a.y*t.y));h+=e*t.x,p+=e*t.y,a=o;}Tc(this.layoutVertexArray,h,p,0,0,1,1,0),s.vertexLength++,e.push(i.x,i.y),u&&zc(this.layoutVertexExtArray,l.projectTilePoint(h,p,n),l.upVector(n,h,p));}}const a=Au.exports(e,i);for(let t=0;t<a.length;t+=3)this.indexArray.emplaceBack(r+a[t],r+a[t+2],r+a[t+1]),s.primitiveLength++;}for(const i of t){c&&i.length&&c.startRing(i[0]);let t,a,o,p=i.length>4&&Lc(i[i.length-2],i[0],i[1]),f=m?Pc(i[i.length-2],i[0],i[1],m):0;a=i[1].sub(i[0])._perp()._unit();let d=!0;for(let y=1,g=0;y<i.length;y++){let x=i[y-1],v=i[y];const b=i[y===i.length-1?1:y+1];if(c&&h&&c.currentPolyCount.top++,Vc(v,x,e)){m&&(a=b.sub(v)._perp()._unit(),d=!d);continue}c&&c.append(v,x);const w=v.sub(x)._perp(),_=w.x/(Math.abs(w.x)+Math.abs(w.y)),A=w.y>0?1:0,S=x.dist(v);if(g+S>32768&&(g=0),m){o=b.sub(v)._perp()._unit();let t=Dc(x,v,b,Cc(a,o),m);isNaN(t)&&(t=0);const e=v.sub(x)._unit();x=x.add(e.mult(f))._round(),v=v.add(e.mult(-t))._round(),f=t,a=o;}const k=s.vertexLength,I=i.length>4&&Lc(x,v,b);let M=Fc(g,p,d);if(Tc(this.layoutVertexArray,x.x,x.y,_,A,0,0,M),Tc(this.layoutVertexArray,x.x,x.y,_,A,0,1,M),g+=S,M=Fc(g,I,!d),p=I,Tc(this.layoutVertexArray,v.x,v.y,_,A,0,0,M),Tc(this.layoutVertexArray,v.x,v.y,_,A,0,1,M),s.vertexLength+=4,this.indexArray.emplaceBack(k+0,k+1,k+2),this.indexArray.emplaceBack(k+1,k+3,k+2),s.primitiveLength+=2,m){const n=r+(1===y?i.length-2:y-2),a=1===y?r:n+1;if(this.indexArray.emplaceBack(k+1,n,k+3),this.indexArray.emplaceBack(n,a,k+3),s.primitiveLength+=2,void 0===t&&(t=k),!Vc(b,i[y],e)){const e=y===i.length-1?t:s.vertexLength;this.indexArray.emplaceBack(k+2,k+3,e),this.indexArray.emplaceBack(k+3,e+1,e),this.indexArray.emplaceBack(k+3,a,e+1),s.primitiveLength+=3;}d=!d;}if(u){const t=this.layoutVertexExtArray,e=l.projectTilePoint(x.x,x.y,n),r=l.projectTilePoint(v.x,v.y,n),i=l.upVector(n,x.x,x.y),s=l.upVector(n,v.x,v.y);zc(t,e,i),zc(t,e,i),zc(t,r,s),zc(t,r,s);}}h&&(r+=i.length-1);}}if(c&&c.polyCount.length>0){if(c.borders){c.vertexArrayOffset=this.centroidVertexArray.length;const t=c.borders,e=this.featuresOnBorder.push(c)-1;for(let r=0;r<4;r++)t[r][0]!==Number.MAX_VALUE&&this.borders[r].push(e);}this.encodeCentroid(c.borders?void 0:c.centroid(),c);}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,i,s,n);}sortBorders(){for(let t=0;t<4;t++)this.borders[t].sort(((e,r)=>this.featuresOnBorder[e].borders[t][0]-this.featuresOnBorder[r].borders[t][0]));}encodeCentroid(t,e,r=!0){let n,i;if(t)if(0!==t.y){const r=e.span()._mult(this.tileToMeter);n=(Math.max(t.x,1)<<3)+Math.min(7,Math.round(r.x/10)),i=(Math.max(t.y,1)<<3)+Math.min(7,Math.round(r.y/10));}else n=Math.ceil(7*(t.x+450)),i=0;else n=0,i=+r;let s=r?this.centroidVertexArray.length:e.vertexArrayOffset;for(const t of e.polyCount){r&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*t.edges+t.top);for(let e=0;e<t.top;e++)this.centroidVertexArray.emplace(s++,n,i);for(let e=0;e<2*t.edges;e++)this.centroidVertexArray.emplace(s++,0,i),this.centroidVertexArray.emplace(s++,n,i);}}}function Cc(t,e){const r=t.add(e)._unit();return t.x*r.x+t.y*r.y}function Pc(t,e,r,n){const i=e.sub(t)._perp()._unit(),s=r.sub(e)._perp()._unit();return Dc(t,e,r,Cc(i,s),n)}function Dc(t,e,r,n,i){const s=Math.sqrt(1-n*n);return Math.min(t.dist(e)/3,e.dist(r)/3,i*s/n)}function Vc(t,e,r){return t.x<r[0].x&&e.x<r[0].x||t.x>r[1].x&&e.x>r[1].x||t.y<r[0].y&&e.y<r[0].y||t.y>r[1].y&&e.y>r[1].y}function Lc(t,e,r){if(t.x<0||t.x>=So||e.x<0||e.x>=So||r.x<0||r.x>=So)return !1;const n=r.sub(e),i=n.perp(),s=t.sub(e);return (n.x*s.x+n.y*s.y)/Math.sqrt((n.x*n.x+n.y*n.y)*(s.x*s.x+s.y*s.y))>-.866&&i.x*s.x+i.y*s.y<0}function Fc(t,e,r){const n=e?2|t:-3&t;return r?1|n:-2&n}function Rc(){const t=Math.PI/32,e=Math.tan(t),r=Io;return r*Math.sqrt(1+2*e*e)-r}function jc(t,e,r){const n=1<<r.z,i=Po(r.x/n),s=Po((r.x+1)/n),a=Do(r.y/n),o=Do((r.y+1)/n);return function(t,e,r,n,i=0,s){const a=[];if(!t.length||!r||!n)return a;const o=(t,e)=>{for(const r of t)a.push({polygon:r,bounds:e});},l=Math.ceil(Math.log2(r)),u=Math.ceil(Math.log2(n)),c=l-u,h=[];for(let t=0;t<Math.abs(c);t++)h.push(c>0?0:1);for(let t=0;t<Math.min(l,u);t++)h.push(0),h.push(1);let p=t;if(p=kc(p,e[0].y-i,e[1].y+i,1),p=kc(p,e[0].x-i,e[1].x+i,0),!p.length)return a;const f=[];for(h.length?f.push({polygons:p,bounds:e,depth:0}):o(p,e);f.length;){const t=f.pop(),e=t.depth,r=h[e],n=t.bounds[0],a=t.bounds[1],l=0===r?n.x:n.y,u=0===r?a.x:a.y,c=s?s(r,l,u):.5*(l+u),p=kc(t.polygons,l-i,c+i,r),y=kc(t.polygons,c-i,u+i,r);if(p.length){const t=[n,new d(0===r?c:a.x,1===r?c:a.y)];h.length>e+1?f.push({polygons:p,bounds:t,depth:e+1}):o(p,t);}if(y.length){const t=[new d(0===r?c:n.x,1===r?c:n.y),a];h.length>e+1?f.push({polygons:y,bounds:t,depth:e+1}):o(y,t);}}return a}(t,e,Math.ceil((s-i)/11.25),Math.ceil((a-o)/11.25),1,((t,e,i)=>{if(0===t)return .5*(e+i);{const t=Do((r.y+e/So)/n);return (Eo(.5*(Do((r.y+i/So)/n)+t))*n-r.y)*So}}))}Oi(Ec,\"FillExtrusionBucket\",{omit:[\"layers\",\"features\"]}),Oi(Bc,\"PartMetadata\");const Uc=new Js({\"fill-extrusion-edge-radius\":new Ys(Ht[\"layout_fill-extrusion\"][\"fill-extrusion-edge-radius\"])});var $c={paint:new Js({\"fill-extrusion-opacity\":new Ys(Ht[\"paint_fill-extrusion\"][\"fill-extrusion-opacity\"]),\"fill-extrusion-color\":new Hs(Ht[\"paint_fill-extrusion\"][\"fill-extrusion-color\"]),\"fill-extrusion-translate\":new Ys(Ht[\"paint_fill-extrusion\"][\"fill-extrusion-translate\"]),\"fill-extrusion-translate-anchor\":new Ys(Ht[\"paint_fill-extrusion\"][\"fill-extrusion-translate-anchor\"]),\"fill-extrusion-pattern\":new Hs(Ht[\"paint_fill-extrusion\"][\"fill-extrusion-pattern\"]),\"fill-extrusion-height\":new Hs(Ht[\"paint_fill-extrusion\"][\"fill-extrusion-height\"]),\"fill-extrusion-base\":new Hs(Ht[\"paint_fill-extrusion\"][\"fill-extrusion-base\"]),\"fill-extrusion-vertical-gradient\":new Ys(Ht[\"paint_fill-extrusion\"][\"fill-extrusion-vertical-gradient\"]),\"fill-extrusion-ambient-occlusion-intensity\":new Ys(Ht[\"paint_fill-extrusion\"][\"fill-extrusion-ambient-occlusion-intensity\"]),\"fill-extrusion-ambient-occlusion-radius\":new Ys(Ht[\"paint_fill-extrusion\"][\"fill-extrusion-ambient-occlusion-radius\"])}),layout:Uc};function Oc(t,e,r){var n=2*Math.PI*6378137/256/Math.pow(2,r);return [t*n-2*Math.PI*6378137/2,e*n-2*Math.PI*6378137/2]}class qc{constructor(t,e,r){this.z=t,this.x=e,this.y=r,this.key=Xc(0,t,t,e,r);}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,e){const r=function(t,e,r){var n=Oc(256*t,256*(e=Math.pow(2,r)-e-1),r),i=Oc(256*(t+1),256*(e+1),r);return n[0]+\",\"+n[1]+\",\"+i[0]+\",\"+i[1]}(this.x,this.y,this.z),n=function(t,e,r){let n,i=\"\";for(let s=t;s>0;s--)n=1<<s-1,i+=(e&n?1:0)+(r&n?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(\"{prefix}\",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(\"tms\"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace(\"{quadkey}\",n).replace(\"{bbox-epsg-3857}\",r)}toString(){return `${this.z}/${this.x}/${this.y}`}}class Nc{constructor(t,e){this.wrap=t,this.canonical=e,this.key=Xc(t,e.z,e.z,e.x,e.y);}}class Gc{constructor(t,e,r,n,i){this.overscaledZ=t,this.wrap=e,this.canonical=new qc(r,+n,+i),this.key=0===e&&t===r?this.canonical.key:Xc(e,t,r,n,i);}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const e=this.canonical.z-t;return t>this.canonical.z?new Gc(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Gc(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)}calculateScaledKey(t,e=!0){if(this.overscaledZ===t&&e)return this.key;if(t>this.canonical.z)return Xc(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y);{const r=this.canonical.z-t;return Xc(this.wrap*+e,t,t,this.canonical.x>>r,this.canonical.y>>r)}}isChildOf(t){if(t.wrap!==this.wrap)return !1;const e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return [new Gc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const e=this.canonical.z+1,r=2*this.canonical.x,n=2*this.canonical.y;return [new Gc(e,this.wrap,e,r,n),new Gc(e,this.wrap,e,r+1,n),new Gc(e,this.wrap,e,r,n+1),new Gc(e,this.wrap,e,r+1,n+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Gc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Gc(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Nc(this.wrap,this.canonical)}toString(){return `${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Xc(t,e,r,n,i){const s=1<<Math.min(r,22);let a=s*(i%s)+n%s;return t&&r<22&&(a+=s*s*((t<0?-2*t-1:2*t)%(1<<2*(22-r)))),16*(32*a+r)+(e-r)}Oi(qc,\"CanonicalTileID\"),Oi(Gc,\"OverscaledTileID\",{omit:[\"projMatrix\"]});class Zc extends d{constructor(t,e,r){super(t,e),this.z=r;}}function Kc(t,e){return t.x*e.x+t.y*e.y}function Yc(t,e){if(1===t.length){let r=0;const n=e[r++];let i;for(;!i||n.equals(i);)if(i=e[r++],!i)return 1/0;for(;r<e.length;r++){const s=e[r],a=t[0],o=i.sub(n),l=s.sub(n),u=a.sub(n),c=Kc(o,o),h=Kc(o,l),p=Kc(l,l),f=Kc(u,o),d=Kc(u,l),y=c*p-h*h,m=(p*f-h*d)/y,g=(c*d-h*f)/y,x=n.z*(1-m-g)+i.z*m+s.z*g;if(isFinite(x))return x}return 1/0}{let t=1/0;for(const r of e)t=Math.min(t,r.z);return t}}function Hc(t,e,r,n,i,s,a,o){const l=a*i.getElevationAt(t,e,!0,!0),u=0!==s[0],c=u?0===s[1]?a*(s[0]/7-450):a*function(t,e,r){const n=Math.floor(e[0]/8),i=Math.floor(e[1]/8),s=10*(e[0]-8*n),a=10*(e[1]-8*i),o=t.getElevationAt(n,i,!0,!0),l=t.getMeterToDEM(r),u=Math.floor(.5*(s*l-1)),c=Math.floor(.5*(a*l-1)),h=t.tileCoordToPixel(n,i),p=2*u+1,f=2*c+1,d=function(t,e,r,n,i){return [t.getElevationAtPixel(e,r,!0),t.getElevationAtPixel(e+i,r,!0),t.getElevationAtPixel(e,r+i,!0),t.getElevationAtPixel(e+n,r+i,!0)]}(t,h.x-u,h.y-c,p,f),y=Math.abs(d[0]-d[1]),m=Math.abs(d[2]-d[3]),g=Math.abs(d[0]-d[2])+Math.abs(d[1]-d[3]),x=Math.min(.25,.5*l*(y+m)/p),v=Math.min(.25,.5*l*g/f);return o+Math.max(x*s,v*a)}(i,s,o):l;return {base:l+(0===r)?-1:r,top:u?Math.max(c+n,l+r+2):l+n}}const Wc=na([{name:\"a_pos_normal\",components:2,type:\"Int16\"},{name:\"a_data\",components:4,type:\"Uint8\"},{name:\"a_linesofar\",components:1,type:\"Float32\"}],4),{members:Jc}=Wc,Qc=na([{name:\"a_packed\",components:4,type:\"Float32\"}]),{members:th}=Qc,eh=Sc.types,rh=Math.cos(Math.PI/180*37.5);class nh{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.projection=t.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((t=>{this.gradients[t.id]={};})),this.layoutVertexArray=new la,this.layoutVertexArray2=new ua,this.indexArray=new wa,this.programConfigurations=new po(t.layers,t.zoom),this.segments=new Ao,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id));}populate(t,e,r,n){this.hasPattern=rc(\"line\",this.layers,e);const i=this.layers[0].layout.get(\"line-sort-key\"),s=[];for(const{feature:e,id:a,index:o,sourceLayerIndex:l}of t){const t=this.layers[0]._featureFilter.needGeometry,u=Zo(e,t);if(!this.layers[0]._featureFilter.filter(new Us(this.zoom),u,r))continue;const c=i?i.evaluate(u,{},r):void 0,h={id:a,properties:e.properties,type:e.type,sourceLayerIndex:l,index:o,geometry:t?u.geometry:Xo(e,r,n),patterns:{},sortKey:c};s.push(h);}i&&s.sort(((t,e)=>t.sortKey-e.sortKey));const{lineAtlas:a,featureIndex:o}=e,l=this.addConstantDashes(a);for(const n of s){const{geometry:i,index:s,sourceLayerIndex:u}=n;if(l&&this.addFeatureDashes(n,a),this.hasPattern){const t=nc(\"line\",this.layers,n,this.zoom,e);this.patternFeatures.push(t);}else this.addFeature(n,i,s,r,a.positions,e.availableImages);o.insert(t[s].feature,i,s,u,this.index);}}addConstantDashes(t){let e=!1;for(const r of this.layers){const n=r.paint.get(\"line-dasharray\").value,i=r.layout.get(\"line-cap\").value;if(\"constant\"!==n.kind||\"constant\"!==i.kind)e=!0;else {const e=i.value,r=n.value;if(!r)continue;t.addDash(r,e);}}return e}addFeatureDashes(t,e){const r=this.zoom;for(const n of this.layers){const i=n.paint.get(\"line-dasharray\").value,s=n.layout.get(\"line-cap\").value;if(\"constant\"===i.kind&&\"constant\"===s.kind)continue;let a,o;if(\"constant\"===i.kind){if(a=i.value,!a)continue}else a=i.evaluate({zoom:r},t);o=\"constant\"===s.kind?s.value:s.evaluate({zoom:r},t),e.addDash(a,o),t.patterns[n.id]=e.getKey(a,o);}}update(t,e,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r,n);}addFeatures(t,e,r,n,i){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,r,n);}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return !this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,th)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Jc),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0;}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy());}lineFeatureClips(t){if(t.properties&&t.properties.hasOwnProperty(\"mapbox_clip_start\")&&t.properties.hasOwnProperty(\"mapbox_clip_end\"))return {start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,e,r,n,i,s){const a=this.layers[0].layout,o=a.get(\"line-join\").evaluate(t,{}),l=a.get(\"line-cap\").evaluate(t,{}),u=a.get(\"line-miter-limit\"),c=a.get(\"line-round-limit\");this.lineClips=this.lineFeatureClips(t);for(const r of e)this.addLine(r,t,o,l,u,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,i,s,n);}addLine(t,e,r,n,i,s){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance);}const a=\"Polygon\"===eh[e.type];let o=t.length;for(;o>=2&&t[o-1].equals(t[o-2]);)o--;let l=0;for(;l<o-1&&t[l].equals(t[l+1]);)l++;if(o<(a?3:2))return;\"bevel\"===r&&(i=1.05);const u=this.overscaling<=16?122880/(512*this.overscaling):0,c=this.segments.prepareSegment(10*o,this.layoutVertexArray,this.indexArray);let h,p,f,d,y;this.e1=this.e2=-1,a&&(h=t[o-2],y=t[l].sub(h)._unit()._perp());for(let e=l;e<o;e++){if(f=e===o-1?a?t[l+1]:void 0:t[e+1],f&&t[e].equals(f))continue;y&&(d=y),h&&(p=h),h=t[e],y=f?f.sub(h)._unit()._perp():d,d=d||y;let m=d.add(y);0===m.x&&0===m.y||m._unit();const g=d.x*y.x+d.y*y.y,x=m.x*y.x+m.y*y.y,v=0!==x?1/x:1/0,b=2*Math.sqrt(2-2*x),w=x<rh&&p&&f,_=d.x*y.y-d.y*y.x>0;if(w&&e>l){const t=h.dist(p);if(t>2*u){const e=h.sub(h.sub(p)._mult(u/t)._round());this.updateDistance(p,e),this.addCurrentVertex(e,d,0,0,c),p=e;}}const A=p&&f;let S=A?r:a?\"butt\":n;if(A&&\"round\"===S&&(v<s?S=\"miter\":v<=2&&(S=\"fakeround\")),\"miter\"===S&&v>i&&(S=\"bevel\"),\"bevel\"===S&&(v>2&&(S=\"flipbevel\"),v<i&&(S=\"miter\")),p&&this.updateDistance(p,h),\"miter\"===S)m._mult(v),this.addCurrentVertex(h,m,0,0,c);else if(\"flipbevel\"===S){if(v>100)m=y.mult(-1);else {const t=v*d.add(y).mag()/d.sub(y).mag();m._perp()._mult(t*(_?-1:1));}this.addCurrentVertex(h,m,0,0,c),this.addCurrentVertex(h,m.mult(-1),0,0,c);}else if(\"bevel\"===S||\"fakeround\"===S){const t=-Math.sqrt(v*v-1),e=_?t:0,r=_?0:t;if(p&&this.addCurrentVertex(h,d,e,r,c),\"fakeround\"===S){const t=Math.round(180*b/Math.PI/20);for(let e=1;e<t;e++){let r=e/t;if(.5!==r){const t=r-.5;r+=r*t*(r-1)*((1.0904+g*(g*(3.55645-1.43519*g)-3.2452))*t*t+(.848013+g*(.215638*g-1.06021)));}const n=y.sub(d)._mult(r)._add(d)._unit()._mult(_?-1:1);this.addHalfVertex(h,n.x,n.y,!1,_,0,c);}}f&&this.addCurrentVertex(h,y,-e,-r,c);}else if(\"butt\"===S)this.addCurrentVertex(h,m,0,0,c);else if(\"square\"===S){const t=p?1:-1;p||this.addCurrentVertex(h,m,t,t,c),this.addCurrentVertex(h,m,0,0,c),p&&this.addCurrentVertex(h,m,t,t,c);}else \"round\"===S&&(p&&(this.addCurrentVertex(h,d,0,0,c),this.addCurrentVertex(h,d,1,1,c,!0)),f&&(this.addCurrentVertex(h,y,-1,-1,c,!0),this.addCurrentVertex(h,y,0,0,c)));if(w&&e<o-1){const t=h.dist(f);if(t>2*u){const e=h.add(f.sub(h)._mult(u/t)._round());this.updateDistance(h,e),this.addCurrentVertex(e,y,0,0,c),h=e;}}}}addCurrentVertex(t,e,r,n,i,s=!1){const a=e.y*n-e.x,o=-e.y-e.x*n;this.addHalfVertex(t,e.x+e.y*r,e.y-e.x*r,s,!1,r,i),this.addHalfVertex(t,a,o,s,!0,-n,i);}addHalfVertex({x:t,y:e},r,n,i,s,a,o){this.layoutVertexArray.emplaceBack((t<<1)+(i?1:0),(e<<1)+(s?1:0),Math.round(63*r)+128,Math.round(63*n)+128,1+(0===a?0:a<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const l=o.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),o.primitiveLength++),s?this.e2=l:this.e1=l;}updateScaledDistance(){if(this.lineClips){const t=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=t*this.lineClips.start+this.distance;}else this.lineSoFar=this.distance;}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance();}}Oi(nh,\"LineBucket\",{omit:[\"layers\",\"patternFeatures\"]});const ih=new Js({\"line-cap\":new Hs(Ht.layout_line[\"line-cap\"]),\"line-join\":new Hs(Ht.layout_line[\"line-join\"]),\"line-miter-limit\":new Ys(Ht.layout_line[\"line-miter-limit\"]),\"line-round-limit\":new Ys(Ht.layout_line[\"line-round-limit\"]),\"line-sort-key\":new Hs(Ht.layout_line[\"line-sort-key\"])});var sh={paint:new Js({\"line-opacity\":new Hs(Ht.paint_line[\"line-opacity\"]),\"line-color\":new Hs(Ht.paint_line[\"line-color\"]),\"line-translate\":new Ys(Ht.paint_line[\"line-translate\"]),\"line-translate-anchor\":new Ys(Ht.paint_line[\"line-translate-anchor\"]),\"line-width\":new Hs(Ht.paint_line[\"line-width\"]),\"line-gap-width\":new Hs(Ht.paint_line[\"line-gap-width\"]),\"line-offset\":new Hs(Ht.paint_line[\"line-offset\"]),\"line-blur\":new Hs(Ht.paint_line[\"line-blur\"]),\"line-dasharray\":new Hs(Ht.paint_line[\"line-dasharray\"]),\"line-pattern\":new Hs(Ht.paint_line[\"line-pattern\"]),\"line-gradient\":new Ws(Ht.paint_line[\"line-gradient\"]),\"line-trim-offset\":new Ys(Ht.paint_line[\"line-trim-offset\"])}),layout:ih};const ah=new class extends Hs{possiblyEvaluate(t,e){return e=new Us(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,r,n){return e=z({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,r,n)}}(sh.paint.properties[\"line-width\"].specification);function oh(t,e){return e>0?e+2*t:t}ah.useIntegerZoom=!0;const lh=na([{name:\"a_pos_offset\",components:4,type:\"Int16\"},{name:\"a_tex_size\",components:4,type:\"Uint16\"},{name:\"a_pixeloffset\",components:4,type:\"Int16\"}],4),uh=na([{name:\"a_globe_anchor\",components:3,type:\"Int16\"},{name:\"a_globe_normal\",components:3,type:\"Float32\"}],4),ch=na([{name:\"a_projected_pos\",components:4,type:\"Float32\"}],4);na([{name:\"a_fade_opacity\",components:1,type:\"Uint32\"}],4);const hh=na([{name:\"a_placed\",components:2,type:\"Uint8\"},{name:\"a_shift\",components:2,type:\"Float32\"}]),ph=na([{name:\"a_size_scale\",components:1,type:\"Float32\"},{name:\"a_padding\",components:2,type:\"Float32\"}]);na([{type:\"Int16\",name:\"projectedAnchorX\"},{type:\"Int16\",name:\"projectedAnchorY\"},{type:\"Int16\",name:\"projectedAnchorZ\"},{type:\"Int16\",name:\"tileAnchorX\"},{type:\"Int16\",name:\"tileAnchorY\"},{type:\"Float32\",name:\"x1\"},{type:\"Float32\",name:\"y1\"},{type:\"Float32\",name:\"x2\"},{type:\"Float32\",name:\"y2\"},{type:\"Int16\",name:\"padding\"},{type:\"Uint32\",name:\"featureIndex\"},{type:\"Uint16\",name:\"sourceLayerIndex\"},{type:\"Uint16\",name:\"bucketIndex\"}]);const fh=na([{name:\"a_pos\",components:3,type:\"Int16\"},{name:\"a_anchor_pos\",components:2,type:\"Int16\"},{name:\"a_extrude\",components:2,type:\"Int16\"}],4),dh=na([{name:\"a_pos_2f\",components:2,type:\"Float32\"},{name:\"a_radius\",components:1,type:\"Float32\"},{name:\"a_flags\",components:2,type:\"Int16\"}],4);na([{name:\"triangle\",components:3,type:\"Uint16\"}]),na([{type:\"Int16\",name:\"projectedAnchorX\"},{type:\"Int16\",name:\"projectedAnchorY\"},{type:\"Int16\",name:\"projectedAnchorZ\"},{type:\"Float32\",name:\"tileAnchorX\"},{type:\"Float32\",name:\"tileAnchorY\"},{type:\"Uint16\",name:\"glyphStartIndex\"},{type:\"Uint16\",name:\"numGlyphs\"},{type:\"Uint32\",name:\"vertexStartIndex\"},{type:\"Uint32\",name:\"lineStartIndex\"},{type:\"Uint32\",name:\"lineLength\"},{type:\"Uint16\",name:\"segment\"},{type:\"Uint16\",name:\"lowerSize\"},{type:\"Uint16\",name:\"upperSize\"},{type:\"Float32\",name:\"lineOffsetX\"},{type:\"Float32\",name:\"lineOffsetY\"},{type:\"Uint8\",name:\"writingMode\"},{type:\"Uint8\",name:\"placedOrientation\"},{type:\"Uint8\",name:\"hidden\"},{type:\"Uint32\",name:\"crossTileID\"},{type:\"Int16\",name:\"associatedIconIndex\"},{type:\"Uint8\",name:\"flipState\"}]),na([{type:\"Int16\",name:\"projectedAnchorX\"},{type:\"Int16\",name:\"projectedAnchorY\"},{type:\"Int16\",name:\"projectedAnchorZ\"},{type:\"Float32\",name:\"tileAnchorX\"},{type:\"Float32\",name:\"tileAnchorY\"},{type:\"Int16\",name:\"rightJustifiedTextSymbolIndex\"},{type:\"Int16\",name:\"centerJustifiedTextSymbolIndex\"},{type:\"Int16\",name:\"leftJustifiedTextSymbolIndex\"},{type:\"Int16\",name:\"verticalPlacedTextSymbolIndex\"},{type:\"Int16\",name:\"placedIconSymbolIndex\"},{type:\"Int16\",name:\"verticalPlacedIconSymbolIndex\"},{type:\"Uint16\",name:\"key\"},{type:\"Uint16\",name:\"textBoxStartIndex\"},{type:\"Uint16\",name:\"textBoxEndIndex\"},{type:\"Uint16\",name:\"verticalTextBoxStartIndex\"},{type:\"Uint16\",name:\"verticalTextBoxEndIndex\"},{type:\"Uint16\",name:\"iconBoxStartIndex\"},{type:\"Uint16\",name:\"iconBoxEndIndex\"},{type:\"Uint16\",name:\"verticalIconBoxStartIndex\"},{type:\"Uint16\",name:\"verticalIconBoxEndIndex\"},{type:\"Uint16\",name:\"featureIndex\"},{type:\"Uint16\",name:\"numHorizontalGlyphVertices\"},{type:\"Uint16\",name:\"numVerticalGlyphVertices\"},{type:\"Uint16\",name:\"numIconVertices\"},{type:\"Uint16\",name:\"numVerticalIconVertices\"},{type:\"Uint16\",name:\"useRuntimeCollisionCircles\"},{type:\"Uint32\",name:\"crossTileID\"},{type:\"Float32\",components:2,name:\"textOffset\"},{type:\"Float32\",name:\"collisionCircleDiameter\"}]),na([{type:\"Float32\",name:\"offsetX\"}]),na([{type:\"Int16\",name:\"x\"},{type:\"Int16\",name:\"y\"}]);var yh=24;const mh=128;function gh(t,e){const{expression:r}=e;if(\"constant\"===r.kind)return {kind:\"constant\",layoutSize:r.evaluate(new Us(t+1))};if(\"source\"===r.kind)return {kind:\"source\"};{const{zoomStops:e,interpolationType:n}=r;let i=0;for(;i<e.length&&e[i]<=t;)i++;i=Math.max(0,i-1);let s=i;for(;s<e.length&&e[s]<t+1;)s++;s=Math.min(e.length-1,s);const a=e[i],o=e[s];return \"composite\"===r.kind?{kind:\"composite\",minZoom:a,maxZoom:o,interpolationType:n}:{kind:\"camera\",minZoom:a,maxZoom:o,minSize:r.evaluate(new Us(a)),maxSize:r.evaluate(new Us(o)),interpolationType:n}}}function xh(t,{uSize:e,uSizeT:r},{lowerSize:n,upperSize:i}){return \"source\"===t.kind?n/mh:\"composite\"===t.kind?Mr(n/mh,i/mh,r):e}function vh(t,e){let r=0,n=0;if(\"constant\"===t.kind)n=t.layoutSize;else if(\"source\"!==t.kind){const{interpolationType:i,minZoom:s,maxZoom:a}=t,o=i?S(Kr.interpolationFactor(i,e,s,a),0,1):0;\"camera\"===t.kind?n=Mr(t.minSize,t.maxSize,o):r=o;}return {uSizeT:r,uSize:n}}var bh=Object.freeze({__proto__:null,getSizeData:gh,evaluateSizeForFeature:xh,evaluateSizeForZoom:vh,SIZE_PACK_FACTOR:mh});function wh(t,e,r){return t.sections.forEach((t=>{t.text=function(t,e,r){const n=e.layout.get(\"text-transform\").evaluate(r,{});return \"uppercase\"===n?t=t.toLocaleUpperCase():\"lowercase\"===n&&(t=t.toLocaleLowerCase()),js.applyArabicShaping&&(t=js.applyArabicShaping(t)),t}(t.text,e,r);})),t}const _h={\"!\":\"︕\",\"#\":\"＃\",$:\"＄\",\"%\":\"％\",\"&\":\"＆\",\"(\":\"︵\",\")\":\"︶\",\"*\":\"＊\",\"+\":\"＋\",\",\":\"︐\",\"-\":\"︲\",\".\":\"・\",\"/\":\"／\",\":\":\"︓\",\";\":\"︔\",\"<\":\"︿\",\"=\":\"＝\",\">\":\"﹀\",\"?\":\"︖\",\"@\":\"＠\",\"[\":\"﹇\",\"\\\\\":\"＼\",\"]\":\"﹈\",\"^\":\"＾\",_:\"︳\",\"`\":\"｀\",\"{\":\"︷\",\"|\":\"―\",\"}\":\"︸\",\"~\":\"～\",\"¢\":\"￠\",\"£\":\"￡\",\"¥\":\"￥\",\"¦\":\"￤\",\"¬\":\"￢\",\"¯\":\"￣\",\"–\":\"︲\",\"—\":\"︱\",\"‘\":\"﹃\",\"’\":\"﹄\",\"“\":\"﹁\",\"”\":\"﹂\",\"…\":\"︙\",\"‧\":\"・\",\"₩\":\"￦\",\"、\":\"︑\",\"。\":\"︒\",\"〈\":\"︿\",\"〉\":\"﹀\",\"《\":\"︽\",\"》\":\"︾\",\"「\":\"﹁\",\"」\":\"﹂\",\"『\":\"﹃\",\"』\":\"﹄\",\"【\":\"︻\",\"】\":\"︼\",\"〔\":\"︹\",\"〕\":\"︺\",\"〖\":\"︗\",\"〗\":\"︘\",\"！\":\"︕\",\"（\":\"︵\",\"）\":\"︶\",\"，\":\"︐\",\"－\":\"︲\",\"．\":\"・\",\"：\":\"︓\",\"；\":\"︔\",\"＜\":\"︿\",\"＞\":\"﹀\",\"？\":\"︖\",\"［\":\"﹇\",\"］\":\"﹈\",\"＿\":\"︳\",\"｛\":\"︷\",\"｜\":\"―\",\"｝\":\"︸\",\"｟\":\"︵\",\"｠\":\"︶\",\"｡\":\"︒\",\"｢\":\"﹁\",\"｣\":\"﹂\"};function Ah(t){return \"︶\"===t||\"﹈\"===t||\"︸\"===t||\"﹄\"===t||\"﹂\"===t||\"︾\"===t||\"︼\"===t||\"︺\"===t||\"︘\"===t||\"﹀\"===t||\"︐\"===t||\"︓\"===t||\"︔\"===t||\"｀\"===t||\"￣\"===t||\"︑\"===t||\"︒\"===t}function Sh(t){return \"︵\"===t||\"﹇\"===t||\"︷\"===t||\"﹃\"===t||\"﹁\"===t||\"︽\"===t||\"︻\"===t||\"︹\"===t||\"︗\"===t||\"︿\"===t}var kh=Th,Ih=function(t,e,r,n,i){var s,a,o=8*i-n-1,l=(1<<o)-1,u=l>>1,c=-7,h=r?i-1:0,p=r?-1:1,f=t[e+h];for(h+=p,s=f&(1<<-c)-1,f>>=-c,c+=o;c>0;s=256*s+t[e+h],h+=p,c-=8);for(a=s&(1<<-c)-1,s>>=-c,c+=n;c>0;a=256*a+t[e+h],h+=p,c-=8);if(0===s)s=1-u;else {if(s===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),s-=u;}return (f?-1:1)*a*Math.pow(2,s-n)},Mh=function(t,e,r,n,i,s){var a,o,l,u=8*s-i-1,c=(1<<u)-1,h=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:s-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?p/l:p*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=c?(o=0,a=c):a+h>=1?(o=(e*l-1)*Math.pow(2,i),a+=h):(o=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[r+f]=255&o,f+=d,o/=256,i-=8);for(a=a<<i|o,u+=i;u>0;t[r+f]=255&a,f+=d,a/=256,u-=8);t[r+f-d]|=128*y;};\n/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Th(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length;}Th.Varint=0,Th.Fixed64=1,Th.Bytes=2,Th.Fixed32=5;var zh=4294967296,Bh=1/zh,Eh=\"undefined\"==typeof TextDecoder?null:new TextDecoder(\"utf8\");function Ch(t){return t.type===Th.Bytes?t.readVarint()+t.pos:t.pos+1}function Ph(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Dh(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i];}function Vh(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r]);}function Lh(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r]);}function Fh(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r]);}function Rh(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r]);}function jh(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r]);}function Uh(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r]);}function $h(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r]);}function Oh(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r]);}function qh(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r]);}function Nh(t,e){return (t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Gh(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24;}function Xh(t,e){return (t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function Zh(t,e,r){e.glyphs=[],1===t&&r.readMessage(Kh,e);}function Kh(t,e,r){if(3===t){const{id:t,bitmap:n,width:i,height:s,left:a,top:o,advance:l}=r.readMessage(Yh,{});e.glyphs.push({id:t,bitmap:new mu({width:i+6,height:s+6},n),metrics:{width:i,height:s,left:a,top:o,advance:l}});}else 4===t?e.ascender=r.readSVarint():5===t&&(e.descender=r.readSVarint());}function Yh(t,e,r){1===t?e.id=r.readVarint():2===t?e.bitmap=r.readBytes():3===t?e.width=r.readVarint():4===t?e.height=r.readVarint():5===t?e.left=r.readSVarint():6===t?e.top=r.readSVarint():7===t&&(e.advance=r.readVarint());}function Hh(t){let e=0,r=0;for(const n of t)e+=n.w*n.h,r=Math.max(r,n.w);t.sort(((t,e)=>e.h-t.h));const n=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}];let i=0,s=0;for(const e of t)for(let t=n.length-1;t>=0;t--){const r=n[t];if(!(e.w>r.w||e.h>r.h)){if(e.x=r.x,e.y=r.y,s=Math.max(s,e.y+e.h),i=Math.max(i,e.x+e.w),e.w===r.w&&e.h===r.h){const e=n.pop();t<n.length&&(n[t]=e);}else e.h===r.h?(r.x+=e.w,r.w-=e.w):e.w===r.w?(r.y+=e.h,r.h-=e.h):(n.push({x:r.x+e.w,y:r.y,w:r.w-e.w,h:e.h}),r.y+=e.h,r.h-=e.h);break}}return {w:i,h:s,fill:e/(i*s)||0}}Th.prototype={destroy:function(){this.buf=null;},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,s=this.pos;this.type=7&n,t(i,e,this),this.pos===s&&this.skip(n);}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Nh(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Xh(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Nh(this.buf,this.pos)+Nh(this.buf,this.pos+4)*zh;return this.pos+=8,t},readSFixed64:function(){var t=Nh(this.buf,this.pos)+Xh(this.buf,this.pos+4)*zh;return this.pos+=8,t},readFloat:function(){var t=Ih(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Ih(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return e=127&(r=n[this.pos++]),r<128?e:(e|=(127&(r=n[this.pos++]))<<7,r<128?e:(e|=(127&(r=n[this.pos++]))<<14,r<128?e:(e|=(127&(r=n[this.pos++]))<<21,r<128?e:function(t,e,r){var n,i,s=r.buf;if(n=(112&(i=s[r.pos++]))>>4,i<128)return Ph(t,n,e);if(n|=(127&(i=s[r.pos++]))<<3,i<128)return Ph(t,n,e);if(n|=(127&(i=s[r.pos++]))<<10,i<128)return Ph(t,n,e);if(n|=(127&(i=s[r.pos++]))<<17,i<128)return Ph(t,n,e);if(n|=(127&(i=s[r.pos++]))<<24,i<128)return Ph(t,n,e);if(n|=(1&(i=s[r.pos++]))<<31,i<128)return Ph(t,n,e);throw new Error(\"Expected varint not more than 10 bytes\")}(e|=(15&(r=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Eh?function(t,e,r){return Eh.decode(t.subarray(e,r))}(this.buf,e,t):function(t,e,r){for(var n=\"\",i=e;i<r;){var s,a,o,l=t[i],u=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c>r)break;1===c?l<128&&(u=l):2===c?128==(192&(s=t[i+1]))&&(u=(31&l)<<6|63&s)<=127&&(u=null):3===c?(a=t[i+2],128==(192&(s=t[i+1]))&&128==(192&a)&&((u=(15&l)<<12|(63&s)<<6|63&a)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(a=t[i+2],o=t[i+3],128==(192&(s=t[i+1]))&&128==(192&a)&&128==(192&o)&&((u=(15&l)<<18|(63&s)<<12|(63&a)<<6|63&o)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,n+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),n+=String.fromCharCode(u),i+=c;}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Th.Bytes)return t.push(this.readVarint(e));var r=Ch(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Th.Bytes)return t.push(this.readSVarint());var e=Ch(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Th.Bytes)return t.push(this.readBoolean());var e=Ch(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Th.Bytes)return t.push(this.readFloat());var e=Ch(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Th.Bytes)return t.push(this.readDouble());var e=Ch(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Th.Bytes)return t.push(this.readFixed32());var e=Ch(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Th.Bytes)return t.push(this.readSFixed32());var e=Ch(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Th.Bytes)return t.push(this.readFixed64());var e=Ch(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Th.Bytes)return t.push(this.readSFixed64());var e=Ch(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Th.Varint)for(;this.buf[this.pos++]>127;);else if(e===Th.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Th.Fixed32)this.pos+=4;else {if(e!==Th.Fixed64)throw new Error(\"Unimplemented type: \"+e);this.pos+=8;}},writeTag:function(t,e){this.writeVarint(t<<3|e);},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e;}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Gh(this.buf,t,this.pos),this.pos+=4;},writeSFixed32:function(t){this.realloc(4),Gh(this.buf,t,this.pos),this.pos+=4;},writeFixed64:function(t){this.realloc(8),Gh(this.buf,-1&t,this.pos),Gh(this.buf,Math.floor(t*Bh),this.pos+4),this.pos+=8;},writeSFixed64:function(t){this.realloc(8),Gh(this.buf,-1&t,this.pos),Gh(this.buf,Math.floor(t*Bh),this.pos+4),this.pos+=8;},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,n;if(t>=0?(r=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error(\"Given varint doesn't fit into 10 bytes\");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,r.buf[r.pos]=127&(t>>>=7);}(r,0,e),function(t,e){var r=(7&t)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))));}(n,e);}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))));},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t);},writeBoolean:function(t){this.writeVarint(Boolean(t));},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var n,i,s=0;s<e.length;s++){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){n>56319||s+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null;}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128);}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&Dh(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r;},writeFloat:function(t){this.realloc(4),Mh(this.buf,t,this.pos,!0,23,4),this.pos+=4;},writeDouble:function(t){this.realloc(8),Mh(this.buf,t,this.pos,!0,52,8),this.pos+=8;},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r];},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&Dh(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n;},writeMessage:function(t,e,r){this.writeTag(t,Th.Bytes),this.writeRawMessage(e,r);},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Vh,e);},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Lh,e);},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,jh,e);},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,Fh,e);},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Rh,e);},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Uh,e);},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,$h,e);},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Oh,e);},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,qh,e);},writeBytesField:function(t,e){this.writeTag(t,Th.Bytes),this.writeBytes(e);},writeFixed32Field:function(t,e){this.writeTag(t,Th.Fixed32),this.writeFixed32(e);},writeSFixed32Field:function(t,e){this.writeTag(t,Th.Fixed32),this.writeSFixed32(e);},writeFixed64Field:function(t,e){this.writeTag(t,Th.Fixed64),this.writeFixed64(e);},writeSFixed64Field:function(t,e){this.writeTag(t,Th.Fixed64),this.writeSFixed64(e);},writeVarintField:function(t,e){this.writeTag(t,Th.Varint),this.writeVarint(e);},writeSVarintField:function(t,e){this.writeTag(t,Th.Varint),this.writeSVarint(e);},writeStringField:function(t,e){this.writeTag(t,Th.Bytes),this.writeString(e);},writeFloatField:function(t,e){this.writeTag(t,Th.Fixed32),this.writeFloat(e);},writeDoubleField:function(t,e){this.writeTag(t,Th.Fixed64),this.writeDouble(e);},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e));}};class Wh{constructor(t,{pixelRatio:e,version:r,stretchX:n,stretchY:i,content:s}){this.paddedRect=t,this.pixelRatio=e,this.stretchX=n,this.stretchY=i,this.content=s,this.version=r;}get tl(){return [this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return [this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return [(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Jh{constructor(t,e){const r={},n={};this.haveRenderCallbacks=[];const i=[];this.addImages(t,r,i),this.addImages(e,n,i);const{w:s,h:a}=Hh(i),o=new gu({width:s||1,height:a||1});for(const e in t){const n=t[e],i=r[e].paddedRect;gu.copy(n.data,o,{x:0,y:0},{x:i.x+1,y:i.y+1},n.data);}for(const t in e){const r=e[t],i=n[t].paddedRect,s=i.x+1,a=i.y+1,l=r.data.width,u=r.data.height;gu.copy(r.data,o,{x:0,y:0},{x:s,y:a},r.data),gu.copy(r.data,o,{x:0,y:u-1},{x:s,y:a-1},{width:l,height:1}),gu.copy(r.data,o,{x:0,y:0},{x:s,y:a+u},{width:l,height:1}),gu.copy(r.data,o,{x:l-1,y:0},{x:s-1,y:a},{width:1,height:u}),gu.copy(r.data,o,{x:0,y:0},{x:s+l,y:a},{width:1,height:u});}this.image=o,this.iconPositions=r,this.patternPositions=n;}addImages(t,e,r){for(const n in t){const i=t[n],s={x:0,y:0,w:i.data.width+2,h:i.data.height+2};r.push(s),e[n]=new Wh(s,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(n);}}patchUpdatedImages(t,e){this.haveRenderCallbacks=this.haveRenderCallbacks.filter((e=>t.hasImage(e))),t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const r in t.updatedImages)this.patchUpdatedImage(this.iconPositions[r],t.getImage(r),e),this.patchUpdatedImage(this.patternPositions[r],t.getImage(r),e);}patchUpdatedImage(t,e,r){if(!t||!e)return;if(t.version===e.version)return;t.version=e.version;const[n,i]=t.tl;r.update(e.data,void 0,{x:n,y:i});}}Oi(Wh,\"ImagePosition\"),Oi(Jh,\"ImageAtlas\");const Qh={horizontal:1,vertical:2,horizontalOnly:3};class tp{constructor(){this.scale=1,this.fontStack=\"\",this.imageName=null;}static forText(t,e){const r=new tp;return r.scale=t||1,r.fontStack=e,r}static forImage(t){const e=new tp;return e.imageName=t,e}}class ep{constructor(){this.text=\"\",this.sectionIndex=[],this.sections=[],this.imageSectionID=null;}static fromFeature(t,e){const r=new ep;for(let n=0;n<t.sections.length;n++){const i=t.sections[n];i.image?r.addImageSection(i):r.addTextSection(i,e);}return r}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSections(){return this.sections}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(t){this.text=function(t,e){let r=\"\";for(let n=0;n<t.length;n++){const i=t.charCodeAt(n+1)||null,s=t.charCodeAt(n-1)||null;r+=!e&&(i&&Ss(i)&&!_h[t[n+1]]||s&&Ss(s)&&!_h[t[n-1]])||!_h[t[n]]?t[n]:_h[t[n]];}return r}(this.text,t);}trim(){let t=0;for(let e=0;e<this.text.length&&np[this.text.charCodeAt(e)];e++)t++;let e=this.text.length;for(let r=this.text.length-1;r>=0&&r>=t&&np[this.text.charCodeAt(r)];r--)e--;this.text=this.text.substring(t,e),this.sectionIndex=this.sectionIndex.slice(t,e);}substring(t,e){const r=new ep;return r.text=this.text.substring(t,e),r.sectionIndex=this.sectionIndex.slice(t,e),r.sections=this.sections,r}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,e)=>Math.max(t,this.sections[e].scale)),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(tp.forText(t.scale,t.fontStack||e));const r=this.sections.length-1;for(let e=0;e<t.text.length;++e)this.sectionIndex.push(r);}addImageSection(t){const e=t.image?t.image.name:\"\";if(0===e.length)return void $(\"Can't add FormattedSection with an empty image.\");const r=this.getNextImageSectionCharCode();r?(this.text+=String.fromCharCode(r),this.sections.push(tp.forImage(e)),this.sectionIndex.push(this.sections.length-1)):$(\"Reached maximum number of images 6401\");}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function rp(t,e,r,n,i,s,a,o,l,u,c,h,p,f,d){const y=ep.fromFeature(t,i);h===Qh.vertical&&y.verticalizePunctuation(p);let m=[];const g=function(t,e,r,n,i,s){if(!t)return [];const a=[],o=function(t,e,r,n,i,s){let a=0;for(let r=0;r<t.length();r++){const o=t.getSection(r);a+=sp(t.getCharCode(r),o,n,i,e,s);}return a/Math.max(1,Math.ceil(a/r))}(t,e,r,n,i,s),l=t.text.indexOf(\"​\")>=0;let u=0;for(let r=0;r<t.length();r++){const h=t.getSection(r),p=t.getCharCode(r);if(np[p]||(u+=sp(p,h,n,i,e,s)),r<t.length()-1){const e=!((c=p)<11904||!(ns(c)||rs(c)||ms(c)||fs(c)||os(c)||Hi(c)||is(c)||Qi(c)||ls(c)||us(c)||as(c)||vs(c)||ts(c)||Ji(c)||Wi(c)||ss(c)||es(c)||ys(c)||hs(c)||cs(c)));(ip[p]||e||h.imageName)&&a.push(lp(r+1,u,o,a,op(p,t.getCharCode(r+1),e&&l),!1));}}var c;return up(lp(t.length(),u,o,a,0,!0))}(y,u,s,e,n,f),{processBidirectionalText:x,processStyledBidirectionalText:v}=js;if(x&&1===y.sections.length){const t=x(y.toString(),g);for(const e of t){const t=new ep;t.text=e,t.sections=y.sections;for(let r=0;r<e.length;r++)t.sectionIndex.push(0);m.push(t);}}else if(v){const t=v(y.text,y.sectionIndex,g);for(const e of t){const t=new ep;t.text=e[0],t.sectionIndex=e[1],t.sections=y.sections,m.push(t);}}else m=function(t,e){const r=[],n=t.text;let i=0;for(const n of e)r.push(t.substring(i,n)),i=n;return i<n.length&&r.push(t.substring(i,n.length)),r}(y,g);const b=[],w={positionedLines:b,text:y.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:h,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(t,e,r,n,i,s,a,o,l,u,c,h){let p=0,f=0,d=0;const y=\"right\"===o?1:\"left\"===o?0:.5;let m=!1;for(const t of i){const r=t.getSections();for(const t of r){if(t.imageName)continue;const r=e[t.fontStack];if(r&&(m=void 0!==r.ascender&&void 0!==r.descender,!m))break}if(!m)break}let g=0;for(const a of i){a.trim();const i=a.getMaxScale(),o=(i-1)*yh,v={positionedGlyphs:[],lineOffset:0};t.positionedLines[g]=v;const b=v.positionedGlyphs;let w=0;if(!a.length()){f+=s,++g;continue}let _=0,A=0;for(let s=0;s<a.length();s++){const o=a.getSection(s),d=a.getSectionIndex(s),y=a.getCharCode(s);let g=o.scale,v=null,S=null,k=null,I=yh,M=0;const T=!(l===Qh.horizontal||!c&&!As(y)||c&&(np[y]||(x=y,Zi(x)||Ki(x)||Yi(x)||ds(x)||xs(x))));if(o.imageName){const e=n[o.imageName];if(!e)continue;k=o.imageName,t.iconsInText=t.iconsInText||!0,S=e.paddedRect;const r=e.displaySize;g=g*yh/h,v={width:r[0],height:r[1],left:1,top:-3,advance:T?r[1]:r[0],localGlyph:!1},M=m?-v.height*g:i*yh-17-r[1]*g,I=v.advance;const s=(T?r[0]:r[1])*g-yh*i;s>0&&s>w&&(w=s);}else {const t=r[o.fontStack];if(!t)continue;t[y]&&(S=t[y]);const n=e[o.fontStack];if(!n)continue;const s=n.glyphs[y];if(!s)continue;if(v=s.metrics,I=8203!==y?yh:0,m){const t=void 0!==n.ascender?Math.abs(n.ascender):0,e=void 0!==n.descender?Math.abs(n.descender):0,r=(t+e)*g;_<r&&(_=r,A=(t-e)/2*g),M=-t*g;}else M=(i-g)*yh-17;}T?(t.verticalizable=!0,b.push({glyph:y,imageName:k,x:p,y:f+M,vertical:T,scale:g,localGlyph:v.localGlyph,fontStack:o.fontStack,sectionIndex:d,metrics:v,rect:S}),p+=I*g+u):(b.push({glyph:y,imageName:k,x:p,y:f+M,vertical:T,scale:g,localGlyph:v.localGlyph,fontStack:o.fontStack,sectionIndex:d,metrics:v,rect:S}),p+=v.advance*g+u);}0!==b.length&&(d=Math.max(p-u,d),m?hp(b,y,w,A,s*i/2):hp(b,y,w,0,s/2)),p=0;const S=s*i+w;v.lineOffset=Math.max(w,o),f+=S,++g;}var x;const v=f,{horizontalAlign:b,verticalAlign:w}=cp(a);((function(t,e,r,n,i,s){const a=(e-r)*i,o=-s*n;for(const e of t)for(const t of e.positionedGlyphs)t.x+=a,t.y+=o;}))(t.positionedLines,y,b,w,d,v),t.top+=-w*v,t.bottom=t.top+v,t.left+=-b*d,t.right=t.left+d,t.hasBaseline=m;}(w,e,r,n,m,a,o,l,h,u,p,d),!function(t){for(const e of t)if(0!==e.positionedGlyphs.length)return !1;return !0}(b)&&w}const np={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ip={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function sp(t,e,r,n,i,s){if(e.imageName){const t=n[e.imageName];return t?t.displaySize[0]*e.scale*yh/s+i:0}{const n=r[e.fontStack],s=n&&n.glyphs[t];return s?s.metrics.advance*e.scale+i:0}}function ap(t,e,r,n){const i=Math.pow(t-e,2);return n?t<e?i/2:2*i:i+Math.abs(r)*r}function op(t,e,r){let n=0;return 10===t&&(n-=1e4),r&&(n+=150),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function lp(t,e,r,n,i,s){let a=null,o=ap(e,r,i,s);for(const t of n){const n=ap(e-t.x,r,i,s)+t.badness;n<=o&&(a=t,o=n);}return {index:t,x:e,priorBreak:a,badness:o}}function up(t){return t?up(t.priorBreak).concat(t.index):[]}function cp(t){let e=.5,r=.5;switch(t){case\"right\":case\"top-right\":case\"bottom-right\":e=1;break;case\"left\":case\"top-left\":case\"bottom-left\":e=0;}switch(t){case\"bottom\":case\"bottom-right\":case\"bottom-left\":r=1;break;case\"top\":case\"top-right\":case\"top-left\":r=0;}return {horizontalAlign:e,verticalAlign:r}}function hp(t,e,r,n,i){if(!(e||r||n||i))return;const s=t.length-1,a=t[s],o=(a.x+a.metrics.advance*a.scale)*e;for(let e=0;e<=s;e++)t[e].x-=o,t[e].y+=r+n+i;}function pp(t,e,r){const{horizontalAlign:n,verticalAlign:i}=cp(r),s=e[0]-t.displaySize[0]*n,a=e[1]-t.displaySize[1]*i;return {image:t,top:a,bottom:a+t.displaySize[1],left:s,right:s+t.displaySize[0]}}function fp(t,e,r,n,i,s){const a=t.image;let o;if(a.content){const t=a.content,e=a.pixelRatio||1;o=[t[0]/e,t[1]/e,a.displaySize[0]-t[2]/e,a.displaySize[1]-t[3]/e];}const l=e.left*s,u=e.right*s;let c,h,p,f;\"width\"===r||\"both\"===r?(f=i[0]+l-n[3],h=i[0]+u+n[1]):(f=i[0]+(l+u-a.displaySize[0])/2,h=f+a.displaySize[0]);const d=e.top*s,y=e.bottom*s;return \"height\"===r||\"both\"===r?(c=i[1]+d-n[0],p=i[1]+y+n[2]):(c=i[1]+(d+y-a.displaySize[1])/2,p=c+a.displaySize[1]),{image:a,top:c,right:h,bottom:p,left:f,collisionPadding:o}}class dp extends d{constructor(t,e,r,n,i){super(t,e),this.angle=n,this.z=r,void 0!==i&&(this.segment=i);}clone(){return new dp(this.x,this.y,this.z,this.angle,this.segment)}}function yp(t,e,r,n,i){if(void 0===e.segment)return !0;let s=e,a=e.segment+1,o=0;for(;o>-r/2;){if(a--,a<0)return !1;o-=t[a].dist(s),s=t[a];}o+=t[a].dist(t[a+1]),a++;const l=[];let u=0;for(;o<r/2;){const e=t[a],r=t[a+1];if(!r)return !1;let s=t[a-1].angleTo(e)-e.angleTo(r);for(s=Math.abs((s+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:o,angleDelta:s}),u+=s;o-l[0].distance>n;)u-=l.shift().angleDelta;if(u>i)return !1;a++,o+=e.dist(r);}return !0}function mp(t){let e=0;for(let r=0;r<t.length-1;r++)e+=t[r].dist(t[r+1]);return e}function gp(t,e,r){return t?.6*e*r:0}function xp(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function vp(t,e,r,n,i,s){const a=gp(r,i,s),o=xp(r,n)*s;let l=0;const u=mp(t)/2;for(let r=0;r<t.length-1;r++){const n=t[r],i=t[r+1],s=n.dist(i);if(l+s>u){const c=(u-l)/s,h=Mr(n.x,i.x,c),p=Mr(n.y,i.y,c),f=new dp(h,p,0,i.angleTo(n),r);return !a||yp(t,f,o,a,e)?f:void 0}l+=s;}}function bp(t,e,r,n,i,s,a,o,l){const u=gp(n,s,a),c=xp(n,i),h=c*a,p=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-h<e/4&&(e=h+e/4),wp(t,p?e/2*o%e:(c/2+2*s)*a*o%e,e,u,r,h,p,!1,l)}function wp(t,e,r,n,i,s,a,o,l){const u=s/2,c=mp(t);let h=0,p=e-r,f=[];for(let e=0;e<t.length-1;e++){const a=t[e],o=t[e+1],d=a.dist(o),y=o.angleTo(a);for(;p+r<h+d;){p+=r;const m=(p-h)/d,g=Mr(a.x,o.x,m),x=Mr(a.y,o.y,m);if(g>=0&&g<l&&x>=0&&x<l&&p-u>=0&&p+u<=c){const r=new dp(g,x,0,y,e);r._round(),n&&!yp(t,r,s,n,i)||f.push(r);}}h+=d;}return o||f.length||a||(f=wp(t,h/2,r,n,i,s,a,!0,l)),f}function _p(t,e,r,n,i){const s=[];for(let a=0;a<t.length;a++){const o=t[a];let l;for(let t=0;t<o.length-1;t++){let a=o[t],u=o[t+1];a.x<e&&u.x<e||(a.x<e?a=new d(e,a.y+(e-a.x)/(u.x-a.x)*(u.y-a.y))._round():u.x<e&&(u=new d(e,a.y+(e-a.x)/(u.x-a.x)*(u.y-a.y))._round()),a.y<r&&u.y<r||(a.y<r?a=new d(a.x+(r-a.y)/(u.y-a.y)*(u.x-a.x),r)._round():u.y<r&&(u=new d(a.x+(r-a.y)/(u.y-a.y)*(u.x-a.x),r)._round()),a.x>=n&&u.x>=n||(a.x>=n?a=new d(n,a.y+(n-a.x)/(u.x-a.x)*(u.y-a.y))._round():u.x>=n&&(u=new d(n,a.y+(n-a.x)/(u.x-a.x)*(u.y-a.y))._round()),a.y>=i&&u.y>=i||(a.y>=i?a=new d(a.x+(i-a.y)/(u.y-a.y)*(u.x-a.x),i)._round():u.y>=i&&(u=new d(a.x+(i-a.y)/(u.y-a.y)*(u.x-a.x),i)._round()),l&&a.equals(l[l.length-1])||(l=[a],s.push(l)),l.push(u)))));}}return s}Oi(dp,\"Anchor\");const Ap=1e20;function Sp(t,e,r,n,i,s,a,o,l){for(let u=e;u<e+n;u++)kp(t,r*s+u,s,i,a,o,l);for(let u=r;u<r+i;u++)kp(t,u*s+e,1,n,a,o,l);}function kp(t,e,r,n,i,s,a){s[0]=0,a[0]=-Ap,a[1]=Ap,i[0]=t[e];for(let o=1,l=0,u=0;o<n;o++){i[o]=t[e+o*r];const n=o*o;do{const t=s[l];u=(i[o]-i[t]+n-t*t)/(o-t)/2;}while(u<=a[l]&&--l>-1);l++,s[l]=o,a[l]=u,a[l+1]=Ap;}for(let o=0,l=0;o<n;o++){for(;a[l+1]<o;)l++;const n=s[l],u=o-n;t[e+o*r]=i[n]+u*u;}}const Ip={none:0,ideographs:1,all:2};class Mp{constructor(t,e,r){this.requestManager=t,this.localGlyphMode=e,this.localFontFamily=r,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}};}setURL(t){this.url=t;}getGlyphs(t,e){const r=[];for(const e in t)for(const n of t[e])r.push({stack:e,id:n});M(r,(({stack:t,id:e},r)=>{let n=this.entries[t];n||(n=this.entries[t]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let i=n.glyphs[e];if(void 0!==i)return void r(null,{stack:t,id:e,glyph:i});if(i=this._tinySDF(n,t,e),i)return n.glyphs[e]=i,void r(null,{stack:t,id:e,glyph:i});const s=Math.floor(e/256);if(256*s>65535)return void r(new Error(\"glyphs > 65535 not supported\"));if(n.ranges[s])return void r(null,{stack:t,id:e,glyph:i});let a=n.requests[s];a||(a=n.requests[s]=[],Mp.loadGlyphRange(t,s,this.url,this.requestManager,((t,e)=>{if(e){n.ascender=e.ascender,n.descender=e.descender;for(const t in e.glyphs)this._doesCharSupportLocalGlyph(+t)||(n.glyphs[+t]=e.glyphs[+t]);n.ranges[s]=!0;}for(const r of a)r(t,e);delete n.requests[s];}))),a.push(((n,i)=>{n?r(n):i&&r(null,{stack:t,id:e,glyph:i.glyphs[e]||null});}));}),((t,r)=>{if(t)e(t);else if(r){const t={};for(const{stack:e,id:n,glyph:i}of r)void 0===t[e]&&(t[e]={}),void 0===t[e].glyphs&&(t[e].glyphs={}),t[e].glyphs[n]=i&&{id:i.id,bitmap:i.bitmap.clone(),metrics:i.metrics},t[e].ascender=this.entries[e].ascender,t[e].descender=this.entries[e].descender;e(null,t);}}));}_doesCharSupportLocalGlyph(t){return this.localGlyphMode!==Ip.none&&(this.localGlyphMode===Ip.all?!!this.localFontFamily:!!this.localFontFamily&&(us(t)||ps(t)||ts(t)||es(t)||Qi(t)))}_tinySDF(t,e,r){const n=this.localFontFamily;if(!n||!this._doesCharSupportLocalGlyph(r))return;let i=t.tinySDF;if(!i){let r=\"400\";/bold/i.test(e)?r=\"900\":/medium/i.test(e)?r=\"500\":/light/i.test(e)&&(r=\"200\"),i=t.tinySDF=new Mp.TinySDF({fontFamily:n,fontWeight:r,fontSize:48,buffer:6,radius:16}),i.fontWeight=r;}if(this.localGlyphs[i.fontWeight][r])return this.localGlyphs[i.fontWeight][r];const s=String.fromCharCode(r),{data:a,width:o,height:l,glyphWidth:u,glyphHeight:c,glyphLeft:h,glyphTop:p,glyphAdvance:f}=i.draw(s);return this.localGlyphs[i.fontWeight][r]={id:r,bitmap:new mu({width:o,height:l},a),metrics:{width:u/2,height:c/2,left:h/2,top:p/2-27,advance:f/2,localGlyph:!0}}}}function Tp(t,e,r,n){const i=[],s=t.image,a=s.pixelRatio,o=s.paddedRect.w-2,l=s.paddedRect.h-2,u=t.right-t.left,c=t.bottom-t.top,h=s.stretchX||[[0,o]],p=s.stretchY||[[0,l]],f=(t,e)=>t+e[1]-e[0],y=h.reduce(f,0),m=p.reduce(f,0),g=o-y,x=l-m;let v=0,b=y,w=0,_=m,A=0,S=g,k=0,I=x;if(s.content&&n){const t=s.content;v=zp(h,0,t[0]),w=zp(p,0,t[1]),b=zp(h,t[0],t[2]),_=zp(p,t[1],t[3]),A=t[0]-v,k=t[1]-w,S=t[2]-t[0]-b,I=t[3]-t[1]-_;}const M=(n,i,o,l)=>{const h=Ep(n.stretch-v,b,u,t.left),p=Cp(n.fixed-A,S,n.stretch,y),f=Ep(i.stretch-w,_,c,t.top),g=Cp(i.fixed-k,I,i.stretch,m),x=Ep(o.stretch-v,b,u,t.left),M=Cp(o.fixed-A,S,o.stretch,y),T=Ep(l.stretch-w,_,c,t.top),z=Cp(l.fixed-k,I,l.stretch,m),B=new d(h,f),E=new d(x,f),C=new d(x,T),P=new d(h,T),D=new d(p/a,g/a),V=new d(M/a,z/a),L=e*Math.PI/180;if(L){const t=Math.sin(L),e=Math.cos(L),r=[e,-t,t,e];B._matMult(r),E._matMult(r),P._matMult(r),C._matMult(r);}const F=n.stretch+n.fixed,R=i.stretch+i.fixed;return {tl:B,tr:E,bl:P,br:C,tex:{x:s.paddedRect.x+1+F,y:s.paddedRect.y+1+R,w:o.stretch+o.fixed-F,h:l.stretch+l.fixed-R},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:D,pixelOffsetBR:V,minFontScaleX:S/a/u,minFontScaleY:I/a/c,isSDF:r}};if(n&&(s.stretchX||s.stretchY)){const t=Bp(h,g,y),e=Bp(p,x,m);for(let r=0;r<t.length-1;r++){const n=t[r],s=t[r+1];for(let t=0;t<e.length-1;t++)i.push(M(n,e[t],s,e[t+1]));}}else i.push(M({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:o+1},{fixed:0,stretch:l+1}));return i}function zp(t,e,r){let n=0;for(const i of t)n+=Math.max(e,Math.min(r,i[1]))-Math.max(e,Math.min(r,i[0]));return n}function Bp(t,e,r){const n=[{fixed:-1,stretch:0}];for(const[e,r]of t){const t=n[n.length-1];n.push({fixed:e-t.stretch,stretch:t.stretch}),n.push({fixed:e-t.stretch,stretch:t.stretch+(r-e)});}return n.push({fixed:e+1,stretch:r}),n}function Ep(t,e,r,n){return t/e*r+n}function Cp(t,e,r,n){return t-e*r/n}function Pp(t,e,r,n){const i=e+t.positionedLines[n].lineOffset;return 0===n?r+i/2:r+(i+(e+t.positionedLines[n-1].lineOffset))/2}Mp.loadGlyphRange=function(t,e,r,n,i){const s=256*e,a=s+255,o=n.transformRequest(n.normalizeGlyphsURL(r).replace(\"{fontstack}\",t).replace(\"{range}\",`${s}-${a}`),st.Glyphs);ut(o,((t,e)=>{if(t)i(t);else if(e){const t={},r=function(t){return new kh(t).readFields(Zh,{})}(e);for(const e of r.glyphs)t[e.id]=e;i(null,{glyphs:t,ascender:r.ascender,descender:r.descender});}}));},Mp.TinySDF=class{constructor({fontSize:t=24,buffer:e=3,radius:r=8,cutoff:n=.25,fontFamily:i=\"sans-serif\",fontWeight:s=\"normal\",fontStyle:a=\"normal\"}={}){this.buffer=e,this.cutoff=n,this.radius=r;const o=this.size=t+4*e,l=this._createCanvas(o),u=this.ctx=l.getContext(\"2d\",{willReadFrequently:!0});u.font=`${a} ${s} ${t}px ${i}`,u.textBaseline=\"alphabetic\",u.textAlign=\"left\",u.fillStyle=\"black\",this.gridOuter=new Float64Array(o*o),this.gridInner=new Float64Array(o*o),this.f=new Float64Array(o),this.z=new Float64Array(o+1),this.v=new Uint16Array(o);}_createCanvas(t){const e=document.createElement(\"canvas\");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:r,actualBoundingBoxDescent:n,actualBoundingBoxLeft:i,actualBoundingBoxRight:s}=this.ctx.measureText(t),a=Math.ceil(r),o=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(s-i))),l=Math.min(this.size-this.buffer,a+Math.ceil(n)),u=o+2*this.buffer,c=l+2*this.buffer,h=Math.max(u*c,0),p=new Uint8ClampedArray(h),f={data:p,width:u,height:c,glyphWidth:o,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:e};if(0===o||0===l)return f;const{ctx:d,buffer:y,gridInner:m,gridOuter:g}=this;d.clearRect(y,y,o,l),d.fillText(t,y,y+a);const x=d.getImageData(y,y,o,l);g.fill(Ap,0,h),m.fill(0,0,h);for(let t=0;t<l;t++)for(let e=0;e<o;e++){const r=x.data[4*(t*o+e)+3]/255;if(0===r)continue;const n=(t+y)*u+e+y;if(1===r)g[n]=0,m[n]=Ap;else {const t=.5-r;g[n]=t>0?t*t:0,m[n]=t<0?t*t:0;}}Sp(g,0,0,u,c,u,this.f,this.v,this.z),Sp(m,y,y,o,l,u,this.f,this.v,this.z);for(let t=0;t<h;t++){const e=Math.sqrt(g[t])-Math.sqrt(m[t]);p[t]=Math.round(255-255*(e/this.radius+this.cutoff));}return f}};class Dp{constructor(t=[],e=Vp){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t);}push(t){this.data.push(t),this.length++,this._up(this.length-1);}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:r}=this,n=e[t];for(;t>0;){const i=t-1>>1,s=e[i];if(r(n,s)>=0)break;e[t]=s,t=i;}e[t]=n;}_down(t){const{data:e,compare:r}=this,n=this.length>>1,i=e[t];for(;t<n;){let n=1+(t<<1),s=e[n];const a=n+1;if(a<this.length&&r(e[a],s)<0&&(n=a,s=e[a]),r(s,i)>=0)break;e[t]=s,t=n;}e[t]=i;}}function Vp(t,e){return t<e?-1:t>e?1:0}function Lp(t,e=1,r=!1){let n=1/0,i=1/0,s=-1/0,a=-1/0;const o=t[0];for(let t=0;t<o.length;t++){const e=o[t];(!t||e.x<n)&&(n=e.x),(!t||e.y<i)&&(i=e.y),(!t||e.x>s)&&(s=e.x),(!t||e.y>a)&&(a=e.y);}const l=Math.min(s-n,a-i);let u=l/2;const c=new Dp([],Fp);if(0===l)return new d(n,i);for(let e=n;e<s;e+=l)for(let r=i;r<a;r+=l)c.push(new Rp(e+u,r+u,u,t));let h=function(t){let e=0,r=0,n=0;const i=t[0];for(let t=0,s=i.length,a=s-1;t<s;a=t++){const s=i[t],o=i[a],l=s.x*o.y-o.x*s.y;r+=(s.x+o.x)*l,n+=(s.y+o.y)*l,e+=3*l;}return new Rp(r/e,n/e,0,t)}(t),p=c.length;for(;c.length;){const n=c.pop();(n.d>h.d||!h.d)&&(h=n,r&&console.log(\"found best %d after %d probes\",Math.round(1e4*n.d)/1e4,p)),n.max-h.d<=e||(u=n.h/2,c.push(new Rp(n.p.x-u,n.p.y-u,u,t)),c.push(new Rp(n.p.x+u,n.p.y-u,u,t)),c.push(new Rp(n.p.x-u,n.p.y+u,u,t)),c.push(new Rp(n.p.x+u,n.p.y+u,u,t)),p+=4);}return r&&(console.log(`num probes: ${p}`),console.log(`best distance: ${h.d}`)),h.p}function Fp(t,e){return e.max-t.max}function Rp(t,e,r,n){this.p=new d(t,e),this.h=r,this.d=function(t,e){let r=!1,n=1/0;for(let i=0;i<e.length;i++){const s=e[i];for(let e=0,i=s.length,a=i-1;e<i;a=e++){const i=s[e],o=s[a];i.y>t.y!=o.y>t.y&&t.x<(o.x-i.x)*(t.y-i.y)/(o.y-i.y)+i.x&&(r=!r),n=Math.min(n,il(t,i,o));}}return (r?1:-1)*Math.sqrt(n)}(this.p,n),this.max=this.d+this.h*Math.SQRT2;}const jp=Number.POSITIVE_INFINITY,Up=Math.sqrt(2);function $p(t,[e,r]){let n=0,i=0;if(r===jp){e<0&&(e=0);const r=e/Up;switch(t){case\"top-right\":case\"top-left\":i=r-7;break;case\"bottom-right\":case\"bottom-left\":i=7-r;break;case\"bottom\":i=7-e;break;case\"top\":i=e-7;}switch(t){case\"top-right\":case\"bottom-right\":n=-r;break;case\"top-left\":case\"bottom-left\":n=r;break;case\"left\":n=e;break;case\"right\":n=-e;}}else {switch(e=Math.abs(e),r=Math.abs(r),t){case\"top-right\":case\"top-left\":case\"top\":i=r-7;break;case\"bottom-right\":case\"bottom-left\":case\"bottom\":i=7-r;}switch(t){case\"top-right\":case\"bottom-right\":case\"right\":n=-e;break;case\"top-left\":case\"bottom-left\":case\"left\":n=e;}}return [n,i]}function Op(t,e,r,n,i,s,a,o,l,u){t.createArrays(),t.tilePixelRatio=So/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;const c=t.layers[0].layout,h=t.layers[0]._unevaluatedLayout._values,p={};if(\"composite\"===t.textSizeData.kind){const{minZoom:e,maxZoom:r}=t.textSizeData;p.compositeTextSizes=[h[\"text-size\"].possiblyEvaluate(new Us(e),o),h[\"text-size\"].possiblyEvaluate(new Us(r),o)];}if(\"composite\"===t.iconSizeData.kind){const{minZoom:e,maxZoom:r}=t.iconSizeData;p.compositeIconSizes=[h[\"icon-size\"].possiblyEvaluate(new Us(e),o),h[\"icon-size\"].possiblyEvaluate(new Us(r),o)];}p.layoutTextSize=h[\"text-size\"].possiblyEvaluate(new Us(l+1),o),p.layoutIconSize=h[\"icon-size\"].possiblyEvaluate(new Us(l+1),o),p.textMaxSize=h[\"text-size\"].possiblyEvaluate(new Us(18),o);const f=\"map\"===c.get(\"text-rotation-alignment\")&&\"point\"!==c.get(\"symbol-placement\"),d=c.get(\"text-size\");for(const s of t.features){const l=c.get(\"text-font\").evaluate(s,{},o).join(\",\"),h=d.evaluate(s,{},o),y=p.layoutTextSize.evaluate(s,{},o),m=(p.layoutIconSize.evaluate(s,{},o),{horizontal:{},vertical:void 0}),g=s.text;let x,v=[0,0];if(g){const n=g.toString(),a=c.get(\"text-letter-spacing\").evaluate(s,{},o)*yh,u=c.get(\"text-line-height\").evaluate(s,{},o)*yh,p=ws(n)?a:0,d=c.get(\"text-anchor\").evaluate(s,{},o),x=c.get(\"text-variable-anchor\");if(!x){const t=c.get(\"text-radial-offset\").evaluate(s,{},o);v=t?$p(d,[t*yh,jp]):c.get(\"text-offset\").evaluate(s,{},o).map((t=>t*yh));}let b=f?\"center\":c.get(\"text-justify\").evaluate(s,{},o);const w=\"point\"===c.get(\"symbol-placement\"),_=w?c.get(\"text-max-width\").evaluate(s,{},o)*yh:1/0,A=s=>{t.allowVerticalPlacement&&bs(n)&&(m.vertical=rp(g,e,r,i,l,_,u,d,s,p,v,Qh.vertical,!0,y,h));};if(!f&&x){const t=\"auto\"===b?x.map((t=>qp(t))):[b];let n=!1;for(let s=0;s<t.length;s++){const a=t[s];if(!m.horizontal[a])if(n)m.horizontal[a]=m.horizontal[0];else {const t=rp(g,e,r,i,l,_,u,\"center\",a,p,v,Qh.horizontal,!1,y,h);t&&(m.horizontal[a]=t,n=1===t.positionedLines.length);}}A(\"left\");}else {if(\"auto\"===b&&(b=qp(d)),w||c.get(\"text-writing-mode\").indexOf(\"horizontal\")>=0||!bs(n)){const t=rp(g,e,r,i,l,_,u,d,b,p,v,Qh.horizontal,!1,y,h);t&&(m.horizontal[b]=t);}A(w?\"left\":b);}}let b=!1;if(s.icon&&s.icon.name){const e=n[s.icon.name];e&&(x=pp(i[s.icon.name],c.get(\"icon-offset\").evaluate(s,{},o),c.get(\"icon-anchor\").evaluate(s,{},o)),b=e.sdf,void 0===t.sdfIcons?t.sdfIcons=e.sdf:t.sdfIcons!==e.sdf&&$(\"Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer\"),(e.pixelRatio!==t.pixelRatio||0!==c.get(\"icon-rotate\").constantOr(1))&&(t.iconsNeedLinear=!0));}const w=Zp(m.horizontal)||m.vertical;t.iconsInText||(t.iconsInText=!!w&&w.iconsInText),(w||x)&&Np(t,s,m,x,n,p,y,0,v,b,a,o,u);}s&&t.generateCollisionDebugBuffers(l,t.collisionBoxArray);}function qp(t){switch(t){case\"right\":case\"top-right\":case\"bottom-right\":return \"right\";case\"left\":case\"top-left\":case\"bottom-left\":return \"left\"}return \"center\"}function Np(t,e,r,n,i,s,a,o,l,u,c,h,p){let f=s.textMaxSize.evaluate(e,{},h);void 0===f&&(f=a);const d=t.layers[0].layout,y=d.get(\"icon-offset\").evaluate(e,{},h),m=Zp(r.horizontal)||r.vertical,g=\"globe\"===p.name,v=a/24,b=t.tilePixelRatio*f/24,w=(z=t.overscaling,t.zoom>18&&z>2&&(z>>=1),Math.max(So/(512*z),1)*d.get(\"symbol-spacing\")),_=d.get(\"text-padding\")*t.tilePixelRatio,A=d.get(\"icon-padding\")*t.tilePixelRatio,S=x(d.get(\"text-max-angle\")),k=\"map\"===d.get(\"text-rotation-alignment\")&&\"point\"!==d.get(\"symbol-placement\"),I=\"map\"===d.get(\"icon-rotation-alignment\")&&\"point\"!==d.get(\"symbol-placement\"),M=d.get(\"symbol-placement\"),T=w/2;var z;const B=d.get(\"icon-text-fit\");let E;n&&\"none\"!==B&&(t.allowVerticalPlacement&&r.vertical&&(E=fp(n,r.vertical,B,d.get(\"icon-text-fit-padding\"),y,v)),m&&(n=fp(n,m,B,d.get(\"icon-text-fit-padding\"),y,v)));const C=(a,o,f)=>{if(o.x<0||o.x>=So||o.y<0||o.y>=So)return;let d=null;if(g){const{x:t,y:e,z:r}=p.projectTilePoint(o.x,o.y,f);d={anchor:new dp(t,e,r,0,void 0),up:p.upVector(f,o.x,o.y)};}!function(t,e,r,n,i,s,a,o,l,u,c,h,p,f,d,y,m,g,x,v,b,w,_,A,S){const k=t.addToLineVertexArray(e,n);let I,M,T,z,B,E,C,P=0,D=0,V=0,L=0,F=-1,R=-1;const j={};let U=qa.exports(\"\");const O=r?r.anchor:e;let q=0,N=0;if(void 0===l._unevaluatedLayout.getValue(\"text-radial-offset\")?[q,N]=l.layout.get(\"text-offset\").evaluate(b,{},S).map((t=>t*yh)):(q=l.layout.get(\"text-radial-offset\").evaluate(b,{},S)*yh,N=jp),t.allowVerticalPlacement&&i.vertical){const t=i.vertical;if(d)E=Yp(t),o&&(C=Yp(o));else {const r=l.layout.get(\"text-rotate\").evaluate(b,{},S)+90;T=Kp(u,O,e,c,h,p,t,f,r,y),o&&(z=Kp(u,O,e,c,h,p,o,g,r));}}if(s){const n=l.layout.get(\"icon-rotate\").evaluate(b,{},S),i=\"none\"!==l.layout.get(\"icon-text-fit\"),a=Tp(s,n,_,i),f=o?Tp(o,n,_,i):void 0;M=Kp(u,O,e,c,h,p,s,g,n),P=4*a.length;const d=t.iconSizeData;let y=null;\"source\"===d.kind?(y=[mh*l.layout.get(\"icon-size\").evaluate(b,{},S)],y[0]>Gp&&$(`${t.layerIds[0]}: Value for \"icon-size\" is >= 255. Reduce your \"icon-size\".`)):\"composite\"===d.kind&&(y=[mh*w.compositeIconSizes[0].evaluate(b,{},S),mh*w.compositeIconSizes[1].evaluate(b,{},S)],(y[0]>Gp||y[1]>Gp)&&$(`${t.layerIds[0]}: Value for \"icon-size\" is >= 255. Reduce your \"icon-size\".`)),t.addSymbols(t.icon,a,y,v,x,b,!1,r,e,k.lineStartIndex,k.lineLength,-1,A,S),F=t.icon.placedSymbolArray.length-1,f&&(D=4*f.length,t.addSymbols(t.icon,f,y,v,x,b,Qh.vertical,r,e,k.lineStartIndex,k.lineLength,-1,A,S),R=t.icon.placedSymbolArray.length-1);}for(const n in i.horizontal){const s=i.horizontal[n];I||(U=qa.exports(s.text),d?B=Yp(s):I=Kp(u,O,e,c,h,p,s,f,l.layout.get(\"text-rotate\").evaluate(b,{},S),y));const o=1===s.positionedLines.length;if(V+=Xp(t,r,e,s,a,l,d,b,y,k,i.vertical?Qh.horizontal:Qh.horizontalOnly,o?Object.keys(i.horizontal):[n],j,F,w,A,S),o)break}i.vertical&&(L+=Xp(t,r,e,i.vertical,a,l,d,b,y,k,Qh.vertical,[\"vertical\"],j,R,w,A,S));let G=-1;const X=(t,e)=>t?Math.max(t,e):e;G=X(B,G),G=X(E,G),G=X(C,G);const Z=G>-1?1:0;t.glyphOffsetArray.length>=cd.MAX_GLYPHS&&$(\"Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907\"),void 0!==b.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,b.sortKey),t.symbolInstances.emplaceBack(O.x,O.y,O.z,e.x,e.y,j.right>=0?j.right:-1,j.center>=0?j.center:-1,j.left>=0?j.left:-1,j.vertical>=0?j.vertical:-1,F,R,U,void 0!==I?I:t.collisionBoxArray.length,void 0!==I?I+1:t.collisionBoxArray.length,void 0!==T?T:t.collisionBoxArray.length,void 0!==T?T+1:t.collisionBoxArray.length,void 0!==M?M:t.collisionBoxArray.length,void 0!==M?M+1:t.collisionBoxArray.length,z||t.collisionBoxArray.length,z?z+1:t.collisionBoxArray.length,c,V,L,P,D,Z,0,q,N,G);}(t,o,d,a,r,n,i,E,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,_,k,l,0,A,I,y,e,s,u,c,h);};if(\"line\"===M)for(const i of _p(e.geometry,0,0,So,So)){const e=bp(i,w,S,r.vertical||m,n,24,b,t.overscaling,So);for(const r of e){const e=m;e&&Hp(t,e.text,T,r)||C(i,r,h);}}else if(\"line-center\"===M){for(const t of e.geometry)if(t.length>1){const e=vp(t,S,r.vertical||m,n,24,b);e&&C(t,e,h);}}else if(\"Polygon\"===e.type)for(const t of tc(e.geometry,0)){const e=Lp(t,16);C(t[0],new dp(e.x,e.y,0,0,void 0),h);}else if(\"LineString\"===e.type)for(const t of e.geometry)C(t,new dp(t[0].x,t[0].y,0,0,void 0),h);else if(\"Point\"===e.type)for(const t of e.geometry)for(const e of t)C([e],new dp(e.x,e.y,0,0,void 0),h);}const Gp=32640;function Xp(t,e,r,n,i,s,a,o,l,u,c,h,p,f,y,m,g){const x=function(t,e,r,n,i,s,a,o){const l=[];if(0===e.positionedLines.length)return l;const u=n.layout.get(\"text-rotate\").evaluate(s,{})*Math.PI/180,c=function(t){const e=t[0],r=t[1],n=e*r;return n>0?[e,-r]:n<0?[-e,r]:0===e?[r,e]:[r,-e]}(r);let h=Math.abs(e.top-e.bottom);for(const t of e.positionedLines)h-=t.lineOffset;const p=e.positionedLines.length,f=h/p;let y=e.top-r[1];for(let t=0;t<p;++t){const n=e.positionedLines[t];y=Pp(e,f,y,t);for(const t of n.positionedGlyphs){if(!t.rect)continue;const n=t.rect||{};let s=4,h=!0,p=1,f=0;if(t.imageName){const e=a[t.imageName];if(!e)continue;if(e.sdf){$(\"SDF images are not supported in formatted text and will be ignored.\");continue}h=!1,p=e.pixelRatio,s=1/p;}const m=(i||o)&&t.vertical,g=t.metrics.advance*t.scale/2,x=t.metrics,v=t.rect;if(null===v)continue;o&&e.verticalizable&&(f=t.imageName?g-t.metrics.width*t.scale/2:0);const b=i?[t.x+g,t.y]:[0,0];let w=[0,0],_=[0,0],A=!1;i||(m?(_=[t.x+g+c[0],t.y+c[1]-f],A=!0):w=[t.x+g+r[0],t.y+r[1]-f]);const S=v.w*t.scale/(p*(t.localGlyph?2:1)),k=v.h*t.scale/(p*(t.localGlyph?2:1));let I,M,T,z;if(m){const e=t.y-y,r=new d(-g,g-e),n=-Math.PI/2,i=new d(..._);I=new d(-g+w[0],w[1]),I._rotateAround(n,r)._add(i),I.x+=-e+g,I.y-=(x.left-s)*t.scale;const a=t.imageName?x.advance*t.scale:yh*t.scale,o=String.fromCharCode(t.glyph);Ah(o)?I.x+=(1-s)*t.scale:Sh(o)?I.x+=a-x.height*t.scale+(-s-1)*t.scale:I.x+=t.imageName||x.width+2*s===v.w&&x.height+2*s===v.h?(a-k)/2:(a-(x.height+2*s)*t.scale)/2,M=new d(I.x,I.y-S),T=new d(I.x+k,I.y),z=new d(I.x+k,I.y-S);}else {const e=(x.left-s)*t.scale-g+w[0],r=(-x.top-s)*t.scale+w[1],n=e+S,i=r+k;I=new d(e,r),M=new d(n,r),T=new d(e,i),z=new d(n,i);}if(u){let t;t=i?new d(0,0):A?new d(c[0],c[1]):new d(r[0],r[1]),I._rotateAround(u,t),M._rotateAround(u,t),T._rotateAround(u,t),z._rotateAround(u,t);}const B=new d(0,0),E=new d(0,0);l.push({tl:I,tr:M,bl:T,br:z,tex:n,writingMode:e.writingMode,glyphOffset:b,sectionIndex:t.sectionIndex,isSDF:h,pixelOffsetTL:B,pixelOffsetBR:E,minFontScaleX:0,minFontScaleY:0});}}return l}(0,n,l,s,a,o,i,t.allowVerticalPlacement),v=t.textSizeData;let b=null;\"source\"===v.kind?(b=[mh*s.layout.get(\"text-size\").evaluate(o,{},g)],b[0]>Gp&&$(`${t.layerIds[0]}: Value for \"text-size\" is >= 255. Reduce your \"text-size\".`)):\"composite\"===v.kind&&(b=[mh*y.compositeTextSizes[0].evaluate(o,{},g),mh*y.compositeTextSizes[1].evaluate(o,{},g)],(b[0]>Gp||b[1]>Gp)&&$(`${t.layerIds[0]}: Value for \"text-size\" is >= 255. Reduce your \"text-size\".`)),t.addSymbols(t.text,x,b,l,a,o,c,e,r,u.lineStartIndex,u.lineLength,f,m,g);for(const e of h)p[e]=t.text.placedSymbolArray.length-1;return 4*x.length}function Zp(t){for(const e in t)return t[e];return null}function Kp(t,e,r,n,i,s,a,o,l,u){let c=a.top,h=a.bottom,p=a.left,f=a.right;const y=a.collisionPadding;if(y&&(p-=y[0],c-=y[1],f+=y[2],h+=y[3]),l){const t=new d(p,c),e=new d(f,c),r=new d(p,h),n=new d(f,h),i=x(l);let s=new d(0,0);u&&(s=new d(u[0],u[1])),t._rotateAround(i,s),e._rotateAround(i,s),r._rotateAround(i,s),n._rotateAround(i,s),p=Math.min(t.x,e.x,r.x,n.x),f=Math.max(t.x,e.x,r.x,n.x),c=Math.min(t.y,e.y,r.y,n.y),h=Math.max(t.y,e.y,r.y,n.y);}return t.emplaceBack(e.x,e.y,e.z,r.x,r.y,p,c,f,h,o,n,i,s),t.length-1}function Yp(t){t.collisionPadding&&(t.top-=t.collisionPadding[1],t.bottom+=t.collisionPadding[3]);const e=t.bottom-t.top;return e>0?Math.max(10,e):null}function Hp(t,e,r,n){const i=t.compareText;if(e in i){const t=i[e];for(let e=t.length-1;e>=0;e--)if(n.dist(t[e])<r)return !0}else i[e]=[];return i[e].push(n),!1}const Wp=na([{type:\"Float32\",name:\"a_globe_pos\",components:3},{type:\"Float32\",name:\"a_uv\",components:2}]),{members:Jp}=Wp,Qp=na([{name:\"a_pos_3\",components:3,type:\"Int16\"}]);var tf=na([{name:\"a_pos\",type:\"Int16\",components:2}]);const ef=So/Math.PI/2,rf=2*Co(1,0)*ef*Math.PI,nf=64,sf=[nf,32,16],af=-ef,of=ef,lf=[new au([af,af,af],[of,of,of]),new au([af,af,af],[0,0,of]),new au([0,af,af],[of,0,of]),new au([af,0,af],[0,of,of]),new au([0,0,af],[of,of,of])];function uf(t,e,r,n=!0){const i=Rl([],t._camera.position,t.worldSize),s=[e,r,1,1];Wl(s,s,t.pixelMatrixInverse),Yl(s,s,1/s[3]);const a=Ul([],Xl([],s,i)),o=t.globeMatrix,l=[o[12],o[13],o[14]],u=Xl([],l,i),c=El(u),h=Ul([],u),p=t.worldSize/(2*Math.PI),f=$l(h,a),d=Math.asin(p/c);if(d<Math.acos(f)){if(!n)return null;const t=[],e=[];Rl(t,a,c/f),Ul(e,Xl(e,t,u)),Ul(a,Pl(a,u,Rl(a,e,Math.tan(d)*c)));}const y=[];new nu(i,a).closestPointOnSphere(l,p,y);const m=Ul([],Y(o,0)),g=Ul([],Y(o,1)),x=Ul([],Y(o,2)),b=$l(m,y),w=$l(g,y),_=$l(x,y),A=v(Math.asin(-w/p));let k=v(Math.atan2(b,_));k=t.center.lng+function(t,e){const r=(e-t+180)%360-180;return r<-180?r+360:r}(t.center.lng,k);const I=Bo(k),M=S(Eo(A),0,1);return new Ro(I,M)}class cf{constructor(t,e,r){this.a=Xl([],t,r),this.b=Xl([],e,r),this.center=r;const n=Ul([],this.a),i=Ul([],this.b);this.angle=Math.acos($l(n,i));}}function hf(t,e){if(0===t.angle)return null;let r;return r=0===t.a[e]?1/t.angle*.5*Math.PI:1/t.angle*Math.atan(t.b[e]/t.a[e]/Math.sin(t.angle)-1/Math.tan(t.angle)),r<0||r>1?null:function(t,e,r,n){const i=Math.sin(r);return t*(Math.sin((1-n)*r)/i)+e*(Math.sin(n*r)/i)}(t.a[e],t.b[e],t.angle,S(r,0,1))+t.center[e]}function pf(t){if(t.z<=1)return lf[t.z+2*t.y+t.x];const e=xf(gf(t));return au.fromPoints(e)}function ff(t,e,r){return Rl(t,t,1-r),jl(t,t,e,r)}function df(t,e){const r=Mf(e.zoom);if(0===r)return pf(t);const n=gf(t),i=xf(n),s=Bo(n.getWest())*e.worldSize,a=Bo(n.getEast())*e.worldSize,o=Eo(n.getNorth())*e.worldSize,l=Eo(n.getSouth())*e.worldSize,u=[s,o,0],c=[a,o,0],h=[s,l,0],p=[a,l,0],f=bl([],e.globeMatrix);return ql(u,u,f),ql(c,c,f),ql(h,h,f),ql(p,p,f),i[0]=ff(i[0],h,r),i[1]=ff(i[1],p,r),i[2]=ff(i[2],c,r),i[3]=ff(i[3],u,r),au.fromPoints(i)}function yf(t,e,r){for(const n of t)ql(n,n,e),Rl(n,n,r);}function mf(t,e,r){const n=e/t.worldSize,i=t.globeMatrix;if(r.z<=1){const t=pf(r).getCorners();return yf(t,i,n),au.fromPoints(t)}const s=gf(r),a=xf(s);yf(a,i,n);const o=Number.MAX_VALUE,l=[-o,-o,-o],u=[o,o,o];if(s.contains(t.center)){for(const t of a)Ll(u,u,t),Fl(l,l,t);l[2]=0;const e=t.point,r=[e.x*n,e.y*n,0];return Ll(u,u,r),Fl(l,l,r),new au(u,l)}const c=[i[12]*n,i[13]*n,i[14]*n],h=s.getCenter(),p=S(t.center.lat,-85.051129,Lo),f=S(h.lat,-85.051129,Lo),d=Bo(t.center.lng),y=Eo(p);let m=d-Bo(h.lng);const g=y-Eo(f);m>.5?m-=1:m<-.5&&(m+=1);let v=0;Math.abs(m)>Math.abs(g)?v=m>=0?1:3:(v=g>=0?0:2,jl(c,c,[i[4]*n,i[5]*n,i[6]*n],-Math.sin(x(g>=0?s.getSouth():s.getNorth()))*ef));const b=a[v],w=a[(v+1)%4],_=new cf(b,w,c),A=[hf(_,0)||b[0],hf(_,1)||b[1],hf(_,2)||b[2]],k=Mf(t.zoom);if(k>0){const n=function({x:t,y:e,z:r},n,i,s,a){const o=1/(1<<r);let l=t*o,u=l+o,c=e*o,h=c+o,p=0;const f=(l+u)/2-s;return f>.5?p=-1:f<-.5&&(p=1),l=((l+p)*n-(s*=n))*i+s,u=((u+p)*n-s)*i+s,c=(c*n-(a*=n))*i+a,h=(h*n-a)*i+a,[[l,h,0],[u,h,0],[u,c,0],[l,c,0]]}(r,e,t._pixelsPerMercatorPixel,d,y);for(let t=0;t<a.length;t++)ff(a[t],n[t],k);const i=Pl([],n[v],n[(v+1)%4]);Rl(i,i,.5),ff(A,i,k);}for(const t of a)Ll(u,u,t),Fl(l,l,t);return u[2]=Math.min(b[2],w[2]),Ll(u,u,A),Fl(l,l,A),new au(u,l)}function gf({x:t,y:e,z:r}){const n=1/(1<<r),i=new Mo(Po(t*n),Do((e+1)*n)),s=new Mo(Po((t+1)*n),Do(e*n));return new ko(i,s)}function xf(t){const e=x(t.getNorth()),r=x(t.getSouth()),n=Math.cos(e),i=Math.cos(r),s=Math.sin(e),a=Math.sin(r),o=t.getWest(),l=t.getEast();return [vf(i,a,o),vf(i,a,l),vf(n,s,l),vf(n,s,o)]}function vf(t,e,r,n=ef){return r=x(r),[t*Math.sin(r)*n,-e*n,t*Math.cos(r)*n]}function bf(t,e,r){return vf(Math.cos(x(t)),Math.sin(x(t)),e,r)}function wf(t,e,r,n){const i=1<<r.z,s=(t/So+r.x)/i;return bf(Do((e/So+r.y)/i),Po(s),n)}function _f({min:t,max:e}){return 16383/Math.max(e[0]-t[0],e[1]-t[1],e[2]-t[2])}const Af=new Float64Array(16);function Sf(t){const e=_f(t),r=Il(Af,[e,e,e]);return _l(r,r,((n=[])[0]=-(i=t.min)[0],n[1]=-i[1],n[2]=-i[2],n));var n,i;}function kf(t){const e=(n=t.min,(r=Af)[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r);var r,n;const i=1/_f(t);return Al(e,e,[i,i,i])}function If(t,e,r,n,i){const s=function(t){const e=So/(2*Math.PI);return t/(2*Math.PI)/e}(r),a=[t,e,-r/(2*Math.PI)],o=vl(new Float64Array(16));return _l(o,o,a),Al(o,o,[s,s,s]),Sl(o,o,x(-i)),kl(o,o,x(-n)),o}function Mf(t){return k(5,6,t)}function Tf(t,e){const r=bf(e.lat,e.lng),n=function(t){const e=bf(t._center.lat,t._center.lng);let r=Ol([],Cl(0,1,0),e);const n=Ml([],-t.angle,e);r=ql(r,r,n),Ml(n,-t._pitch,r);const i=Ul([],e);return Rl(i,i,t.cameraToCenterDistance/t.pixelsPerMeter*rf),ql(i,i,n),Pl([],e,i)}(t);return a=(i=Dl([],n,r))[0],o=i[1],l=i[2],u=(s=r)[0],c=s[1],h=s[2],f=(p=Math.sqrt(a*a+o*o+l*l)*Math.sqrt(u*u+c*c+h*h))&&$l(i,s)/p,Math.acos(Math.min(Math.max(f,-1),1));var i,s,a,o,l,u,c,h,p,f;}function zf(t,e){return Tf(t,e)>Math.PI/2*1.01}const Bf=x(85),Ef=Math.cos(Bf),Cf=Math.sin(Bf);function Pf(t,e){const r=t.fovAboveCenter,n=t.elevation?t.elevation.getMinElevationBelowMSL()*e:0,i=(t._camera.position[2]*t.worldSize-n)/Math.cos(t._pitch),s=Math.sin(r)*i/Math.sin(Math.max(Math.PI/2-t._pitch-r,.01)),a=Math.sin(t._pitch)*s+i;return Math.min(1.01*a,i*(1/t._horizonShift))}function Df(t,e){if(!e.isReprojectedInTileSpace)return {scale:1<<t.z,x:t.x,y:t.y,x2:t.x+1,y2:t.y+1,projection:e};const r=Math.pow(2,-t.z),n=t.x*r,i=(t.x+1)*r,s=t.y*r,a=(t.y+1)*r,o=Po(n),l=Po(i),u=Do(s),c=Do(a),h=e.project(o,u),p=e.project(l,u),f=e.project(l,c),d=e.project(o,c);let y=Math.min(h.x,p.x,f.x,d.x),m=Math.min(h.y,p.y,f.y,d.y),g=Math.max(h.x,p.x,f.x,d.x),x=Math.max(h.y,p.y,f.y,d.y);const v=r/16;function b(t,r,n,i,s,a){const o=(n+s)/2,l=(i+a)/2,u=e.project(Po(o),Do(l)),c=Math.max(0,y-u.x,m-u.y,u.x-g,u.y-x);y=Math.min(y,u.x),g=Math.max(g,u.x),m=Math.min(m,u.y),x=Math.max(x,u.y),c>v&&(b(t,u,n,i,o,l),b(u,r,o,l,s,a));}b(h,p,n,s,i,s),b(p,f,i,s,i,a),b(f,d,i,a,n,a),b(d,h,n,a,n,s),y-=v,m-=v,g+=v,x+=v;const w=1/Math.max(g-y,x-m);return {scale:w,x:y*w,y:m*w,x2:g*w,y2:x*w,projection:e}}const Vf=vl(new Float32Array(16));class Lf{constructor(t){this.spec=t,this.name=t.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit=\"meters\",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=[\"custom\"],this.center=[0,0],this.range=[3.5,7];}project(t,e){return {x:0,y:0,z:0}}unproject(t,e){return new Mo(0,0)}projectTilePoint(t,e,r){return {x:t,y:e,z:0}}locationPoint(t,e,r=!0){return t._coordinatePoint(t.locationCoordinate(e),r)}pixelsPerMeter(t,e){return Co(1,t)*e}pixelSpaceConversion(t,e,r){return 1}farthestPixelDistance(t){return Pf(t,t.pixelsPerMeter)}pointCoordinate(t,e,r,n){const i=t.horizonLineFromTop(!1),s=new d(e,Math.max(i,r));return t.rayIntersectionCoordinate(t.pointRayIntersection(s,n))}pointCoordinate3D(t,e,r){const n=new d(e,r);if(t.elevation)return t.elevation.pointCoordinate(n);{const e=this.pointCoordinate(t,n.x,n.y,0);return [e.x,e.y,e.z]}}isPointAboveHorizon(t,e){if(t.elevation)return !this.pointCoordinate3D(t,e.x,e.y);const r=t.horizonLineFromTop();return e.y<r}createInversionMatrix(t,e){return Vf}createTileMatrix(t,e,r){let n,i,s;const a=r.canonical,o=vl(new Float64Array(16));if(this.isReprojectedInTileSpace){const l=Df(a,this);n=1,i=l.x+r.wrap*l.scale,s=l.y,Al(o,o,[n/l.scale,n/l.scale,t.pixelsPerMeter/e]);}else n=e/t.zoomScale(a.z),i=(a.x+Math.pow(2,a.z)*r.wrap)*n,s=a.y*n;return _l(o,o,[i,s,0]),Al(o,o,[n/So,n/So,1]),o}upVector(t,e,r){return [0,0,1]}upVectorScale(t,e,r){return {metersToTile:1}}}class Ff extends Lf{constructor(t){super(t),this.range=[4,7],this.center=t.center||[-96,37.5];const[e,r]=this.parallels=t.parallels||[29.5,45.5],n=Math.sin(x(e));this.n=(n+Math.sin(x(r)))/2,this.c=1+n*(2*this.n-n),this.r0=Math.sqrt(this.c)/this.n;}project(t,e){const{n:r,c:n,r0:i}=this,s=x(t-this.center[0]),a=x(e),o=Math.sqrt(n-2*r*Math.sin(a))/r;return {x:o*Math.sin(s*r),y:o*Math.cos(s*r)-i,z:0}}unproject(t,e){const{n:r,c:n,r0:i}=this,s=i+e;let a=Math.atan2(t,Math.abs(s))*Math.sign(s);s*r<0&&(a-=Math.PI*Math.sign(t)*Math.sign(s));const o=x(this.center[0])*r;a=I(a,-Math.PI-o,Math.PI-o);const l=S(v(a/r)+this.center[0],-180,180),u=Math.asin(S((n-(t*t+s*s)*r*r)/(2*r),-1,1)),c=S(v(u),-85.051129,Lo);return new Mo(l,c)}}const Rf=1.340264,jf=-.081106,Uf=893e-6,$f=.003796,Of=Math.sqrt(3)/2;class qf extends Lf{project(t,e){e=e/180*Math.PI,t=t/180*Math.PI;const r=Math.asin(Of*Math.sin(e)),n=r*r,i=n*n*n;return {x:.5*(t*Math.cos(r)/(Of*(Rf+3*jf*n+i*(7*Uf+9*$f*n)))/Math.PI+.5),y:1-.5*(r*(Rf+jf*n+i*(Uf+$f*n))/Math.PI+1),z:0}}unproject(t,e){t=(2*t-.5)*Math.PI;let r=e=(2*(1-e)-1)*Math.PI,n=r*r,i=n*n*n;for(let t,s,a,o=0;o<12&&(s=r*(Rf+jf*n+i*(Uf+$f*n))-e,a=Rf+3*jf*n+i*(7*Uf+9*$f*n),t=s/a,r=S(r-t,-Math.PI/3,Math.PI/3),n=r*r,i=n*n*n,!(Math.abs(t)<1e-12));++o);const s=Of*t*(Rf+3*jf*n+i*(7*Uf+9*$f*n))/Math.cos(r),a=Math.asin(Math.sin(r)/Of),o=S(180*s/Math.PI,-180,180),l=S(180*a/Math.PI,-85.051129,Lo);return new Mo(o,l)}}class Nf extends Lf{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0;}project(t,e){return {x:.5+t/360,y:.5-e/360,z:0}}unproject(t,e){const r=360*(t-.5),n=S(360*(.5-e),-85.051129,Lo);return new Mo(r,n)}}const Gf=Math.PI/2;function Xf(t){return Math.tan((Gf+t)/2)}class Zf extends Lf{constructor(t){super(t),this.center=t.center||[0,30];const[e,r]=this.parallels=t.parallels||[30,30];let n=x(e),i=x(r);this.southernCenter=n+i<0,this.southernCenter&&(n=-n,i=-i);const s=Math.cos(n),a=Xf(n);this.n=n===i?Math.sin(n):Math.log(s/Math.cos(i))/Math.log(Xf(i)/a),this.f=s*Math.pow(Xf(n),this.n)/this.n;}project(t,e){e=x(e),this.southernCenter&&(e=-e),t=x(t-this.center[0]);const r=1e-6,{n:n,f:i}=this;i>0?e<-Gf+r&&(e=-Gf+r):e>Gf-r&&(e=Gf-r);const s=i/Math.pow(Xf(e),n);let a=s*Math.sin(n*t),o=i-s*Math.cos(n*t);return a=.5*(a/Math.PI+.5),o=.5*(o/Math.PI+.5),{x:a,y:this.southernCenter?o:1-o,z:0}}unproject(t,e){t=(2*t-.5)*Math.PI,this.southernCenter&&(e=1-e),e=(2*(1-e)-.5)*Math.PI;const{n:r,f:n}=this,i=n-e,s=Math.sign(i),a=Math.sign(r)*Math.sqrt(t*t+i*i);let o=Math.atan2(t,Math.abs(i))*s;i*r<0&&(o-=Math.PI*Math.sign(t)*s);const l=S(v(o/r)+this.center[0],-180,180),u=S(v(2*Math.atan(Math.pow(n/a,1/r))-Gf),-85.051129,Lo);return new Mo(l,this.southernCenter?-u:u)}}class Kf extends Lf{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null;}project(t,e){return {x:Bo(t),y:Eo(e),z:0}}unproject(t,e){const r=Po(t),n=Do(e);return new Mo(r,n)}}const Yf=x(Lo);class Hf extends Lf{project(t,e){const r=(e=x(e))*e,n=r*r;return {x:.5*((t=x(t))*(.8707-.131979*r+n*(n*(.003971*r-.001529*n)-.013791))/Math.PI+.5),y:1-.5*(e*(1.007226+r*(.015085+n*(.028874*r-.044475-.005916*n)))/Math.PI+1),z:0}}unproject(t,e){t=(2*t-.5)*Math.PI;let r=e=(2*(1-e)-1)*Math.PI,n=25,i=0,s=r*r;do{s=r*r;const t=s*s;i=(r*(1.007226+s*(.015085+t*(.028874*s-.044475-.005916*t)))-e)/(1.007226+s*(.045255+t*(.259866*s-.311325-.005916*11*t))),r=S(r-i,-Yf,Yf);}while(Math.abs(i)>1e-6&&--n>0);s=r*r;const a=S(v(t/(.8707+s*(s*(s*s*s*(.003971-.001529*s)-.013791)-.131979))),-180,180),o=v(r);return new Mo(a,o)}}const Wf=x(Lo);class Jf extends Lf{project(t,e){e=x(e),t=x(t);const r=Math.cos(e),n=2/Math.PI,i=Math.acos(r*Math.cos(t/2)),s=Math.sin(i)/i,a=.5*(t*n+2*r*Math.sin(t/2)/s)||0,o=.5*(e+Math.sin(e)/s)||0;return {x:.5*(a/Math.PI+.5),y:1-.5*(o/Math.PI+1),z:0}}unproject(t,e){let r=t=(2*t-.5)*Math.PI,n=e=(2*(1-e)-1)*Math.PI,i=25;const s=1e-6;let a=0,o=0;do{const i=Math.cos(n),s=Math.sin(n),l=2*s*i,u=s*s,c=i*i,h=Math.cos(r/2),p=Math.sin(r/2),f=2*h*p,d=p*p,y=1-c*h*h,m=y?1/y:0,g=y?Math.acos(i*h)*Math.sqrt(1/y):0,x=.5*(2*g*i*p+2*r/Math.PI)-t,v=.5*(g*s+n)-e,b=.5*m*(c*d+g*i*h*u)+1/Math.PI,w=m*(f*l/4-g*s*p),_=.125*m*(l*p-g*s*c*f),A=.5*m*(u*h+g*d*i)+.5,k=w*_-A*b;a=(v*w-x*A)/k,o=(x*_-v*b)/k,r=S(r-a,-Math.PI,Math.PI),n=S(n-o,-Wf,Wf);}while((Math.abs(a)>s||Math.abs(o)>s)&&--i>0);return new Mo(v(r),v(n))}}class Qf extends Lf{constructor(t){super(t),this.center=t.center||[0,0],this.parallels=t.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(x(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0;}project(t,e){const{scale:r,cosPhi:n}=this;return {x:x(t)*n*r+.5,y:-Math.sin(x(e))/n*r+.5,z:0}}unproject(t,e){const{scale:r,cosPhi:n}=this,i=-(e-.5)/r,s=S(v((t-.5)/r)/n,-180,180),a=Math.asin(S(i*n,-1,1)),o=S(v(a),-85.051129,Lo);return new Mo(s,o)}}class td extends Kf{constructor(t){super(t),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit=\"pixels\",this.unsupportedLayers=[\"debug\",\"custom\"],this.range=[3,5];}projectTilePoint(t,e,r){const n=wf(t,e,r);return ql(n,n,Sf(pf(r))),{x:n[0],y:n[1],z:n[2]}}locationPoint(t,e){const r=bf(e.lat,e.lng),n=Ul([],r),i=t.elevation?t.elevation.getAtPointOrZero(t.locationCoordinate(e),t._centerAltitude):t._centerAltitude;jl(r,r,n,Co(1,0)*So*i);const s=vl(new Float64Array(16));return wl(s,t.pixelMatrix,t.globeMatrix),ql(r,r,s),new d(r[0],r[1])}pixelsPerMeter(t,e){return Co(1,0)*e}pixelSpaceConversion(t,e,r){const n=Co(1,t)*e,i=Mr(Co(1,45)*e,n,r);return this.pixelsPerMeter(t,e)/i}createTileMatrix(t,e,r){const n=kf(pf(r.canonical));return wl(new Float64Array(16),t.globeMatrix,n)}createInversionMatrix(t,e){const{center:r}=t,n=Sf(pf(e));return kl(n,n,x(r.lng)),Sl(n,n,x(r.lat)),Al(n,n,[t._pixelsPerMercatorPixel,t._pixelsPerMercatorPixel,1]),Float32Array.from(n)}pointCoordinate(t,e,r,n){return uf(t,e,r,!0)||new Ro(0,0)}pointCoordinate3D(t,e,r){const n=this.pointCoordinate(t,e,r,0);return [n.x,n.y,n.z]}isPointAboveHorizon(t,e){return !uf(t,e.x,e.y,!1)}farthestPixelDistance(t){const e=function(t,e){const r=t.cameraToCenterDistance,n=t._centerAltitude*e,i=t._camera,s=t._camera.forward(),a=Pl([],Rl([],s,-r),[0,0,n]),o=t.worldSize/(2*Math.PI),l=[0,0,-o],u=t.width/t.height,c=Math.tan(t.fovAboveCenter),h=Rl([],i.up(),c),p=Rl([],i.right(),c*u),f=Ul([],Pl([],Pl([],s,h),p)),d=[];let y;if(new nu(a,f).closestPointOnSphere(l,o,d)){const e=Pl([],d,l),r=Xl([],e,a);y=Math.cos(t.fovAboveCenter)*El(r);}else {const t=Xl([],a,l),e=Xl([],l,a);Ul(e,e);const r=El(t)-o;y=Math.sqrt(r*(r+2*o));const n=Math.acos(y/(o+r))-Math.acos($l(s,e));y*=Math.cos(n);}return 1.01*y}(t,this.pixelsPerMeter(t.center.lat,t.worldSize)),r=Mf(t.zoom);if(r>0){const n=Pf(t,Co(1,t.center.lat)*t.worldSize),i=t.worldSize/(2*Math.PI),s=Math.max(t.width,t.height)/t.worldSize*Math.PI;return Mr(e,n+i*(1-Math.cos(s)),Math.pow(r,10))}return e}upVector(t,e,r){return wf(e,r,t,1)}upVectorScale(t){return {metersToTile:rf*_f(pf(t))}}}function ed(t){const e=t.parallels,r=!!e&&Math.abs(e[0]+e[1])<.01;switch(t.name){case\"mercator\":return new Kf(t);case\"equirectangular\":return new Nf(t);case\"naturalEarth\":return new Hf(t);case\"equalEarth\":return new qf(t);case\"winkelTripel\":return new Jf(t);case\"albers\":return r?new Qf(t):new Ff(t);case\"lambertConformalConic\":return r?new Qf(t):new Zf(t);case\"globe\":return new td(t)}throw new Error(`Invalid projection name: ${t.name}`)}const rd=Sc.types,nd=[{name:\"a_fade_opacity\",components:1,type:\"Uint8\",offset:0}];function id(t,e,r,n,i,s,a,o,l,u,c,h,p){const f=o?Math.min(Gp,Math.round(o[0])):0,d=o?Math.min(Gp,Math.round(o[1])):0;t.emplaceBack(e,r,Math.round(32*n),Math.round(32*i),s,a,(f<<1)+(l?1:0),d,16*u,16*c,256*h,256*p);}function sd(t,e,r,n,i,s,a){t.emplaceBack(e,r,n,i,s,a);}function ad(t,e,r,n,i){t.emplaceBack(e,r,n,i),t.emplaceBack(e,r,n,i),t.emplaceBack(e,r,n,i),t.emplaceBack(e,r,n,i);}function od(t){for(const e of t.sections)if(Ms(e.text))return !0;return !1}class ld{constructor(t){this.layoutVertexArray=new fa,this.indexArray=new wa,this.programConfigurations=t,this.segments=new Ao,this.dynamicLayoutVertexArray=new ua,this.opacityVertexArray=new ya,this.placedSymbolArray=new Pa,this.globeExtVertexArray=new da;}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,r,n){this.isEmpty()||(r&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,lh.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,ch.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,nd,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,uh.members,!0)),this.opacityVertexBuffer.itemSize=1),(r||n)&&this.programConfigurations.upload(t));}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy());}}Oi(ld,\"SymbolBuffers\");class ud{constructor(t,e,r){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new r,this.segments=new Ao,this.collisionVertexArray=new va,this.collisionVertexArrayExt=new ba;}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,hh.members,!0),this.collisionVertexBufferExt=t.createVertexBuffer(this.collisionVertexArrayExt,ph.members,!0);}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy());}}Oi(ud,\"CollisionBuffers\");class cd{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=vl([]),this.placementViewportMatrix=vl([]);const e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=gh(this.zoom,e[\"text-size\"]),this.iconSizeData=gh(this.zoom,e[\"icon-size\"]);const r=this.layers[0].layout,n=r.get(\"symbol-sort-key\"),i=r.get(\"symbol-z-order\");this.canOverlap=r.get(\"text-allow-overlap\")||r.get(\"icon-allow-overlap\")||r.get(\"text-ignore-placement\")||r.get(\"icon-ignore-placement\"),this.sortFeaturesByKey=\"viewport-y\"!==i&&void 0!==n.constantOr(1),this.sortFeaturesByY=(\"viewport-y\"===i||\"auto\"===i&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=r.get(\"text-writing-mode\").map((t=>Qh[t])),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.sourceID=t.sourceID,this.projection=t.projection;}createArrays(){this.text=new ld(new po(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new ld(new po(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new La,this.lineVertexArray=new Fa,this.symbolInstances=new Va;}calculateGlyphDependencies(t,e,r,n,i){for(let r=0;r<t.length;r++)if(e[t.charCodeAt(r)]=!0,n&&i){const n=_h[t.charAt(r)];n&&(e[n.charCodeAt(0)]=!0);}}populate(t,e,r,n){const i=this.layers[0],s=i.layout,a=\"globe\"===this.projection.name,o=s.get(\"text-font\"),l=s.get(\"text-field\"),u=s.get(\"icon-image\"),c=(\"constant\"!==l.value.kind||l.value.value instanceof Be&&!l.value.value.isEmpty()||l.value.value.toString().length>0)&&(\"constant\"!==o.value.kind||o.value.value.length>0),h=\"constant\"!==u.value.kind||!!u.value.value||Object.keys(u.parameters).length>0,p=s.get(\"symbol-sort-key\");if(this.features=[],!c&&!h)return;const f=e.iconDependencies,d=e.glyphDependencies,y=e.availableImages,m=new Us(this.zoom);for(const{feature:e,id:l,index:u,sourceLayerIndex:g}of t){const t=i._featureFilter.needGeometry,x=Zo(e,t);if(!i._featureFilter.filter(m,x,r))continue;if(t||(x.geometry=Xo(e,r,n)),a&&1!==e.type&&r.z<=5){const t=x.geometry,e=.98078528056,n=(t,n)=>$l(wf(t.x,t.y,r,1),wf(n.x,n.y,r,1))<e;for(let e=0;e<t.length;e++)t[e]=Oo(t[e],n);}let v,b;if(c){const t=i.getValueAndResolveTokens(\"text-field\",x,r,y),e=Be.factory(t);od(e)&&(this.hasRTLText=!0),(!this.hasRTLText||\"unavailable\"===Fs()||this.hasRTLText&&js.isParsed())&&(v=wh(e,i,x));}if(h){const t=i.getValueAndResolveTokens(\"icon-image\",x,r,y);b=t instanceof Ee?t:Ee.fromString(t);}if(!v&&!b)continue;const w=this.sortFeaturesByKey?p.evaluate(x,{},r):void 0;if(this.features.push({id:l,text:v,icon:b,index:u,sourceLayerIndex:g,geometry:x.geometry,properties:e.properties,type:rd[e.type],sortKey:w}),b&&(f[b.name]=!0),v){const t=o.evaluate(x,{},r).join(\",\"),e=\"map\"===s.get(\"text-rotation-alignment\")&&\"point\"!==s.get(\"symbol-placement\");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Qh.vertical)>=0;for(const r of v.sections)if(r.image)f[r.image.name]=!0;else {const n=bs(v.toString()),i=r.fontStack||t,s=d[i]=d[i]||{};this.calculateGlyphDependencies(r.text,s,e,this.allowVerticalPlacement,n);}}}\"line\"===s.get(\"symbol-placement\")&&(this.features=function(t){const e={},r={},n=[];let i=0;function s(e){n.push(t[e]),i++;}function a(t,e,i){const s=r[t];return delete r[t],r[e]=s,n[s].geometry[0].pop(),n[s].geometry[0]=n[s].geometry[0].concat(i[0]),s}function o(t,r,i){const s=e[r];return delete e[r],e[t]=s,n[s].geometry[0].shift(),n[s].geometry[0]=i[0].concat(n[s].geometry[0]),s}function l(t,e,r){const n=r?e[0][e[0].length-1]:e[0][0];return `${t}:${n.x}:${n.y}`}for(let u=0;u<t.length;u++){const c=t[u],h=c.geometry,p=c.text?c.text.toString():null;if(!p){s(u);continue}const f=l(p,h),d=l(p,h,!0);if(f in r&&d in e&&r[f]!==e[d]){const t=o(f,d,h),i=a(f,d,n[t].geometry);delete e[f],delete r[d],r[l(p,n[i].geometry,!0)]=i,n[t].geometry=null;}else f in r?a(f,d,h):d in e?o(f,d,h):(s(u),e[f]=i-1,r[d]=i-1);}return n.filter((t=>t.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((t,e)=>t.sortKey-e.sortKey));}update(t,e,r,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,r,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,r,n));}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return !this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0;}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy();}getProjection(){return this.projectionInstance||(this.projectionInstance=ed(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData();}addToLineVertexArray(t,e){const r=this.lineVertexArray.length;if(void 0!==t.segment)for(const{x:t,y:r}of e)this.lineVertexArray.emplaceBack(t,r);return {lineStartIndex:r,lineLength:this.lineVertexArray.length-r}}addSymbols(t,e,r,n,i,s,a,o,l,u,c,h,p,f){const d=t.indexArray,y=t.layoutVertexArray,m=t.globeExtVertexArray,g=t.segments.prepareSegment(4*e.length,y,d,this.canOverlap?s.sortKey:void 0),x=this.glyphOffsetArray.length,v=g.vertexLength,b=this.allowVerticalPlacement&&a===Qh.vertical?Math.PI/2:0,w=s.text&&s.text.sections;for(let n=0;n<e.length;n++){const{tl:i,tr:a,bl:u,br:c,tex:h,pixelOffsetTL:x,pixelOffsetBR:v,minFontScaleX:_,minFontScaleY:A,glyphOffset:S,isSDF:k,sectionIndex:I}=e[n],M=g.vertexLength,T=S[1];if(id(y,l.x,l.y,i.x,T+i.y,h.x,h.y,r,k,x.x,x.y,_,A),id(y,l.x,l.y,a.x,T+a.y,h.x+h.w,h.y,r,k,v.x,x.y,_,A),id(y,l.x,l.y,u.x,T+u.y,h.x,h.y+h.h,r,k,x.x,v.y,_,A),id(y,l.x,l.y,c.x,T+c.y,h.x+h.w,h.y+h.h,r,k,v.x,v.y,_,A),o){const{x:e,y:r,z:n}=o.anchor,[i,s,a]=o.up;sd(m,e,r,n,i,s,a),sd(m,e,r,n,i,s,a),sd(m,e,r,n,i,s,a),sd(m,e,r,n,i,s,a),ad(t.dynamicLayoutVertexArray,e,r,n,b);}else ad(t.dynamicLayoutVertexArray,l.x,l.y,l.z,b);d.emplaceBack(M,M+1,M+2),d.emplaceBack(M+1,M+2,M+3),g.vertexLength+=4,g.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(S[0]),n!==e.length-1&&I===e[n+1].sectionIndex||t.programConfigurations.populatePaintArrays(y.length,s,s.index,{},p,f,w&&w[I]);}const _=o?o.anchor:l;t.placedSymbolArray.emplaceBack(_.x,_.y,_.z,l.x,l.y,x,this.glyphOffsetArray.length-x,v,u,c,l.segment,r?r[0]:0,r?r[1]:0,n[0],n[1],a,0,!1,0,h,0);}_commitLayoutVertex(t,e,r,n,i,s,a){t.emplaceBack(e,r,n,i,s,Math.round(a.x),Math.round(a.y));}_addCollisionDebugVertices(t,e,r,n,i,s,a){const o=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray),l=o.vertexLength,u=a.tileAnchorX,c=a.tileAnchorY;for(let t=0;t<4;t++)r.collisionVertexArray.emplaceBack(0,0,0,0);r.collisionVertexArrayExt.emplaceBack(e,-t.padding,-t.padding),r.collisionVertexArrayExt.emplaceBack(e,t.padding,-t.padding),r.collisionVertexArrayExt.emplaceBack(e,t.padding,t.padding),r.collisionVertexArrayExt.emplaceBack(e,-t.padding,t.padding),this._commitLayoutVertex(r.layoutVertexArray,n,i,s,u,c,new d(t.x1,t.y1)),this._commitLayoutVertex(r.layoutVertexArray,n,i,s,u,c,new d(t.x2,t.y1)),this._commitLayoutVertex(r.layoutVertexArray,n,i,s,u,c,new d(t.x2,t.y2)),this._commitLayoutVertex(r.layoutVertexArray,n,i,s,u,c,new d(t.x1,t.y2)),o.vertexLength+=4;const h=r.indexArray;h.emplaceBack(l,l+1),h.emplaceBack(l+1,l+2),h.emplaceBack(l+2,l+3),h.emplaceBack(l+3,l),o.primitiveLength+=4;}_addTextDebugCollisionBoxes(t,e,r,n,i,s){for(let a=n;a<i;a++){const n=r.get(a),i=this.getSymbolInstanceTextSize(t,s,e,a);this._addCollisionDebugVertices(n,i,this.textCollisionBox,n.projectedAnchorX,n.projectedAnchorY,n.projectedAnchorZ,s);}}_addIconDebugCollisionBoxes(t,e,r,n,i,s){for(let a=n;a<i;a++){const n=r.get(a),i=this.getSymbolInstanceIconSize(t,e,s.placedIconSymbolIndex);this._addCollisionDebugVertices(n,i,this.iconCollisionBox,n.projectedAnchorX,n.projectedAnchorY,n.projectedAnchorZ,s);}}generateCollisionDebugBuffers(t,e){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ud(ga,fh.members,Ma),this.iconCollisionBox=new ud(ga,fh.members,Ma);const r=vh(this.iconSizeData,t),n=vh(this.textSizeData,t);for(let i=0;i<this.symbolInstances.length;i++){const s=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(n,t,e,s.textBoxStartIndex,s.textBoxEndIndex,s),this._addTextDebugCollisionBoxes(n,t,e,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s),this._addIconDebugCollisionBoxes(r,t,e,s.iconBoxStartIndex,s.iconBoxEndIndex,s),this._addIconDebugCollisionBoxes(r,t,e,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s);}}getSymbolInstanceTextSize(t,e,r,n){const i=this.text.placedSymbolArray.get(e.rightJustifiedTextSymbolIndex>=0?e.rightJustifiedTextSymbolIndex:e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.leftJustifiedTextSymbolIndex>=0?e.leftJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex>=0?e.verticalPlacedTextSymbolIndex:n),s=xh(this.textSizeData,t,i)/yh;return this.tilePixelRatio*s}getSymbolInstanceIconSize(t,e,r){const n=this.icon.placedSymbolArray.get(r),i=xh(this.iconSizeData,t,n);return this.tilePixelRatio*i}_commitDebugCollisionVertexUpdate(t,e,r){t.emplaceBack(e,-r,-r),t.emplaceBack(e,r,-r),t.emplaceBack(e,r,r),t.emplaceBack(e,-r,r);}_updateTextDebugCollisionBoxes(t,e,r,n,i,s){for(let a=n;a<i;a++){const n=r.get(a),i=this.getSymbolInstanceTextSize(t,s,e,a);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,i,n.padding);}}_updateIconDebugCollisionBoxes(t,e,r,n,i,s){for(let a=n;a<i;a++){const n=r.get(a),i=this.getSymbolInstanceIconSize(t,e,s);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,i,n.padding);}}updateCollisionDebugBuffers(t,e){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const r=vh(this.iconSizeData,t),n=vh(this.textSizeData,t);for(let i=0;i<this.symbolInstances.length;i++){const s=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(n,t,e,s.textBoxStartIndex,s.textBoxEndIndex,s),this._updateTextDebugCollisionBoxes(n,t,e,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s),this._updateIconDebugCollisionBoxes(r,t,e,s.iconBoxStartIndex,s.iconBoxEndIndex,s.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(r,t,e,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s.placedIconSymbolIndex);}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt);}_deserializeCollisionBoxesForSymbol(t,e,r,n,i,s,a,o,l){const u={};if(e<r){const{x1:r,y1:n,x2:i,y2:s,padding:a,projectedAnchorX:o,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:h,tileAnchorY:p,featureIndex:f}=t.get(e);u.textBox={x1:r,y1:n,x2:i,y2:s,padding:a,projectedAnchorX:o,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:h,tileAnchorY:p},u.textFeatureIndex=f;}if(n<i){const{x1:e,y1:r,x2:i,y2:s,padding:a,projectedAnchorX:o,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:h,tileAnchorY:p,featureIndex:f}=t.get(n);u.verticalTextBox={x1:e,y1:r,x2:i,y2:s,padding:a,projectedAnchorX:o,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:h,tileAnchorY:p},u.verticalTextFeatureIndex=f;}if(s<a){const{x1:e,y1:r,x2:n,y2:i,padding:a,projectedAnchorX:o,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:h,tileAnchorY:p,featureIndex:f}=t.get(s);u.iconBox={x1:e,y1:r,x2:n,y2:i,padding:a,projectedAnchorX:o,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:h,tileAnchorY:p},u.iconFeatureIndex=f;}if(o<l){const{x1:e,y1:r,x2:n,y2:i,padding:s,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:h,tileAnchorY:p,featureIndex:f}=t.get(o);u.verticalIconBox={x1:e,y1:r,x2:n,y2:i,padding:s,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:h,tileAnchorY:p},u.verticalIconFeatureIndex=f;}return u}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){const r=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,r.textBoxStartIndex,r.textBoxEndIndex,r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex,r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex));}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){const r=t.placedSymbolArray.get(e),n=r.vertexStartIndex+4*r.numGlyphs;for(let e=r.vertexStartIndex;e<n;e+=4)t.indexArray.emplaceBack(e,e+1,e+2),t.indexArray.emplaceBack(e+1,e+2,e+3);}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const e=Math.sin(t),r=Math.cos(t),n=[],i=[],s=[];for(let t=0;t<this.symbolInstances.length;++t){s.push(t);const a=this.symbolInstances.get(t);n.push(0|Math.round(e*a.tileAnchorX+r*a.tileAnchorY)),i.push(a.featureIndex);}return s.sort(((t,e)=>n[t]-n[e]||i[e]-i[t])),s}addToSortKeyRanges(t,e){const r=this.sortKeyRanges[this.sortKeyRanges.length-1];r&&r.sortKey===e?r.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1});}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const t of this.symbolInstanceIndexes){const e=this.symbolInstances.get(t);this.featureSortOrder.push(e.featureIndex);const{rightJustifiedTextSymbolIndex:r,centerJustifiedTextSymbolIndex:n,leftJustifiedTextSymbolIndex:i,verticalPlacedTextSymbolIndex:s,placedIconSymbolIndex:a,verticalPlacedIconSymbolIndex:o}=e;r>=0&&this.addIndicesForPlacedSymbol(this.text,r),n>=0&&n!==r&&this.addIndicesForPlacedSymbol(this.text,n),i>=0&&i!==n&&i!==r&&this.addIndicesForPlacedSymbol(this.text,i),s>=0&&this.addIndicesForPlacedSymbol(this.text,s),a>=0&&this.addIndicesForPlacedSymbol(this.icon,a),o>=0&&this.addIndicesForPlacedSymbol(this.icon,o);}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray);}}}Oi(cd,\"SymbolBucket\",{omit:[\"layers\",\"collisionBoxArray\",\"features\",\"compareText\"]}),cd.MAX_GLYPHS=65535,cd.addDynamicAttributes=ad;const hd=new Js({\"symbol-placement\":new Ys(Ht.layout_symbol[\"symbol-placement\"]),\"symbol-spacing\":new Ys(Ht.layout_symbol[\"symbol-spacing\"]),\"symbol-avoid-edges\":new Ys(Ht.layout_symbol[\"symbol-avoid-edges\"]),\"symbol-sort-key\":new Hs(Ht.layout_symbol[\"symbol-sort-key\"]),\"symbol-z-order\":new Ys(Ht.layout_symbol[\"symbol-z-order\"]),\"icon-allow-overlap\":new Ys(Ht.layout_symbol[\"icon-allow-overlap\"]),\"icon-ignore-placement\":new Ys(Ht.layout_symbol[\"icon-ignore-placement\"]),\"icon-optional\":new Ys(Ht.layout_symbol[\"icon-optional\"]),\"icon-rotation-alignment\":new Ys(Ht.layout_symbol[\"icon-rotation-alignment\"]),\"icon-size\":new Hs(Ht.layout_symbol[\"icon-size\"]),\"icon-text-fit\":new Ys(Ht.layout_symbol[\"icon-text-fit\"]),\"icon-text-fit-padding\":new Ys(Ht.layout_symbol[\"icon-text-fit-padding\"]),\"icon-image\":new Hs(Ht.layout_symbol[\"icon-image\"]),\"icon-rotate\":new Hs(Ht.layout_symbol[\"icon-rotate\"]),\"icon-padding\":new Ys(Ht.layout_symbol[\"icon-padding\"]),\"icon-keep-upright\":new Ys(Ht.layout_symbol[\"icon-keep-upright\"]),\"icon-offset\":new Hs(Ht.layout_symbol[\"icon-offset\"]),\"icon-anchor\":new Hs(Ht.layout_symbol[\"icon-anchor\"]),\"icon-pitch-alignment\":new Ys(Ht.layout_symbol[\"icon-pitch-alignment\"]),\"text-pitch-alignment\":new Ys(Ht.layout_symbol[\"text-pitch-alignment\"]),\"text-rotation-alignment\":new Ys(Ht.layout_symbol[\"text-rotation-alignment\"]),\"text-field\":new Hs(Ht.layout_symbol[\"text-field\"]),\"text-font\":new Hs(Ht.layout_symbol[\"text-font\"]),\"text-size\":new Hs(Ht.layout_symbol[\"text-size\"]),\"text-max-width\":new Hs(Ht.layout_symbol[\"text-max-width\"]),\"text-line-height\":new Hs(Ht.layout_symbol[\"text-line-height\"]),\"text-letter-spacing\":new Hs(Ht.layout_symbol[\"text-letter-spacing\"]),\"text-justify\":new Hs(Ht.layout_symbol[\"text-justify\"]),\"text-radial-offset\":new Hs(Ht.layout_symbol[\"text-radial-offset\"]),\"text-variable-anchor\":new Ys(Ht.layout_symbol[\"text-variable-anchor\"]),\"text-anchor\":new Hs(Ht.layout_symbol[\"text-anchor\"]),\"text-max-angle\":new Ys(Ht.layout_symbol[\"text-max-angle\"]),\"text-writing-mode\":new Ys(Ht.layout_symbol[\"text-writing-mode\"]),\"text-rotate\":new Hs(Ht.layout_symbol[\"text-rotate\"]),\"text-padding\":new Ys(Ht.layout_symbol[\"text-padding\"]),\"text-keep-upright\":new Ys(Ht.layout_symbol[\"text-keep-upright\"]),\"text-transform\":new Hs(Ht.layout_symbol[\"text-transform\"]),\"text-offset\":new Hs(Ht.layout_symbol[\"text-offset\"]),\"text-allow-overlap\":new Ys(Ht.layout_symbol[\"text-allow-overlap\"]),\"text-ignore-placement\":new Ys(Ht.layout_symbol[\"text-ignore-placement\"]),\"text-optional\":new Ys(Ht.layout_symbol[\"text-optional\"])});var pd={paint:new Js({\"icon-opacity\":new Hs(Ht.paint_symbol[\"icon-opacity\"]),\"icon-color\":new Hs(Ht.paint_symbol[\"icon-color\"]),\"icon-halo-color\":new Hs(Ht.paint_symbol[\"icon-halo-color\"]),\"icon-halo-width\":new Hs(Ht.paint_symbol[\"icon-halo-width\"]),\"icon-halo-blur\":new Hs(Ht.paint_symbol[\"icon-halo-blur\"]),\"icon-translate\":new Ys(Ht.paint_symbol[\"icon-translate\"]),\"icon-translate-anchor\":new Ys(Ht.paint_symbol[\"icon-translate-anchor\"]),\"text-opacity\":new Hs(Ht.paint_symbol[\"text-opacity\"]),\"text-color\":new Hs(Ht.paint_symbol[\"text-color\"],{runtimeType:le,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),\"text-halo-color\":new Hs(Ht.paint_symbol[\"text-halo-color\"]),\"text-halo-width\":new Hs(Ht.paint_symbol[\"text-halo-width\"]),\"text-halo-blur\":new Hs(Ht.paint_symbol[\"text-halo-blur\"]),\"text-translate\":new Ys(Ht.paint_symbol[\"text-translate\"]),\"text-translate-anchor\":new Ys(Ht.paint_symbol[\"text-translate-anchor\"])}),layout:hd};class fd{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:ie,this.defaultValue=t;}evaluate(t){if(t.formattedSection){const e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression);}outputDefined(){return !1}serialize(){return null}}Oi(fd,\"FormatSectionOverride\",{omit:[\"defaultValue\"]});class dd extends bo{constructor(t){super(t,pd);}recalculate(t,e){super.recalculate(t,e),\"auto\"===this.layout.get(\"icon-rotation-alignment\")&&(this.layout._values[\"icon-rotation-alignment\"]=\"point\"!==this.layout.get(\"symbol-placement\")?\"map\":\"viewport\"),\"auto\"===this.layout.get(\"text-rotation-alignment\")&&(this.layout._values[\"text-rotation-alignment\"]=\"point\"!==this.layout.get(\"symbol-placement\")?\"map\":\"viewport\"),\"auto\"===this.layout.get(\"text-pitch-alignment\")&&(this.layout._values[\"text-pitch-alignment\"]=this.layout.get(\"text-rotation-alignment\")),\"auto\"===this.layout.get(\"icon-pitch-alignment\")&&(this.layout._values[\"icon-pitch-alignment\"]=this.layout.get(\"icon-rotation-alignment\"));const r=this.layout.get(\"text-writing-mode\");if(r){const t=[];for(const e of r)t.indexOf(e)<0&&t.push(e);this.layout._values[\"text-writing-mode\"]=t;}else this.layout._values[\"text-writing-mode\"]=\"point\"===this.layout.get(\"symbol-placement\")?[\"horizontal\"]:[\"horizontal\",\"vertical\"];this._setPaintOverrides();}getValueAndResolveTokens(t,e,r,n){const i=this.layout.get(t).evaluate(e,{},r,n),s=this._unevaluatedLayout._values[t];return s.isDataDriven()||Nn(s.value)||!i?i:function(t,e){return e.replace(/{([^{}]+)}/g,((e,r)=>r in t?String(t[r]):\"\"))}(e.properties,i)}createBucket(t){return new cd(t)}queryRadius(){return 0}queryIntersectsFeature(){return !1}_setPaintOverrides(){for(const t of pd.paint.overridableProperties){if(!dd.hasPaintOverride(this.layout,t))continue;const e=this.paint.get(t),r=new fd(e),n=new qn(r,e.property.specification);let i=null;i=\"constant\"===e.value.kind||\"source\"===e.value.kind?new Xn(\"source\",n):new Zn(\"composite\",n,e.value.zoomStops,e.value._interpolationType),this.paint._values[t]=new Zs(e.property,i,e.parameters);}}_handleOverridablePaintPropertyUpdate(t,e,r){return !(!this.layout||e.isDataDriven()||r.isDataDriven())&&dd.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){const r=t.get(\"text-field\"),n=pd.paint.properties[e];let i=!1;const s=t=>{for(const e of t)if(n.overrides&&n.overrides.hasOverride(e))return void(i=!0)};if(\"constant\"===r.value.kind&&r.value.value instanceof Be)s(r.value.value.sections);else if(\"source\"===r.value.kind){const t=e=>{i||(e instanceof Fe&&De(e.value)===pe?s(e.value.sections):e instanceof Oe?s(e.sections):e.eachChild(t));},e=r.value;e._styleExpression&&t(e._styleExpression.expression);}return i}getProgramConfiguration(t){return new ho(this,t)}}var yd={paint:new Js({\"background-color\":new Ys(Ht.paint_background[\"background-color\"]),\"background-pattern\":new Ys(Ht.paint_background[\"background-pattern\"]),\"background-opacity\":new Ys(Ht.paint_background[\"background-opacity\"])})},md={paint:new Js({\"raster-opacity\":new Ys(Ht.paint_raster[\"raster-opacity\"]),\"raster-hue-rotate\":new Ys(Ht.paint_raster[\"raster-hue-rotate\"]),\"raster-brightness-min\":new Ys(Ht.paint_raster[\"raster-brightness-min\"]),\"raster-brightness-max\":new Ys(Ht.paint_raster[\"raster-brightness-max\"]),\"raster-saturation\":new Ys(Ht.paint_raster[\"raster-saturation\"]),\"raster-contrast\":new Ys(Ht.paint_raster[\"raster-contrast\"]),\"raster-resampling\":new Ys(Ht.paint_raster[\"raster-resampling\"]),\"raster-fade-duration\":new Ys(Ht.paint_raster[\"raster-fade-duration\"])})};class gd extends bo{constructor(t){super(t,{}),this.implementation=t;}is3D(){return \"3d\"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return !1}serialize(){}onAdd(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl);}onRemove(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl);}}var xd={paint:new Js({\"sky-type\":new Ys(Ht.paint_sky[\"sky-type\"]),\"sky-atmosphere-sun\":new Ys(Ht.paint_sky[\"sky-atmosphere-sun\"]),\"sky-atmosphere-sun-intensity\":new Ys(Ht.paint_sky[\"sky-atmosphere-sun-intensity\"]),\"sky-gradient-center\":new Ys(Ht.paint_sky[\"sky-gradient-center\"]),\"sky-gradient-radius\":new Ys(Ht.paint_sky[\"sky-gradient-radius\"]),\"sky-gradient\":new Ws(Ht.paint_sky[\"sky-gradient\"]),\"sky-atmosphere-halo-color\":new Ys(Ht.paint_sky[\"sky-atmosphere-halo-color\"]),\"sky-atmosphere-color\":new Ys(Ht.paint_sky[\"sky-atmosphere-color\"]),\"sky-opacity\":new Ys(Ht.paint_sky[\"sky-opacity\"])})};function vd(t,e,r){const n=[0,0,1],i=Ql([]);return eu(i,i,r?-x(t)+Math.PI:x(t)),tu(i,i,-x(e)),Nl(n,n,i),Ul(n,n)}const bd={circle:class extends bo{constructor(t){super(t,dl);}createBucket(t){return new Ho(t)}queryRadius(t){const e=t;return ul(\"circle-radius\",this,e)+ul(\"circle-stroke-width\",this,e)+cl(this.paint.get(\"circle-translate\"))}queryIntersectsFeature(t,e,r,n,i,s,a,o){const l=pl(this.paint.get(\"circle-translate\"),this.paint.get(\"circle-translate-anchor\"),s.angle,t.pixelToTileUnitsFactor),u=this.paint.get(\"circle-radius\").evaluate(e,r)+this.paint.get(\"circle-stroke-width\").evaluate(e,r);return ou(t,n,s,a,o,\"map\"===this.paint.get(\"circle-pitch-alignment\"),\"map\"===this.paint.get(\"circle-pitch-scale\"),l,u)}getProgramIds(){return [\"circle\"]}getProgramConfiguration(t){return new ho(this,t)}},heatmap:class extends bo{createBucket(t){return new pu(t)}constructor(t){super(t,xu),this._updateColorRamp();}_handleSpecialPaintPropertyUpdate(t){\"heatmap-color\"===t&&this._updateColorRamp();}_updateColorRamp(){this.colorRamp=vu({expression:this._transitionablePaint._values[\"heatmap-color\"].value.expression,evaluationKey:\"heatmapDensity\",image:this.colorRamp}),this.colorRampTexture=null;}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null);}queryRadius(t){return ul(\"heatmap-radius\",this,t)}queryIntersectsFeature(t,e,r,n,i,s,a,o){const l=this.paint.get(\"heatmap-radius\").evaluate(e,r);return ou(t,n,s,a,o,!0,!0,new d(0,0),l)}hasOffscreenPass(){return 0!==this.paint.get(\"heatmap-opacity\")&&\"none\"!==this.visibility}getProgramIds(){return [\"heatmap\",\"heatmapTexture\"]}getProgramConfiguration(t){return new ho(this,t)}},hillshade:class extends bo{constructor(t){super(t,bu);}hasOffscreenPass(){return 0!==this.paint.get(\"hillshade-exaggeration\")&&\"none\"!==this.visibility}getProgramIds(){return [\"hillshade\",\"hillshadePrepare\"]}},fill:class extends bo{constructor(t){super(t,ac);}getProgramIds(){const t=this.paint.get(\"fill-pattern\"),e=t&&t.constantOr(1),r=[e?\"fillPattern\":\"fill\"];return this.paint.get(\"fill-antialias\")&&r.push(e&&!this.getPaintProperty(\"fill-outline-color\")?\"fillOutlinePattern\":\"fillOutline\"),r}getProgramConfiguration(t){return new ho(this,t)}recalculate(t,e){super.recalculate(t,e);const r=this.paint._values[\"fill-outline-color\"];\"constant\"===r.value.kind&&void 0===r.value.value&&(this.paint._values[\"fill-outline-color\"]=this.paint._values[\"fill-color\"]);}createBucket(t){return new ic(t)}queryRadius(){return cl(this.paint.get(\"fill-translate\"))}queryIntersectsFeature(t,e,r,n,i,s){return !t.queryGeometry.isAboveHorizon&&Qo(hl(t.tilespaceGeometry,this.paint.get(\"fill-translate\"),this.paint.get(\"fill-translate-anchor\"),s.angle,t.pixelToTileUnitsFactor),n)}isTileClipped(){return !0}},\"fill-extrusion\":class extends bo{constructor(t){super(t,$c);}createBucket(t){return new Ec(t)}queryRadius(){return cl(this.paint.get(\"fill-extrusion-translate\"))}is3D(){return !0}getProgramIds(){return [this.paint.get(\"fill-extrusion-pattern\").constantOr(1)?\"fillExtrusionPattern\":\"fillExtrusion\"]}getProgramConfiguration(t){return new ho(this,t)}queryIntersectsFeature(t,e,r,n,i,s,a,o,l){const u=pl(this.paint.get(\"fill-extrusion-translate\"),this.paint.get(\"fill-extrusion-translate-anchor\"),s.angle,t.pixelToTileUnitsFactor),c=this.paint.get(\"fill-extrusion-height\").evaluate(e,r),h=this.paint.get(\"fill-extrusion-base\").evaluate(e,r),p=[0,0],f=o&&s.elevation,y=s.elevation?s.elevation.exaggeration():1,m=t.tile.getBucket(this);if(f&&m instanceof Ec){const t=m.centroidVertexArray,e=l+1;e<t.length&&(p[0]=t.geta_centroid_pos0(e),p[1]=t.geta_centroid_pos1(e));}if(0===p[0]&&1===p[1])return !1;\"globe\"===s.projection.name&&(n=jc([n],[new d(0,0),new d(So,So)],t.tileID.canonical).map((t=>t.polygon)).flat());const g=f?o:null,[x,v]=function(t,e,r,n,i,s,a,o,l,u,c){return \"globe\"===t.projection.name?function(t,e,r,n,i,s,a,o,l,u,c){const h=[],p=[],f=t.projection.upVectorScale(c,t.center.lat,t.worldSize).metersToTile,d=[0,0,0,1],y=[0,0,0,1],m=(t,e,r,n)=>{t[0]=e,t[1]=r,t[2]=n,t[3]=1;},g=Rc();r>0&&(r+=g),n+=g;for(const g of e){const e=[],x=[];for(const h of g){const p=h.x+i.x,g=h.y+i.y,v=t.projection.projectTilePoint(p,g,c),b=t.projection.upVector(c,h.x,h.y);let w=r,_=n;if(a){const t=Hc(p,g,r,n,a,o,l,u);w+=t.base,_+=t.top;}0!==r?m(d,v.x+b[0]*f*w,v.y+b[1]*f*w,v.z+b[2]*f*w):m(d,v.x,v.y,v.z),m(y,v.x+b[0]*f*_,v.y+b[1]*f*_,v.z+b[2]*f*_),ql(d,d,s),ql(y,y,s),e.push(new Zc(d[0],d[1],d[2])),x.push(new Zc(y[0],y[1],y[2]));}h.push(e),p.push(x);}return [h,p]}(t,e,r,n,i,s,a,o,l,u,c):a?function(t,e,r,n,i,s,a,o,l){const u=[],c=[],h=[0,0,0,1];for(const p of t){const t=[],f=[];for(const u of p){const c=u.x+n.x,p=u.y+n.y,d=Hc(c,p,e,r,s,a,o,l);h[0]=c,h[1]=p,h[2]=d.base,h[3]=1,Wl(h,h,i),h[3]=Math.max(h[3],1e-5);const y=new Zc(h[0]/h[3],h[1]/h[3],h[2]/h[3]);h[0]=c,h[1]=p,h[2]=d.top,h[3]=1,Wl(h,h,i),h[3]=Math.max(h[3],1e-5);const m=new Zc(h[0]/h[3],h[1]/h[3],h[2]/h[3]);t.push(y),f.push(m);}u.push(t),c.push(f);}return [u,c]}(e,r,n,i,s,a,o,l,u):function(t,e,r,n,i){const s=[],a=[],o=i[8]*e,l=i[9]*e,u=i[10]*e,c=i[11]*e,h=i[8]*r,p=i[9]*r,f=i[10]*r,d=i[11]*r;for(const e of t){const t=[],r=[];for(const s of e){const e=s.x+n.x,a=s.y+n.y,y=i[0]*e+i[4]*a+i[12],m=i[1]*e+i[5]*a+i[13],g=i[2]*e+i[6]*a+i[14],x=i[3]*e+i[7]*a+i[15],v=y+o,b=m+l,w=g+u,_=Math.max(x+c,1e-5),A=y+h,S=m+p,k=g+f,I=Math.max(x+d,1e-5);t.push(new Zc(v/_,b/_,w/_)),r.push(new Zc(A/I,S/I,k/I));}s.push(t),a.push(r);}return [s,a]}(e,r,n,i,s)}(s,n,h,c,u,a,g,p,y,s.center.lat,t.tileID.canonical),b=t.queryGeometry;return function(t,e,r){let n=1/0;Qo(r,e)&&(n=Yc(r,e[0]));for(let i=0;i<e.length;i++){const s=e[i],a=t[i];for(let t=0;t<s.length-1;t++){const e=s[t],i=[e,s[t+1],a[t+1],a[t],e];Wo(r,i)&&(n=Math.min(n,Yc(r,i)));}}return n!==1/0&&n}(x,v,b.isPointQuery()?b.screenBounds:b.screenGeometry)}},line:class extends bo{constructor(t){super(t,sh),this.gradientVersion=0;}_handleSpecialPaintPropertyUpdate(t){if(\"line-gradient\"===t){const t=this._transitionablePaint._values[\"line-gradient\"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof Ir,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER;}}gradientExpression(){return this._transitionablePaint._values[\"line-gradient\"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values[\"line-floorwidth\"]=ah.possiblyEvaluate(this._transitioningPaint._values[\"line-width\"].value,t);}createBucket(t){return new nh(t)}getProgramIds(){return [this.paint.get(\"line-pattern\").constantOr(1)?\"linePattern\":\"line\"]}getProgramConfiguration(t){return new ho(this,t)}queryRadius(t){const e=t,r=oh(ul(\"line-width\",this,e),ul(\"line-gap-width\",this,e)),n=ul(\"line-offset\",this,e);return r/2+Math.abs(n)+cl(this.paint.get(\"line-translate\"))}queryIntersectsFeature(t,e,r,n,i,s){if(t.queryGeometry.isAboveHorizon)return !1;const a=hl(t.tilespaceGeometry,this.paint.get(\"line-translate\"),this.paint.get(\"line-translate-anchor\"),s.angle,t.pixelToTileUnitsFactor),o=t.pixelToTileUnitsFactor/2*oh(this.paint.get(\"line-width\").evaluate(e,r),this.paint.get(\"line-gap-width\").evaluate(e,r)),l=this.paint.get(\"line-offset\").evaluate(e,r);return l&&(n=function(t,e){const r=[],n=new d(0,0);for(let i=0;i<t.length;i++){const s=t[i],a=[];for(let t=0;t<s.length;t++){const r=s[t-1],i=s[t],o=s[t+1],l=0===t?n:i.sub(r)._unit()._perp(),u=t===s.length-1?n:o.sub(i)._unit()._perp(),c=l._add(u)._unit();c._mult(1/(c.x*u.x+c.y*u.y)),a.push(c._mult(e)._add(i));}r.push(a);}return r}(n,l*t.pixelToTileUnitsFactor)),function(t,e,r){for(let n=0;n<e.length;n++){const i=e[n];if(t.length>=3)for(let e=0;e<i.length;e++)if(al(t,i[e]))return !0;if(tl(t,i,r))return !0}return !1}(a,n,o)}isTileClipped(){return !0}},symbol:dd,background:class extends bo{constructor(t){super(t,yd);}getProgramIds(){return [this.paint.get(\"background-pattern\")?\"backgroundPattern\":\"background\"]}},raster:class extends bo{constructor(t){super(t,md);}getProgramIds(){return [\"raster\"]}},sky:class extends bo{constructor(t){super(t,xd),this._updateColorRamp();}_handleSpecialPaintPropertyUpdate(t){\"sky-gradient\"===t?this._updateColorRamp():\"sky-atmosphere-sun\"!==t&&\"sky-atmosphere-halo-color\"!==t&&\"sky-atmosphere-color\"!==t&&\"sky-atmosphere-sun-intensity\"!==t||(this._skyboxInvalidated=!0);}_updateColorRamp(){this.colorRamp=vu({expression:this._transitionablePaint._values[\"sky-gradient\"].value.expression,evaluationKey:\"skyRadialProgress\"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null);}needsSkyboxCapture(t){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return !0;if(!this.paint.get(\"sky-atmosphere-sun\")){const e=t.style.light.properties.get(\"position\");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return !1}getCenter(t,e){if(\"atmosphere\"===this.paint.get(\"sky-type\")){const r=this.paint.get(\"sky-atmosphere-sun\"),n=!r,i=t.style.light,s=i.properties.get(\"position\");return n&&\"viewport\"===i.properties.get(\"anchor\")&&$(\"The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly.\"),n?vd(s.azimuthal,90-s.polar,e):vd(r[0],90-r[1],e)}const r=this.paint.get(\"sky-gradient-center\");return vd(r[0],90-r[1],e)}is3D(){return !1}isSky(){return !0}markSkyboxValid(t){this._skyboxInvalidated=!1,this._lightPosition=t.style.light.properties.get(\"position\");}hasOffscreenPass(){return !0}getProgramIds(){const t=this.paint.get(\"sky-type\");return \"atmosphere\"===t?[\"skyboxCapture\",\"skybox\"]:\"gradient\"===t?[\"skyboxGradient\"]:null}}};class wd{constructor(t,e,r,n){this.context=t,this.format=r,this.texture=t.gl.createTexture(),this.update(e,n);}update(t,r,n){const{width:i,height:s}=t,{context:a}=this,{gl:o}=a,{HTMLImageElement:l,HTMLCanvasElement:u,HTMLVideoElement:c,ImageData:h,ImageBitmap:p}=e;if(o.bindTexture(o.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===o.RGBA&&(!r||!1!==r.premultiply)),n||this.size&&this.size[0]===i&&this.size[1]===s){const{x:e,y:r}=n||{x:0,y:0};t instanceof l||t instanceof u||t instanceof c||t instanceof h||p&&t instanceof p?o.texSubImage2D(o.TEXTURE_2D,0,e,r,o.RGBA,o.UNSIGNED_BYTE,t):o.texSubImage2D(o.TEXTURE_2D,0,e,r,i,s,o.RGBA,o.UNSIGNED_BYTE,t.data);}else this.size=[i,s],t instanceof l||t instanceof u||t instanceof c||t instanceof h||p&&t instanceof p?o.texImage2D(o.TEXTURE_2D,0,this.format,this.format,o.UNSIGNED_BYTE,t):o.texImage2D(o.TEXTURE_2D,0,this.format,i,s,0,this.format,o.UNSIGNED_BYTE,t.data);this.useMipmap=Boolean(r&&r.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&o.generateMipmap(o.TEXTURE_2D);}bind(t,e){const{context:r}=this,{gl:n}=r;n.bindTexture(n.TEXTURE_2D,this.texture),t!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.useMipmap?t===n.NEAREST?n.NEAREST_MIPMAP_NEAREST:n.LINEAR_MIPMAP_NEAREST:t),this.filter=t),e!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e),this.wrap=e);}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null;}}class _d{constructor(t){this._callback=t,this._triggered=!1,\"undefined\"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback();});}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback();}),0));}remove(){this._channel=void 0,this._callback=()=>{};}}class Ad{constructor(){this.tasks={},this.taskQueue=[],V([\"process\"],this),this.invoker=new _d(this.process),this.nextId=0;}add(t,e){const r=this.nextId++,n=function({type:t,isSymbolTile:e,zoom:r}){return r=r||0,\"message\"===t?0:\"maybePrepare\"!==t||e?\"parseTile\"!==t||e?\"parseTile\"===t&&e?300-r:\"maybePrepare\"===t&&e?400-r:500:200-r:100-r}(e);if(0===n){N();try{t();}finally{}return {cancel:()=>{}}}return this.tasks[r]={fn:t,metadata:e,priority:n,id:r},this.taskQueue.push(r),this.invoker.trigger(),{cancel:()=>{delete this.tasks[r];}}}process(){N();try{if(this.taskQueue=this.taskQueue.filter((t=>!!this.tasks[t])),!this.taskQueue.length)return;const t=this.pick();if(null===t)return;const e=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!e)return;e.fn();}finally{}}pick(){let t=null,e=1/0;for(let r=0;r<this.taskQueue.length;r++){const n=this.tasks[this.taskQueue[r]];n.priority<e&&(e=n.priority,t=r);}if(null===t)return null;const r=this.taskQueue[t];return this.taskQueue.splice(t,1),r}remove(){this.invoker.remove();}}class Sd{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){const r=t[e];this._stringToNumber[r]=e,this._numberToString[e]=r;}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}const kd=[\"tile\",\"layer\",\"source\",\"sourceLayer\",\"state\"];class Id{constructor(t,e,r,n,i){this.type=\"Feature\",this._vectorTileFeature=t,this._z=e,this._x=r,this._y=n,this.properties=t.properties,this.id=i;}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(t){this._geometry=t;}toJSON(){const t={type:\"Feature\",geometry:this.geometry,properties:this.properties};void 0!==this.id&&(t.id=this.id);for(const e of kd)void 0!==this[e]&&(t[e]=this[e]);return t}}const Md=32,Td=33,zd=new Uint16Array(8184);for(let t=0;t<2046;t++){let e=t+2,r=0,n=0,i=0,s=0,a=0,o=0;for(1&e?i=s=a=Md:r=n=o=Md;(e>>=1)>1;){const t=r+i>>1,l=n+s>>1;1&e?(i=r,s=n,r=a,n=o):(r=i,n=s,i=a,s=o),a=t,o=l;}const l=4*t;zd[l+0]=r,zd[l+1]=n,zd[l+2]=i,zd[l+3]=s;}const Bd=new Uint16Array(2178),Ed=new Uint8Array(1089),Cd=new Uint16Array(1089);function Pd(t){return 0===t?-.03125:32===t?.03125:0}var Dd=na([{name:\"a_pos\",type:\"Int16\",components:2},{name:\"a_texture_pos\",type:\"Int16\",components:2}]);const Vd={type:2,extent:So,loadGeometry:()=>[[new d(0,0),new d(8193,0),new d(8193,8193),new d(0,8193),new d(0,0)]]};class Ld{constructor(t,e,r,n,i){this.tileID=t,this.uid=E(),this.uses=0,this.tileSize=e,this.tileZoom=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=i,this.expiredRequestCount=0,this.state=\"loading\",n&&n.transform&&(this.projection=n.transform.projection);}registerFadeDuration(t){const e=t+this.timeAdded;e<Nt.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e);}wasRequested(){return \"errored\"===this.state||\"loaded\"===this.state||\"reloading\"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Df(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(t,e,r){if(this.unloadVectorData(),this.state=\"loaded\",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){const r={};if(!e)return r;for(const n of t){const t=n.layerIds.map((t=>e.getLayer(t))).filter(Boolean);if(0!==t.length){n.layers=t,n.stateDependentLayerIds&&(n.stateDependentLayers=n.stateDependentLayerIds.map((e=>t.filter((t=>t.id===e))[0])));for(const e of t)r[e.id]=n;}}return r}(t.buckets,e.style),this.hasSymbolBuckets=!1;for(const t in this.buckets){const e=this.buckets[t];if(e instanceof cd){if(this.hasSymbolBuckets=!0,!r)break;e.justReloaded=!0;}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const t in this.buckets){const e=this.buckets[t];if(e instanceof cd&&e.hasRTLText){this.hasRTLText=!0,js.isLoading()||js.isLoaded()||\"deferred\"!==Fs()||Rs();break}}this.queryPadding=0;for(const t in this.buckets){const r=this.buckets[t];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(t).queryRadius(r));}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),t.lineAtlas&&(this.lineAtlas=t.lineAtlas);}else this.collisionBoxArray=new Ea;}unloadVectorData(){if(this.hasData()){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state=\"unloaded\";}}getBucket(t){return this.buckets[t.id]}upload(t){for(const e in this.buckets){const r=this.buckets[e];r.uploadPending()&&r.upload(t);}const e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new wd(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new wd(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new wd(t,this.lineAtlas.image,e.ALPHA),this.lineAtlas.uploaded=!0);}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture);}queryRenderedFeatures(t,e,r,n,i,s,a,o){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:n,pixelPosMatrix:a,transform:s,params:i,tileTransform:this.tileTransform},t,e,r):{}}querySourceFeatures(t,e){const r=this.latestFeatureIndex;if(!r||!r.rawTileData)return;const n=r.loadVTLayers(),i=e?e.sourceLayer:\"\",s=n._geojsonTileLayer||n[i];if(!s)return;const a=ai(e&&e.filter),{z:o,x:l,y:u}=this.tileID.canonical,c={z:o,x:l,y:u};for(let e=0;e<s.length;e++){const n=s.feature(e);if(a.needGeometry){const t=Zo(n,!0);if(!a.filter(new Us(this.tileID.overscaledZ),t,this.tileID.canonical))continue}else if(!a.filter(new Us(this.tileID.overscaledZ),n))continue;const h=r.getId(n,i),p=new Id(n,o,l,u,h);p.tile=c,t.push(p);}}hasData(){return \"loaded\"===this.state||\"reloading\"===this.state||\"expired\"===this.state}patternsLoaded(){return !!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const e=this.expirationTime;if(t.cacheControl){const e=G(t.cacheControl);e[\"max-age\"]&&(this.expirationTime=Date.now()+1e3*e[\"max-age\"]);}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const t=Date.now();let r=!1;if(this.expirationTime>t)r=!1;else if(e)if(this.expirationTime<e)r=!0;else {const n=this.expirationTime-e;n?this.expirationTime=t+Math.max(n,3e4):r=!0;}else r=!0;r?(this.expiredRequestCount++,this.state=\"expired\"):this.expiredRequestCount=0;}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,e){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length||!e)return;const r=this.latestFeatureIndex.loadVTLayers(),n=e.style.listImages();for(const i in this.buckets){if(!e.style.hasLayer(i))continue;const s=this.buckets[i],a=s.layers[0].sourceLayer||\"_geojsonTileLayer\",o=r[a],l=t[a];if(!o||!l||0===Object.keys(l).length)continue;if(s.update(l,o,n,this.imageAtlas&&this.imageAtlas.patternPositions||{}),s instanceof nh||s instanceof ic){const t=e.style._getSourceCache(s.layers[0].source);e._terrain&&e._terrain.enabled&&t&&s.programConfigurations.needsUpload&&e._terrain._clearRenderCacheForTile(t.id,this.tileID);}const u=e&&e.style&&e.style.getLayer(i);u&&(this.queryPadding=Math.max(this.queryPadding,u.queryRadius(s)));}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return !this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Nt.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0;}setHoldDuration(t){this.symbolFadeHoldUntil=Nt.now()+t;}setTexture(t,e){const r=e.context,n=r.gl;this.texture=this.texture||e.getTileTexture(t.width),this.texture?this.texture.update(t,{useMipmap:!0}):(this.texture=new wd(r,t,n.RGBA,{useMipmap:!0}),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),r.extTextureFilterAnisotropic&&n.texParameterf(n.TEXTURE_2D,r.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,r.extTextureFilterAnisotropicMax));}setDependencies(t,e){const r={};for(const t of e)r[t]=!0;this.dependencies[t]=r;}hasDependency(t,e){for(const r of t){const t=this.dependencies[r];if(t)for(const r of e)if(t[r])return !0}return !1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(t,e){if(!e||\"mercator\"===e.name||this._tileDebugBuffer)return;const r=Xo(Vd,this.tileID.canonical,this.tileTransform)[0],n=new sa,i=new Ta;for(let t=0;t<r.length;t++){const{x:e,y:s}=r[t];n.emplaceBack(e,s),i.emplaceBack(t);}i.emplaceBack(0),this._tileDebugIndexBuffer=t.createIndexBuffer(i),this._tileDebugBuffer=t.createVertexBuffer(n,tf.members),this._tileDebugSegments=Ao.simpleSegment(0,0,n.length,i.length);}_makeTileBoundsBuffers(t,e){if(this._tileBoundsBuffer||!e||\"mercator\"===e.name)return;const r=Xo(Vd,this.tileID.canonical,this.tileTransform)[0];let n,i;if(this.isRaster){const t=function(t,e){const r=Df(t,e),n=Math.pow(2,t.z);for(let i=0;i<Td;i++)for(let s=0;s<Td;s++){const a=Po((t.x+(s+Pd(s))/Md)/n),o=Do((t.y+(i+Pd(i))/Md)/n),l=e.project(a,o),u=i*Td+s;Bd[2*u+0]=Math.round((l.x*r.scale-r.x)*So),Bd[2*u+1]=Math.round((l.y*r.scale-r.y)*So);}Ed.fill(0),Cd.fill(0);for(let t=2045;t>=0;t--){const e=4*t,r=zd[e+0],n=zd[e+1],i=zd[e+2],s=zd[e+3],a=r+i>>1,o=n+s>>1,l=a+o-n,u=o+r-a,c=n*Td+r,h=s*Td+i,p=o*Td+a,f=Math.hypot((Bd[2*c+0]+Bd[2*h+0])/2-Bd[2*p+0],(Bd[2*c+1]+Bd[2*h+1])/2-Bd[2*p+1])>=16;if(Ed[p]=Ed[p]||(f?1:0),t<1022){const t=(n+u>>1)*Td+(r+l>>1),e=(s+u>>1)*Td+(i+l>>1);Ed[p]=Ed[p]||Ed[t]||Ed[e];}}const i=new oa,s=new wa;let a=0;function o(t,e){const r=e*Td+t;return 0===Cd[r]&&(i.emplaceBack(Bd[2*r+0],Bd[2*r+1],t*So/Md,e*So/Md),Cd[r]=++a),Cd[r]-1}function l(t,e,r,n,i,a){const u=t+r>>1,c=e+n>>1;if(Math.abs(t-i)+Math.abs(e-a)>1&&Ed[c*Td+u])l(i,a,t,e,u,c),l(r,n,i,a,u,c);else {const l=o(t,e),u=o(r,n),c=o(i,a);s.emplaceBack(l,u,c);}}return l(0,0,Md,Md,Md,0),l(Md,Md,0,0,0,Md),{vertices:i,indices:s}}(this.tileID.canonical,e);n=t.vertices,i=t.indices;}else {n=new oa,i=new wa;for(const{x:t,y:e}of r)n.emplaceBack(t,e,0,0);const t=Au.exports(n.int16,void 0,4);for(let e=0;e<t.length;e+=3)i.emplaceBack(t[e],t[e+1],t[e+2]);}this._tileBoundsBuffer=t.createVertexBuffer(n,Dd.members),this._tileBoundsIndexBuffer=t.createIndexBuffer(i),this._tileBoundsSegments=Ao.simpleSegment(0,0,n.length,i.length);}_makeGlobeTileDebugBuffers(t,e){const r=e.projection;if(!r||\"globe\"!==r.name||e.freezeTileCoverage)return;const n=this.tileID.canonical,i=Sf(df(n,e)),s=Mf(e.zoom);let a;s>0&&(a=bl(new Float64Array(16),e.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(t,n,e,i,a,s),this._makeGlobeTileDebugTextBuffer(t,n,e,i,a,s);}_globePoint(t,e,r,n,i,s,a){let o=wf(t,e,r);if(s){const i=1<<r.z,l=Bo(n.center.lng),u=Eo(n.center.lat),c=(r.x+.5)/i-l;let h=0;c>.5?h=-1:c<-.5&&(h=1);let p=(t/So+r.x)/i+h,f=(e/So+r.y)/i;p=(p-l)*n._pixelsPerMercatorPixel+l,f=(f-u)*n._pixelsPerMercatorPixel+u;const d=[p*n.worldSize,f*n.worldSize,0];ql(d,d,s),o=ff(o,d,a);}return ql(o,o,i)}_makeGlobeTileDebugBorderBuffer(t,e,r,n,i,s){const a=new sa,o=new Ta,l=new aa,u=(t,u,c,h,p)=>{const f=(c-t)/(p-1),d=(h-u)/(p-1),y=a.length;for(let c=0;c<p;c++){const h=t+c*f,p=u+c*d;a.emplaceBack(h,p);const m=this._globePoint(h,p,e,r,n,i,s);l.emplaceBack(m[0],m[1],m[2]),o.emplaceBack(y+c);}},c=So;u(0,0,c,0,16),u(c,0,c,c,16),u(c,c,0,c,16),u(0,c,0,0,16),this._tileDebugIndexBuffer=t.createIndexBuffer(o),this._tileDebugBuffer=t.createVertexBuffer(a,tf.members),this._globeTileDebugBorderBuffer=t.createVertexBuffer(l,Qp.members),this._tileDebugSegments=Ao.simpleSegment(0,0,a.length,o.length);}_makeGlobeTileDebugTextBuffer(t,e,r,n,i,s){const a=new sa,o=new wa,l=new aa,u=25;o.reserve(32),a.reserve(u),l.reserve(u);const c=(t,e)=>u*t+e;for(let t=0;t<u;t++){const o=2048*t;for(let t=0;t<u;t++){const u=2048*t;a.emplaceBack(u,o);const c=this._globePoint(u,o,e,r,n,i,s);l.emplaceBack(c[0],c[1],c[2]);}}for(let t=0;t<4;t++)for(let e=0;e<4;e++){const r=c(t,e),n=c(t,e+1),i=c(t+1,e),s=c(t+1,e+1);o.emplaceBack(r,n,i),o.emplaceBack(i,n,s);}this._tileDebugTextIndexBuffer=t.createIndexBuffer(o),this._tileDebugTextBuffer=t.createVertexBuffer(a,tf.members),this._globeTileDebugTextBuffer=t.createVertexBuffer(l,Qp.members),this._tileDebugTextSegments=Ao.simpleSegment(0,0,u,32);}}class Fd{constructor(){this.state={},this.stateChanges={},this.deletedStates={};}updateState(t,e,r){const n=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][n]=this.stateChanges[t][n]||{},z(this.stateChanges[t][n],r),null===this.deletedStates[t]){this.deletedStates[t]={};for(const e in this.state[t])e!==n&&(this.deletedStates[t][e]=null);}else if(this.deletedStates[t]&&null===this.deletedStates[t][n]){this.deletedStates[t][n]={};for(const e in this.state[t][n])r[e]||(this.deletedStates[t][n][e]=null);}else for(const e in r)this.deletedStates[t]&&this.deletedStates[t][n]&&null===this.deletedStates[t][n][e]&&delete this.deletedStates[t][n][e];}removeFeatureState(t,e,r){if(null===this.deletedStates[t])return;const n=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},r&&void 0!==e)null!==this.deletedStates[t][n]&&(this.deletedStates[t][n]=this.deletedStates[t][n]||{},this.deletedStates[t][n][r]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][n])for(r in this.deletedStates[t][n]={},this.stateChanges[t][n])this.deletedStates[t][n][r]=null;else this.deletedStates[t][n]=null;else this.deletedStates[t]=null;}getState(t,e){const r=String(e),n=z({},(this.state[t]||{})[r],(this.stateChanges[t]||{})[r]);if(null===this.deletedStates[t])return {};if(this.deletedStates[t]){const r=this.deletedStates[t][e];if(null===r)return {};for(const t in r)delete n[t];}return n}initializeTileState(t,e){t.setFeatureState(this.state,e);}coalesceChanges(t,e){const r={};for(const t in this.stateChanges){this.state[t]=this.state[t]||{};const e={};for(const r in this.stateChanges[t])this.state[t][r]||(this.state[t][r]={}),z(this.state[t][r],this.stateChanges[t][r]),e[r]=this.state[t][r];r[t]=e;}for(const t in this.deletedStates){this.state[t]=this.state[t]||{};const e={};if(null===this.deletedStates[t])for(const r in this.state[t])e[r]={},this.state[t][r]={};else for(const r in this.deletedStates[t]){if(null===this.deletedStates[t][r])this.state[t][r]={};else for(const e of Object.keys(this.deletedStates[t][r]))delete this.state[t][r][e];e[r]=this.state[t][r];}r[t]=r[t]||{},z(r[t],e);}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(const n in t)t[n].setFeatureState(r,e);}}class Rd{constructor(t){this.size=t,this.minimums=[],this.maximums=[],this.leaves=[];}getElevation(t,e){const r=this.toIdx(t,e);return {min:this.minimums[r],max:this.maximums[r]}}isLeaf(t,e){return this.leaves[this.toIdx(t,e)]}toIdx(t,e){return e*this.size+t}}function jd(t,e,r,n){let i=0,s=Number.MAX_VALUE;for(let a=0;a<3;a++)if(Math.abs(n[a])<1e-15){if(r[a]<t[a]||r[a]>e[a])return null}else {const o=1/n[a];let l=(t[a]-r[a])*o,u=(e[a]-r[a])*o;if(l>u){const t=l;l=u,u=t;}if(l>i&&(i=l),u<s&&(s=u),i>s)return null}return i}function Ud(t,e,r,n,i,s,a,o,l,u,c){const h=n-t,p=i-e,f=s-r,d=a-t,y=o-e,m=l-r,g=c[1]*m-c[2]*y,x=c[2]*d-c[0]*m,v=c[0]*y-c[1]*d,b=h*g+p*x+f*v;if(Math.abs(b)<1e-15)return null;const w=1/b,_=u[0]-t,A=u[1]-e,S=u[2]-r,k=(_*g+A*x+S*v)*w;if(k<0||k>1)return null;const I=A*f-S*p,M=S*h-_*f,T=_*p-A*h,z=(c[0]*I+c[1]*M+c[2]*T)*w;return z<0||k+z>1?null:(d*I+y*M+m*T)*w}function $d(t,e,r){return (t-e)/(r-e)}function Od(t,e,r,n,i,s,a,o,l){const u=1<<r,c=s-n,h=a-i,p=(t+1)/u*c+n,f=(e+0)/u*h+i,d=(e+1)/u*h+i;o[0]=(t+0)/u*c+n,o[1]=f,l[0]=p,l[1]=d;}class qd{constructor(t){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const e=function(t){const e=Math.ceil(Math.log2(t.dim/8)),r=[];let n=Math.ceil(Math.pow(2,e));const i=1/n,s=(t,e,r,n,i)=>{const s=n?1:0,a=(t+1)*r-s,o=e*r,l=(e+1)*r-s;i[0]=t*r,i[1]=o,i[2]=a,i[3]=l;};let a=new Rd(n);const o=[];for(let e=0;e<n*n;e++){s(e%n,Math.floor(e/n),i,!1,o);const r=Gd(o[0],o[1],t),l=Gd(o[2],o[1],t),u=Gd(o[2],o[3],t),c=Gd(o[0],o[3],t);a.minimums.push(Math.min(r,l,u,c)),a.maximums.push(Math.max(r,l,u,c)),a.leaves.push(1);}for(r.push(a),n/=2;n>=1;n/=2){const t=r[r.length-1];a=new Rd(n);for(let e=0;e<n*n;e++){s(e%n,Math.floor(e/n),2,!0,o);const r=t.getElevation(o[0],o[1]),i=t.getElevation(o[2],o[1]),l=t.getElevation(o[2],o[3]),u=t.getElevation(o[0],o[3]),c=t.isLeaf(o[0],o[1]),h=t.isLeaf(o[2],o[1]),p=t.isLeaf(o[2],o[3]),f=t.isLeaf(o[0],o[3]),d=Math.min(r.min,i.min,l.min,u.min),y=Math.max(r.max,i.max,l.max,u.max),m=c&&h&&p&&f;a.maximums.push(y),a.minimums.push(d),a.leaves.push(y-d<=5&&m?1:0);}r.push(a);}return r}(this.dem),r=e.length-1,n=e[r];this._addNode(n.minimums[0],n.maximums[0],n.leaves[0]),this._construct(e,0,0,r,0);}raycastRoot(t,e,r,n,i,s,a=1){return jd([t,e,-100],[r,n,this.maximums[0]*a],i,s)}raycast(t,e,r,n,i,s,a=1){if(!this.nodeCount)return null;const o=this.raycastRoot(t,e,r,n,i,s,a);if(null==o)return null;const l=[],u=[],c=[],h=[],p=[{idx:0,t:o,nodex:0,nodey:0,depth:0}];for(;p.length>0;){const{idx:o,t:f,nodex:d,nodey:y,depth:m}=p.pop();if(this.leaves[o]){Od(d,y,m,t,e,r,n,c,h);const o=1<<m,l=(d+0)/o,u=(d+1)/o,p=(y+0)/o,g=(y+1)/o,x=Gd(l,p,this.dem)*a,v=Gd(u,p,this.dem)*a,b=Gd(u,g,this.dem)*a,w=Gd(l,g,this.dem)*a,_=Ud(c[0],c[1],x,h[0],c[1],v,h[0],h[1],b,i,s),A=Ud(h[0],h[1],b,c[0],h[1],w,c[0],c[1],x,i,s),S=Math.min(null!==_?_:Number.MAX_VALUE,null!==A?A:Number.MAX_VALUE);if(S!==Number.MAX_VALUE)return S;{const t=jl([],i,s,f);if(Nd(x,v,w,b,$d(t[0],c[0],h[0]),$d(t[1],c[1],h[1]))>=t[2])return f}continue}let g=0;for(let p=0;p<this._siblingOffset.length;p++){Od((d<<1)+this._siblingOffset[p][0],(y<<1)+this._siblingOffset[p][1],m+1,t,e,r,n,c,h),c[2]=-100,h[2]=this.maximums[this.childOffsets[o]+p]*a;const f=jd(c,h,i,s);if(null!=f){const t=f;l[p]=t;let e=!1;for(let r=0;r<g&&!e;r++)t>=l[u[r]]&&(u.splice(r,0,p),e=!0);e||(u[g]=p),g++;}}for(let t=0;t<g;t++){const e=u[t];p.push({idx:this.childOffsets[o]+e,t:l[e],nodex:(d<<1)+this._siblingOffset[e][0],nodey:(y<<1)+this._siblingOffset[e][1],depth:m+1});}}return null}_addNode(t,e,r){return this.minimums.push(t),this.maximums.push(e),this.leaves.push(r),this.childOffsets.push(0),this.nodeCount++}_construct(t,e,r,n,i){if(1===t[n].isLeaf(e,r))return;this.childOffsets[i]||(this.childOffsets[i]=this.nodeCount);const s=n-1,a=t[s];let o=0,l=0;for(let t=0;t<this._siblingOffset.length;t++){const n=2*e+this._siblingOffset[t][0],i=2*r+this._siblingOffset[t][1],s=a.getElevation(n,i),u=a.isLeaf(n,i),c=this._addNode(s.min,s.max,u);u&&(o|=1<<t),l||(l=c);}for(let n=0;n<this._siblingOffset.length;n++)o&1<<n||this._construct(t,2*e+this._siblingOffset[n][0],2*r+this._siblingOffset[n][1],s,l+n);}}function Nd(t,e,r,n,i,s){return Mr(Mr(t,r,s),Mr(e,n,s),i)}function Gd(t,e,r){const n=r.dim,i=S(t*n-.5,0,n-1),s=S(e*n-.5,0,n-1),a=Math.floor(i),o=Math.floor(s),l=Math.min(a+1,n-1),u=Math.min(o+1,n-1);return Nd(r.get(a,o),r.get(l,o),r.get(a,u),r.get(l,u),i-a,s-o)}const Xd={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class Zd{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(t,e,r,n=!1,i=!1){if(this.uid=t,e.height!==e.width)throw new RangeError(\"DEM tiles must be square\");if(r&&\"mapbox\"!==r&&\"terrarium\"!==r)return $(`\"${r}\" is not a valid encoding type. Valid types include \"mapbox\" and \"terrarium\".`);this.stride=e.height;const s=this.dim=e.height-2,a=new Uint32Array(e.data.buffer);if(this.pixels=new Uint8Array(e.data.buffer),this.encoding=r||\"mapbox\",this.borderReady=n,!n){for(let t=0;t<s;t++)a[this._idx(-1,t)]=a[this._idx(0,t)],a[this._idx(s,t)]=a[this._idx(s-1,t)],a[this._idx(t,-1)]=a[this._idx(t,0)],a[this._idx(t,s)]=a[this._idx(t,s-1)];a[this._idx(-1,-1)]=a[this._idx(0,0)],a[this._idx(s,-1)]=a[this._idx(s-1,0)],a[this._idx(-1,s)]=a[this._idx(0,s-1)],a[this._idx(s,s)]=a[this._idx(s-1,s-1)],i&&this._buildQuadTree();}}_buildQuadTree(){this._tree=new qd(this);}get(t,e,r=!1){r&&(t=S(t,-1,this.dim),e=S(e,-1,this.dim));const n=4*this._idx(t,e);return (\"terrarium\"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(this.pixels[n],this.pixels[n+1],this.pixels[n+2])}static getUnpackVector(t){return Xd[t]}get unpackVector(){return Xd[this.encoding]}_idx(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError(\"out of range source coordinates for DEM data\");return (e+1)*this.stride+(t+1)}_unpackMapbox(t,e,r){return (256*t*256+256*e+r)/10-1e4}_unpackTerrarium(t,e,r){return 256*t+e+r/256-32768}static pack(t,e){const r=[0,0,0,0],n=Zd.getUnpackVector(e);let i=Math.floor((t+n[3])/n[2]);return r[2]=i%256,i=Math.floor(i/256),r[1]=i%256,i=Math.floor(i/256),r[0]=i,r}getPixels(){return new gu({width:this.stride,height:this.stride},this.pixels)}backfillBorder(t,e,r){if(this.dim!==t.dim)throw new Error(\"dem dimension mismatch\");let n=e*this.dim,i=e*this.dim+this.dim,s=r*this.dim,a=r*this.dim+this.dim;switch(e){case-1:n=i-1;break;case 1:i=n+1;}switch(r){case-1:s=a-1;break;case 1:a=s+1;}const o=-e*this.dim,l=-r*this.dim;for(let e=s;e<a;e++)for(let r=n;r<i;r++){const n=4*this._idx(r,e),i=4*this._idx(r+o,e+l);this.pixels[n+0]=t.pixels[i+0],this.pixels[n+1]=t.pixels[i+1],this.pixels[n+2]=t.pixels[i+2],this.pixels[n+3]=t.pixels[i+3];}}onDeserialize(){this._tree&&(this._tree.dem=this);}}Oi(Zd,\"DEMData\"),Oi(qd,\"DemMinMaxQuadTree\",{omit:[\"dem\"]});class Kd{constructor(t,e){this.max=t,this.onRemove=e,this.reset();}reset(){for(const t in this.data)for(const e of this.data[t])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(t,e,r){const n=t.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);const i={value:e,timeout:void 0};if(void 0!==r&&(i.timeout=setTimeout((()=>{this.remove(t,i);}),r)),this.data[n].push(i),this.order.push(n),this.order.length>this.max){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t);}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}getByKey(t){const e=this.data[t];return e?e[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,e){if(!this.has(t))return this;const r=t.wrapped().key,n=void 0===e?0:this.data[r].indexOf(e),i=this.data[r][n];return this.data[r].splice(n,1),i.timeout&&clearTimeout(i.timeout),0===this.data[r].length&&delete this.data[r],this.onRemove(i.value),this.order.splice(this.order.indexOf(r),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t);}return this}filter(t){const e=[];for(const r in this.data)for(const n of this.data[r])t(n.value)||e.push(n);for(const t of e)this.remove(t.value.tileID,t);}}class Yd{constructor(t,e,r){this.func=t,this.mask=e,this.range=r;}}Yd.ReadOnly=!1,Yd.ReadWrite=!0,Yd.disabled=new Yd(519,Yd.ReadOnly,[0,1]);const Hd=7680;class Wd{constructor(t,e,r,n,i,s){this.test=t,this.ref=e,this.mask=r,this.fail=n,this.depthFail=i,this.pass=s;}}Wd.disabled=new Wd({func:519,mask:0},0,0,Hd,Hd,Hd);class Jd{constructor(t,e,r){this.blendFunction=t,this.blendColor=e,this.mask=r;}}Jd.Replace=[1,0],Jd.disabled=new Jd(Jd.Replace,Me.transparent,[!1,!1,!1,!1]),Jd.unblended=new Jd(Jd.Replace,Me.transparent,[!0,!0,!0,!0]),Jd.alphaBlended=new Jd([1,771],Me.transparent,[!0,!0,!0,!0]);const Qd=1029,ty=2305;class ey{constructor(t,e,r){this.enable=t,this.mode=e,this.frontFace=r;}}ey.disabled=new ey(!1,Qd,ty),ey.backCCW=new ey(!0,Qd,ty),ey.backCW=new ey(!0,Qd,2304),ey.frontCW=new ey(!0,1028,2304),ey.frontCCW=new ey(!0,1028,ty);class ry extends Yt{constructor(t,e,r){super(),this.id=t,this._onlySymbols=r,e.on(\"data\",(t=>{\"source\"===t.dataType&&\"metadata\"===t.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&\"source\"===t.dataType&&\"content\"===t.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform));})),e.on(\"error\",(()=>{this._sourceErrored=!0;})),this._source=e,this._tiles={},this._cache=new Kd(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=e.minTileCacheSize,this._maxTileCacheSize=e.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Fd,this._isRaster=\"raster\"===this._source.type||\"raster-dem\"===this._source.type||\"custom\"===this._source.type&&\"raster\"===this._source._dataType;}onAdd(t){this.map=t,this._minTileCacheSize=void 0===this._minTileCacheSize&&t?t._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&t?t._maxTileCacheSize:this._maxTileCacheSize;}loaded(){if(this._sourceErrored)return !0;if(!this._sourceLoaded)return !1;if(!this._source.loaded())return !1;for(const t in this._tiles){const e=this._tiles[t];if(\"loaded\"!==e.state&&\"errored\"!==e.state)return !1}return !0}getSource(){return this._source}pause(){this._paused=!0;}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform);}_loadTile(t,e){return t.isSymbolTile=this._onlySymbols,this._source.loadTile(t,e)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,(()=>{}))}_abortTile(t){if(this._source.abortTile)return this._source.abortTile(t,(()=>{}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const e in this._tiles){const r=this._tiles[e];r.upload(t),r.prepare(this.map.style.imageManager);}}getIds(){return T(this._tiles).map((t=>t.tileID)).sort(ny).map((t=>t.key))}getRenderableIds(t){const e=[];for(const r in this._tiles)this._isIdRenderable(+r,t)&&e.push(this._tiles[r]);return t?e.sort(((t,e)=>{const r=t.tileID,n=e.tileID,i=new d(r.canonical.x,r.canonical.y)._rotate(this.transform.angle),s=new d(n.canonical.x,n.canonical.y)._rotate(this.transform.angle);return r.overscaledZ-n.overscaledZ||s.y-i.y||s.x-i.x})).map((t=>t.tileID.key)):e.map((t=>t.tileID)).sort(ny).map((t=>t.key))}hasRenderableParent(t){const e=this.findLoadedParent(t,0);return !!e&&this._isIdRenderable(e.tileID.key)}_isIdRenderable(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else {this._cache.reset();for(const t in this._tiles)\"errored\"!==this._tiles[t].state&&this._reloadTile(+t,\"reloading\");}}_reloadTile(t,e){const r=this._tiles[t];r&&(\"loading\"!==r.state&&(r.state=e),this._loadTile(r,this._tileLoaded.bind(this,r,t,e)));}_tileLoaded(t,e,r,n){if(n)if(t.state=\"errored\",404!==n.status)this._source.fire(new Kt(n,{tile:t}));else if(\"raster-dem\"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const t=this.map.painter.terrain;this.update(this.transform,t.getScaledDemTileSize(),!0),t.resetTileLookupCache(this.id);}else this.update(this.transform);else t.timeAdded=Nt.now(),\"expired\"===r&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),\"raster-dem\"===this._source.type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new Zt(\"data\",{dataType:\"source\",tile:t,coord:t.tileID,sourceCacheId:this.id}));}_backfillDEM(t){const e=this.getRenderableIds();for(let n=0;n<e.length;n++){const i=e[n];if(t.neighboringTiles&&t.neighboringTiles[i]){const e=this.getTileByID(i);r(t,e),r(e,t);}}function r(t,e){if(!t.dem||t.dem.borderReady)return;t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0;let r=e.tileID.canonical.x-t.tileID.canonical.x;const n=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),s=e.tileID.key;0===r&&0===n||Math.abs(n)>1||(Math.abs(r)>1&&(1===Math.abs(r+i)?r+=i:1===Math.abs(r-i)&&(r-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,r,n),t.neighboringTiles&&t.neighboringTiles[s]&&(t.neighboringTiles[s].backfilled=!0)));}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,e,r,n){for(const i in this._tiles){let s=this._tiles[i];if(n[i]||!s.hasData()||s.tileID.overscaledZ<=e||s.tileID.overscaledZ>r)continue;let a=s.tileID;for(;s&&s.tileID.overscaledZ>e+1;){const t=s.tileID.scaledTo(s.tileID.overscaledZ-1);s=this._tiles[t.key],s&&s.hasData()&&(a=t);}let o=a;for(;o.overscaledZ>e;)if(o=o.scaledTo(o.overscaledZ-1),t[o.key]){n[a.key]=a;break}}}findLoadedParent(t,e){if(t.key in this._loadedParentTiles){const r=this._loadedParentTiles[t.key];return r&&r.tileID.overscaledZ>=e?r:null}for(let r=t.overscaledZ-1;r>=e;r--){const e=t.scaledTo(r),n=this._getLoadedTile(e);if(n)return n}}_getLoadedTile(t){const e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(this._source.reparseOverscaled?t.wrapped().key:t.canonical.key)}updateCacheSize(t,e){e=e||this._source.tileSize;const r=Math.ceil(t.width/e)+1,n=Math.ceil(t.height/e)+1,i=Math.floor(r*n*5),s=\"number\"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,i):i,a=\"number\"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,s):s;this._cache.setMaxSize(a);}handleWrapJump(t){const e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){const t={};for(const r in this._tiles){const n=this._tiles[r];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+e),t[n.tileID.key]=n;}this._tiles=t;for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t in this._tiles)this._setTileReloadTimer(+t,this._tiles[t]);}}update(t,e,r){if(this.transform=t,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!r)return;let n;this.updateCacheSize(t,e),\"globe\"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?n=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((t=>new Gc(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y))):(n=t.coveringTiles({tileSize:e||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!r,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(n=n.filter((t=>this._source.hasTile(t))))):n=[];const i=this._updateRetainedTiles(n);if(iy(this._source.type)&&0!==n.length){const t={},e={},r=Object.keys(i);for(const n of r){const r=i[n],s=this._tiles[n];if(!s||s.fadeEndTime&&s.fadeEndTime<=Nt.now())continue;const a=this.findLoadedParent(r,Math.max(r.overscaledZ-ry.maxOverzooming,this._source.minzoom));a&&(this._addTile(a.tileID),t[a.tileID.key]=a.tileID),e[n]=r;}const s=n[n.length-1].overscaledZ;for(const t in this._tiles){const r=this._tiles[t];if(i[t]||!r.hasData())continue;let n=r.tileID;for(;n.overscaledZ>s;){n=n.scaledTo(n.overscaledZ-1);const s=this._tiles[n.key];if(s&&s.hasData()&&e[n.key]){i[t]=r.tileID;break}}}for(const e in t)i[e]||(this._coveredTiles[e]=!0,i[e]=t[e]);}for(const t in i)this._tiles[t].clearFadeHold();const s=function(t,e){const r=[];for(const n in t)n in e||r.push(n);return r}(this._tiles,i);for(const t of s){const e=this._tiles[t];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(+t);}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate();}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(+t);}_updateRetainedTiles(t){const e={};if(0===t.length)return e;const r={},n=t.reduce(((t,e)=>Math.min(t,e.overscaledZ)),1/0),i=t[0].overscaledZ,s=Math.max(i-ry.maxOverzooming,this._source.minzoom),a=Math.max(i+ry.maxUnderzooming,this._source.minzoom),o={};for(const r of t){const t=this._addTile(r);e[r.key]=r,t.hasData()||n<this._source.maxzoom&&(o[r.key]=r);}this._retainLoadedChildren(o,n,a,e);for(const n of t){let t=this._tiles[n.key];if(t.hasData())continue;if(n.canonical.z>=this._source.maxzoom){const t=n.children(this._source.maxzoom)[0],r=this.getTile(t);if(r&&r.hasData()){e[t.key]=t;continue}}else {const t=n.children(this._source.maxzoom);if(e[t[0].key]&&e[t[1].key]&&e[t[2].key]&&e[t[3].key])continue}let i=t.wasRequested();for(let a=n.overscaledZ-1;a>=s;--a){const s=n.scaledTo(a);if(r[s.key])break;if(r[s.key]=!0,t=this.getTile(s),!t&&i&&(t=this._addTile(s)),t&&(e[s.key]=s,i=t.wasRequested(),t.hasData()))break}}return e}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const e=[];let r,n=this._tiles[t].tileID;for(;n.overscaledZ>0;){if(n.key in this._loadedParentTiles){r=this._loadedParentTiles[n.key];break}e.push(n.key);const t=n.scaledTo(n.overscaledZ-1);if(r=this._getLoadedTile(t),r)break;n=t;}for(const t of e)this._loadedParentTiles[t]=r;}}_addTile(t){let e=this._tiles[t.key];if(e)return e;e=this._cache.getAndRemove(t),e&&(this._setTileReloadTimer(t.key,e),e.tileID=t,this._state.initializeTileState(e,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e)));const r=Boolean(e);if(!r){const r=this.map?this.map.painter:null;e=new Ld(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom,r,this._isRaster),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state));}return e?(e.uses++,this._tiles[t.key]=e,r||this._source.fire(new Zt(\"dataloading\",{tile:e,coord:e.tileID,dataType:\"source\"})),e):null}_setTileReloadTimer(t,e){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,\"expired\"),delete this._timers[t];}),r));}_removeTile(t){const e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&\"reloading\"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))));}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(+t);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id);}tilesIn(t,e,r){const n=[],i=this.transform;if(!i)return n;const s=\"globe\"===i.projection.name,a=Bo(i.center.lng);for(const o in this._tiles){const l=this._tiles[o];if(r&&l.clearQueryDebugViz(),l.holdingForFade())continue;let u;if(s){const t=l.tileID.canonical;if(0===t.z){const e=[Math.abs(S(a,...sy(t,-1))-a),Math.abs(S(a,...sy(t,1))-a)];u=[0,2*e.indexOf(Math.min(...e))-1];}else {const e=[Math.abs(S(a,...sy(t,-1))-a),Math.abs(S(a,...sy(t,0))-a),Math.abs(S(a,...sy(t,1))-a)];u=[e.indexOf(Math.min(...e))-1];}}else u=[0];for(const r of u){const s=t.containsTile(l,i,e,r);s&&n.push(s);}}return n}getVisibleCoordinates(t){const e=this.getRenderableIds(t).map((t=>this._tiles[t].tileID));for(const t of e)t.projMatrix=this.transform.calculateProjMatrix(t.toUnwrapped());return e}hasTransition(){if(this._source.hasTransition())return !0;if(iy(this._source.type))for(const t in this._tiles){const e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=Nt.now())return !0}return !1}setFeatureState(t,e,r){this._state.updateState(t=t||\"_geojsonTileLayer\",e,r);}removeFeatureState(t,e,r){this._state.removeFeatureState(t=t||\"_geojsonTileLayer\",e,r);}getFeatureState(t,e){return this._state.getState(t=t||\"_geojsonTileLayer\",e)}setDependencies(t,e,r){const n=this._tiles[t];n&&n.setDependencies(e,r);}reloadTilesForDependencies(t,e){for(const r in this._tiles)this._tiles[r].hasDependency(t,e)&&this._reloadTile(+r,\"reloading\");this._cache.filter((r=>!r.hasDependency(t,e)));}_preloadTiles(t,e){const r=new Map,n=Array.isArray(t)?t:[t],i=this.map.painter.terrain,s=this.usedForTerrain&&i?i.getScaledDemTileSize():this._source.tileSize;for(const t of n){const e=t.coveringTiles({tileSize:s,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const t of e)r.set(t.key,t);this.usedForTerrain&&t.updateElevation(!1);}M(Array.from(r.values()),((t,e)=>{const r=new Ld(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(r,(t=>{\"raster-dem\"===this._source.type&&r.dem&&this._backfillDEM(r),e(t,r);}));}),e);}}function ny(t,e){const r=Math.abs(2*t.wrap)-+(t.wrap<0),n=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||n-r||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function iy(t){return \"raster\"===t||\"image\"===t||\"video\"===t||\"custom\"===t}function sy(t,e){const r=1<<t.z;return [t.x/r+e,(t.x+1)/r+e]}ry.maxOverzooming=10,ry.maxUnderzooming=3;class ay{constructor(t,e,r){this._demTile=t,this._dem=this._demTile.dem,this._scale=e,this._offset=r;}static create(t,e,r){const n=r||t.findDEMTileFor(e);if(!n||!n.dem)return;const i=n.dem,s=n.tileID,a=1<<e.canonical.z-s.canonical.z;return new ay(n,n.tileSize/So/a,[(e.canonical.x/a-s.canonical.x)*i.dim,(e.canonical.y/a-s.canonical.y)*i.dim])}tileCoordToPixel(t,e){const r=e*this._scale+this._offset[1],n=Math.floor(t*this._scale+this._offset[0]),i=Math.floor(r);return new d(n,i)}getElevationAt(t,e,r,n){const i=t*this._scale+this._offset[0],s=e*this._scale+this._offset[1],a=Math.floor(i),o=Math.floor(s),l=this._dem;return n=!!n,r?Mr(Mr(l.get(a,o,n),l.get(a,o+1,n),s-o),Mr(l.get(a+1,o,n),l.get(a+1,o+1,n),s-o),i-a):l.get(a,o,n)}getElevationAtPixel(t,e,r){return this._dem.get(t,e,!!r)}getMeterToDEM(t){return (1<<this._demTile.tileID.canonical.z)*Co(1,t)*this._dem.stride}}class oy{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new ji(So,16,0),this.featureIndexArray=new ja,this.promoteId=e;}insert(t,e,r,n,i,s=0){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,n,i,s);const o=this.grid;for(let t=0;t<e.length;t++){const r=e[t],n=[1/0,1/0,-1/0,-1/0];for(let t=0;t<r.length;t++){const e=r[t];n[0]=Math.min(n[0],e.x),n[1]=Math.min(n[1],e.y),n[2]=Math.max(n[2],e.x),n[3]=Math.max(n[3],e.y);}n[0]<So&&n[1]<So&&n[2]>=0&&n[3]>=0&&o.insert(a,n[0],n[1],n[2],n[3]);}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Ac(new kh(this.rawTileData)).layers,this.sourceLayerCoder=new Sd(this.vtLayers?Object.keys(this.vtLayers).sort():[\"_geojsonTileLayer\"]),this.vtFeatures={};for(const t in this.vtLayers)this.vtFeatures[t]=[];}return this.vtLayers}query(t,e,r,n){this.loadVTLayers();const i=t.params||{},s=ai(i.filter),a=t.tileResult,o=t.transform,l=a.bufferedTilespaceBounds,u=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,((t,e,r,n)=>ol(a.bufferedTilespaceGeometry,t,e,r,n)));u.sort(uy);let c=null;o.elevation&&u.length>0&&(c=ay.create(o.elevation,this.tileID));const h={};let p;for(let o=0;o<u.length;o++){const l=u[o];if(l===p)continue;p=l;const f=this.featureIndexArray.get(l);let d=null;this.loadMatchingFeature(h,f,s,i.layers,i.availableImages,e,r,n,((e,r,n,i=0)=>(d||(d=Xo(e,this.tileID.canonical,t.tileTransform)),r.queryIntersectsFeature(a,e,n,d,this.z,t.transform,t.pixelPosMatrix,c,i))));}return h}loadMatchingFeature(t,e,r,n,i,s,a,o,l){const{featureIndex:u,bucketIndex:c,sourceLayerIndex:h,layoutVertexArrayOffset:p}=e,f=this.bucketLayerIDs[c];if(n&&!function(t,e){for(let r=0;r<t.length;r++)if(e.indexOf(t[r])>=0)return !0;return !1}(n,f))return;const d=this.sourceLayerCoder.decode(h),y=this.vtLayers[d].feature(u);if(r.needGeometry){const t=Zo(y,!0);if(!r.filter(new Us(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!r.filter(new Us(this.tileID.overscaledZ),y))return;const m=this.getId(y,d);for(let e=0;e<f.length;e++){const r=f[e];if(n&&n.indexOf(r)<0)continue;const c=s[r];if(!c)continue;let h={};void 0!==m&&o&&(h=o.getState(c.sourceLayer||\"_geojsonTileLayer\",m));const d=z({},a[r]);d.paint=ly(d.paint,c.paint,y,h,i),d.layout=ly(d.layout,c.layout,y,h,i);const g=!l||l(y,c,h,p);if(!g)continue;const x=new Id(y,this.z,this.x,this.y,m);x.layer=d;let v=t[r];void 0===v&&(v=t[r]=[]),v.push({featureIndex:u,feature:x,intersectionZ:g});}}lookupSymbolFeatures(t,e,r,n,i,s,a,o){const l={};this.loadVTLayers();const u=ai(i);for(const i of t)this.loadMatchingFeature(l,{bucketIndex:r,sourceLayerIndex:n,featureIndex:i,layoutVertexArrayOffset:0},u,s,a,o,e);return l}loadFeature(t){const{featureIndex:e,sourceLayerIndex:r}=t;this.loadVTLayers();const n=this.sourceLayerCoder.decode(r),i=this.vtFeatures[n];if(i[e])return i[e];const s=this.vtLayers[n].feature(e);return i[e]=s,s}hasLayer(t){for(const e of this.bucketLayerIDs)for(const r of e)if(t===r)return !0;return !1}getId(t,e){let r=t.id;if(this.promoteId){const n=\"string\"==typeof this.promoteId?this.promoteId:this.promoteId[e];null!=n&&(r=t.properties[n]),\"boolean\"==typeof r&&(r=Number(r));}return r}}function ly(t,e,r,n,i){return F(t,((t,s)=>{const a=e instanceof Ks?e.get(s):null;return a&&a.evaluate?a.evaluate(r,n,i):a}))}function uy(t,e){return e-t}Oi(oy,\"FeatureIndex\",{omit:[\"rawTileData\",\"sourceLayerCoder\"]});class cy{constructor(t,e){this.width=t,this.height=e,this.nextRow=0,this.image=new mu({width:t,height:e}),this.positions={},this.uploaded=!1;}getDash(t,e){const r=this.getKey(t,e);return this.positions[r]}trim(){const t=this.width,e=this.height=P(this.nextRow);this.image.resize({width:t,height:e});}getKey(t,e){return t.join(\",\")+e}getDashRanges(t,e,r){const n=[];let i=t.length%2==1?-t[t.length-1]*r:0,s=t[0]*r,a=!0;n.push({left:i,right:s,isDash:a,zeroLength:0===t[0]});let o=t[0];for(let e=1;e<t.length;e++){a=!a;const l=t[e];i=o*r,o+=l,s=o*r,n.push({left:i,right:s,isDash:a,zeroLength:0===l});}return n}addRoundDash(t,e,r){const n=e/2;for(let e=-r;e<=r;e++){const i=this.width*(this.nextRow+r+e);let s=0,a=t[s];for(let o=0;o<this.width;o++){o/a.right>1&&(a=t[++s]);const l=Math.abs(o-a.left),u=Math.abs(o-a.right),c=Math.min(l,u);let h;const p=e/r*(n+1);if(a.isDash){const t=n-Math.abs(p);h=Math.sqrt(c*c+t*t);}else h=n-Math.sqrt(c*c+p*p);this.image.data[i+o]=Math.max(0,Math.min(255,h+128));}}}addRegularDash(t,e){for(let e=t.length-1;e>=0;--e){const r=t[e],n=t[e+1];r.zeroLength?t.splice(e,1):n&&n.isDash===r.isDash&&(n.left=r.left,t.splice(e,1));}const r=t[0],n=t[t.length-1];r.isDash===n.isDash&&(r.left=n.left-this.width,n.right=r.right+this.width);const i=this.width*this.nextRow;let s=0,a=t[s];for(let r=0;r<this.width;r++){r/a.right>1&&(a=t[++s]);const n=Math.abs(r-a.left),o=Math.abs(r-a.right),l=Math.min(n,o);this.image.data[i+r]=Math.max(0,Math.min(255,(a.isDash?l:-l)+e+128));}}addDash(t,e){const r=this.getKey(t,e);if(this.positions[r])return this.positions[r];const n=\"round\"===e,i=n?7:0,s=2*i+1;if(this.nextRow+s>this.height)return $(\"LineAtlas out of space\"),null;0===t.length&&t.push(1);let a=0;for(let e=0;e<t.length;e++)t[e]<0&&($(\"Negative value is found in line dasharray, replacing values with 0\"),t[e]=0),a+=t[e];if(0!==a){const r=this.width/a,s=this.getDashRanges(t,this.width,r);n?this.addRoundDash(s,r,i):this.addRegularDash(s,\"square\"===e?.5*r:0);}const o=this.nextRow+i;this.nextRow+=s;const l={tl:[o,i],br:[a,0]};return this.positions[r]=l,l}}Oi(cy,\"LineAtlas\");class hy{constructor(t){const e={},r=[];for(const n in t){const i=t[n],s=e[n]={};for(const t in i.glyphs){const e=i.glyphs[+t];if(!e||0===e.bitmap.width||0===e.bitmap.height)continue;const n=e.metrics.localGlyph?2:1,a={x:0,y:0,w:e.bitmap.width+2*n,h:e.bitmap.height+2*n};r.push(a),s[t]=a;}}const{w:n,h:i}=Hh(r),s=new mu({width:n||1,height:i||1});for(const r in t){const n=t[r];for(const t in n.glyphs){const i=n.glyphs[+t];if(!i||0===i.bitmap.width||0===i.bitmap.height)continue;const a=e[r][t],o=i.metrics.localGlyph?2:1;mu.copy(i.bitmap,s,{x:0,y:0},{x:a.x+o,y:a.y+o},i.bitmap);}}this.image=s,this.positions=e;}}Oi(hy,\"GlyphAtlas\");class py{constructor(t){this.tileID=new Gc(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.canonical=t.tileID.canonical,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile,this.tileTransform=Df(t.tileID.canonical,t.projection),this.projection=t.projection;}parse(t,e,r,n,i){this.status=\"parsing\",this.data=t,this.collisionBoxArray=new Ea;const s=new Sd(Object.keys(t.layers).sort()),a=new oy(this.tileID,this.promoteId);a.bucketLayerIDs=[];const o={},l=new cy(256,256),u={featureIndex:a,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:l,availableImages:r},c=e.familiesBySource[this.source];for(const e in c){const n=t.layers[e];if(!n)continue;let i=!1,l=!1;for(const t of c[e])\"symbol\"===t[0].type?i=!0:l=!0;if(!0===this.isSymbolTile&&!i)continue;if(!1===this.isSymbolTile&&!l)continue;1===n.version&&$(`Vector tile source \"${this.source}\" layer \"${e}\" does not use vector tile spec v2 and therefore may have some rendering errors.`);const h=s.encode(e),p=[];for(let t=0;t<n.length;t++){const r=n.feature(t),i=a.getId(r,e);p.push({feature:r,id:i,index:t,sourceLayerIndex:h});}for(const t of c[e]){const e=t[0];void 0!==this.isSymbolTile&&\"symbol\"===e.type!==this.isSymbolTile||e.minzoom&&this.zoom<Math.floor(e.minzoom)||e.maxzoom&&this.zoom>=e.maxzoom||\"none\"!==e.visibility&&(fy(t,this.zoom,r),(o[e.id]=e.createBucket({index:a.bucketLayerIDs.length,layers:t,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:h,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:r})).populate(p,u,this.tileID.canonical,this.tileTransform),a.bucketLayerIDs.push(t.map((t=>t.id))));}}let h,p,f,d;l.trim();const y={type:\"maybePrepare\",isSymbolTile:this.isSymbolTile,zoom:this.zoom},m=F(u.glyphDependencies,(t=>Object.keys(t).map(Number)));Object.keys(m).length?n.send(\"getGlyphs\",{uid:this.uid,stacks:m},((t,e)=>{h||(h=t,p=e,v.call(this));}),void 0,!1,y):p={};const g=Object.keys(u.iconDependencies);g.length?n.send(\"getImages\",{icons:g,source:this.source,tileID:this.tileID,type:\"icons\"},((t,e)=>{h||(h=t,f=e,v.call(this));}),void 0,!1,y):f={};const x=Object.keys(u.patternDependencies);function v(){if(h)return i(h);if(p&&f&&d){const t=new hy(p),e=new Jh(f,d);for(const n in o){const i=o[n];i instanceof cd?(fy(i.layers,this.zoom,r),Op(i,p,t.positions,f,e.iconPositions,this.showCollisionBoxes,r,this.tileID.canonical,this.tileZoom,this.projection)):i.hasPattern&&(i instanceof nh||i instanceof ic||i instanceof Ec)&&(fy(i.layers,this.zoom,r),i.addFeatures(u,this.tileID.canonical,e.patternPositions,r,this.tileTransform));}this.status=\"done\",i(null,{buckets:T(o).filter((t=>!t.isEmpty())),featureIndex:a,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,lineAtlas:l,imageAtlas:e,glyphMap:this.returnDependencies?p:null,iconMap:this.returnDependencies?f:null,glyphPositions:this.returnDependencies?t.positions:null});}}x.length?n.send(\"getImages\",{icons:x,source:this.source,tileID:this.tileID,type:\"patterns\"},((t,e)=>{h||(h=t,d=e,v.call(this));}),void 0,!1,y):d={},v.call(this);}}function fy(t,e,r){const n=new Us(e);for(const e of t)e.recalculate(n,r);}class dy{constructor(t){this.entries={},this.scheduler=t;}request(t,e,r,n){const i=this.entries[t]=this.entries[t]||{callbacks:[]};if(i.result){const[t,r]=i.result;return this.scheduler?this.scheduler.add((()=>{n(t,r);}),e):n(t,r),()=>{}}return i.callbacks.push(n),i.cancel||(i.cancel=r(((r,n)=>{i.result=[r,n];for(const t of i.callbacks)this.scheduler?this.scheduler.add((()=>{t(r,n);}),e):t(r,n);setTimeout((()=>delete this.entries[t]),3e3);}))),()=>{i.result||(i.callbacks=i.callbacks.filter((t=>t!==n)),i.callbacks.length||(i.cancel(),delete this.entries[t]));}}}function yy(t,e,r){const n=JSON.stringify(t.request);return t.data&&(this.deduped.entries[n]={result:[null,t.data]}),this.deduped.request(n,{type:\"parseTile\",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom},(e=>{const n=ut(t.request,((t,n,i,s)=>{t?e(t):n&&e(null,{vectorTile:r?void 0:new Ac(new kh(n)),rawData:n,cacheControl:i,expires:s});}));return ()=>{n.cancel(),e();}}),e)}t.ARRAY_TYPE=ml,t.AUTH_ERR_MSG=yt,t.Aabb=au,t.Actor=class{constructor(t,r,n){this.target=t,this.parent=r,this.mapId=n,this.callbacks={},this.cancelCallbacks={},V([\"receive\"],this),this.target.addEventListener(\"message\",this.receive,!1),this.globalScope=N()?t:e,this.scheduler=new Ad;}send(t,e,r,n,i=!1,s){const a=Math.round(1e18*Math.random()).toString(36).substring(0,10);r&&(r.metadata=s,this.callbacks[a]=r);const o=Z(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!r,targetMapId:n,mustQueue:i,sourceMapId:this.mapId,data:Gi(e,o)},o),{cancel:()=>{r&&delete this.callbacks[a],this.target.postMessage({id:a,type:\"<cancel>\",targetMapId:n,sourceMapId:this.mapId});}}}receive(t){const e=t.data,r=e.id;if(r&&(!e.targetMapId||this.mapId===e.targetMapId))if(\"<cancel>\"===e.type){const t=this.cancelCallbacks[r];delete this.cancelCallbacks[r],t&&t.cancel();}else if(e.mustQueue||N()){const t=this.callbacks[r];this.cancelCallbacks[r]=this.scheduler.add((()=>this.processTask(r,e)),t&&t.metadata||{type:\"message\"});}else this.processTask(r,e);}processTask(t,e){if(\"<response>\"===e.type){const r=this.callbacks[t];delete this.callbacks[t],r&&(e.error?r(Xi(e.error)):r(null,Xi(e.data)));}else {const r=Z(this.globalScope)?void 0:[],n=e.hasCallback?(e,n)=>{delete this.cancelCallbacks[t],this.target.postMessage({id:t,type:\"<response>\",sourceMapId:this.mapId,error:e?Gi(e):null,data:Gi(n,r)},r);}:t=>{},i=Xi(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,i,n);else if(this.parent.getWorkerSource){const t=e.type.split(\".\");this.parent.getWorkerSource(e.sourceMapId,t[0],i.source)[t[1]](i,n);}else n(new Error(`Could not find function ${e.type}`));}}remove(){this.scheduler.remove(),this.target.removeEventListener(\"message\",this.receive,!1);}},t.CanonicalTileID=qc,t.Color=Me,t.ColorMode=Jd,t.CullFaceMode=ey,t.DEMData=Zd,t.DataConstantProperty=Ys,t.DedupedRequest=dy,t.DepthMode=Yd,t.EXTENT=So,t.Elevation=class{isDataAvailableAtPoint(t){const e=this._source();if(this.isUsingMockSource()||!e||t.y<0||t.y>1)return !1;const r=e.getSource().maxzoom,n=1<<r,i=Math.floor(t.x),s=Math.floor((t.x-i)*n),a=Math.floor(t.y*n),o=this.findDEMTileFor(new Gc(r,i,r,s,a));return !(!o||!o.dem)}getAtPointOrZero(t,e=0){return this.getAtPoint(t,e)||0}getAtPoint(t,e,r=!0){if(this.isUsingMockSource())return null;null==e&&(e=null);const n=this._source();if(!n)return e;if(t.y<0||t.y>1)return e;const i=n.getSource().maxzoom,s=1<<i,a=Math.floor(t.x),o=t.x-a,l=new Gc(i,a,i,Math.floor(o*s),Math.floor(t.y*s)),u=this.findDEMTileFor(l);if(!u||!u.dem)return e;const c=u.dem,h=1<<u.tileID.canonical.z,p=(o*h-u.tileID.canonical.x)*c.dim,f=(t.y*h-u.tileID.canonical.y)*c.dim,d=Math.floor(p),y=Math.floor(f);return (r?this.exaggeration():1)*Mr(Mr(c.get(d,y),c.get(d,y+1),f-y),Mr(c.get(d+1,y),c.get(d+1,y+1),f-y),p-d)}getAtTileOffset(t,e,r){const n=1<<t.canonical.z;return this.getAtPointOrZero(new Ro(t.wrap+(t.canonical.x+e/So)/n,(t.canonical.y+r/So)/n))}getAtTileOffsetFunc(t,e,r,n){return i=>{const s=this.getAtTileOffset(t,i.x,i.y),a=n.upVector(t.canonical,i.x,i.y);return Rl(a,a,s*n.upVectorScale(t.canonical,e,r).metersToTile),a}}getForTilePoints(t,e,r,n){if(this.isUsingMockSource())return !1;const i=ay.create(this,t,n);return !!i&&(e.forEach((t=>{t[2]=this.exaggeration()*i.getElevationAt(t[0],t[1],r);})),!0)}getMinMaxForTile(t){if(this.isUsingMockSource())return null;const e=this.findDEMTileFor(t);if(!e||!e.dem)return null;const r=e.dem.tree,n=e.tileID,i=1<<t.canonical.z-n.canonical.z;let s=t.canonical.x/i-n.canonical.x,a=t.canonical.y/i-n.canonical.y,o=0;for(let e=0;e<t.canonical.z-n.canonical.z&&!r.leaves[o];e++){s*=2,a*=2;const t=2*Math.floor(a)+Math.floor(s);o=r.childOffsets[o]+t,s%=1,a%=1;}return {min:this.exaggeration()*r.minimums[o],max:this.exaggeration()*r.maximums[o]}}getMinElevationBelowMSL(){throw new Error(\"Pure virtual method called.\")}raycast(t,e,r){throw new Error(\"Pure virtual method called.\")}pointCoordinate(t){throw new Error(\"Pure virtual method called.\")}_source(){throw new Error(\"Pure virtual method called.\")}isUsingMockSource(){throw new Error(\"Pure virtual method called.\")}exaggeration(){throw new Error(\"Pure virtual method called.\")}findDEMTileFor(t){throw new Error(\"Pure virtual method called.\")}get visibleDemTiles(){throw new Error(\"Getter must be implemented in subclass.\")}},t.ErrorEvent=Kt,t.EvaluationParameters=Us,t.Event=Zt,t.Evented=Yt,t.FillExtrusionBucket=Ec,t.Frustum=su,t.FrustumCorners=iu,t.GLOBE_METERS_TO_ECEF=rf,t.GLOBE_RADIUS=ef,t.GLOBE_SCALE_MATCH_LATITUDE=45,t.GLOBE_ZOOM_THRESHOLD_MAX=6,t.GLOBE_ZOOM_THRESHOLD_MIN=5,t.GlobeSharedBuffers=class{constructor(t){this._createGrid(t),this._createPoles(t);}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const t of this._poleSegments)t.destroy();for(const t of this._gridSegments)t.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const t of this._wireframeSegments)t.destroy();}}_createGrid(t){const e=new sa,r=new wa,n=65;for(let t=0;t<n;t++)for(let r=0;r<n;r++)e.emplaceBack(r,t);this._gridSegments=[];for(let t=0,e=0;t<sf.length;t++){const i=sf[t];for(let t=0;t<i;t++)for(let e=0;e<64;e++){const i=t*n+e;r.emplaceBack(i+1,i,i+n),r.emplaceBack(i+n,i+n+1,i+1);}const s=64*i*2;this._gridSegments.push(Ao.simpleSegment(0,e,(i+1)*n,s)),e+=s;}this._gridBuffer=t.createVertexBuffer(e,tf.members),this._gridIndexBuffer=t.createIndexBuffer(r,!0);}_createPoles(t){const e=new wa;for(let t=0;t<=nf;t++)e.emplaceBack(0,t+1,t+2);this._poleIndexBuffer=t.createIndexBuffer(e,!0);const r=new ka,n=new ka;this._poleSegments=[];for(let t=0,e=0;t<5;t++){const i=360/(1<<t);r.emplaceBack(0,-ef,0,.5,0),n.emplaceBack(0,-ef,0,.5,1);for(let t=0;t<=nf;t++){const e=t/nf,s=Mr(0,i,e),[a,o,l]=vf(Ef,Cf,s,ef);r.emplaceBack(a,o,l,e,0),n.emplaceBack(a,o,l,e,1);}this._poleSegments.push(Ao.simpleSegment(e,0,66,64)),e+=66;}this._poleNorthVertexBuffer=t.createVertexBuffer(r,Jp,!1),this._poleSouthVertexBuffer=t.createVertexBuffer(n,Jp,!1);}getGridBuffers(t){return [this._gridBuffer,this._gridIndexBuffer,this._gridSegments[t]]}getPoleBuffers(t){return [this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[t]]}getWirefameBuffers(t,e){if(!this._wireframeSegments){const e=new Ma,r=nf,n=r+1;this._wireframeSegments=[];for(let t=0,i=0;t<sf.length;t++){const s=sf[t];for(let t=0;t<s;t++)for(let i=0;i<r;i++){const r=t*n+i;e.emplaceBack(r,r+1),e.emplaceBack(r,r+n),e.emplaceBack(r,r+n+1);}const a=s*r*3;this._wireframeSegments.push(Ao.simpleSegment(0,i,(s+1)*n,a)),i+=a;}this._wireframeIndexBuffer=t.createIndexBuffer(e);}return [this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[e]]}},t.GlyphManager=Mp,t.ImagePosition=Wh,t.LivePerformanceUtils=Lt,t.LngLat=Mo,t.LngLatBounds=ko,t.LocalGlyphMode=Ip,t.MAX_MERCATOR_LATITUDE=Lo,t.MercatorCoordinate=Ro,t.ONE_EM=yh,t.OverscaledTileID=Gc,t.PerformanceMarkers=Vt,t.Properties=Js,t.RGBAImage=gu,t.Ray=nu,t.RequestManager=class{constructor(t,e,r){this._transformRequestFn=t,this._customAccessToken=e,this._silenceAuthErrors=!!r,this._createSkuToken();}_createSkuToken(){const t=function(){let t=\"\";for(let e=0;e<10;e++)t+=\"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\"[Math.floor(62*Math.random())];return {token:[\"1\",h,t].join(\"\"),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt;}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeStyleURL(t,e){if(!mt(t))return t;const r=_t(t);return r.path=`/styles/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||e)}normalizeGlyphsURL(t,e){if(!mt(t))return t;const r=_t(t);return r.path=`/fonts/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||e)}normalizeSourceURL(t,e,r,n){if(!mt(t))return t;const i=_t(t);return i.path=`/v4/${i.authority}.json`,i.params.push(\"secure\"),r&&i.params.push(`language=${r}`),n&&i.params.push(`worldview=${n}`),this._makeAPIURL(i,this._customAccessToken||e)}normalizeSpriteURL(t,e,r,n){const i=_t(t);return mt(t)?(i.path=`/styles/v1${i.path}/sprite${e}${r}`,this._makeAPIURL(i,this._customAccessToken||n)):(i.path+=`${e}${r}`,At(i))}normalizeTileURL(t,e,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!mt(t))return t;const n=_t(t);n.path=n.path.replace(/(\\.(png|jpg)\\d*)(?=$)/,`${e||r&&\"raster\"!==n.authority&&512===r?\"@2x\":\"\"}${s.supported?\".webp\":\"$1\"}`),\"raster\"===n.authority?n.path=`/${i.RASTER_URL_PREFIX}${n.path}`:(n.path=n.path.replace(/^.+\\/v4\\//,\"/\"),n.path=`/${i.TILE_URL_VERSION}${n.path}`);const a=this._customAccessToken||function(t){for(const e of t){const t=e.match(/^access_token=(.*)$/);if(t)return t[1]}return null}(n.params)||i.ACCESS_TOKEN;return i.REQUIRE_ACCESS_TOKEN&&a&&this._skuToken&&n.params.push(`sku=${this._skuToken}`),this._makeAPIURL(n,a)}canonicalizeTileURL(t,e){const r=_t(t);if(!r.path.match(/^(\\/v4\\/|\\/raster\\/v1\\/)/)||!r.path.match(/\\.[\\w]+$/))return t;let n=\"mapbox://\";r.path.match(/^\\/raster\\/v1\\//)?n+=`raster/${r.path.replace(`/${i.RASTER_URL_PREFIX}/`,\"\")}`:n+=`tiles/${r.path.replace(`/${i.TILE_URL_VERSION}/`,\"\")}`;let s=r.params;return e&&(s=s.filter((t=>!t.match(/^access_token=/)))),s.length&&(n+=`?${s.join(\"&\")}`),n}canonicalizeTileset(t,e){const r=!!e&&mt(e),n=[];for(const e of t.tiles||[])gt(e)?n.push(this.canonicalizeTileURL(e,r)):n.push(e);return n}_makeAPIURL(t,e){const r=\"See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes\",n=_t(i.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,\"http\"===t.protocol){const e=t.params.indexOf(\"secure\");e>=0&&t.params.splice(e,1);}if(\"/\"!==n.path&&(t.path=`${n.path}${t.path}`),!i.REQUIRE_ACCESS_TOKEN)return At(t);if(e=e||i.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${r}`);if(\"s\"===e[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${r}`)}return t.params=t.params.filter((t=>-1===t.indexOf(\"access_token\"))),t.params.push(`access_token=${e||\"\"}`),At(t)}},t.ResourceType=st,t.SegmentVector=Ao,t.SourceCache=ry,t.StencilMode=Wd,t.StructArrayLayout1ui2=Ta,t.StructArrayLayout2f1f2i16=xa,t.StructArrayLayout2i4=sa,t.StructArrayLayout2ui4=Ma,t.StructArrayLayout3f12=ba,t.StructArrayLayout3ui6=wa,t.StructArrayLayout4i8=oa,t.StructArrayLayout5f20=ka,t.Texture=wd,t.Tile=Ld,t.Transitionable=qs,t.Uniform1f=Qa,t.Uniform1i=class extends Ja{constructor(t){super(t),this.current=0;}set(t,e,r){this.fetchUniformLocation(t,e)&&this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r));}},t.Uniform2f=class extends Ja{constructor(t){super(t),this.current=[0,0];}set(t,e,r){this.fetchUniformLocation(t,e)&&(r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1])));}},t.Uniform3f=class extends Ja{constructor(t){super(t),this.current=[0,0,0];}set(t,e,r){this.fetchUniformLocation(t,e)&&(r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2])));}},t.Uniform4f=to,t.UniformColor=eo,t.UniformMatrix2f=class extends Ja{constructor(t){super(t),this.current=io;}set(t,e,r){if(this.fetchUniformLocation(t,e))for(let t=0;t<4;t++)if(r[t]!==this.current[t]){this.current=r,this.gl.uniformMatrix2fv(this.location,!1,r);break}}},t.UniformMatrix3f=class extends Ja{constructor(t){super(t),this.current=no;}set(t,e,r){if(this.fetchUniformLocation(t,e))for(let t=0;t<9;t++)if(r[t]!==this.current[t]){this.current=r,this.gl.uniformMatrix3fv(this.location,!1,r);break}}},t.UniformMatrix4f=class extends Ja{constructor(t){super(t),this.current=ro;}set(t,e,r){if(this.fetchUniformLocation(t,e)){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let t=1;t<16;t++)if(r[t]!==this.current[t]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}}},t.UnwrappedTileID=Nc,t.ValidationError=Wn,t.VectorTileFeature=Sc,t.VectorTileWorkerSource=class extends Yt{constructor(t,e,r,n,i){super(),this.actor=t,this.layerIndex=e,this.availableImages=r,this.loadVectorData=i||yy,this.loading={},this.loaded={},this.deduped=new dy(t.scheduler),this.isSpriteLoaded=n,this.scheduler=t.scheduler;}loadTile(t,e){const r=t.uid,n=t&&t.request,i=n&&n.collectResourceTiming,s=this.loading[r]=new py(t);s.abort=this.loadVectorData(t,((a,o)=>{const l=!this.loading[r];if(delete this.loading[r],l||a||!o)return s.status=\"done\",l||(this.loaded[r]=s),e(a);const u=o.rawData,c={};o.expires&&(c.expires=o.expires),o.cacheControl&&(c.cacheControl=o.cacheControl),s.vectorTile=o.vectorTile||new Ac(new kh(u));const h=()=>{s.parse(s.vectorTile,this.layerIndex,this.availableImages,this.actor,((t,r)=>{if(t||!r)return e(t);const s={};if(i){const t=jt(n);t.length>0&&(s.resourceTiming=JSON.parse(JSON.stringify(t)));}e(null,z({rawTileData:u.slice(0)},r,c,s));}));};this.isSpriteLoaded?h():this.once(\"isSpriteLoaded\",(()=>{this.scheduler?this.scheduler.add(h,{type:\"parseTile\",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom}):h();})),this.loaded=this.loaded||{},this.loaded[r]=s;}));}reloadTile(t,e){const r=this.loaded,n=t.uid,i=this;if(r&&r[n]){const s=r[n];s.showCollisionBoxes=t.showCollisionBoxes,s.enableTerrain=!!t.enableTerrain,s.projection=t.projection,s.tileTransform=Df(t.tileID.canonical,t.projection);const a=(t,r)=>{const n=s.reloadCallback;n&&(delete s.reloadCallback,s.parse(s.vectorTile,i.layerIndex,this.availableImages,i.actor,n)),e(t,r);};\"parsing\"===s.status?s.reloadCallback=a:\"done\"===s.status&&(s.vectorTile?s.parse(s.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a());}}abortTile(t,e){const r=t.uid,n=this.loading[r];n&&(n.abort&&n.abort(),delete this.loading[r]),e();}removeTile(t,e){const r=this.loaded,n=t.uid;r&&r[n]&&delete r[n],e();}},t.WritingMode=Qh,t.add=Pl,t.addDynamicAttributes=ad,t.adjoint=function(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8];return t[0]=a*c-o*u,t[1]=i*u-n*c,t[2]=n*o-i*a,t[3]=o*l-s*c,t[4]=r*c-i*l,t[5]=i*s-r*o,t[6]=s*u-a*l,t[7]=n*l-r*u,t[8]=r*a-n*s,t},t.asyncAll=M,t.bezier=_,t.bindAll=V,t.boundsAttributes=Dd,t.bufferConvexPolygon=function(t,e){const r=[];for(let n=0;n<t.length;n++){const i=I(n-1,-1,t.length-1),s=I(n+1,-1,t.length-1),a=t[n],o=t[s],l=t[i].sub(a).unit(),u=o.sub(a).unit(),c=u.angleWithSep(l.x,l.y),h=l.add(u).unit().mult(-1*e/Math.sin(c/2));r.push(a.add(h));}return r},t.cacheEntryPossiblyAdded=function(t){it++,it>tt&&(t.getActor().send(\"enforceCacheSizeLimit\",Q),it=0);},t.calculateGlobeLabelMatrix=function(t,e){const{x:r,y:n}=t.point,i=If(r,n,t.worldSize/t._pixelsPerMercatorPixel,0,0);return wl(i,i,kf(pf(e)))},t.calculateGlobeMatrix=function(t){const{x:e,y:r}=t.point,{lng:n,lat:i}=t._center;return If(e,r,t.worldSize,n,i)},t.calculateGlobeMercatorMatrix=function(t){const e=t.pixelsPerMeter,r=e/Co(1,t.center.lat),n=vl(new Float64Array(16));return _l(n,n,[t.point.x,t.point.y,0]),Al(n,n,[r,r,e]),Float32Array.from(n)},t.circumferenceAtLatitude=zo,t.clamp=S,t.clearTileCache=function(t){if(!et())return;const r=e.caches.delete(H);t&&r.catch(t).then((()=>t()));},t.clipLine=_p,t.clone=function(t){var e=new ml(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=j,t.collisionCircleLayout=dh,t.config=i,t.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},t.create=function(){var t=new ml(16);return ml!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=gl,t.createExpression=Gn,t.createLayout=na,t.createStyleLayer=function(t){return \"custom\"===t.type?new gd(t):new bd[t.type](t)},t.cross=Ol,t.degToRad=x,t.distance=function(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2])},t.div=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t},t.dot=$l,t.earthRadius=Io,t.ease=A,t.easeCubicInOut=w,t.ecefToLatLng=function([t,e,r]){const n=Math.hypot(t,e,r),i=Math.atan2(t,r),s=.5*Math.PI-Math.acos(-e/n);return new Mo(v(i),v(s))},t.emitValidationErrors=Ri,t.endsWith=L,t.enforceCacheSizeLimit=function(t){rt(),W&&W.then((e=>{e.keys().then((r=>{for(let n=0;n<r.length-t;n++)e.delete(r[n]);}));}));},t.evaluateSizeForFeature=xh,t.evaluateSizeForZoom=vh,t.evaluateVariableOffset=$p,t.evented=Ls,t.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},t.exactEquals$1=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},t.exported=Nt,t.exported$1=s,t.extend=z,t.extend$1=Wt,t.fillExtrusionHeightLift=Rc,t.filterObject=R,t.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},t.fromQuat=function(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=r+r,o=n+n,l=i+i,u=r*a,c=n*a,h=n*o,p=i*a,f=i*o,d=i*l,y=s*a,m=s*o,g=s*l;return t[0]=1-h-d,t[1]=c+g,t[2]=p-m,t[3]=0,t[4]=c-g,t[5]=1-u-d,t[6]=f+y,t[7]=0,t[8]=p+m,t[9]=f-y,t[10]=1-u-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.fromScaling=Il,t.furthestTileCorner=function(t){const e=Math.round((t+45+360)%360/90)%4;return b[e]},t.getAABBPointSquareDist=function(t,e,r){let n=0;for(let i=0;i<2;++i){const s=r?r[i]:0;t[i]>s&&(n+=(t[i]-s)*(t[i]-s)),e[i]<s&&(n+=(s-e[i])*(s-e[i]));}return n},t.getAnchorAlignment=cp,t.getAnchorJustification=qp,t.getBounds=function(t){let e=1/0,r=1/0,n=-1/0,i=-1/0;for(const s of t)e=Math.min(e,s.x),r=Math.min(r,s.y),n=Math.max(n,s.x),i=Math.max(i,s.y);return {min:new d(e,r),max:new d(n,i)}},t.getColumn=Y,t.getGridMatrix=function(t,e,r,n){const i=e.getNorth(),s=e.getSouth(),a=e.getWest(),o=e.getEast(),l=1<<t.z,u=o-a,c=i-s,h=u/nf,p=-c/sf[r],f=[0,h,0,p,0,0,i,a,0];if(t.z>0){const t=180/n;xl(f,f,[t/u+1,0,0,0,t/c+1,0,-.5*t/h,.5*t/p,1]);}return f[2]=l,f[5]=t.x,f[8]=t.y,f},t.getImage=dt,t.getJSON=function(t,e){return lt(z(t,{type:\"json\"}),e)},t.getLatitudinalLod=function(t){const e=80.051129;t=S(t,-80.051129,e)/e*90;const r=Math.pow(Math.abs(Math.sin(x(t))),3);return Math.round(r*(sf.length-1))},t.getMapSessionAPI=Pt,t.getPerformanceMeasurement=jt,t.getProjection=ed,t.getRTLTextPluginStatus=Fs,t.getReferrer=ot,t.getTilePoint=function(t,{x:e,y:r},n=0){return new d(((e-n)*t.scale-t.x)*So,(r*t.scale-t.y)*So)},t.getTileVec3=function(t,e,r=0){return Cl(((e.x-r)*t.scale-t.x)*So,(e.y*t.scale-t.y)*So,Vo(e.z,e.y))},t.getVideo=function(t,r){const n=e.document.createElement(\"video\");n.muted=!0,n.onloadstart=function(){r(null,n);};for(let r=0;r<t.length;r++){const i=e.document.createElement(\"source\");ct(t[r])||(n.crossOrigin=\"Anonymous\"),i.src=t[r],n.appendChild(i);}return {cancel:()=>{}}},t.globeCenterToScreenPoint=function(t){const e=[0,0,0],r=vl(new Float64Array(16));return wl(r,t.pixelMatrix,t.globeMatrix),ql(e,e,r),new d(e[0],e[1])},t.globeDenormalizeECEF=kf,t.globeECEFOrigin=function(t,e){const r=[0,0,0];return ql(r,r,Sf(pf(e.canonical))),ql(r,r,t),r},t.globeNormalizeECEF=Sf,t.globePixelsToTileUnits=function(t,e){return So/(512*Math.pow(2,t))*_f(pf(e))},t.globePoleMatrixForTile=function(t,e,r){const n=vl(new Float64Array(16)),i=(e/(1<<t)-.5)*Math.PI*2;return kl(n,r.globeMatrix,i),Float32Array.from(n)},t.globeTileBounds=pf,t.globeTiltAtLngLat=Tf,t.globeToMercatorTransition=Mf,t.globeUseCustomAntiAliasing=function(t,e,r){const n=Mf(r.zoom),i=t.style.map._antialias,s=!!e.extStandardDerivatives,a=e.extStandardDerivativesForceOff||t.terrain&&t.terrain.exaggeration()>0;return 0===n&&!i&&!a&&s},t.identity=vl,t.identity$1=Ql,t.invert=bl,t.isFullscreen=function(){return !!e.document.fullscreenElement||!!e.document.webkitFullscreenElement},t.isLngLatBehindGlobe=zf,t.isMapAuthenticated=function(t){return Dt.has(t)},t.isMapboxURL=mt,t.isSafariWithAntialiasingBug=function(t){const e=t.navigator?t.navigator.userAgent:null;return !!Z(t)&&e&&(e.match(\"Version/15.4\")||e.match(\"Version/15.5\")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},t.latFromMercatorY=Do,t.latLngToECEF=bf,t.len=Kl,t.length=El,t.length$1=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},t.lngFromMercatorX=Po,t.loadVectorTile=yy,t.makeRequest=lt,t.mapValue=function(t,e,r,n,i){return S((t-e)/(r-e)*(i-n)+n,n,i)},t.mercatorScale=Fo,t.mercatorXfromLng=Bo,t.mercatorYfromLat=Eo,t.mercatorZfromAltitude=Co,t.mul=Tl,t.mul$1=Zl,t.multiply=wl,t.multiply$1=xl,t.multiply$2=Vl,t.nextPowerOfTwo=P,t.normalize=Ul,t.normalize$1=ru,t.normalize$2=Hl,t.number=Mr,t.ortho=function(t,e,r,n,i,s,a){var o=1/(e-r),l=1/(n-i),u=1/(s-a);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*o,t[13]=(i+n)*l,t[14]=(a+s)*u,t[15]=1,t},t.pbf=kh,t.perspective=function(t,e,r,n,i){var s,a=1/Math.tan(e/2);return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+n)*(s=1/(n-i)),t[14]=2*i*n*s):(t[10]=-1,t[14]=-2*n),t},t.pick=function(t,e){const r={};for(let n=0;n<e.length;n++){const i=e[n];i in t&&(r[i]=t[i]);}return r},t.plugin=js,t.pointGeometry=d,t.polesInViewport=function(t){const e=vl(new Float64Array(16));wl(e,t.pixelMatrix,t.globeMatrix);const r=[0,af,0],n=[0,of,0];return ql(r,r,e),ql(n,n,e),[r[0]>0&&r[0]<=t.width&&r[1]>0&&r[1]<=t.height&&!zf(t,new Mo(t.center.lat,90)),n[0]>0&&n[0]<=t.width&&n[1]>0&&n[1]<=t.height&&!zf(t,new Mo(t.center.lat,-90))]},t.polygonContainsPoint=al,t.polygonIntersectsBox=ol,t.polygonIntersectsPolygon=Wo,t.polygonizeBounds=function(t,e,r=0,n=!0){const i=new d(r,r),s=t.sub(i),a=e.add(i),o=[s,new d(a.x,s.y),a,new d(s.x,a.y)];return n&&o.push(s.clone()),o},t.posAttributes=tf,t.postMapLoadEvent=zt,t.postPerformanceEvent=Et,t.postTurnstileEvent=Mt,t.potpack=Hh,t.prevPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},t.radToDeg=v,t.refProperties=[\"type\",\"source\",\"source-layer\",\"minzoom\",\"maxzoom\",\"filter\",\"layout\"],t.registerForPluginStateChange=function(t){return t({pluginStatus:Cs,pluginURL:Ps}),Ls.on(\"pluginStateChange\",t),t},t.removeAuthState=function(t){Dt.delete(t);},t.renderColorRamp=vu,t.resample=Uo,t.rotateX=Sl,t.rotateX$1=tu,t.rotateY=kl,t.rotateY$1=eu,t.rotateZ=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),s=e[0],a=e[1],o=e[2],l=e[3],u=e[4],c=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+u*n,t[1]=a*i+c*n,t[2]=o*i+h*n,t[3]=l*i+p*n,t[4]=u*i-s*n,t[5]=c*i-a*n,t[6]=h*i-o*n,t[7]=p*i-l*n,t},t.rotateZ$1=function(t,e,r){r*=.5;var n=e[0],i=e[1],s=e[2],a=e[3],o=Math.sin(r),l=Math.cos(r);return t[0]=n*l+i*o,t[1]=i*l-n*o,t[2]=s*l+a*o,t[3]=a*l-s*o,t},t.scale=Al,t.scale$1=Yl,t.scale$2=Rl,t.scaleAndAdd=jl,t.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t},t.setCacheLimits=function(t,e){Q=t,tt=e;},t.setColumn=function(t,e,r){t[4*e+0]=r[0],t[4*e+1]=r[1],t[4*e+2]=r[2],t[4*e+3]=r[3];},t.setRTLTextPlugin=function(t,e,r=!1){if(Cs===Ts||Cs===zs||Cs===Bs)throw new Error(\"setRTLTextPlugin cannot be called multiple times.\");Ps=Nt.resolveURL(t),Cs=Ts,Es=e,Vs(),r||Rs();},t.smoothstep=k,t.spec=Ht,t.squaredLength=function(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n},t.storeAuthState=function(t,e){e?Dt.add(t):Dt.delete(t);},t.sub=Xl,t.subtract=Dl,t.symbolSize=bh,t.tileAABB=function(t,e,r,n,i,s,a,o,l){if(\"globe\"===l.name)return mf(t,e,new qc(r,n,i));const u=Df({z:r,x:n,y:i},l);return new au([(s+u.x/u.scale)*e,e*(u.y/u.scale),a],[(s+u.x2/u.scale)*e,e*(u.y2/u.scale),o])},t.tileCornersToBounds=gf,t.tileTransform=Df,t.transformMat3=function(t,e,r){var n=e[0],i=e[1],s=e[2];return t[0]=n*r[0]+i*r[3]+s*r[6],t[1]=n*r[1]+i*r[4]+s*r[7],t[2]=n*r[2]+i*r[5]+s*r[8],t},t.transformMat4=ql,t.transformMat4$1=Wl,t.transformQuat=Nl,t.transitionTileAABBinECEF=df,t.translate=_l,t.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i;}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},t.triggerPluginCompletionEvent=Ds,t.uniqueId=E,t.updateGlobeVertexNormal=function(t,e,r,n,i){const s=5*e+2;t.float32[s+0]=r,t.float32[s+1]=n,t.float32[s+2]=i;},t.validateCustomStyleLayer=function(t){const e=[],r=t.id;return void 0===r&&e.push({message:`layers.${r}: missing required property \"id\"`}),void 0===t.render&&e.push({message:`layers.${r}: missing required method \"render\"`}),t.renderingMode&&\"2d\"!==t.renderingMode&&\"3d\"!==t.renderingMode&&e.push({message:`layers.${r}: property \"renderingMode\" must be either \"2d\" or \"3d\"`}),e},t.validateFilter=t=>Fi(xi(t)),t.validateFog=t=>Fi(Bi(t)),t.validateLayer=t=>Fi(Ai(t)),t.validateLight=t=>Fi(Ti(t)),t.validateSource=t=>Fi(Ii(t)),t.validateStyle=Di,t.validateTerrain=t=>Fi(zi(t)),t.values=T,t.vectorTile=hc,t.version=r,t.warnOnce=$,t.window=e,t.wrap=I;}));\n\ndefine([\"./shared\"],(function(e){\"use strict\";function t(e){if(\"number\"==typeof e||\"boolean\"==typeof e||\"string\"==typeof e||null==e)return JSON.stringify(e);if(Array.isArray(e)){let r=\"[\";for(const o of e)r+=`${t(o)},`;return `${r}]`}let r=\"{\";for(const o of Object.keys(e).sort())r+=`${o}:${t(e[o])},`;return `${r}}`}function r(r){let o=\"\";for(const n of e.refProperties)o+=`/${t(r[n])}`;return o}class o{constructor(e){this.keyCache={},e&&this.replace(e);}replace(e){this._layerConfigs={},this._layers={},this.update(e,[]);}update(t,o){for(const r of t)this._layerConfigs[r.id]=r,(this._layers[r.id]=e.createStyleLayer(r)).compileFilter(),this.keyCache[r.id]&&delete this.keyCache[r.id];for(const e of o)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const n=function(e,t){const o={};for(let n=0;n<e.length;n++){const i=t&&t[e[n].id]||r(e[n]);t&&(t[e[n].id]=i);let s=o[i];s||(s=o[i]=[]),s.push(e[n]);}const n=[];for(const e in o)n.push(o[e]);return n}(e.values(this._layerConfigs),this.keyCache);for(const e of n){const t=e.map((e=>this._layers[e.id])),r=t[0];if(\"none\"===r.visibility)continue;const o=r.source||\"\";let n=this.familiesBySource[o];n||(n=this.familiesBySource[o]={});const i=r.sourceLayer||\"_geojsonTileLayer\";let s=n[i];s||(s=n[i]=[]),s.push(t);}}}class n{loadTile(t,r){const{uid:o,encoding:n,rawImageData:i,padding:s,buildQuadTree:a}=t,l=e.window.ImageBitmap&&i instanceof e.window.ImageBitmap?this.getImageData(i,s):i;r(null,new e.DEMData(o,l,n,s<1,a));}getImageData(e,t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext(\"2d\",{willReadFrequently:!0})),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const r=this.offscreenCanvasContext.getImageData(-t,-t,e.width+2*t,e.height+2*t);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),r}}var i=function e(t,r){var o,n=t&&t.type;if(\"FeatureCollection\"===n)for(o=0;o<t.features.length;o++)e(t.features[o],r);else if(\"GeometryCollection\"===n)for(o=0;o<t.geometries.length;o++)e(t.geometries[o],r);else if(\"Feature\"===n)e(t.geometry,r);else if(\"Polygon\"===n)s(t.coordinates,r);else if(\"MultiPolygon\"===n)for(o=0;o<t.coordinates.length;o++)s(t.coordinates[o],r);return t};function s(e,t){if(0!==e.length){a(e[0],t);for(var r=1;r<e.length;r++)a(e[r],!t);}}function a(e,t){for(var r=0,o=0,n=0,i=e.length,s=i-1;n<i;s=n++){var a=(e[n][0]-e[s][0])*(e[s][1]+e[n][1]),l=r+a;o+=Math.abs(r)>=Math.abs(a)?r-l+a:a-l+r,r=l;}r+o>=0!=!!t&&e.reverse();}const l=e.VectorTileFeature.prototype.toGeoJSON;class u{constructor(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,\"id\"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10));}loadGeometry(){if(1===this._feature.type){const t=[];for(const r of this._feature.geometry)t.push([new e.pointGeometry(r[0],r[1])]);return t}{const t=[];for(const r of this._feature.geometry){const o=[];for(const t of r)o.push(new e.pointGeometry(t[0],t[1]));t.push(o);}return t}}toGeoJSON(e,t,r){return l.call(this,e,t,r)}}class h{constructor(t){this.layers={_geojsonTileLayer:this},this.name=\"_geojsonTileLayer\",this.extent=e.EXTENT,this.length=t.length,this._features=t;}feature(e){return new u(this._features[e])}}var c={exports:{}},f=e.pointGeometry,p=e.vectorTile.VectorTileFeature,g=d;function d(e,t){this.options=t||{},this.features=e,this.length=e.length;}function m(e,t){this.id=\"number\"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096;}d.prototype.feature=function(e){return new m(this.features[e],this.options.extent)},m.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var r=e[t],o=[],n=0;n<r.length;n++)o.push(new f(r[n][0],r[n][1]));this.geometry.push(o);}return this.geometry},m.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,r=-1/0,o=1/0,n=-1/0,i=0;i<e.length;i++)for(var s=e[i],a=0;a<s.length;a++){var l=s[a];t=Math.min(t,l.x),r=Math.max(r,l.x),o=Math.min(o,l.y),n=Math.max(n,l.y);}return [t,o,r,n]},m.prototype.toGeoJSON=p.prototype.toGeoJSON;var y=e.pbf,v=g;function x(e){var t=new y;return function(e,t){for(var r in e.layers)t.writeMessage(3,w,e.layers[r]);}(e,t),t.finish()}function w(e,t){var r;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||\"\"),t.writeVarintField(5,e.extent||4096);var o={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<e.length;r++)o.feature=e.feature(r),t.writeMessage(2,S,o);var n=o.keys;for(r=0;r<n.length;r++)t.writeStringField(3,n[r]);var i=o.values;for(r=0;r<i.length;r++)t.writeMessage(4,I,i[r]);}function S(e,t){var r=e.feature;void 0!==r.id&&t.writeVarintField(1,r.id),t.writeMessage(2,M,e),t.writeVarintField(3,r.type),t.writeMessage(4,k,r);}function M(e,t){var r=e.feature,o=e.keys,n=e.values,i=e.keycache,s=e.valuecache;for(var a in r.properties){var l=r.properties[a],u=i[a];if(null!==l){void 0===u&&(o.push(a),i[a]=u=o.length-1),t.writeVarint(u);var h=typeof l;\"string\"!==h&&\"boolean\"!==h&&\"number\"!==h&&(l=JSON.stringify(l));var c=h+\":\"+l,f=s[c];void 0===f&&(n.push(l),s[c]=f=n.length-1),t.writeVarint(f);}}}function P(e,t){return (t<<3)+(7&e)}function b(e){return e<<1^e>>31}function k(e,t){for(var r=e.loadGeometry(),o=e.type,n=0,i=0,s=r.length,a=0;a<s;a++){var l=r[a],u=1;1===o&&(u=l.length),t.writeVarint(P(1,u));for(var h=3===o?l.length-1:l.length,c=0;c<h;c++){1===c&&1!==o&&t.writeVarint(P(2,h-1));var f=l[c].x-n,p=l[c].y-i;t.writeVarint(b(f)),t.writeVarint(b(p)),n+=f,i+=p;}3===o&&t.writeVarint(P(7,1));}}function I(e,t){var r=typeof e;\"string\"===r?t.writeStringField(1,e):\"boolean\"===r?t.writeBooleanField(7,e):\"number\"===r&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e));}function T(e,t,r,o,n,i){if(n-o<=r)return;const s=o+n>>1;_(e,t,s,o,n,i%2),T(e,t,r,o,s-1,i+1),T(e,t,r,s+1,n,i+1);}function _(e,t,r,o,n,i){for(;n>o;){if(n-o>600){const s=n-o+1,a=r-o+1,l=Math.log(s),u=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*u*(s-u)/s)*(a-s/2<0?-1:1);_(e,t,r,Math.max(o,Math.floor(r-a*u/s+h)),Math.min(n,Math.floor(r+(s-a)*u/s+h)),i);}const s=t[2*r+i];let a=o,l=n;for(L(e,t,o,r),t[2*n+i]>s&&L(e,t,o,n);a<l;){for(L(e,t,a,l),a++,l--;t[2*a+i]<s;)a++;for(;t[2*l+i]>s;)l--;}t[2*o+i]===s?L(e,t,o,l):(l++,L(e,t,l,n)),l<=r&&(o=l+1),r<=l&&(n=l-1);}}function L(e,t,r,o){C(e,r,o),C(t,2*r,2*o),C(t,2*r+1,2*o+1);}function C(e,t,r){const o=e[t];e[t]=e[r],e[r]=o;}function O(e,t,r,o){const n=e-r,i=t-o;return n*n+i*i}c.exports=x,c.exports.fromVectorTileJs=x,c.exports.fromGeojsonVt=function(e,t){t=t||{};var r={};for(var o in e)r[o]=new v(e[o].features,t),r[o].name=o,r[o].version=t.version,r[o].extent=t.extent;return x({layers:r})},c.exports.GeoJSONWrapper=v;const z=e=>e[0],E=e=>e[1];class F{constructor(e,t=z,r=E,o=64,n=Float64Array){this.nodeSize=o,this.points=e;const i=e.length<65536?Uint16Array:Uint32Array,s=this.ids=new i(e.length),a=this.coords=new n(2*e.length);for(let o=0;o<e.length;o++)s[o]=o,a[2*o]=t(e[o]),a[2*o+1]=r(e[o]);T(s,a,o,0,s.length-1,0);}range(e,t,r,o){return function(e,t,r,o,n,i,s){const a=[0,e.length-1,0],l=[];let u,h;for(;a.length;){const c=a.pop(),f=a.pop(),p=a.pop();if(f-p<=s){for(let s=p;s<=f;s++)u=t[2*s],h=t[2*s+1],u>=r&&u<=n&&h>=o&&h<=i&&l.push(e[s]);continue}const g=Math.floor((p+f)/2);u=t[2*g],h=t[2*g+1],u>=r&&u<=n&&h>=o&&h<=i&&l.push(e[g]);const d=(c+1)%2;(0===c?r<=u:o<=h)&&(a.push(p),a.push(g-1),a.push(d)),(0===c?n>=u:i>=h)&&(a.push(g+1),a.push(f),a.push(d));}return l}(this.ids,this.coords,e,t,r,o,this.nodeSize)}within(e,t,r){return function(e,t,r,o,n,i){const s=[0,e.length-1,0],a=[],l=n*n;for(;s.length;){const u=s.pop(),h=s.pop(),c=s.pop();if(h-c<=i){for(let n=c;n<=h;n++)O(t[2*n],t[2*n+1],r,o)<=l&&a.push(e[n]);continue}const f=Math.floor((c+h)/2),p=t[2*f],g=t[2*f+1];O(p,g,r,o)<=l&&a.push(e[f]);const d=(u+1)%2;(0===u?r-n<=p:o-n<=g)&&(s.push(c),s.push(f-1),s.push(d)),(0===u?r+n>=p:o+n>=g)&&(s.push(f+1),s.push(h),s.push(d));}return a}(this.ids,this.coords,e,t,r,this.nodeSize)}}const N={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},j=Math.fround||(Z=new Float32Array(1),e=>(Z[0]=+e,Z[0]));var Z;class G{constructor(e){this.options=$(Object.create(N),e),this.trees=new Array(this.options.maxZoom+1);}load(e){const{log:t,minZoom:r,maxZoom:o,nodeSize:n}=this.options;t&&console.time(\"total time\");const i=`prepare ${e.length} points`;t&&console.time(i),this.points=e;let s=[];for(let t=0;t<e.length;t++)e[t].geometry&&s.push(W(e[t],t));this.trees[o+1]=new F(s,B,R,n,Float32Array),t&&console.timeEnd(i);for(let e=o;e>=r;e--){const r=+Date.now();s=this._cluster(s,e),this.trees[e]=new F(s,B,R,n,Float32Array),t&&console.log(\"z%d: %d clusters in %dms\",e,s.length,+Date.now()-r);}return t&&console.timeEnd(\"total time\"),this}getClusters(e,t){let r=((e[0]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[1]));let n=180===e[2]?180:((e[2]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,n=180;else if(r>n){const e=this.getClusters([r,o,180,i],t),s=this.getClusters([-180,o,n,i],t);return e.concat(s)}const s=this.trees[this._limitZoom(t)],a=s.range(V(r),A(i),V(n),A(o)),l=[];for(const e of a){const t=s.points[e];l.push(t.numPoints?Y(t):this.points[t.index]);}return l}getChildren(e){const t=this._getOriginId(e),r=this._getOriginZoom(e),o=\"No cluster with the specified id.\",n=this.trees[r];if(!n)throw new Error(o);const i=n.points[t];if(!i)throw new Error(o);const s=this.options.radius/(this.options.extent*Math.pow(2,r-1)),a=n.within(i.x,i.y,s),l=[];for(const t of a){const r=n.points[t];r.parentId===e&&l.push(r.numPoints?Y(r):this.points[r.index]);}if(0===l.length)throw new Error(o);return l}getLeaves(e,t,r){const o=[];return this._appendLeaves(o,e,t=t||10,r=r||0,0),o}getTile(e,t,r){const o=this.trees[this._limitZoom(e)],n=Math.pow(2,e),{extent:i,radius:s}=this.options,a=s/i,l=(r-a)/n,u=(r+1+a)/n,h={features:[]};return this._addTileFeatures(o.range((t-a)/n,l,(t+1+a)/n,u),o.points,t,r,n,h),0===t&&this._addTileFeatures(o.range(1-a/n,l,1,u),o.points,n,r,n,h),t===n-1&&this._addTileFeatures(o.range(0,l,a/n,u),o.points,-1,r,n,h),h.features.length?h:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const r=this.getChildren(e);if(t++,1!==r.length)break;e=r[0].properties.cluster_id;}return t}_appendLeaves(e,t,r,o,n){const i=this.getChildren(t);for(const t of i){const i=t.properties;if(i&&i.cluster?n+i.point_count<=o?n+=i.point_count:n=this._appendLeaves(e,i.cluster_id,r,o,n):n<o?n++:e.push(t),e.length===r)break}return n}_addTileFeatures(e,t,r,o,n,i){for(const s of e){const e=t[s],a=e.numPoints;let l,u,h;if(a)l=X(e),u=e.x,h=e.y;else {const t=this.points[e.index];l=t.properties,u=V(t.geometry.coordinates[0]),h=A(t.geometry.coordinates[1]);}const c={type:1,geometry:[[Math.round(this.options.extent*(u*n-r)),Math.round(this.options.extent*(h*n-o))]],tags:l};let f;a?f=e.id:this.options.generateId?f=e.index:this.points[e.index].id&&(f=this.points[e.index].id),void 0!==f&&(c.id=f),i.features.push(c);}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const r=[],{radius:o,extent:n,reduce:i,minPoints:s}=this.options,a=o/(n*Math.pow(2,t));for(let o=0;o<e.length;o++){const n=e[o];if(n.zoom<=t)continue;n.zoom=t;const l=this.trees[t+1],u=l.within(n.x,n.y,a),h=n.numPoints||1;let c=h;for(const e of u){const r=l.points[e];r.zoom>t&&(c+=r.numPoints||1);}if(c>h&&c>=s){let e=n.x*h,s=n.y*h,a=i&&h>1?this._map(n,!0):null;const f=(o<<5)+(t+1)+this.points.length;for(const r of u){const o=l.points[r];if(o.zoom<=t)continue;o.zoom=t;const u=o.numPoints||1;e+=o.x*u,s+=o.y*u,o.parentId=f,i&&(a||(a=this._map(n,!0)),i(a,this._map(o)));}n.parentId=f,r.push(J(e/c,s/c,f,c,a));}else if(r.push(n),c>1)for(const e of u){const o=l.points[e];o.zoom<=t||(o.zoom=t,r.push(o));}}return r}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return (e-this.points.length)%32}_map(e,t){if(e.numPoints)return t?$({},e.properties):e.properties;const r=this.points[e.index].properties,o=this.options.map(r);return t&&o===r?$({},o):o}}function J(e,t,r,o,n){return {x:j(e),y:j(t),zoom:1/0,id:r,parentId:-1,numPoints:o,properties:n}}function W(e,t){const[r,o]=e.geometry.coordinates;return {x:j(V(r)),y:j(A(o)),zoom:1/0,index:t,parentId:-1}}function Y(e){return {type:\"Feature\",id:e.id,properties:X(e),geometry:{type:\"Point\",coordinates:[(t=e.x,360*(t-.5)),D(e.y)]}};var t;}function X(e){const t=e.numPoints,r=t>=1e4?`${Math.round(t/1e3)}k`:t>=1e3?Math.round(t/100)/10+\"k\":t;return $($({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:r})}function V(e){return e/360+.5}function A(e){const t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function D(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function $(e,t){for(const r in t)e[r]=t[r];return e}function B(e){return e.x}function R(e){return e.y}function q(e,t,r,o){for(var n,i=o,s=r-t>>1,a=r-t,l=e[t],u=e[t+1],h=e[r],c=e[r+1],f=t+3;f<r;f+=3){var p=U(e[f],e[f+1],l,u,h,c);if(p>i)n=f,i=p;else if(p===i){var g=Math.abs(f-s);g<a&&(n=f,a=g);}}i>o&&(n-t>3&&q(e,t,n,o),e[n+2]=i,r-n>3&&q(e,n,r,o));}function U(e,t,r,o,n,i){var s=n-r,a=i-o;if(0!==s||0!==a){var l=((e-r)*s+(t-o)*a)/(s*s+a*a);l>1?(r=n,o=i):l>0&&(r+=s*l,o+=a*l);}return (s=e-r)*s+(a=t-o)*a}function Q(e,t,r,o){var n={id:void 0===e?null:e,type:t,geometry:r,tags:o,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,r=e.type;if(\"Point\"===r||\"MultiPoint\"===r||\"LineString\"===r)H(e,t);else if(\"Polygon\"===r||\"MultiLineString\"===r)for(var o=0;o<t.length;o++)H(e,t[o]);else if(\"MultiPolygon\"===r)for(o=0;o<t.length;o++)for(var n=0;n<t[o].length;n++)H(e,t[o][n]);}(n),n}function H(e,t){for(var r=0;r<t.length;r+=3)e.minX=Math.min(e.minX,t[r]),e.minY=Math.min(e.minY,t[r+1]),e.maxX=Math.max(e.maxX,t[r]),e.maxY=Math.max(e.maxY,t[r+1]);}function K(e,t,r,o){if(t.geometry){var n=t.geometry.coordinates,i=t.geometry.type,s=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),a=[],l=t.id;if(r.promoteId?l=t.properties[r.promoteId]:r.generateId&&(l=o||0),\"Point\"===i)ee(n,a);else if(\"MultiPoint\"===i)for(var u=0;u<n.length;u++)ee(n[u],a);else if(\"LineString\"===i)te(n,a,s,!1);else if(\"MultiLineString\"===i){if(r.lineMetrics){for(u=0;u<n.length;u++)te(n[u],a=[],s,!1),e.push(Q(l,\"LineString\",a,t.properties));return}re(n,a,s,!1);}else if(\"Polygon\"===i)re(n,a,s,!0);else {if(\"MultiPolygon\"!==i){if(\"GeometryCollection\"===i){for(u=0;u<t.geometry.geometries.length;u++)K(e,{id:l,geometry:t.geometry.geometries[u],properties:t.properties},r,o);return}throw new Error(\"Input data is not a valid GeoJSON object.\")}for(u=0;u<n.length;u++){var h=[];re(n[u],h,s,!0),a.push(h);}}e.push(Q(l,i,a,t.properties));}}function ee(e,t){t.push(oe(e[0])),t.push(ne(e[1])),t.push(0);}function te(e,t,r,o){for(var n,i,s=0,a=0;a<e.length;a++){var l=oe(e[a][0]),u=ne(e[a][1]);t.push(l),t.push(u),t.push(0),a>0&&(s+=o?(n*u-l*i)/2:Math.sqrt(Math.pow(l-n,2)+Math.pow(u-i,2))),n=l,i=u;}var h=t.length-3;t[2]=1,q(t,0,h,r),t[h+2]=1,t.size=Math.abs(s),t.start=0,t.end=t.size;}function re(e,t,r,o){for(var n=0;n<e.length;n++){var i=[];te(e[n],i,r,o),t.push(i);}}function oe(e){return e/360+.5}function ne(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function ie(e,t,r,o,n,i,s,a){if(o/=t,i>=(r/=t)&&s<o)return e;if(s<r||i>=o)return null;for(var l=[],u=0;u<e.length;u++){var h=e[u],c=h.geometry,f=h.type,p=0===n?h.minX:h.minY,g=0===n?h.maxX:h.maxY;if(p>=r&&g<o)l.push(h);else if(!(g<r||p>=o)){var d=[];if(\"Point\"===f||\"MultiPoint\"===f)se(c,d,r,o,n);else if(\"LineString\"===f)ae(c,d,r,o,n,!1,a.lineMetrics);else if(\"MultiLineString\"===f)ue(c,d,r,o,n,!1);else if(\"Polygon\"===f)ue(c,d,r,o,n,!0);else if(\"MultiPolygon\"===f)for(var m=0;m<c.length;m++){var y=[];ue(c[m],y,r,o,n,!0),y.length&&d.push(y);}if(d.length){if(a.lineMetrics&&\"LineString\"===f){for(m=0;m<d.length;m++)l.push(Q(h.id,f,d[m],h.tags));continue}\"LineString\"!==f&&\"MultiLineString\"!==f||(1===d.length?(f=\"LineString\",d=d[0]):f=\"MultiLineString\"),\"Point\"!==f&&\"MultiPoint\"!==f||(f=3===d.length?\"Point\":\"MultiPoint\"),l.push(Q(h.id,f,d,h.tags));}}}return l.length?l:null}function se(e,t,r,o,n){for(var i=0;i<e.length;i+=3){var s=e[i+n];s>=r&&s<=o&&(t.push(e[i]),t.push(e[i+1]),t.push(e[i+2]));}}function ae(e,t,r,o,n,i,s){for(var a,l,u=le(e),h=0===n?ce:fe,c=e.start,f=0;f<e.length-3;f+=3){var p=e[f],g=e[f+1],d=e[f+2],m=e[f+3],y=e[f+4],v=0===n?p:g,x=0===n?m:y,w=!1;s&&(a=Math.sqrt(Math.pow(p-m,2)+Math.pow(g-y,2))),v<r?x>r&&(l=h(u,p,g,m,y,r),s&&(u.start=c+a*l)):v>o?x<o&&(l=h(u,p,g,m,y,o),s&&(u.start=c+a*l)):he(u,p,g,d),x<r&&v>=r&&(l=h(u,p,g,m,y,r),w=!0),x>o&&v<=o&&(l=h(u,p,g,m,y,o),w=!0),!i&&w&&(s&&(u.end=c+a*l),t.push(u),u=le(e)),s&&(c+=a);}var S=e.length-3;p=e[S],g=e[S+1],d=e[S+2],(v=0===n?p:g)>=r&&v<=o&&he(u,p,g,d),S=u.length-3,i&&S>=3&&(u[S]!==u[0]||u[S+1]!==u[1])&&he(u,u[0],u[1],u[2]),u.length&&t.push(u);}function le(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function ue(e,t,r,o,n,i){for(var s=0;s<e.length;s++)ae(e[s],t,r,o,n,i,!1);}function he(e,t,r,o){e.push(t),e.push(r),e.push(o);}function ce(e,t,r,o,n,i){var s=(i-t)/(o-t);return e.push(i),e.push(r+(n-r)*s),e.push(1),s}function fe(e,t,r,o,n,i){var s=(i-r)/(n-r);return e.push(t+(o-t)*s),e.push(i),e.push(1),s}function pe(e,t){for(var r=[],o=0;o<e.length;o++){var n,i=e[o],s=i.type;if(\"Point\"===s||\"MultiPoint\"===s||\"LineString\"===s)n=ge(i.geometry,t);else if(\"MultiLineString\"===s||\"Polygon\"===s){n=[];for(var a=0;a<i.geometry.length;a++)n.push(ge(i.geometry[a],t));}else if(\"MultiPolygon\"===s)for(n=[],a=0;a<i.geometry.length;a++){for(var l=[],u=0;u<i.geometry[a].length;u++)l.push(ge(i.geometry[a][u],t));n.push(l);}r.push(Q(i.id,s,n,i.tags));}return r}function ge(e,t){var r=[];r.size=e.size,void 0!==e.start&&(r.start=e.start,r.end=e.end);for(var o=0;o<e.length;o+=3)r.push(e[o]+t,e[o+1],e[o+2]);return r}function de(e,t){if(e.transformed)return e;var r,o,n,i=1<<e.z,s=e.x,a=e.y;for(r=0;r<e.features.length;r++){var l=e.features[r],u=l.geometry,h=l.type;if(l.geometry=[],1===h)for(o=0;o<u.length;o+=2)l.geometry.push(me(u[o],u[o+1],t,i,s,a));else for(o=0;o<u.length;o++){var c=[];for(n=0;n<u[o].length;n+=2)c.push(me(u[o][n],u[o][n+1],t,i,s,a));l.geometry.push(c);}}return e.transformed=!0,e}function me(e,t,r,o,n,i){return [Math.round(r*(e*o-n)),Math.round(r*(t*o-i))]}function ye(e,t,r,o,n){for(var i=t===n.maxZoom?0:n.tolerance/((1<<t)*n.extent),s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:o,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},a=0;a<e.length;a++){s.numFeatures++,ve(s,e[a],i,n);var l=e[a].minX,u=e[a].minY,h=e[a].maxX,c=e[a].maxY;l<s.minX&&(s.minX=l),u<s.minY&&(s.minY=u),h>s.maxX&&(s.maxX=h),c>s.maxY&&(s.maxY=c);}return s}function ve(e,t,r,o){var n=t.geometry,i=t.type,s=[];if(\"Point\"===i||\"MultiPoint\"===i)for(var a=0;a<n.length;a+=3)s.push(n[a]),s.push(n[a+1]),e.numPoints++,e.numSimplified++;else if(\"LineString\"===i)xe(s,n,e,r,!1,!1);else if(\"MultiLineString\"===i||\"Polygon\"===i)for(a=0;a<n.length;a++)xe(s,n[a],e,r,\"Polygon\"===i,0===a);else if(\"MultiPolygon\"===i)for(var l=0;l<n.length;l++){var u=n[l];for(a=0;a<u.length;a++)xe(s,u[a],e,r,!0,0===a);}if(s.length){var h=t.tags||null;if(\"LineString\"===i&&o.lineMetrics){for(var c in h={},t.tags)h[c]=t.tags[c];h.mapbox_clip_start=n.start/n.size,h.mapbox_clip_end=n.end/n.size;}var f={geometry:s,type:\"Polygon\"===i||\"MultiPolygon\"===i?3:\"LineString\"===i||\"MultiLineString\"===i?2:1,tags:h};null!==t.id&&(f.id=t.id),e.features.push(f);}}function xe(e,t,r,o,n,i){var s=o*o;if(o>0&&t.size<(n?s:o))r.numPoints+=t.length/3;else {for(var a=[],l=0;l<t.length;l+=3)(0===o||t[l+2]>s)&&(r.numSimplified++,a.push(t[l]),a.push(t[l+1])),r.numPoints++;n&&function(e,t){for(var r=0,o=0,n=e.length,i=n-2;o<n;i=o,o+=2)r+=(e[o]-e[i])*(e[o+1]+e[i+1]);if(r>0===t)for(o=0,n=e.length;o<n/2;o+=2){var s=e[o],a=e[o+1];e[o]=e[n-2-o],e[o+1]=e[n-1-o],e[n-2-o]=s,e[n-1-o]=a;}}(a,i),e.push(a);}}function we(e,t){var r=(t=this.options=function(e,t){for(var r in t)e[r]=t[r];return e}(Object.create(this.options),t)).debug;if(r&&console.time(\"preprocess data\"),t.maxZoom<0||t.maxZoom>24)throw new Error(\"maxZoom should be in the 0-24 range\");if(t.promoteId&&t.generateId)throw new Error(\"promoteId and generateId cannot be used together.\");var o=function(e,t){var r=[];if(\"FeatureCollection\"===e.type)for(var o=0;o<e.features.length;o++)K(r,e.features[o],t,o);else K(r,\"Feature\"===e.type?e:{geometry:e},t);return r}(e,t);this.tiles={},this.tileCoords=[],r&&(console.timeEnd(\"preprocess data\"),console.log(\"index: maxZoom: %d, maxPoints: %d\",t.indexMaxZoom,t.indexMaxPoints),console.time(\"generate tiles\"),this.stats={},this.total=0),o=function(e,t){var r=t.buffer/t.extent,o=e,n=ie(e,1,-1-r,r,0,-1,2,t),i=ie(e,1,1-r,2+r,0,-1,2,t);return (n||i)&&(o=ie(e,1,-r,1+r,0,-1,2,t)||[],n&&(o=pe(n,1).concat(o)),i&&(o=o.concat(pe(i,-1)))),o}(o,t),o.length&&this.splitTile(o,0,0,0),r&&(o.length&&console.log(\"features: %d, points: %d\",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd(\"generate tiles\"),console.log(\"tiles generated:\",this.total,JSON.stringify(this.stats)));}function Se(e,t,r){return 32*((1<<e)*r+t)+e}function Me(e,t){const r=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);const o=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!o)return t(null,null);const n=new h(o.features);let i=c.exports(n);0===i.byteOffset&&i.byteLength===i.buffer.byteLength||(i=new Uint8Array(i)),t(null,{vectorTile:n,rawData:i.buffer});}we.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},we.prototype.splitTile=function(e,t,r,o,n,i,s){for(var a=[e,t,r,o],l=this.options,u=l.debug;a.length;){o=a.pop(),r=a.pop(),t=a.pop(),e=a.pop();var h=1<<t,c=Se(t,r,o),f=this.tiles[c];if(!f&&(u>1&&console.time(\"creation\"),f=this.tiles[c]=ye(e,t,r,o,l),this.tileCoords.push({z:t,x:r,y:o}),u)){u>1&&(console.log(\"tile z%d-%d-%d (features: %d, points: %d, simplified: %d)\",t,r,o,f.numFeatures,f.numPoints,f.numSimplified),console.timeEnd(\"creation\"));var p=\"z\"+t;this.stats[p]=(this.stats[p]||0)+1,this.total++;}if(f.source=e,n){if(t===l.maxZoom||t===n)continue;var g=1<<n-t;if(r!==Math.floor(i/g)||o!==Math.floor(s/g))continue}else if(t===l.indexMaxZoom||f.numPoints<=l.indexMaxPoints)continue;if(f.source=null,0!==e.length){u>1&&console.time(\"clipping\");var d,m,y,v,x,w,S=.5*l.buffer/l.extent,M=.5-S,P=.5+S,b=1+S;d=m=y=v=null,x=ie(e,h,r-S,r+P,0,f.minX,f.maxX,l),w=ie(e,h,r+M,r+b,0,f.minX,f.maxX,l),e=null,x&&(d=ie(x,h,o-S,o+P,1,f.minY,f.maxY,l),m=ie(x,h,o+M,o+b,1,f.minY,f.maxY,l),x=null),w&&(y=ie(w,h,o-S,o+P,1,f.minY,f.maxY,l),v=ie(w,h,o+M,o+b,1,f.minY,f.maxY,l),w=null),u>1&&console.timeEnd(\"clipping\"),a.push(d||[],t+1,2*r,2*o),a.push(m||[],t+1,2*r,2*o+1),a.push(y||[],t+1,2*r+1,2*o),a.push(v||[],t+1,2*r+1,2*o+1);}}},we.prototype.getTile=function(e,t,r){var o=this.options,n=o.extent,i=o.debug;if(e<0||e>24)return null;var s=1<<e,a=Se(e,t=(t%s+s)%s,r);if(this.tiles[a])return de(this.tiles[a],n);i>1&&console.log(\"drilling down to z%d-%d-%d\",e,t,r);for(var l,u=e,h=t,c=r;!l&&u>0;)u--,h=Math.floor(h/2),c=Math.floor(c/2),l=this.tiles[Se(u,h,c)];return l&&l.source?(i>1&&console.log(\"found parent tile z%d-%d-%d\",u,h,c),i>1&&console.time(\"drilling down\"),this.splitTile(l.source,u,h,c,e,t,r),i>1&&console.timeEnd(\"drilling down\"),this.tiles[a]?de(this.tiles[a],n):null):null};class Pe extends e.VectorTileWorkerSource{constructor(e,t,r,o,n){super(e,t,r,o,Me),n&&(this.loadGeoJSON=n);}loadData(t,r){const o=t&&t.request,n=o&&o.collectResourceTiming;this.loadGeoJSON(t,((s,a)=>{if(s||!a)return r(s);if(\"object\"!=typeof a)return r(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));{i(a,!0);try{if(t.filter){const r=e.createExpression(t.filter,{type:\"boolean\",\"property-type\":\"data-driven\",overridable:!1,transition:!1});if(\"error\"===r.result)throw new Error(r.value.map((e=>`${e.key}: ${e.message}`)).join(\", \"));const o=a.features.filter((e=>r.value.evaluate({zoom:0},e)));a={type:\"FeatureCollection\",features:o};}this._geoJSONIndex=t.cluster?new G(function({superclusterOptions:t,clusterProperties:r}){if(!r||!t)return t;const o={},n={},i={accumulated:null,zoom:0},s={properties:null},a=Object.keys(r);for(const t of a){const[i,s]=r[t],a=e.createExpression(s),l=e.createExpression(\"string\"==typeof i?[i,[\"accumulated\"],[\"get\",t]]:i);o[t]=a.value,n[t]=l.value;}return t.map=e=>{s.properties=e;const t={};for(const e of a)t[e]=o[e].evaluate(i,s);return t},t.reduce=(e,t)=>{s.properties=t;for(const t of a)i.accumulated=e[t],e[t]=n[t].evaluate(i,s);},t}(t)).load(a.features):function(e,t){return new we(e,t)}(a,t.geojsonVtOptions);}catch(s){return r(s)}this.loaded={};const l={};if(n){const r=e.getPerformanceMeasurement(o);r&&(l.resourceTiming={},l.resourceTiming[t.source]=JSON.parse(JSON.stringify(r)));}r(null,l);}}));}reloadTile(e,t){const r=this.loaded;return r&&r[e.uid]?super.reloadTile(e,t):this.loadTile(e,t)}loadGeoJSON(t,r){if(t.request)e.getJSON(t.request,r);else {if(\"string\"!=typeof t.data)return r(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));try{return r(null,JSON.parse(t.data))}catch(e){return r(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId));}catch(e){t(e);}}getClusterChildren(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId));}catch(e){t(e);}}getClusterLeaves(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset));}catch(e){t(e);}}}class be{constructor(t){this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=e.getProjection({name:\"mercator\"}),this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:Pe},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(e,t)=>{if(this.workerSourceTypes[e])throw new Error(`Worker source with name \"${e}\" already registered.`);this.workerSourceTypes[e]=t;},this.self.registerRTLTextPlugin=t=>{if(e.plugin.isParsed())throw new Error(\"RTL text plugin already registered.\");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText;};}clearCaches(e,t,r){delete this.layerIndexes[e],delete this.availableImages[e],delete this.workerSources[e],delete this.demWorkerSources[e],r();}checkIfReady(e,t,r){r();}setReferrer(e,t){this.referrer=t;}spriteLoaded(t,r){this.isSpriteLoaded[t]=r;for(const o in this.workerSources[t]){const n=this.workerSources[t][o];for(const t in n)n[t]instanceof e.VectorTileWorkerSource&&(n[t].isSpriteLoaded=r,n[t].fire(new e.Event(\"isSpriteLoaded\")));}}setImages(e,t,r){this.availableImages[e]=t;for(const r in this.workerSources[e]){const o=this.workerSources[e][r];for(const e in o)o[e].availableImages=t;}r();}enableTerrain(e,t,r){this.terrain=t,r();}setProjection(t,r){this.projections[t]=e.getProjection(r);}setLayers(e,t,r){this.getLayerIndex(e).replace(t),r();}updateLayers(e,t,r){this.getLayerIndex(e).update(t.layers,t.removedIds),r();}loadTile(t,r,o){const n=this.enableTerrain?e.extend({enableTerrain:this.terrain},r):r;n.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,r.type,r.source).loadTile(n,o);}loadDEMTile(t,r,o){const n=this.enableTerrain?e.extend({buildQuadTree:this.terrain},r):r;this.getDEMWorkerSource(t,r.source).loadTile(n,o);}reloadTile(t,r,o){const n=this.enableTerrain?e.extend({enableTerrain:this.terrain},r):r;n.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,r.type,r.source).reloadTile(n,o);}abortTile(e,t,r){this.getWorkerSource(e,t.type,t.source).abortTile(t,r);}removeTile(e,t,r){this.getWorkerSource(e,t.type,t.source).removeTile(t,r);}removeSource(e,t,r){if(!this.workerSources[e]||!this.workerSources[e][t.type]||!this.workerSources[e][t.type][t.source])return;const o=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==o.removeSource?o.removeSource(t,r):r();}loadWorkerSource(e,t,r){try{this.self.importScripts(t.url),r();}catch(e){r(e.toString());}}syncRTLPluginState(t,r,o){try{e.plugin.setState(r);const t=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=t){this.self.importScripts(t);const r=e.plugin.isParsed();o(r?void 0:new Error(`RTL Text Plugin failed to import scripts from ${t}`),r);}}catch(e){o(e.toString());}}getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}getLayerIndex(e){let t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new o),t}getWorkerSource(e,t,r){if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][r]){const o={send:(t,r,o,n,i,s)=>{this.actor.send(t,r,o,e,i,s);},scheduler:this.actor.scheduler};this.workerSources[e][t][r]=new this.workerSourceTypes[t](o,this.getLayerIndex(e),this.getAvailableImages(e),this.isSpriteLoaded[e]);}return this.workerSources[e][t][r]}getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new n),this.demWorkerSources[e][t]}enforceCacheSizeLimit(t,r){e.enforceCacheSizeLimit(r);}getWorkerPerformanceMetrics(e,t,r){r(void 0,void 0);}}return \"undefined\"!=typeof WorkerGlobalScope&&\"undefined\"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new be(self)),be}));\n\ndefine([\"./shared\"],(function(e){\"use strict\";function t(e,i){if(Array.isArray(e)){if(!Array.isArray(i)||e.length!==i.length)return !1;for(let o=0;o<e.length;o++)if(!t(e[o],i[o]))return !1;return !0}if(\"object\"==typeof e&&null!==e&&null!==i){if(\"object\"!=typeof i)return !1;if(Object.keys(e).length!==Object.keys(i).length)return !1;for(const o in e)if(!t(e[o],i[o]))return !1;return !0}return e===i}var i=o;function o(e){return !function(e){return \"undefined\"==typeof window||\"undefined\"==typeof document?\"not a browser\":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?\"JSON\"in window&&\"parse\"in JSON&&\"stringify\"in JSON?function(){if(!(\"Worker\"in window&&\"Blob\"in window&&\"URL\"in window))return !1;var e,t,i=new Blob([\"\"],{type:\"text/javascript\"}),o=URL.createObjectURL(i);try{t=new Worker(o),e=!0;}catch(t){e=!1;}return t&&t.terminate(),URL.revokeObjectURL(o),e}()?\"Uint8ClampedArray\"in window?ArrayBuffer.isView?function(){var e=document.createElement(\"canvas\");e.width=e.height=1;var t=e.getContext(\"2d\");if(!t)return !1;var i=t.getImageData(0,0,1,1);return i&&i.width===e.width}()?(void 0===r[t=e&&e.failIfMajorPerformanceCaveat]&&(r[t]=function(e){var t,i=function(e){var t=document.createElement(\"canvas\"),i=Object.create(o.webGLContextAttributes);return i.failIfMajorPerformanceCaveat=e,t.getContext(\"webgl\",i)||t.getContext(\"experimental-webgl\",i)}(e);if(!i)return !1;try{t=i.createShader(i.VERTEX_SHADER);}catch(e){return !1}return !(!t||i.isContextLost())&&(i.shaderSource(t,\"void main() {}\"),i.compileShader(t),!0===i.getShaderParameter(t,i.COMPILE_STATUS))}(t)),r[t]?document.documentMode?\"insufficient ECMAScript 6 support\":void 0:\"insufficient WebGL support\"):\"insufficient Canvas/getImageData support\":\"insufficient ArrayBuffer support\":\"insufficient Uint8ClampedArray support\":\"insufficient worker support\":\"insufficient JSON support\":\"insufficient Object support\":\"insufficient Function support\":\"insufficent Array support\";var t;}(e)}var r={};function n(t,i,o){const r=e.window.document.createElement(t);return void 0!==i&&(r.className=i),o&&o.appendChild(r),r}function s(t,i,o){const r=e.window.document.createElementNS(\"http://www.w3.org/2000/svg\",t);for(const e of Object.keys(i))r.setAttributeNS(null,e,i[e]);return o&&o.appendChild(r),r}o.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const a=e.window.document&&e.window.document.documentElement.style,l=a&&void 0!==a.userSelect?\"userSelect\":\"WebkitUserSelect\";let c;function h(){a&&l&&(c=a[l],a[l]=\"none\");}function u(){a&&l&&(a[l]=c);}function _(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener(\"click\",_,!0);}function d(){e.window.addEventListener(\"click\",_,!0),e.window.setTimeout((()=>{e.window.removeEventListener(\"click\",_,!0);}),0);}function p(e,t){const i=e.getBoundingClientRect();return g(e,i,t)}function m(e,t){const i=e.getBoundingClientRect(),o=[];for(let r=0;r<t.length;r++)o.push(g(e,i,t[r]));return o}function f(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf(\"MAC\")>=0?0:t.button}function g(t,i,o){const r=t.offsetWidth===i.width?1:t.offsetWidth/i.width;return new e.pointGeometry((o.clientX-i.left)*r,(o.clientY-i.top)*r)}function v(e,t){var i=t[0],o=t[1],r=t[2],n=t[3],s=i*n-r*o;return s?(e[0]=n*(s=1/s),e[1]=-o*s,e[2]=-r*s,e[3]=i*s,e):null}function x(e){const{userImage:t}=e;return !!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class y extends e.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0;}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,callback:t}of this.requestors)this._notify(e,t);this.requestors=[];}}hasImage(e){return !!this.getImage(e)}getImage(e){return this.images[e]}addImage(e,t){this._validate(e,t)&&(this.images[e]=t);}_validate(t,i){let o=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new e.ErrorEvent(new Error(`Image \"${t}\" has invalid \"stretchX\" value`))),o=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new e.ErrorEvent(new Error(`Image \"${t}\" has invalid \"stretchY\" value`))),o=!1),this._validateContent(i.content,i)||(this.fire(new e.ErrorEvent(new Error(`Image \"${t}\" has invalid \"content\" value`))),o=!1),o}_validateStretch(e,t){if(!e)return !0;let i=0;for(const o of e){if(o[0]<i||o[1]<o[0]||t<o[1])return !1;i=o[1];}return !0}_validateContent(e,t){return !(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}updateImage(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0;}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove();}listImages(){return Object.keys(this.images)}getImages(e,t){let i=!0;if(!this.isLoaded())for(const t of e)this.images[t]||(i=!1);this.isLoaded()||i?this._notify(e,t):this.requestors.push({ids:e,callback:t});}_notify(t,i){const o={};for(const i of t){this.images[i]||this.fire(new e.Event(\"styleimagemissing\",{id:i}));const t=this.images[i];t?o[i]={data:t.data.clone(),pixelRatio:t.pixelRatio,sdf:t.sdf,version:t.version,stretchX:t.stretchX,stretchY:t.stretchY,content:t.content,hasRenderCallback:Boolean(t.userImage&&t.userImage.render)}:e.warnOnce(`Image \"${i}\" could not be loaded. Please make sure you have added the image with map.addImage() or a \"sprite\" property in your style. You can provide missing images by listening for the \"styleimagemissing\" map event.`);}i(null,o);}getPixelSize(){const{width:e,height:t}=this.atlasImage;return {width:e,height:t}}getPattern(t){const i=this.patterns[t],o=this.getImage(t);if(!o)return null;if(i&&i.position.version===o.version)return i.position;if(i)i.position.version=o.version;else {const i={w:o.data.width+2,h:o.data.height+2,x:0,y:0},r=new e.ImagePosition(i,o);this.patterns[t]={bin:i,position:r};}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const i=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,i.RGBA),this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE);}_updatePatternAtlas(){const t=[];for(const e in this.patterns)t.push(this.patterns[e].bin);const{w:i,h:o}=e.potpack(t),r=this.atlasImage;r.resize({width:i||1,height:o||1});for(const t in this.patterns){const{bin:i}=this.patterns[t],o=i.x+1,n=i.y+1,s=this.images[t].data,a=s.width,l=s.height;e.RGBAImage.copy(s,r,{x:0,y:0},{x:o,y:n},{width:a,height:l}),e.RGBAImage.copy(s,r,{x:0,y:l-1},{x:o,y:n-1},{width:a,height:1}),e.RGBAImage.copy(s,r,{x:0,y:0},{x:o,y:n+l},{width:a,height:1}),e.RGBAImage.copy(s,r,{x:a-1,y:0},{x:o-1,y:n},{width:1,height:l}),e.RGBAImage.copy(s,r,{x:0,y:0},{x:o+a,y:n},{width:1,height:l});}this.dirty=!0;}beginFrame(){this.callbackDispatchedThisFrame={};}dispatchRenderCallbacks(e){for(const t of e){if(this.callbackDispatchedThisFrame[t])continue;this.callbackDispatchedThisFrame[t]=!0;const e=this.images[t];x(e)&&this.updateImage(t,e);}}}const b=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new class{constructor(){this.specification=e.spec.light.position;}possiblyEvaluate(t,i){return function([t,i,o]){const r=e.degToRad(i+90),n=e.degToRad(o);return {x:t*Math.cos(r)*Math.sin(n),y:t*Math.sin(r)*Math.sin(n),z:t*Math.cos(n),azimuthal:i,polar:o}}(t.expression.evaluate(i))}interpolate(t,i,o){return {x:e.number(t.x,i.x,o),y:e.number(t.y,i.y,o),z:e.number(t.z,i.z,o),azimuthal:e.number(t.azimuthal,i.azimuthal,o),polar:e.number(t.polar,i.polar,o)}}},color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)}),w=\"-transition\";class T extends e.Evented{constructor(t){super(),this._transitionable=new e.Transitionable(b),this.setLight(t),this._transitioning=this._transitionable.untransitioned();}getLight(){return this._transitionable.serialize()}setLight(t,i={}){if(!this._validate(e.validateLight,t,i))for(const i in t){const o=t[i];e.endsWith(i,w)?this._transitionable.setTransition(i.slice(0,-w.length),o):this._transitionable.setValue(i,o);}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning);}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e);}_validate(t,i,o){return (!o||!1!==o.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}const E=new e.Properties({source:new e.DataConstantProperty(e.spec.terrain.source),exaggeration:new e.DataConstantProperty(e.spec.terrain.exaggeration)}),C=\"-transition\";class I extends e.Evented{constructor(t,i){super(),this._transitionable=new e.Transitionable(E),this.set(t),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=i;}get(){return this._transitionable.serialize()}set(t){for(const i in t){const o=t[i];e.endsWith(i,C)?this._transitionable.setTransition(i.slice(0,-C.length),o):this._transitionable.setValue(i,o);}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning);}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e);}}function M(t,i,o,r){const n=e.smoothstep(45,65,o),[s,a]=S(t,r),l=e.length(i);let c=1-Math.min(1,Math.exp((l-s)/(a-s)*-6));return c*=c*c,c=Math.min(1,1.00747*c),c*n*t.alpha}function S(e,t){const i=.5/Math.tan(.5*t);return [e.range[0]+i,e.range[1]+i]}const D=new e.Properties({range:new e.DataConstantProperty(e.spec.fog.range),color:new e.DataConstantProperty(e.spec.fog.color),\"high-color\":new e.DataConstantProperty(e.spec.fog[\"high-color\"]),\"space-color\":new e.DataConstantProperty(e.spec.fog[\"space-color\"]),\"horizon-blend\":new e.DataConstantProperty(e.spec.fog[\"horizon-blend\"]),\"star-intensity\":new e.DataConstantProperty(e.spec.fog[\"star-intensity\"])}),A=\"-transition\";class L extends e.Evented{constructor(t,i){super(),this._transitionable=new e.Transitionable(D),this.set(t),this._transitioning=this._transitionable.untransitioned(),this._transform=i;}get state(){const t=this._transform,i=\"globe\"===t.projection.name,o=e.globeToMercatorTransition(t.zoom),r=this.properties.get(\"range\"),n=[.5,3];return {range:i?[e.number(n[0],r[0],o),e.number(n[1],r[1],o)]:r,horizonBlend:this.properties.get(\"horizon-blend\"),alpha:this.properties.get(\"color\").a}}get(){return this._transitionable.serialize()}set(t,i={}){if(!this._validate(e.validateFog,t,i)){for(const i of Object.keys(e.spec.fog))t&&void 0===t[i]&&(t[i]=e.spec.fog[i].default);for(const i in t){const o=t[i];e.endsWith(i,A)?this._transitionable.setTransition(i.slice(0,-A.length),o):this._transitionable.setValue(i,o);}}}getOpacity(t){if(!this._transform.projection.supportsFog)return 0;const i=this.properties&&this.properties.get(\"color\")||1;return (\"globe\"===this._transform.projection.name?1:e.smoothstep(45,65,t))*i.a}getOpacityAtLatLng(t,i){return this._transform.projection.supportsFog?function(t,i,o){const r=e.MercatorCoordinate.fromLngLat(i),n=o.elevation?o.elevation.getAtPointOrZero(r):0,s=[r.x,r.y,n];return e.transformMat4(s,s,o.mercatorFogMatrix),M(t,s,o.pitch,o._fov)}(this.state,t,i):0}getFovAdjustedRange(e){return this._transform.projection.supportsFog?S(this.state,e):[0,1]}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning);}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e);}_validate(t,i,o){return (!o||!1!==o.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}class z{constructor(t,i){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=e.uniqueId();const o=this.workerPool.acquire(this.id);for(let e=0;e<o.length;e++){const t=new z.Actor(o[e],i,this.id);t.name=`Worker ${e}`,this.actors.push(t);}this.ready=!1,this.broadcast(\"checkIfReady\",null,(()=>{this.ready=!0;}));}broadcast(t,i,o){e.asyncAll(this.actors,((e,o)=>{e.send(t,i,o);}),o=o||function(){});}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((e=>{e.remove();})),this.actors=[],this.workerPool.release(this.id);}}function P(t,i,o){return i*(e.EXTENT/(t.tileSize*Math.pow(2,o-t.tileID.overscaledZ)))}z.Actor=e.Actor;class R{constructor(e,t,i,o){this.screenBounds=e,this.cameraPoint=t,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=i,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,o);}static createFromScreenPoints(t,i){let o,r;if(t instanceof e.pointGeometry||\"number\"==typeof t[0]){const n=e.pointGeometry.convert(t);o=[n],r=i.isPointAboveHorizon(n);}else {const n=e.pointGeometry.convert(t[0]),s=e.pointGeometry.convert(t[1]);o=[n,s],r=e.polygonizeBounds(n,s).every((e=>i.isPointAboveHorizon(e)));}return new R(o,i.getCameraPoint(),r,i)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}bufferedCameraGeometry(t){const i=this.screenBounds[0],o=1===this.screenBounds.length?this.screenBounds[0].add(new e.pointGeometry(1,1)):this.screenBounds[1],r=e.polygonizeBounds(i,o,0,!1);return this.cameraPoint.y>o.y&&(this.cameraPoint.x>i.x&&this.cameraPoint.x<o.x?r.splice(3,0,this.cameraPoint):this.cameraPoint.x>=o.x?r[2]=this.cameraPoint:this.cameraPoint.x<=i.x&&(r[3]=this.cameraPoint)),e.bufferConvexPolygon(r,t)}bufferedCameraGeometryGlobe(t){const i=this.screenBounds[0],o=1===this.screenBounds.length?this.screenBounds[0].add(new e.pointGeometry(1,1)):this.screenBounds[1],r=e.polygonizeBounds(i,o,t),n=this.cameraPoint.clone();switch(3*((n.y>i.y)+(n.y>o.y))+((n.x>i.x)+(n.x>o.x))){case 0:r[0]=n,r[4]=n.clone();break;case 1:r.splice(1,0,n);break;case 2:r[1]=n;break;case 3:r.splice(4,0,n);break;case 5:r.splice(2,0,n);break;case 6:r[3]=n;break;case 7:r.splice(3,0,n);break;case 8:r[2]=n;}return r}containsTile(t,i,o,r=0){const n=t.queryPadding/i._pixelsPerMercatorPixel+1,s=o?this._bufferedCameraMercator(n,i):this._bufferedScreenMercator(n,i);let a=t.tileID.wrap+(s.unwrapped?r:0);const l=s.polygon.map((i=>e.getTilePoint(t.tileTransform,i,a)));if(!e.polygonIntersectsBox(l,0,0,e.EXTENT,e.EXTENT))return;a=t.tileID.wrap+(this.screenGeometryMercator.unwrapped?r:0);const c=this.screenGeometryMercator.polygon.map((i=>e.getTileVec3(t.tileTransform,i,a))),h=c.map((t=>new e.pointGeometry(t[0],t[1]))),u=i.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),_=e.getTileVec3(t.tileTransform,u,a),d=c.map((t=>{const i=e.sub(t,t,_);return e.normalize(i,i),new e.Ray(_,i)})),p=P(t,1,i.zoom)*i._pixelsPerMercatorPixel;return {queryGeometry:this,tilespaceGeometry:h,tilespaceRays:d,bufferedTilespaceGeometry:l,bufferedTilespaceBounds:(m=e.getBounds(l),m.min.x=e.clamp(m.min.x,0,e.EXTENT),m.min.y=e.clamp(m.min.y,0,e.EXTENT),m.max.x=e.clamp(m.max.x,0,e.EXTENT),m.max.y=e.clamp(m.max.y,0,e.EXTENT),m),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:p};var m;}_bufferedScreenMercator(e,t){const i=k(e);if(this._screenRaycastCache[i])return this._screenRaycastCache[i];{let o;return o=\"globe\"===t.projection.name?this._projectAndResample(this.bufferedScreenGeometry(e),t):{polygon:this.bufferedScreenGeometry(e).map((e=>t.pointCoordinate3D(e))),unwrapped:!0},this._screenRaycastCache[i]=o,o}}_bufferedCameraMercator(e,t){const i=k(e);if(this._cameraRaycastCache[i])return this._cameraRaycastCache[i];{let o;return o=\"globe\"===t.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(e),t):{polygon:this.bufferedCameraGeometry(e).map((e=>t.pointCoordinate3D(e))),unwrapped:!0},this._cameraRaycastCache[i]=o,o}}_projectAndResample(t,i){const o=function(t,i){const o=e.multiply([],i.pixelMatrix,i.globeMatrix),r=[0,-e.GLOBE_RADIUS,0,1],n=[0,e.GLOBE_RADIUS,0,1],s=[0,0,0,1];e.transformMat4$1(r,r,o),e.transformMat4$1(n,n,o),e.transformMat4$1(s,s,o);const a=new e.pointGeometry(r[0]/r[3],r[1]/r[3]),l=new e.pointGeometry(n[0]/n[3],n[1]/n[3]),c=e.polygonContainsPoint(t,a)&&r[3]<s[3],h=e.polygonContainsPoint(t,l)&&n[3]<s[3];if(!c&&!h)return null;const u=function(e,t,i){for(let o=1;o<e.length;o++){const r=B(t.pointCoordinate3D(e[o-1]).x),n=B(t.pointCoordinate3D(e[o]).x);if(i<0){if(r<n)return {idx:o,t:-r/(n-1-r)}}else if(n<r)return {idx:o,t:(1-r)/(n+1-r)}}return null}(t,i,c?-1:1);if(!u)return null;const{idx:_,t:d}=u;let p=_>1?O(t.slice(0,_),i):[],m=_<t.length?O(t.slice(_),i):[];p=p.map((t=>new e.pointGeometry(B(t.x),t.y))),m=m.map((t=>new e.pointGeometry(B(t.x),t.y)));const f=[...p];0===f.length&&f.push(m[m.length-1]);const g=e.number(f[f.length-1].y,(0===m.length?p[0]:m[0]).y,d);let v;return v=c?[new e.pointGeometry(0,g),new e.pointGeometry(0,0),new e.pointGeometry(1,0),new e.pointGeometry(1,g)]:[new e.pointGeometry(1,g),new e.pointGeometry(1,1),new e.pointGeometry(0,1),new e.pointGeometry(0,g)],f.push(...v),0===m.length?f.push(p[0]):f.push(...m),{polygon:f.map((t=>new e.MercatorCoordinate(t.x,t.y))),unwrapped:!1}}(t,i);if(o)return o;const r=function(t,i){let o=!1,r=-1/0,n=0;for(let e=0;e<t.length-1;e++)t[e].x>r&&(r=t[e].x,n=e);for(let e=0;e<t.length-1;e++){const i=(n+e)%(t.length-1),r=t[i],s=t[i+1];Math.abs(r.x-s.x)>.5&&(r.x<s.x?(r.x+=1,0===i&&(t[t.length-1].x+=1)):(s.x+=1,i+1===t.length-1&&(t[0].x+=1)),o=!0);}const s=e.mercatorXfromLng(i.center.lng);return o&&s<Math.abs(s-1)&&t.forEach((e=>{e.x-=1;})),{polygon:t,unwrapped:o}}(O(t,i).map((t=>new e.pointGeometry(B(t.x),t.y))),i);return {polygon:r.polygon.map((t=>new e.MercatorCoordinate(t.x,t.y))),unwrapped:r.unwrapped}}}function O(t,i){return e.resample(t,(e=>{const t=i.pointCoordinate3D(e);e.x=t.x,e.y=t.y;}),1/256)}function B(e){return e<0?1+e%1:e%1}function k(e){return 100*e|0}function F(t,i,o,r,n){const s=function(o,r){if(o)return n(o);if(r){t.url&&r.tiles&&t.tiles&&delete t.tiles;const o=e.pick(e.extend(r,t),[\"tiles\",\"minzoom\",\"maxzoom\",\"attribution\",\"mapbox_logo\",\"bounds\",\"scheme\",\"tileSize\",\"encoding\"]);r.vector_layers&&(o.vectorLayers=r.vector_layers,o.vectorLayerIds=o.vectorLayers.map((e=>e.id))),o.tiles=i.canonicalizeTileset(o,t.url),n(null,o);}};return t.url?e.getJSON(i.transformRequest(i.normalizeSourceURL(t.url,null,o,r),e.ResourceType.Source),s):e.exported.frame((()=>s(null,t)))}class U{constructor(t,i,o){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=i||0,this.maxzoom=o||24;}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(t){const i=Math.pow(2,t.z),o=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*i),r=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*i),n=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*i),s=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*i);return t.x>=o&&t.x<n&&t.y>=r&&t.y<s}}class N{constructor(e,t,i){this.context=e;const o=e.gl;this.buffer=o.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),o.bufferData(o.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?o.DYNAMIC_DRAW:o.STATIC_DRAW),this.dynamicDraw||t.destroy();}bind(){this.context.bindElementBuffer.set(this.buffer);}updateData(e){const t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer);}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer);}}const G={Int8:\"BYTE\",Uint8:\"UNSIGNED_BYTE\",Int16:\"SHORT\",Uint16:\"UNSIGNED_SHORT\",Int32:\"INT\",Uint32:\"UNSIGNED_INT\",Float32:\"FLOAT\"};class j{constructor(e,t,i,o){this.length=t.length,this.attributes=i,this.itemSize=t.bytesPerElement,this.dynamicDraw=o,this.context=e;const r=e.gl;this.buffer=r.createBuffer(),e.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||t.destroy();}bind(){this.context.bindVertexBuffer.set(this.buffer);}updateData(e){const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer);}enableAttributes(e,t){for(let i=0;i<this.attributes.length;i++){const o=t.attributes[this.attributes[i].name];void 0!==o&&e.enableVertexAttribArray(o);}}setVertexAttribPointers(e,t,i){for(let o=0;o<this.attributes.length;o++){const r=this.attributes[o],n=t.attributes[r.name];void 0!==n&&e.vertexAttribPointer(n,r.components,e[G[r.type]],!1,this.itemSize,r.offset+this.itemSize*(i||0));}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer);}}class Z{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1;}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default);}}class V extends Z{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1);}}class W extends Z{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1);}}class X extends Z{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1);}}class q extends Z{getDefault(){return [!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1);}}class $ extends Z{getDefault(){return !0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1);}}class H extends Z{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1);}}class Y extends Z{getDefault(){return {func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1);}}class K extends Z{getDefault(){const e=this.gl;return [e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1);}}class J extends Z{getDefault(){return !1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1;}}class Q extends Z{getDefault(){return [0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1);}}class ee extends Z{getDefault(){return !1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1;}}class te extends Z{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1);}}class ie extends Z{getDefault(){return !1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1;}}class oe extends Z{getDefault(){const e=this.gl;return [e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1);}}class re extends Z{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1);}}class ne extends Z{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1);}}class se extends Z{getDefault(){return !1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1;}}class ae extends Z{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1);}}class le extends Z{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1);}}class ce extends Z{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1);}}class he extends Z{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1);}}class ue extends Z{getDefault(){const e=this.gl;return [0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1);}}class _e extends Z{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1;}}class de extends Z{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1;}}class pe extends Z{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1;}}class me extends Z{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1;}}class fe extends Z{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1;}}class ge extends Z{constructor(e){super(e),this.vao=e.extVertexArrayObject;}getDefault(){return null}set(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1);}}class ve extends Z{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1;}}class xe extends Z{getDefault(){return !1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1;}}class ye extends Z{getDefault(){return !1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1;}}class be extends Z{constructor(e,t){super(e),this.context=e,this.parent=t;}getDefault(){return null}}class we extends be{setDirty(){this.dirty=!0;}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1;}}class Te extends be{attachment(){return this.gl.DEPTH_ATTACHMENT}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1;}}class Ee extends Te{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Ce{constructor(e,t,i,o){this.context=e,this.width=t,this.height=i;const r=this.framebuffer=e.gl.createFramebuffer();this.colorAttachment=new we(e,r),o&&(this.depthAttachment=new Te(e,r));}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t);}e.deleteFramebuffer(this.framebuffer);}}class Ie{constructor(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension(\"OES_vertex_array_object\"),this.clearColor=new V(this),this.clearDepth=new W(this),this.clearStencil=new X(this),this.colorMask=new q(this),this.depthMask=new $(this),this.stencilMask=new H(this),this.stencilFunc=new Y(this),this.stencilOp=new K(this),this.stencilTest=new J(this),this.depthRange=new Q(this),this.depthTest=new ee(this),this.depthFunc=new te(this),this.blend=new ie(this),this.blendFunc=new oe(this),this.blendColor=new re(this),this.blendEquation=new ne(this),this.cullFace=new se(this),this.cullFaceSide=new ae(this),this.frontFace=new le(this),this.program=new ce(this),this.activeTexture=new he(this),this.viewport=new ue(this),this.bindFramebuffer=new _e(this),this.bindRenderbuffer=new de(this),this.bindTexture=new pe(this),this.bindVertexBuffer=new me(this),this.bindElementBuffer=new fe(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ge(this),this.pixelStoreUnpack=new ve(this),this.pixelStoreUnpackPremultiplyAlpha=new xe(this),this.pixelStoreUnpackFlipY=new ye(this),this.extTextureFilterAnisotropic=e.getExtension(\"EXT_texture_filter_anisotropic\")||e.getExtension(\"MOZ_EXT_texture_filter_anisotropic\")||e.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=e.getExtension(\"WEBGL_debug_renderer_info\"),this.extDebugRendererInfo&&(this.renderer=e.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=e.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.extTextureHalfFloat=e.getExtension(\"OES_texture_half_float\"),this.extTextureHalfFloat&&(e.getExtension(\"OES_texture_half_float_linear\"),this.extRenderToTextureHalfFloat=e.getExtension(\"EXT_color_buffer_half_float\")),this.extStandardDerivatives=e.getExtension(\"OES_standard_derivatives\"),this.extTimerQuery=e.getExtension(\"EXT_disjoint_timer_query\"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE);}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault();}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0;}createIndexBuffer(e,t){return new N(this,e,t)}createVertexBuffer(e,t,i){return new j(this,e,t,i)}createRenderbuffer(e,t,i){const o=this.gl,r=o.createRenderbuffer();return this.bindRenderbuffer.set(r),o.renderbufferStorage(o.RENDERBUFFER,e,t,i),this.bindRenderbuffer.set(null),r}createFramebuffer(e,t,i){return new Ce(this,e,t,i)}clear({color:e,depth:t,stencil:i}){const o=this.gl;let r=0;e&&(r|=o.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==t&&(r|=o.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(t),this.depthMask.set(!0)),void 0!==i&&(r|=o.STENCIL_BUFFER_BIT,this.clearStencil.set(i),this.stencilMask.set(255)),o.clear(r);}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace));}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1);}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1);}setColorMode(i){t(i.blendFunction,e.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask);}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null);}}class Me extends e.Evented{constructor(t,i,o,r){super(),this.id=t,this.dispatcher=o,this.setEventedParent(r),this.type=\"raster\",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme=\"xyz\",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:\"raster\"},i),e.extend(this,e.pick(i,[\"url\",\"scheme\",\"tileSize\"]));}load(){this._loaded=!1,this.fire(new e.Event(\"dataloading\",{dataType:\"source\"})),this._tileJSONRequest=F(this._options,this.map._requestManager,null,null,((t,i)=>{this._tileJSONRequest=null,this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):i&&(e.extend(this,i),i.bounds&&(this.tileBounds=new U(i.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(i.tiles),this.fire(new e.Event(\"data\",{dataType:\"source\",sourceDataType:\"metadata\"})),this.fire(new e.Event(\"data\",{dataType:\"source\",sourceDataType:\"content\"})));}));}loaded(){return this._loaded}onAdd(e){this.map=e,this.load();}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null);}serialize(){return e.extend({},this._options)}hasTile(e){return !this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,i){const o=e.exported.devicePixelRatio>=2,r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),o,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(r,e.ResourceType.Tile),((o,r,n,s)=>(delete t.request,t.aborted?(t.state=\"unloaded\",i(null)):o?(t.state=\"errored\",i(o)):r?(this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:n,expires:s}),t.setTexture(r,this.map.painter),t.state=\"loaded\",e.cacheEntryPossiblyAdded(this.dispatcher),void i(null)):i(null))));}static loadTileData(e,t,i){e.setTexture(t,i);}static unloadTileData(e,t){e.texture&&t.saveTileTexture(e.texture);}abortTile(e,t){e.request&&(e.request.cancel(),delete e.request),t();}unloadTile(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t();}hasTransition(){return !1}}let Se;function De(t,i,o,r,n,s,a,l){const c=[t,o,n,i,r,s,1,1,1],h=[a,l,1],u=e.adjoint([],c),[_,d,p]=e.transformMat3(h,h,e.transpose(u,u));return e.multiply$1(c,[_,0,0,0,d,0,0,0,p],c)}class Ae extends e.Evented{constructor(e,t,i,o){super(),this.id=e,this.dispatcher=i,this.coordinates=t.coordinates,this.type=\"image\",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(o),this.options=t,this._dirty=!1;}load(t,i){this._loaded=i||!1,this.fire(new e.Event(\"dataloading\",{dataType:\"source\"})),this.url=this.options.url,this._imageRequest=e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),((i,o)=>{if(this._imageRequest=null,this._loaded=!0,i)this.fire(new e.ErrorEvent(i));else if(o){const{HTMLImageElement:i}=e.window;this.image=o instanceof i?e.exported.getImageData(o):o,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,t&&(this.coordinates=t),this._finishLoading();}}));}loaded(){return this._loaded}updateImage(e){return this.image&&e.url?(this._imageRequest&&e.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=e.url,this.load(e.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event(\"data\",{dataType:\"source\",sourceDataType:\"metadata\"})));}onAdd(e){this.map=e,this.load();}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy();}setCoordinates(t){this.coordinates=t,this._boundsArray=void 0;const i=t.map(e.MercatorCoordinate.fromLngLat);return this.tileID=function(t){let i=1/0,o=1/0,r=-1/0,n=-1/0;for(const e of t)i=Math.min(i,e.x),o=Math.min(o,e.y),r=Math.max(r,e.x),n=Math.max(n,e.y);const s=Math.max(r-i,n-o),a=Math.max(0,Math.floor(-Math.log(s)/Math.LN2)),l=Math.pow(2,a);return new e.CanonicalTileID(a,Math.floor((i+r)/2*l),Math.floor((o+n)/2*l))}(i),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new e.Event(\"data\",{dataType:\"source\",sourceDataType:\"content\"})),this}_clear(){this._boundsArray=void 0;}_prepareData(t){for(const e in this.tiles){const t=this.tiles[e];\"loaded\"!==t.state&&(t.state=\"loaded\",t.texture=this.texture);}if(this._boundsArray)return;const i=e.tileTransform(this.tileID,this.map.transform.projection),[o,r,n,s]=this.coordinates.map((t=>{const o=i.projection.project(t[0],t[1]);return e.getTilePoint(i,o)._round()}));this.perspectiveTransform=function(t,i,o,r,n,s,a,l,c,h){const u=De(0,0,t,0,0,i,t,i),_=De(o,r,n,s,a,l,c,h);return e.multiply$1(_,e.adjoint(u,u),_),[_[6]/_[8]*t/e.EXTENT,_[7]/_[8]*i/e.EXTENT]}(this.width,this.height,o.x,o.y,r.x,r.y,s.x,s.y,n.x,n.y);const a=this._boundsArray=new e.StructArrayLayout4i8;a.emplaceBack(o.x,o.y,0,0),a.emplaceBack(r.x,r.y,e.EXTENT,0),a.emplaceBack(s.x,s.y,0,e.EXTENT),a.emplaceBack(n.x,n.y,e.EXTENT,e.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=t.createVertexBuffer(a,e.boundsAttributes.members),this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,i=t.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new e.Texture(t,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(t);}loadTile(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state=\"errored\",t(null));}serialize(){return {type:\"image\",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return !1}}const Le={vector:class extends e.Evented{constructor(t,i,o,r){if(super(),this.id=t,this.dispatcher=o,this.type=\"vector\",this.minzoom=0,this.maxzoom=22,this.scheme=\"xyz\",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(i,[\"url\",\"scheme\",\"tileSize\",\"promoteId\"])),this._options=e.extend({type:\"vector\"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error(\"vector tile sources must have a tileSize of 512\");this.setEventedParent(r),this._tileWorkers={},this._deduped=new e.DedupedRequest;}load(t){this._loaded=!1,this.fire(new e.Event(\"dataloading\",{dataType:\"source\"}));const i=Array.isArray(this.map._language)?this.map._language.join():this.map._language,o=this.map._worldview;this._tileJSONRequest=F(this._options,this.map._requestManager,i,o,((r,n)=>{this._tileJSONRequest=null,this._loaded=!0,r?(i&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${i}`),o&&2!==o.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${o}`),this.fire(new e.ErrorEvent(r))):n&&(e.extend(this,n),n.bounds&&(this.tileBounds=new U(n.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(n.tiles,this.map._requestManager._customAccessToken),this.fire(new e.Event(\"data\",{dataType:\"source\",sourceDataType:\"metadata\"})),this.fire(new e.Event(\"data\",{dataType:\"source\",sourceDataType:\"content\"}))),t&&t(r);}));}loaded(){return this._loaded}hasTile(e){return !this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load();}reload(){this.cancelTileJSONRequest(),this.load((()=>{const e=this.map.style._getSourceCaches(this.id);for(const t of e)t.clearTiles();}));}setSourceProperty(e){e(),this.reload();}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest();}serialize(){return e.extend({},this._options)}loadTile(t,i){const o=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),r={request:this.map._requestManager.transformRequest(o,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(r.request.collectResourceTiming=this._collectResourceTiming,t.actor&&\"expired\"!==t.state)\"loading\"===t.state?t.reloadCallback=i:t.request=t.actor.send(\"reloadTile\",r,n.bind(this));else if(t.actor=this._tileWorkers[o]=this._tileWorkers[o]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send(\"loadTile\",r,n.bind(this),void 0,!0);else {const i=e.loadVectorTile.call({deduped:this._deduped},r,((e,i)=>{e||!i?n.call(this,e):(r.data={cacheControl:i.cacheControl,expires:i.expires,rawData:i.rawData.slice(0)},t.actor&&t.actor.send(\"loadTile\",r,n.bind(this),void 0,!0));}),!0);t.request={cancel:i};}function n(o,r){return delete t.request,t.aborted?i(null):o&&404!==o.status?i(o):(r&&r.resourceTiming&&(t.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&t.setExpiryData(r),t.loadVectorData(r,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send(\"abortTile\",{uid:e.uid,type:this.type,source:this.id});}unloadTile(e){e.unloadVectorData(),e.actor&&e.actor.send(\"removeTile\",{uid:e.uid,type:this.type,source:this.id});}hasTransition(){return !1}afterUpdate(){this._tileWorkers={};}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null);}},raster:Me,\"raster-dem\":class extends Me{constructor(t,i,o,r){super(t,i,o,r),this.type=\"raster-dem\",this.maxzoom=22,this._options=e.extend({type:\"raster-dem\"},i),this.encoding=i.encoding||\"mapbox\";}loadTile(t,i){const o=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function r(e,o){e&&(t.state=\"errored\",i(e)),o&&(t.dem=o,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state=\"loaded\",i(null));}t.request=e.getImage(this.map._requestManager.transformRequest(o,e.ResourceType.Tile),function(o,n,s,a){if(delete t.request,t.aborted)t.state=\"unloaded\",i(null);else if(o)t.state=\"errored\",i(o);else if(n){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:s,expires:a});const i=e.window.ImageBitmap&&n instanceof e.window.ImageBitmap&&(null==Se&&(Se=e.window.OffscreenCanvas&&new e.window.OffscreenCanvas(1,1).getContext(\"2d\")&&\"function\"==typeof e.window.createImageBitmap),Se),o=1-(n.width-e.prevPowerOfTwo(n.width))/2;o<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));const l=i?n:e.exported.getImageData(n,o),c={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:l,encoding:this.encoding,padding:o};t.actor&&\"expired\"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send(\"loadDEMTile\",c,r.bind(this),void 0,!0));}}.bind(this));}_getNeighboringTiles(t){const i=t.canonical,o=Math.pow(2,i.z),r=(i.x-1+o)%o,n=0===i.x?t.wrap-1:t.wrap,s=(i.x+1+o)%o,a=i.x+1===o?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,n,i.z,r,i.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,a,i.z,s,i.y).key]={backfilled:!1},i.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,n,i.z,r,i.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,a,i.z,s,i.y-1).key]={backfilled:!1}),i.y+1<o&&(l[new e.OverscaledTileID(t.overscaledZ,n,i.z,r,i.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,a,i.z,s,i.y+1).key]={backfilled:!1}),l}unloadTile(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state=\"unloaded\";}},geojson:class extends e.Evented{constructor(t,i,o,r){super(),this.id=t,this.type=\"geojson\",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=o.getActor(),this.setEventedParent(r),this._data=i.data,this._options=e.extend({},i),this._collectResourceTiming=i.collectResourceTiming,void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const n=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*n,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*n,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:e.EXTENT,radius:(void 0!==i.clusterRadius?i.clusterRadius:50)*n,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions);}onAdd(e){this.map=e,this.setData(this._data);}setData(e){return this._data=e,this._updateWorkerData(),this}getClusterExpansionZoom(e,t){return this.actor.send(\"geojson.getClusterExpansionZoom\",{clusterId:e,source:this.id},t),this}getClusterChildren(e,t){return this.actor.send(\"geojson.getClusterChildren\",{clusterId:e,source:this.id},t),this}getClusterLeaves(e,t,i,o){return this.actor.send(\"geojson.getClusterLeaves\",{source:this.id,clusterId:e,limit:t,offset:i},o),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new e.Event(\"dataloading\",{dataType:\"source\"})),this._loaded=!1;const t=e.extend({},this.workerOptions),i=this._data;\"string\"==typeof i?(t.request=this.map._requestManager.transformRequest(e.exported.resolveURL(i),e.ResourceType.Source),t.request.collectResourceTiming=this._collectResourceTiming):t.data=JSON.stringify(i),this._pendingLoad=this.actor.send(`${this.type}.loadData`,t,((t,i)=>{if(this._loaded=!0,this._pendingLoad=null,t)this.fire(new e.ErrorEvent(t));else {const t={dataType:\"source\",sourceDataType:this._metadataFired?\"content\":\"metadata\"};this._collectResourceTiming&&i&&i.resourceTiming&&i.resourceTiming[this.id]&&(t.resourceTiming=i.resourceTiming[this.id]),this.fire(new e.Event(\"data\",t)),this._metadataFired=!0;}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1);}));}loaded(){return this._loaded}loadTile(t,i){const o=t.actor?\"reloadTile\":\"loadTile\";t.actor=this.actor,t.request=this.actor.send(o,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((e,r)=>(delete t.request,t.unloadVectorData(),t.aborted?i(null):e?i(e):(t.loadVectorData(r,this.map.painter,\"reloadTile\"===o),i(null)))),void 0,\"loadTile\"===o);}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0;}unloadTile(e){e.unloadVectorData(),this.actor.send(\"removeTile\",{uid:e.uid,type:this.type,source:this.id});}onRemove(){this._pendingLoad&&this._pendingLoad.cancel();}serialize(){return e.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return !1}},video:class extends Ae{constructor(e,t,i,o){super(e,t,i,o),this.roundZoom=!0,this.type=\"video\",this.options=t;}load(){this._loaded=!1;const t=this.options;this.urls=[];for(const i of t.urls)this.urls.push(this.map._requestManager.transformRequest(i,e.ResourceType.Source).url);e.getVideo(this.urls,((t,i)=>{this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):i&&(this.video=i,this.video.loop=!0,this.video.setAttribute(\"playsinline\",\"\"),this.video.addEventListener(\"playing\",(()=>{this.map.triggerRepaint();})),this.map&&this.video.play(),this._finishLoading());}));}pause(){this.video&&this.video.pause();}play(){this.video&&this.video.play();}seek(t){if(this.video){const i=this.video.seekable;t<i.start(0)||t>i.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=t;}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)));}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const t=this.map.painter.context,i=t.gl;this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(t);}serialize(){return {type:\"video\",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Ae,canvas:class extends Ae{constructor(t,i,o,r){super(t,i,o,r),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((e=>!Array.isArray(e)||2!==e.length||e.some((e=>\"number\"!=typeof e))))||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'\"coordinates\" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property \"coordinates\"'))),i.animate&&\"boolean\"!=typeof i.animate&&this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'optional \"animate\" property must be a boolean value'))),i.canvas?\"string\"==typeof i.canvas||i.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property \"canvas\"'))),this.options=i,this.animate=void 0===i.animate||i.animate;}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error(\"Canvas dimensions cannot be less than or equal to zero.\"))):(this.play=function(){this._playing=!0,this.map.triggerRepaint();},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1);},this._finishLoading());}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play();}onRemove(){this.pause();}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const i=this.map.painter.context;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(i,this.canvas,i.gl.RGBA,{premultiply:!0}),this._prepareData(i);}serialize(){return {type:\"canvas\",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of [this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return !0;return !1}},custom:class extends e.Evented{constructor(t,i,o,r){super(),this.id=t,this.type=\"custom\",this._dataType=\"raster\",this._dispatcher=o,this._implementation=i,this.setEventedParent(r),this.scheme=\"xyz\",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new e.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new e.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new U(this._implementation.bounds,this.minzoom,this.maxzoom)),i.update=this._update.bind(this),i.clearTiles=this._clearTiles.bind(this),i.coveringTiles=this._coveringTiles.bind(this),e.extend(this,e.pick(i,[\"dataType\",\"scheme\",\"minzoom\",\"maxzoom\",\"tileSize\",\"attribution\",\"minTileCacheSize\",\"maxTileCacheSize\"]));}serialize(){return e.pick(this,[\"type\",\"scheme\",\"minzoom\",\"maxzoom\",\"tileSize\",\"attribution\"])}load(){this._loaded=!0,this.fire(new e.Event(\"data\",{dataType:\"source\",sourceDataType:\"metadata\"})),this.fire(new e.Event(\"data\",{dataType:\"source\",sourceDataType:\"content\"}));}loaded(){return this._loaded}onAdd(t){this._map=t,this._loaded=!1,this.fire(new e.Event(\"dataloading\",{dataType:\"source\"})),this._implementation.onAdd&&this._implementation.onAdd(t),this.load();}onRemove(e){this._implementation.onRemove&&this._implementation.onRemove(e);}hasTile(e){if(this._implementation.hasTile){const{x:t,y:i,z:o}=e.canonical;return this._implementation.hasTile({x:t,y:i,z:o})}return !this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,i){const{x:o,y:r,z:n}=t.tileID.canonical,s=new e.window.AbortController;t.request=Promise.resolve(this._implementation.loadTile({x:o,y:r,z:n},{signal:s.signal})).then(function(o){return delete t.request,t.aborted?(t.state=\"unloaded\",i(null)):void 0===o?(t.state=\"errored\",i(null)):null===o?(this.loadTileData(t,{width:this.tileSize,height:this.tileSize,data:null}),t.state=\"loaded\",i(null)):function(t){return t instanceof e.window.ImageData||t instanceof e.window.HTMLCanvasElement||t instanceof e.window.ImageBitmap||t instanceof e.window.HTMLImageElement}(o)?(this.loadTileData(t,o),t.state=\"loaded\",void i(null)):(t.state=\"errored\",i(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch((e=>{20!==e.code&&(t.state=\"errored\",i(e));})),t.request.cancel=()=>s.abort();}loadTileData(e,t){Me.loadTileData(e,t,this._map.painter);}unloadTileData(e){Me.unloadTileData(e,this._map.painter);}unloadTile(e,t){if(this.unloadTileData(e),this._implementation.unloadTile){const{x:t,y:i,z:o}=e.tileID.canonical;this._implementation.unloadTile({x:t,y:i,z:o});}t();}abortTile(e,t){e.request&&e.request.cancel&&(e.request.cancel(),delete e.request),t();}hasTransition(){return !1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((e=>({x:e.canonical.x,y:e.canonical.y,z:e.canonical.z})))}_clearTiles(){this._map.style._clearSource(this.id);}_update(){this.fire(new e.Event(\"data\",{dataType:\"source\",sourceDataType:\"content\"}));}}},ze=function(t,i,o,r){const n=new Le[i.type](t,i,o,r);if(n.id!==t)throw new Error(`Expected Source id to be ${t} instead of ${n.id}`);return e.bindAll([\"load\",\"abort\",\"unload\",\"serialize\",\"prepare\"],n),n};function Pe(t,i){const o=e.identity([]);return e.scale(o,o,[.5*t.width,.5*-t.height,1]),e.translate(o,o,[1,-1,0]),e.multiply(o,o,t.calculateProjMatrix(i.toUnwrapped())),Float32Array.from(o)}function Re(e,t,i,o,r,n,s,a=!1){const l=e.tilesIn(o,s,a);l.sort(Be);const c=[];for(const o of l)c.push({wrappedTileID:o.tile.tileID.wrapped().key,queryResults:o.tile.queryRenderedFeatures(t,i,e._state,o,r,n,Pe(e.transform,o.tile.tileID),a)});const h=function(e){const t={},i={};for(const o of e){const e=o.queryResults,r=o.wrappedTileID,n=i[r]=i[r]||{};for(const i in e){const o=e[i],r=n[i]=n[i]||{},s=t[i]=t[i]||[];for(const e of o)r[e.featureIndex]||(r[e.featureIndex]=!0,s.push(e));}}return t}(c);for(const t in h)h[t].forEach((t=>{const i=t.feature,o=i.layer;o&&\"background\"!==o.type&&\"sky\"!==o.type&&(i.source=o.source,o[\"source-layer\"]&&(i.sourceLayer=o[\"source-layer\"]),i.state=void 0!==i.id?e.getFeatureState(o[\"source-layer\"],i.id):{});}));return h}function Oe(e,t){const i=e.getRenderableIds().map((t=>e.getTileByID(t))),o=[],r={};for(let e=0;e<i.length;e++){const n=i[e],s=n.tileID.canonical.key;r[s]||(r[s]=!0,n.querySourceFeatures(o,t));}return o}function Be(e,t){const i=e.tileID,o=t.tileID;return i.overscaledZ-o.overscaledZ||i.canonical.y-o.canonical.y||i.wrap-o.wrap||i.canonical.x-o.canonical.x}function ke(){return null!=pn.workerClass?new pn.workerClass:new e.window.Worker(pn.workerUrl)}const Fe=\"mapboxgl_preloaded_worker_pool\";class Ue{constructor(){this.active={};}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<Ue.workerCount;)this.workers.push(new ke);return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((e=>{e.terminate();})),this.workers=null);}isPreloaded(){return !!this.active[Fe]}numActive(){return Object.keys(this.active).length}}let Ne;function Ge(){return Ne||(Ne=new Ue),Ne}function je(t,i){const o={};for(const e in t)\"ref\"!==e&&(o[e]=t[e]);return e.refProperties.forEach((e=>{e in i&&(o[e]=i[e]);})),o}function Ze(e){e=e.slice();const t=Object.create(null);for(let i=0;i<e.length;i++)t[e[i].id]=e[i];for(let i=0;i<e.length;i++)\"ref\"in e[i]&&(e[i]=je(e[i],t[e[i].ref]));return e}Ue.workerCount=2;const Ve={setStyle:\"setStyle\",addLayer:\"addLayer\",removeLayer:\"removeLayer\",setPaintProperty:\"setPaintProperty\",setLayoutProperty:\"setLayoutProperty\",setFilter:\"setFilter\",addSource:\"addSource\",removeSource:\"removeSource\",setGeoJSONSourceData:\"setGeoJSONSourceData\",setLayerZoomRange:\"setLayerZoomRange\",setLayerProperty:\"setLayerProperty\",setCenter:\"setCenter\",setZoom:\"setZoom\",setBearing:\"setBearing\",setPitch:\"setPitch\",setSprite:\"setSprite\",setGlyphs:\"setGlyphs\",setTransition:\"setTransition\",setLight:\"setLight\",setTerrain:\"setTerrain\",setFog:\"setFog\",setProjection:\"setProjection\"};function We(e,t,i){i.push({command:Ve.addSource,args:[e,t[e]]});}function Xe(e,t,i){t.push({command:Ve.removeSource,args:[e]}),i[e]=!0;}function qe(e,t,i,o){Xe(e,i,o),We(e,t,i);}function $e(e,i,o){let r;for(r in e[o])if(e[o].hasOwnProperty(r)&&\"data\"!==r&&!t(e[o][r],i[o][r]))return !1;for(r in i[o])if(i[o].hasOwnProperty(r)&&\"data\"!==r&&!t(e[o][r],i[o][r]))return !1;return !0}function He(e,i,o,r,n,s){let a;for(a in i=i||{},e=e||{})e.hasOwnProperty(a)&&(t(e[a],i[a])||o.push({command:s,args:[r,a,i[a],n]}));for(a in i)i.hasOwnProperty(a)&&!e.hasOwnProperty(a)&&(t(e[a],i[a])||o.push({command:s,args:[r,a,i[a],n]}));}function Ye(e){return e.id}function Ke(e,t){return e[t.id]=t,e}class Je{constructor(e,t){this.reset(e,t);}reset(e,t){this.points=e||[],this._distances=[0];for(let e=1;e<this.points.length;e++)this._distances[e]=this._distances[e-1]+this.points[e].dist(this.points[e-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding;}lerp(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);let i=1,o=this._distances[i];const r=t*this.paddedLength+this.padding;for(;o<r&&i<this._distances.length;)o=this._distances[++i];const n=i-1,s=this._distances[n],a=o-s,l=a>0?(r-s)/a:0;return this.points[n].mult(1-l).add(this.points[i].mult(l))}}class Qe{constructor(e,t,i){const o=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(e/i),this.yCellCount=Math.ceil(t/i);for(let e=0;e<this.xCellCount*this.yCellCount;e++)o.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0;}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,i,o,r){this._forEachCell(t,i,o,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(o),this.bboxes.push(r);}insertCircle(e,t,i,o){this._forEachCell(t-o,i-o,t+o,i+o,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(i),this.circles.push(o);}_insertBoxCell(e,t,i,o,r,n){this.boxCells[r].push(n);}_insertCircleCell(e,t,i,o,r,n){this.circleCells[r].push(n);}_query(e,t,i,o,r,n){if(i<0||e>this.width||o<0||t>this.height)return !r&&[];const s=[];if(e<=0&&t<=0&&this.width<=i&&this.height<=o){if(r)return !0;for(let e=0;e<this.boxKeys.length;e++)s.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],i=this.circles[3*e+1],o=this.circles[3*e+2];s.push({key:this.circleKeys[e],x1:t-o,y1:i-o,x2:t+o,y2:i+o});}return n?s.filter(n):s}return this._forEachCell(e,t,i,o,this._queryCell,s,{hitTest:r,seenUids:{box:{},circle:{}}},n),r?s.length>0:s}_queryCircle(e,t,i,o,r){const n=e-i,s=e+i,a=t-i,l=t+i;if(s<0||n>this.width||l<0||a>this.height)return !o&&[];const c=[];return this._forEachCell(n,a,s,l,this._queryCellCircle,c,{hitTest:o,circle:{x:e,y:t,radius:i},seenUids:{box:{},circle:{}}},r),o?c.length>0:c}query(e,t,i,o,r){return this._query(e,t,i,o,!1,r)}hitTest(e,t,i,o,r){return this._query(e,t,i,o,!0,r)}hitTestCircle(e,t,i,o){return this._queryCircle(e,t,i,!0,o)}_queryCell(e,t,i,o,r,n,s,a){const l=s.seenUids,c=this.boxCells[r];if(null!==c){const r=this.bboxes;for(const h of c)if(!l.box[h]){l.box[h]=!0;const c=4*h;if(e<=r[c+2]&&t<=r[c+3]&&i>=r[c+0]&&o>=r[c+1]&&(!a||a(this.boxKeys[h]))){if(s.hitTest)return n.push(!0),!0;n.push({key:this.boxKeys[h],x1:r[c],y1:r[c+1],x2:r[c+2],y2:r[c+3]});}}}const h=this.circleCells[r];if(null!==h){const r=this.circles;for(const c of h)if(!l.circle[c]){l.circle[c]=!0;const h=3*c;if(this._circleAndRectCollide(r[h],r[h+1],r[h+2],e,t,i,o)&&(!a||a(this.circleKeys[c]))){if(s.hitTest)return n.push(!0),!0;{const e=r[h],t=r[h+1],i=r[h+2];n.push({key:this.circleKeys[c],x1:e-i,y1:t-i,x2:e+i,y2:t+i});}}}}}_queryCellCircle(e,t,i,o,r,n,s,a){const l=s.circle,c=s.seenUids,h=this.boxCells[r];if(null!==h){const e=this.bboxes;for(const t of h)if(!c.box[t]){c.box[t]=!0;const i=4*t;if(this._circleAndRectCollide(l.x,l.y,l.radius,e[i+0],e[i+1],e[i+2],e[i+3])&&(!a||a(this.boxKeys[t])))return n.push(!0),!0}}const u=this.circleCells[r];if(null!==u){const e=this.circles;for(const t of u)if(!c.circle[t]){c.circle[t]=!0;const i=3*t;if(this._circlesCollide(e[i],e[i+1],e[i+2],l.x,l.y,l.radius)&&(!a||a(this.circleKeys[t])))return n.push(!0),!0}}}_forEachCell(e,t,i,o,r,n,s,a){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),h=this._convertToXCellCoord(i),u=this._convertToYCellCoord(o);for(let _=l;_<=h;_++)for(let l=c;l<=u;l++)if(r.call(this,e,t,i,o,this.xCellCount*l+_,n,s,a))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,i,o,r,n){const s=o-e,a=r-t,l=i+n;return l*l>s*s+a*a}_circleAndRectCollide(e,t,i,o,r,n,s){const a=(n-o)/2,l=Math.abs(e-(o+a));if(l>a+i)return !1;const c=(s-r)/2,h=Math.abs(t-(r+c));if(h>c+i)return !1;if(l<=a||h<=c)return !0;const u=l-a,_=h-c;return u*u+_*_<=i*i}}const et=Math.tan(85*Math.PI/180);function tt(t,i,o,r,n,s,a){const l=e.create();if(o)if(\"globe\"===s.name){const t=e.calculateGlobeLabelMatrix(n,i);e.multiply(l,l,t);}else {const t=v([],a);l[0]=t[0],l[1]=t[1],l[4]=t[2],l[5]=t[3],r||e.rotateZ(l,l,n.angle);}else e.multiply(l,n.labelPlaneMatrix,t);return l}function it(e,t,i,o,r,n,s){const a=tt(e,t,i,o,r,n,s);return \"globe\"===n.name&&i||(a[2]=a[6]=a[10]=a[14]=0),a}function ot(t,i,o,r,n,s,a){if(o){if(\"globe\"===s.name){const l=tt(t,i,o,r,n,s,a);return e.invert(l,l),e.multiply(l,t,l),l}{const i=e.clone(t),o=e.identity([]);return o[0]=a[0],o[1]=a[1],o[4]=a[2],o[5]=a[3],e.multiply(i,i,o),r||e.rotateZ(i,i,-n.angle),i}}return n.glCoordMatrix}function rt(t,i,o,r){const n=[t,i,o,1];o?e.transformMat4$1(n,n,r):mt(n,n,r);const s=n[3];return n[0]/=s,n[1]/=s,n[2]/=s,n}function nt(e,t){return Math.min(.5+e/t*.5,1.5)}function st(e,t){const i=e[0]/e[3],o=e[1]/e[3];return i>=-t[0]&&i<=t[0]&&o>=-t[1]&&o<=t[1]}function at(t,i,o,r,n,s,a,l,c,h){const u=o.transform,_=r?t.textSizeData:t.iconSizeData,d=e.evaluateSizeForZoom(_,o.transform.zoom),p=\"globe\"===u.projection.name,m=[256/o.width*2+1,256/o.height*2+1],f=r?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;f.clear();let g=null;p&&(g=r?t.text.globeExtVertexArray:t.icon.globeExtVertexArray);const v=t.lineVertexArray,x=r?t.text.placedSymbolArray:t.icon.placedSymbolArray,y=o.transform.width/o.transform.height;let b,w=!1;for(let r=0;r<x.length;r++){const p=x.get(r),{numGlyphs:T,writingMode:E}=p;if(E!==e.WritingMode.vertical||w||b===e.WritingMode.horizontal||(w=!0),b=E,(p.hidden||E===e.WritingMode.vertical)&&!w){pt(T,f);continue}w=!1;const C=new e.pointGeometry(p.tileAnchorX,p.tileAnchorY);let{x:I,y:M,z:S}=u.projection.projectTilePoint(C.x,C.y,h.canonical);if(c){const[e,t,i]=c(C);I+=e,M+=t,S+=i;}const D=[I,M,S,1];if(e.transformMat4$1(D,D,i),!st(D,m)){pt(T,f);continue}const A=nt(o.transform.cameraToCenterDistance,D[3]),L=e.evaluateSizeForFeature(_,d,p),z=a?L/A:L*A,P=rt(I,M,S,n);if(P[3]<=0){pt(T,f);continue}let R={};const O=a?null:c,B=ht(p,z,!1,l,i,n,s,t.glyphOffsetArray,v,f,g,P,C,R,y,O,u.projection,h,a);w=B.useVertical,O&&B.needsFlipping&&(R={}),(B.notEnoughRoom||w||B.needsFlipping&&ht(p,z,!0,l,i,n,s,t.glyphOffsetArray,v,f,g,P,C,R,y,O,u.projection,h,a).notEnoughRoom)&&pt(T,f);}r?(t.text.dynamicLayoutVertexBuffer.updateData(f),g&&t.text.globeExtVertexBuffer.updateData(g)):(t.icon.dynamicLayoutVertexBuffer.updateData(f),g&&t.icon.globeExtVertexBuffer.updateData(g));}function lt(e,t,i,o,r,n,s,a,l,c,h,u,_,d,p,m){const{lineStartIndex:f,glyphStartIndex:g,segment:v}=a,x=g+a.numGlyphs,y=f+a.lineLength,b=t.getoffsetX(g),w=t.getoffsetX(x-1),T=dt(e*b,i,o,r,n,s,v,f,y,l,c,h,u,_,!0,d,p,m);if(!T)return null;const E=dt(e*w,i,o,r,n,s,v,f,y,l,c,h,u,_,!0,d,p,m);return E?{first:T,last:E}:null}function ct(t,i,o,r){return t===e.WritingMode.horizontal&&Math.abs(r)>Math.abs(o)?{useVertical:!0}:t===e.WritingMode.vertical?r>0?{needsFlipping:!0}:null:0!==i&&function(e,t){return 0===e||Math.abs(t/e)>et}(o,r)?1===i?{needsFlipping:!0}:null:o<0?{needsFlipping:!0}:null}function ht(t,i,o,r,n,s,a,l,c,h,u,_,d,p,m,f,g,v,x){const y=i/24,b=t.lineOffsetX*y,w=t.lineOffsetY*y,{lineStartIndex:T,glyphStartIndex:E,numGlyphs:C,segment:I,writingMode:M,flipState:S}=t,D=T+t.lineLength,A=t=>{if(u){const[i,o,r]=t.up,n=h.length;e.updateGlobeVertexNormal(u,n+0,i,o,r),e.updateGlobeVertexNormal(u,n+1,i,o,r),e.updateGlobeVertexNormal(u,n+2,i,o,r),e.updateGlobeVertexNormal(u,n+3,i,o,r);}const[i,o,r]=t.point;e.addDynamicAttributes(h,i,o,r,t.angle);};if(C>1){const e=lt(y,l,b,w,o,_,d,t,c,s,p,f,!1,g,v,x);if(!e)return {notEnoughRoom:!0};if(r&&!o){let[i,o,r]=e.first.point,[n,s,l]=e.last.point;[i,o]=rt(i,o,r,a),[n,s]=rt(n,s,l,a);const c=ct(M,S,(n-i)*m,s-o);if(t.flipState=c&&c.needsFlipping?1:2,c)return c}A(e.first);for(let e=E+1;e<E+C-1;e++){const t=dt(y*l.getoffsetX(e),b,w,o,_,d,I,T,D,c,s,p,f,!1,!1,g,v,x);if(!t)return h.length-=4*(e-E),{notEnoughRoom:!0};A(t);}A(e.last);}else {if(r&&!o){const i=rt(d.x,d.y,0,n),o=T+I+1,r=new e.pointGeometry(c.getx(o),c.gety(o)),s=rt(r.x,r.y,0,n),a=s[3]>0?s:_t(d,r,i,1,n,void 0,g,v.canonical),l=ct(M,S,(a[0]-i[0])*m,a[1]-i[1]);if(t.flipState=l&&l.needsFlipping?1:2,l)return l}const i=dt(y*l.getoffsetX(E),b,w,o,_,d,I,T,D,c,s,p,f,!1,!1,g,v,x);if(!i)return {notEnoughRoom:!0};A(i);}return {}}function ut(e,t,i,o,r){const{x:n,y:s,z:a}=o.projectTilePoint(e.x,e.y,t);if(!r)return rt(n,s,a,i);const[l,c,h]=r(e);return rt(n+l,s+c,a+h,i)}function _t(t,i,o,r,n,s,a,l){const c=ut(t.sub(i)._unit()._add(t),l,n,a,s);return e.sub(c,o,c),e.normalize(c,c),e.scaleAndAdd(c,o,c,r)}function dt(t,i,o,r,n,s,a,l,c,h,u,_,d,p,m,f,g,v){const x=r?t-i:t+i;let y=x>0?1:-1,b=0;r&&(y*=-1,b=Math.PI),y<0&&(b+=Math.PI);let w=l+a+(y>0?0:1)|0,T=n,E=n,C=0,I=0;const M=Math.abs(x),S=[],D=[];let A=s,L=A;const z=()=>_t(L,A,E,M-C+1,u,d,f,g.canonical);for(;C+I<=M;){if(w+=y,w<l||w>=c)return null;if(E=T,L=A,S.push(E),p&&D.push(L),A=new e.pointGeometry(h.getx(w),h.gety(w)),T=_[w],!T){const e=ut(A,g.canonical,u,f,d);T=e[3]>0?_[w]=e:z();}C+=I,I=e.distance(E,T);}m&&d&&(_[w]&&(T=z(),I=e.distance(E,T)),_[w]=T);const P=(M-C)/I,R=A.sub(L)._mult(P)._add(L),O=e.sub([],T,E),B=e.scaleAndAdd([],E,O,P);let k=[0,0,1],F=O[0],U=O[1];if(v&&(k=f.upVector(g.canonical,R.x,R.y),0!==k[0]||0!==k[1]||1!==k[2])){const t=[k[2],0,-k[0]],i=e.cross([],k,t);e.normalize(t,t),e.normalize(i,i),F=e.dot(O,t),U=e.dot(O,i);}if(o){const t=e.cross([],k,O);e.normalize(t,t),e.scaleAndAdd(B,B,t,o*y);}const N=b+Math.atan2(U,F);return S.push(B),p&&D.push(R),{point:B,angle:N,path:S,tilePath:D,up:k}}function pt(e,t){const i=t.length,o=i+4*e;t.resize(o),t.float32.fill(-1/0,4*i,4*o);}function mt(e,t,i){const o=t[0],r=t[1];return e[0]=i[0]*o+i[4]*r+i[12],e[1]=i[1]*o+i[5]*r+i[13],e[3]=i[3]*o+i[7]*r+i[15],e}const ft=100;class gt{constructor(e,t,i=new Qe(e.width+200,e.height+200,25),o=new Qe(e.width+200,e.height+200,25)){this.transform=e,this.grid=i,this.ignoredGrid=o,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+ft,this.screenBottomBoundary=e.height+ft,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.fogState=t;}placeCollisionBox(e,t,i,o,r,n,s,a){let l=i.projectedAnchorX,c=i.projectedAnchorY,h=i.projectedAnchorZ;const u=i.elevation,_=i.tileID,d=e.getProjection();if(u&&_){const[e,t,o]=d.upVector(_.canonical,i.tileAnchorX,i.tileAnchorY),r=d.upVectorScale(_.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;l+=e*u*r,c+=t*u*r,h+=o*u*r;}const p=this.projectAndGetPerspectiveRatio(s,l,c,h,i.tileID,\"globe\"===d.name||!!u||this.transform.pitch>0,d),m=n*p.perspectiveRatio,f=(i.x1*t+o.x-i.padding)*m+p.point.x,g=(i.y1*t+o.y-i.padding)*m+p.point.y,v=(i.x2*t+o.x+i.padding)*m+p.point.x,x=(i.y2*t+o.y+i.padding)*m+p.point.y,y=p.perspectiveRatio<=.55||p.occluded;return !this.isInsideGrid(f,g,v,x)||!r&&this.grid.hitTest(f,g,v,x,a)||y?{box:[],offscreen:!1,occluded:p.occluded}:{box:[f,g,v,x],offscreen:this.isOffscreen(f,g,v,x),occluded:!1}}placeCollisionCircles(t,i,o,r,n,s,a,l,c,h,u,_,d,p,m){const f=[],g=this.transform.elevation,v=t.getProjection(),x=g?g.getAtTileOffsetFunc(m,this.transform.center.lat,this.transform.worldSize,v):null,y=new e.pointGeometry(o.tileAnchorX,o.tileAnchorY);let{x:b,y:w,z:T}=v.projectTilePoint(y.x,y.y,m.canonical);if(x){const[e,t,i]=x(y);b+=e,w+=t,T+=i;}const E=\"globe\"===v.name,C=this.projectAndGetPerspectiveRatio(a,b,w,T,m,E||!!g||this.transform.pitch>0,v),{perspectiveRatio:I}=C,M=(u?s/I:s*I)/e.ONE_EM,S=rt(b,w,T,l),D=C.signedDistanceFromCamera>0?lt(M,n,o.lineOffsetX*M,o.lineOffsetY*M,!1,S,y,o,r,l,{},g&&!u?x:null,u&&!!g,v,m,u):null;let A=!1,L=!1,z=!0;if(D&&!C.occluded){const t=.5*d*I+p,o=new e.pointGeometry(-100,-100),r=new e.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),n=new Je,{first:s,last:a}=D,l=s.path.length;let u=[];for(let e=l-1;e>=1;e--)u.push(s.path[e]);for(let e=1;e<a.path.length;e++)u.push(a.path[e]);const m=2.5*t;c&&(u=u.map((([e,t,i],o)=>(x&&!E&&(i=x(o<l-1?s.tilePath[l-1-o]:a.tilePath[o-l+2])[2]),rt(e,t,i,c)))),u.some((e=>e[3]<=0))&&(u=[]));let g=[];if(u.length>0){let t=1/0,i=-1/0,n=1/0,s=-1/0;for(const e of u)t=Math.min(t,e[0]),n=Math.min(n,e[1]),i=Math.max(i,e[0]),s=Math.max(s,e[1]);i>=o.x&&t<=r.x&&s>=o.y&&n<=r.y&&(g=[u.map((t=>new e.pointGeometry(t[0],t[1])))],(t<o.x||i>r.x||n<o.y||s>r.y)&&(g=e.clipLine(g,o.x,o.y,r.x,r.y)));}for(const e of g){n.reset(e,.25*t);let o=0;o=n.length<=.5*t?1:Math.ceil(n.paddedLength/m)+1;for(let e=0;e<o;e++){const r=e/Math.max(o-1,1),s=n.lerp(r),a=s.x+ft,l=s.y+ft;f.push(a,l,t,0);const c=a-t,u=l-t,d=a+t,p=l+t;if(z=z&&this.isOffscreen(c,u,d,p),L=L||this.isInsideGrid(c,u,d,p),!i&&this.grid.hitTestCircle(a,l,t,_)&&(A=!0,!h))return {circles:[],offscreen:!1,collisionDetected:A,occluded:!1}}}}return {circles:!h&&A||!L?[]:f,offscreen:z,collisionDetected:A,occluded:C.occluded}}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return {};const i=[];let o=1/0,r=1/0,n=-1/0,s=-1/0;for(const a of t){const t=new e.pointGeometry(a.x+ft,a.y+ft);o=Math.min(o,t.x),r=Math.min(r,t.y),n=Math.max(n,t.x),s=Math.max(s,t.y),i.push(t);}const a=this.grid.query(o,r,n,s).concat(this.ignoredGrid.query(o,r,n,s)),l={},c={};for(const t of a){const o=t.key;if(void 0===l[o.bucketInstanceId]&&(l[o.bucketInstanceId]={}),l[o.bucketInstanceId][o.featureIndex])continue;const r=[new e.pointGeometry(t.x1,t.y1),new e.pointGeometry(t.x2,t.y1),new e.pointGeometry(t.x2,t.y2),new e.pointGeometry(t.x1,t.y2)];e.polygonIntersectsPolygon(i,r)&&(l[o.bucketInstanceId][o.featureIndex]=!0,void 0===c[o.bucketInstanceId]&&(c[o.bucketInstanceId]=[]),c[o.bucketInstanceId].push(o.featureIndex));}return c}insertCollisionBox(e,t,i,o,r){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:o,collisionGroupID:r},e[0],e[1],e[2],e[3]);}insertCollisionCircles(e,t,i,o,r){const n=t?this.ignoredGrid:this.grid,s={bucketInstanceId:i,featureIndex:o,collisionGroupID:r};for(let t=0;t<e.length;t+=4)n.insertCircle(s,e[t],e[t+1],e[t+2]);}projectAndGetPerspectiveRatio(t,i,o,r,n,s,a){const l=[i,o,r,1];let c=!1;if(r||this.transform.pitch>0){e.transformMat4$1(l,l,t);const s=\"globe\"===a.name;if(this.fogState&&n&&!s){const t=function(t,i,o,r,n,s){const a=s.calculateFogTileMatrix(n),l=[i,o,r];return e.transformMat4(l,l,a),M(t,l,s.pitch,s._fov)}(this.fogState,i,o,r,n.toUnwrapped(),this.transform);c=t>.9;}}else mt(l,l,t);const h=l[3];return {point:new e.pointGeometry((l[0]/h+1)/2*this.transform.width+ft,(-l[1]/h+1)/2*this.transform.height+ft),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(a)/h*.5,1.5),signedDistanceFromCamera:h,occluded:s&&l[2]>h||c}}isOffscreen(e,t,i,o){return i<ft||e>=this.screenRightBoundary||o<ft||t>this.screenBottomBoundary}isInsideGrid(e,t,i,o){return i>=0&&e<this.gridRightBoundary&&o>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}function vt(t,i,o){const r=i.createTileMatrix(t,t.worldSize,o.toUnwrapped());return e.multiply(new Float32Array(16),t.projMatrix,r)}function xt(e,t,i){if(t.projection.name===i.projection.name)return e.projMatrix;const o=i.clone();return o.setProjection(t.projection),vt(o,t.getProjection(),e)}function yt(e,t,i){return t.name===i.projection.name?e.projMatrix:vt(i,t,e)}class bt{constructor(e,t,i,o){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):o&&i?1:0,this.placed=i;}isHidden(){return 0===this.opacity&&!this.placed}}class wt{constructor(e,t,i,o,r,n=!1){this.text=new bt(e?e.text:null,t,i,r),this.icon=new bt(e?e.icon:null,t,o,r),this.clipped=n;}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Tt{constructor(e,t,i,o=!1){this.text=e,this.icon=t,this.skipFade=i,this.clipped=o;}}class Et{constructor(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[];}}class Ct{constructor(e,t,i,o,r){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=i,this.bucketIndex=o,this.tileID=r;}}class It{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={};}get(e){if(this.crossSourceCollisions)return {ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t};}return this.collisionGroups[e]}}function Mt(t,i,o,r,n){const{horizontalAlign:s,verticalAlign:a}=e.getAnchorAlignment(t),l=-(s-.5)*i,c=-(a-.5)*o,h=e.evaluateVariableOffset(t,r);return new e.pointGeometry(l+h[0]*n,c+h[1]*n)}function St(t,i,o,r,n){const s=new e.pointGeometry(t,i);return o&&s._rotate(r?n:-n),s}class Dt{constructor(e,t,i,o,r){this.transform=e.clone(),this.projection=e.projection.name,this.collisionIndex=new gt(this.transform,r),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new It(i),this.collisionCircleArrays={},this.prevPlacement=o,o&&(o.prevPlacement=void 0),this.placedOrientations={};}getBucketParts(t,i,o,r){const n=o.getBucket(i),s=o.latestFeatureIndex;if(!n||!s||i.id!==n.layerIds[0])return;const a=n.layers[0].layout,l=o.collisionBoxArray,c=Math.pow(2,this.transform.zoom-o.tileID.overscaledZ),h=o.tileSize/e.EXTENT,u=o.tileID.toUnwrapped();this.transform.setProjection(n.projection);const _=(d=o.tileID,p=n.getProjection(),m=this.transform,p.name===this.projection?m.calculateProjMatrix(d.toUnwrapped()):vt(m,p,d));var d,p,m;const f=\"map\"===a.get(\"text-pitch-alignment\"),g=\"map\"===a.get(\"text-rotation-alignment\");i.compileFilter();const v=i.dynamicFilter(),x=i.dynamicFilterNeedsFeature(),y=this.transform.calculatePixelsToTileUnitsMatrix(o),b=it(_,o.tileID.canonical,f,g,this.transform,n.getProjection(),y);let w=null;if(f){const t=ot(_,o.tileID.canonical,f,g,this.transform,n.getProjection(),y);w=e.multiply([],this.transform.labelPlaneMatrix,t);}let T=null;v&&o.latestFeatureIndex&&(T={unwrappedTileID:u,dynamicFilter:v,dynamicFilterNeedsFeature:x,featureIndex:o.latestFeatureIndex}),this.retainedQueryData[n.bucketInstanceId]=new Ct(n.bucketInstanceId,s,n.sourceLayerIndex,n.index,o.tileID);const E={bucket:n,layout:a,posMatrix:_,textLabelPlaneMatrix:b,labelToScreenMatrix:w,clippingData:T,scale:c,textPixelRatio:h,holdingForFade:o.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(n.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(n.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(n.sourceID)};if(r)for(const e of n.sortKeyRanges){const{sortKey:i,symbolInstanceStart:o,symbolInstanceEnd:r}=e;t.push({sortKey:i,symbolInstanceStart:o,symbolInstanceEnd:r,parameters:E});}else t.push({symbolInstanceStart:0,symbolInstanceEnd:n.symbolInstances.length,parameters:E});}attemptAnchorPlacement(e,t,i,o,r,n,s,a,l,c,h,u,_,d,p,m,f,g){const{textOffset0:v,textOffset1:x,crossTileID:y}=u,b=[v,x],w=Mt(e,i,o,b,r),T=this.collisionIndex.placeCollisionBox(d,r,t,St(w.x,w.y,n,s,this.transform.angle),h,a,l,c.predicate);if(m){const e=d.getSymbolInstanceIconSize(g,this.transform.zoom,u.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(d,e,m,St(w.x,w.y,n,s,this.transform.angle),h,a,l,c.predicate).box.length)return}if(T.box.length>0){let t;return this.prevPlacement&&this.prevPlacement.variableOffsets[y]&&this.prevPlacement.placements[y]&&this.prevPlacement.placements[y].text&&(t=this.prevPlacement.variableOffsets[y].anchor),this.variableOffsets[y]={textOffset:b,width:i,height:o,anchor:e,textScale:r,prevAnchor:t},this.markUsedJustification(d,e,u,p),d.allowVerticalPlacement&&(this.markUsedOrientation(d,p,u),this.placedOrientations[y]=p),{shift:w,placedGlyphBoxes:T}}}placeLayerBucketPart(t,i,o,r){const{bucket:n,layout:s,posMatrix:a,textLabelPlaneMatrix:l,labelToScreenMatrix:c,clippingData:h,textPixelRatio:u,holdingForFade:_,collisionBoxArray:d,partiallyEvaluatedTextSize:p,partiallyEvaluatedIconSize:m,collisionGroup:f}=t.parameters,g=s.get(\"text-optional\"),v=s.get(\"icon-optional\"),x=s.get(\"text-allow-overlap\"),y=s.get(\"icon-allow-overlap\"),b=\"map\"===s.get(\"text-rotation-alignment\"),w=\"map\"===s.get(\"text-pitch-alignment\"),T=\"none\"!==s.get(\"icon-text-fit\"),E=\"viewport-y\"===s.get(\"symbol-z-order\");this.transform.setProjection(n.projection);let C=x&&(y||!n.hasIconData()||v),I=y&&(x||!n.hasTextData()||g);!n.collisionArrays&&d&&n.deserializeCollisionBoxes(d),o&&r&&n.updateCollisionDebugBuffers(this.transform.zoom,d);const M=(t,r,d)=>{const{crossTileID:E,numVerticalGlyphVertices:M}=t;if(h){const o={zoom:this.transform.zoom,pitch:this.transform.pitch};let r=null;if(h.dynamicFilterNeedsFeature){const e=this.retainedQueryData[n.bucketInstanceId];r=h.featureIndex.loadFeature({featureIndex:t.featureIndex,bucketIndex:e.bucketIndex,sourceLayerIndex:e.sourceLayerIndex,layoutVertexArrayOffset:0});}if(!(0,h.dynamicFilter)(o,r,this.retainedQueryData[n.bucketInstanceId].tileID.canonical,new e.pointGeometry(t.tileAnchorX,t.tileAnchorY),this.transform.calculateDistanceTileData(h.unwrappedTileID)))return this.placements[E]=new Tt(!1,!1,!1,!0),void(i[E]=!0)}if(i[E])return;if(_)return void(this.placements[E]=new Tt(!1,!1,!1));let S=!1,D=!1,A=!0,L=!1,z=!1,P=null,R={box:null,offscreen:null,occluded:null},O={box:null,offscreen:null,occluded:null},B=null,k=null,F=null,U=0,N=0,G=0;d.textFeatureIndex?U=d.textFeatureIndex:t.useRuntimeCollisionCircles&&(U=t.featureIndex),d.verticalTextFeatureIndex&&(N=d.verticalTextFeatureIndex);const j=e=>{e.tileID=this.retainedQueryData[n.bucketInstanceId].tileID;const t=this.transform.elevation;(t||e.elevation)&&(e.elevation=t?t.getAtTileOffset(e.tileID,e.tileAnchorX,e.tileAnchorY):0);},Z=d.textBox;if(Z){j(Z);const i=i=>{let o=e.WritingMode.horizontal;if(n.allowVerticalPlacement&&!i&&this.prevPlacement){const e=this.prevPlacement.placedOrientations[E];e&&(this.placedOrientations[E]=e,o=e,this.markUsedOrientation(n,o,t));}return o},o=(t,i)=>{if(n.allowVerticalPlacement&&M>0&&d.verticalTextBox){for(const o of n.writingModes)if(o===e.WritingMode.vertical?(R=i(),O=R):R=t(),R&&R.box&&R.box.length)break}else R=t();};if(s.get(\"text-variable-anchor\")){let l=s.get(\"text-variable-anchor\");if(this.prevPlacement&&this.prevPlacement.variableOffsets[E]){const e=this.prevPlacement.variableOffsets[E];l.indexOf(e.anchor)>0&&(l=l.filter((t=>t!==e.anchor)),l.unshift(e.anchor));}const c=(e,i,o)=>{const s=n.getSymbolInstanceTextSize(p,t,this.transform.zoom,r),c=(e.x2-e.x1)*s+2*e.padding,h=(e.y2-e.y1)*s+2*e.padding,_=T&&!y?i:null;_&&j(_);let d={box:[],offscreen:!1,occluded:!1};const g=x?2*l.length:l.length;for(let i=0;i<g;++i){const g=this.attemptAnchorPlacement(l[i%l.length],e,c,h,s,b,w,u,a,f,i>=l.length,t,r,n,o,_,p,m);if(g&&(d=g.placedGlyphBoxes,d&&d.box&&d.box.length)){S=!0,P=g.shift;break}}return d};o((()=>c(Z,d.iconBox,e.WritingMode.horizontal)),(()=>{const t=d.verticalTextBox;return t&&j(t),n.allowVerticalPlacement&&!(R&&R.box&&R.box.length)&&M>0&&t?c(t,d.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),R&&(S=R.box,A=R.offscreen,L=R.occluded);const h=i(R&&R.box);if(!S&&this.prevPlacement){const e=this.prevPlacement.variableOffsets[E];e&&(this.variableOffsets[E]=e,this.markUsedJustification(n,e.anchor,t,h));}}else {const s=(i,o)=>{const s=n.getSymbolInstanceTextSize(p,t,this.transform.zoom,r),l=this.collisionIndex.placeCollisionBox(n,s,i,new e.pointGeometry(0,0),x,u,a,f.predicate);return l&&l.box&&l.box.length&&(this.markUsedOrientation(n,o,t),this.placedOrientations[E]=o),l};o((()=>s(Z,e.WritingMode.horizontal)),(()=>{const t=d.verticalTextBox;return n.allowVerticalPlacement&&M>0&&t?(j(t),s(t,e.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),i(R&&R.box&&R.box.length);}}if(B=R,S=B&&B.box&&B.box.length>0,A=B&&B.offscreen,L=B&&B.occluded,t.useRuntimeCollisionCircles){const i=n.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex),r=e.evaluateSizeForFeature(n.textSizeData,p,i),h=s.get(\"text-padding\");k=this.collisionIndex.placeCollisionCircles(n,x,i,n.lineVertexArray,n.glyphOffsetArray,r,a,l,c,o,w,f.predicate,t.collisionCircleDiameter*r/e.ONE_EM,h,this.retainedQueryData[n.bucketInstanceId].tileID),S=x||k.circles.length>0&&!k.collisionDetected,A=A&&k.offscreen,L=k.occluded;}if(d.iconFeatureIndex&&(G=d.iconFeatureIndex),d.iconBox){const i=i=>{j(i);const o=T&&P?St(P.x,P.y,b,w,this.transform.angle):new e.pointGeometry(0,0),r=n.getSymbolInstanceIconSize(m,this.transform.zoom,t.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(n,r,i,o,y,u,a,f.predicate)};O&&O.box&&O.box.length&&d.verticalIconBox?(F=i(d.verticalIconBox),D=F.box.length>0):(F=i(d.iconBox),D=F.box.length>0),A=A&&F.offscreen,z=F.occluded;}const V=g||0===t.numHorizontalGlyphVertices&&0===M,W=v||0===t.numIconVertices;if(V||W?W?V||(D=D&&S):S=D&&S:D=S=D&&S,S&&B&&B.box&&this.collisionIndex.insertCollisionBox(B.box,s.get(\"text-ignore-placement\"),n.bucketInstanceId,O&&O.box&&N?N:U,f.ID),D&&F&&this.collisionIndex.insertCollisionBox(F.box,s.get(\"icon-ignore-placement\"),n.bucketInstanceId,G,f.ID),k&&(S&&this.collisionIndex.insertCollisionCircles(k.circles,s.get(\"text-ignore-placement\"),n.bucketInstanceId,U,f.ID),o)){const e=n.bucketInstanceId;let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new Et);for(let e=0;e<k.circles.length;e+=4)t.circles.push(k.circles[e+0]),t.circles.push(k.circles[e+1]),t.circles.push(k.circles[e+2]),t.circles.push(k.collisionDetected?1:0);}const X=\"globe\"!==n.projection.name;C=C&&(X||!L),I=I&&(X||!z),this.placements[E]=new Tt(S||C,D||I,A||n.justReloaded),i[E]=!0;};if(E){const e=n.getSortedSymbolIndexes(this.transform.angle);for(let t=e.length-1;t>=0;--t){const i=e[t];M(n.symbolInstances.get(i),i,n.collisionArrays[i]);}}else for(let e=t.symbolInstanceStart;e<t.symbolInstanceEnd;e++)M(n.symbolInstances.get(e),e,n.collisionArrays[e]);if(o&&n.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[n.bucketInstanceId];e.invert(t.invProjMatrix,a),t.viewportMatrix=this.collisionIndex.getViewportMatrix();}n.justReloaded=!1;}markUsedJustification(t,i,o,r){const{leftJustifiedTextSymbolIndex:n,centerJustifiedTextSymbolIndex:s,rightJustifiedTextSymbolIndex:a,verticalPlacedTextSymbolIndex:l,crossTileID:c}=o,h=e.getAnchorJustification(i),u=r===e.WritingMode.vertical?l:\"left\"===h?n:\"center\"===h?s:\"right\"===h?a:-1;n>=0&&(t.text.placedSymbolArray.get(n).crossTileID=u>=0&&n!==u?0:c),s>=0&&(t.text.placedSymbolArray.get(s).crossTileID=u>=0&&s!==u?0:c),a>=0&&(t.text.placedSymbolArray.get(a).crossTileID=u>=0&&a!==u?0:c),l>=0&&(t.text.placedSymbolArray.get(l).crossTileID=u>=0&&l!==u?0:c);}markUsedOrientation(t,i,o){const r=i===e.WritingMode.horizontal||i===e.WritingMode.horizontalOnly?i:0,n=i===e.WritingMode.vertical?i:0,{leftJustifiedTextSymbolIndex:s,centerJustifiedTextSymbolIndex:a,rightJustifiedTextSymbolIndex:l,verticalPlacedTextSymbolIndex:c}=o,h=t.text.placedSymbolArray;s>=0&&(h.get(s).placedOrientation=r),a>=0&&(h.get(a).placedOrientation=r),l>=0&&(h.get(l).placedOrientation=r),c>=0&&(h.get(c).placedOrientation=n);}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let i=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const o=t?t.symbolFadeChange(e):1,r=t?t.opacities:{},n=t?t.variableOffsets:{},s=t?t.placedOrientations:{};for(const e in this.placements){const t=this.placements[e],n=r[e];n?(this.opacities[e]=new wt(n,o,t.text,t.icon,null,t.clipped),i=i||t.text!==n.text.placed||t.icon!==n.icon.placed):(this.opacities[e]=new wt(null,o,t.text,t.icon,t.skipFade,t.clipped),i=i||t.text||t.icon);}for(const e in r){const t=r[e];if(!this.opacities[e]){const r=new wt(t,o,!1,!1);r.isHidden()||(this.opacities[e]=r,i=i||t.text.placed||t.icon.placed);}}for(const e in n)this.variableOffsets[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.variableOffsets[e]=n[e]);for(const e in s)this.placedOrientations[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.placedOrientations[e]=s[e]);i?this.lastPlacementChangeTime=e:\"number\"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e);}updateLayerOpacities(e,t){const i={};for(const o of t){const t=o.getBucket(e);t&&o.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,i,o.collisionBoxArray);}}updateBucketOpacities(t,i,o){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const r=t.layers[0].layout,n=!!t.layers[0].dynamicFilter(),s=new wt(null,0,!1,!1,!0),a=r.get(\"text-allow-overlap\"),l=r.get(\"icon-allow-overlap\"),c=r.get(\"text-variable-anchor\"),h=\"map\"===r.get(\"text-rotation-alignment\"),u=\"map\"===r.get(\"text-pitch-alignment\"),_=\"none\"!==r.get(\"icon-text-fit\"),d=new wt(null,0,a&&(l||!t.hasIconData()||r.get(\"icon-optional\")),l&&(a||!t.hasTextData()||r.get(\"text-optional\")),!0);!t.collisionArrays&&o&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(o);const p=(e,t,i)=>{for(let o=0;o<t/4;o++)e.opacityVertexArray.emplaceBack(i);};let m=0;for(let o=0;o<t.symbolInstances.length;o++){const r=t.symbolInstances.get(o),{numHorizontalGlyphVertices:a,numVerticalGlyphVertices:l,crossTileID:f,numIconVertices:g}=r;let v=this.opacities[f];i[f]?v=s:v||(v=d,this.opacities[f]=v),i[f]=!0;const x=a>0||l>0,y=g>0,b=this.placedOrientations[f],w=b===e.WritingMode.vertical,T=b===e.WritingMode.horizontal||b===e.WritingMode.horizontalOnly;if(!x&&!y||v.isHidden()||m++,x){const e=Ft(v.text);p(t.text,a,w?Ut:e),p(t.text,l,T?Ut:e);const i=v.text.isHidden(),{leftJustifiedTextSymbolIndex:o,centerJustifiedTextSymbolIndex:n,rightJustifiedTextSymbolIndex:s,verticalPlacedTextSymbolIndex:c}=r,h=t.text.placedSymbolArray,u=i||w?1:0;o>=0&&(h.get(o).hidden=u),n>=0&&(h.get(n).hidden=u),s>=0&&(h.get(s).hidden=u),c>=0&&(h.get(c).hidden=i||T?1:0);const _=this.variableOffsets[f];_&&this.markUsedJustification(t,_.anchor,r,b);const d=this.placedOrientations[f];d&&(this.markUsedJustification(t,\"left\",r,d),this.markUsedOrientation(t,d,r));}if(y){const e=Ft(v.icon),{placedIconSymbolIndex:i,verticalPlacedIconSymbolIndex:o}=r,n=t.icon.placedSymbolArray,s=v.icon.isHidden()?1:0;i>=0&&(p(t.icon,g,w?Ut:e),n.get(i).hidden=s),o>=0&&(p(t.icon,r.numVerticalIconVertices,T?Ut:e),n.get(o).hidden=s);}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const i=t.collisionArrays[o];if(i){let o=new e.pointGeometry(0,0),r=!0;if(i.textBox||i.verticalTextBox){if(c){const e=this.variableOffsets[f];e?(o=Mt(e.anchor,e.width,e.height,e.textOffset,e.textScale),h&&o._rotate(u?this.transform.angle:-this.transform.angle)):r=!1;}n&&(r=!v.clipped),i.textBox&&At(t.textCollisionBox.collisionVertexArray,v.text.placed,!r||w,o.x,o.y),i.verticalTextBox&&At(t.textCollisionBox.collisionVertexArray,v.text.placed,!r||T,o.x,o.y);}const s=r&&Boolean(!T&&i.verticalIconBox);i.iconBox&&At(t.iconCollisionBox.collisionVertexArray,v.icon.placed,s,_?o.x:0,_?o.y:0),i.verticalIconBox&&At(t.iconCollisionBox.collisionVertexArray,v.icon.placed,!s,_?o.x:0,_?o.y:0);}}}if(t.fullyClipped=0===m,t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=e.invProjMatrix,t.placementViewportMatrix=e.viewportMatrix,t.collisionCircleArray=e.circles,delete this.collisionCircleArrays[t.bucketInstanceId];}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const i=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*i>e}setStale(){this.stale=!0;}}function At(e,t,i,o,r){e.emplaceBack(t?1:0,i?1:0,o||0,r||0),e.emplaceBack(t?1:0,i?1:0,o||0,r||0),e.emplaceBack(t?1:0,i?1:0,o||0,r||0),e.emplaceBack(t?1:0,i?1:0,o||0,r||0);}const Lt=Math.pow(2,25),zt=Math.pow(2,24),Pt=Math.pow(2,17),Rt=Math.pow(2,16),Ot=Math.pow(2,9),Bt=Math.pow(2,8),kt=Math.pow(2,1);function Ft(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,i=Math.floor(127*e.opacity);return i*Lt+t*zt+i*Pt+t*Rt+i*Ot+t*Bt+i*kt+t}const Ut=0;class Nt{constructor(e){this._sortAcrossTiles=\"viewport-y\"!==e.layout.get(\"symbol-z-order\")&&void 0!==e.layout.get(\"symbol-sort-key\").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[];}continuePlacement(e,t,i,o,r){const n=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(n,o,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,r())return !0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,n.sort(((e,t)=>e.sortKey-t.sortKey)));this._currentPartIndex<n.length;){const e=n[this._currentPartIndex];if(t.placeLayerBucketPart(e,this._seenCrossTileIDs,i,0===e.symbolInstanceStart),this._currentPartIndex++,r())return !0}return !1}}class Gt{constructor(e,t,i,o,r,n,s,a){this.placement=new Dt(e,r,n,s,a),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=o,this._done=!1;}isDone(){return this._done}continuePlacement(t,i,o){const r=e.exported.now(),n=()=>{const t=e.exported.now()-r;return !this._forceFullPlacement&&t>2};for(;this._currentPlacementIndex>=0;){const e=i[t[this._currentPlacementIndex]],r=this.placement.collisionIndex.transform.zoom;if(\"symbol\"===e.type&&(!e.minzoom||e.minzoom<=r)&&(!e.maxzoom||e.maxzoom>r)){if(this._inProgressLayer||(this._inProgressLayer=new Nt(e)),this._inProgressLayer.continuePlacement(o[e.source],this.placement,this._showCollisionBoxes,e,n))return;delete this._inProgressLayer;}this._currentPlacementIndex--;}this._done=!0;}commit(e){return this.placement.commit(e),this.placement}}const jt=512/e.EXTENT/2;class Zt{constructor(e,t,i){this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(let i=0;i<t.length;i++){const o=t.get(i),r=o.key;this.indexedSymbolInstances[r]||(this.indexedSymbolInstances[r]=[]),this.indexedSymbolInstances[r].push({crossTileID:o.crossTileID,coord:this.getScaledCoordinates(o,e)});}}getScaledCoordinates(t,i){const o=jt/Math.pow(2,i.canonical.z-this.tileID.canonical.z);return {x:Math.floor((i.canonical.x*e.EXTENT+t.tileAnchorX)*o),y:Math.floor((i.canonical.y*e.EXTENT+t.tileAnchorY)*o)}}findMatches(e,t,i){const o=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z);for(let r=0;r<e.length;r++){const n=e.get(r);if(n.crossTileID)continue;const s=this.indexedSymbolInstances[n.key];if(!s)continue;const a=this.getScaledCoordinates(n,t);for(const e of s)if(Math.abs(e.coord.x-a.x)<=o&&Math.abs(e.coord.y-a.y)<=o&&!i[e.crossTileID]){i[e.crossTileID]=!0,n.crossTileID=e.crossTileID;break}}}}class Vt{constructor(){this.maxCrossTileID=0;}generate(){return ++this.maxCrossTileID}}class Wt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0;}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const e in this.indexes){const i=this.indexes[e],o={};for(const e in i){const r=i[e];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+t),o[r.tileID.key]=r;}this.indexes[e]=o;}this.lng=e;}addBucket(e,t,i){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return !1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key]);}for(let e=0;e<t.symbolInstances.length;e++)t.symbolInstances.get(e).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const o=this.usedCrossTileIDs[e.overscaledZ];for(const i in this.indexes){const r=this.indexes[i];if(Number(i)>e.overscaledZ)for(const i in r){const n=r[i];n.tileID.isChildOf(e)&&n.findMatches(t.symbolInstances,e,o);}else {const n=r[e.scaledTo(Number(i)).key];n&&n.findMatches(t.symbolInstances,e,o);}}for(let e=0;e<t.symbolInstances.length;e++){const r=t.symbolInstances.get(e);r.crossTileID||(r.crossTileID=i.generate(),o[r.crossTileID]=!0);}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Zt(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const i in t.indexedSymbolInstances)for(const o of t.indexedSymbolInstances[i])delete this.usedCrossTileIDs[e][o.crossTileID];}removeStaleBuckets(e){let t=!1;for(const i in this.indexes){const o=this.indexes[i];for(const r in o)e[o[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,o[r]),delete o[r],t=!0);}return t}}class Xt{constructor(){this.layerIndexes={},this.crossTileIDs=new Vt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={};}addLayer(e,t,i,o){let r=this.layerIndexes[e.id];void 0===r&&(r=this.layerIndexes[e.id]=new Wt);let n=!1;const s={};\"globe\"!==o.name&&r.handleWrapJump(i);for(const i of t){const t=i.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(i.tileID,t,this.crossTileIDs)&&(n=!0),s[t.bucketInstanceId]=!0);}return r.removeStaleBuckets(s)&&(n=!0),n}pruneUnusedLayers(e){const t={};e.forEach((e=>{t[e]=!0;}));for(const e in this.layerIndexes)t[e]||delete this.layerIndexes[e];}}const qt=(t,i)=>e.emitValidationErrors(t,i&&i.filter((e=>\"source.canvas\"!==e.identifier))),$t=e.pick(Ve,[\"addLayer\",\"removeLayer\",\"setPaintProperty\",\"setLayoutProperty\",\"setFilter\",\"addSource\",\"removeSource\",\"setLayerZoomRange\",\"setLight\",\"setTransition\",\"setGeoJSONSourceData\",\"setTerrain\",\"setFog\",\"setProjection\"]),Ht=e.pick(Ve,[\"setCenter\",\"setZoom\",\"setBearing\",\"setPitch\"]),Yt={version:8,layers:[],sources:{}},Kt={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Jt extends e.Evented{constructor(t,i={}){super(),this.map=t,this.dispatcher=new z(Ge(),this),this.imageManager=new y,this.imageManager.setEventedParent(this),this.glyphManager=new e.GlyphManager(t._requestManager,i.localFontFamily?e.LocalGlyphMode.all:i.localIdeographFontFamily?e.LocalGlyphMode.ideographs:e.LocalGlyphMode.none,i.localFontFamily||i.localIdeographFontFamily),this.crossTileSymbolIndex=new Xt,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast(\"setReferrer\",e.getReferrer());const o=this;this._rtlTextPluginCallback=Jt.registerForPluginStateChange((t=>{o.dispatcher.broadcast(\"syncRTLPluginState\",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},((t,i)=>{if(e.triggerPluginCompletionEvent(t),i&&i.every((e=>e)))for(const e in o._sourceCaches){const t=o._sourceCaches[e],i=t.getSource().type;\"vector\"!==i&&\"geojson\"!==i||t.reload();}}));})),this.on(\"data\",(e=>{if(\"source\"!==e.dataType||\"metadata\"!==e.sourceDataType)return;const t=this.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(const e in this._layers){const i=this._layers[e];i.source===t.id&&this._validateLayer(i);}}));}loadURL(t,i={}){this.fire(new e.Event(\"dataloading\",{dataType:\"style\"}));const o=\"boolean\"==typeof i.validate?i.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,i.accessToken);const r=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(r,((t,i)=>{this._request=null,t?this.fire(new e.ErrorEvent(t)):i&&this._load(i,o);}));}loadJSON(t,i={}){this.fire(new e.Event(\"dataloading\",{dataType:\"style\"})),this._request=e.exported.frame((()=>{this._request=null,this._load(t,!1!==i.validate);}));}loadEmpty(){this.fire(new e.Event(\"dataloading\",{dataType:\"style\"})),this._load(Yt,!1);}_updateLayerCount(e,t){const i=t?1:-1;e.is3D()&&(this._num3DLayers+=i),\"circle\"===e.type&&(this._numCircleLayers+=i),\"symbol\"===e.type&&(this._numSymbolLayers+=i);}_load(t,i){if(i&&qt(this,e.validateStyle(t)))return;this._loaded=!0,this.stylesheet=e.clone$1(t),this._updateMapProjection();for(const e in t.sources)this.addSource(e,t.sources[e],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast(\"spriteLoaded\",!0)),this.glyphManager.setURL(t.glyphs);const o=Ze(this.stylesheet.layers);this._order=o.map((e=>e.id)),this._layers={},this._serializedLayers={};for(let t of o)t=e.createStyleLayer(t),t.setEventedParent(this,{layer:{id:t.id}}),this._layers[t.id]=t,this._serializedLayers[t.id]=t.serialize(),this._updateLayerCount(t,!0);this.dispatcher.broadcast(\"setLayers\",this._serializeLayers(this._order)),this.light=new T(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new e.Event(\"data\",{dataType:\"style\"})),this.fire(new e.Event(\"style.load\"));}terrainSetForDrapingOnly(){return !!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(e){e?this.stylesheet.projection=e:delete this.stylesheet.projection,this._updateMapProjection();}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast(\"setProjection\",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null));}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection);}_loadSprite(t){this._spriteRequest=function(t,i,o){let r,n,s;const a=e.exported.devicePixelRatio>1?\"@2x\":\"\";let l=e.getJSON(i.transformRequest(i.normalizeSpriteURL(t,a,\".json\"),e.ResourceType.SpriteJSON),((e,t)=>{l=null,s||(s=e,r=t,h());})),c=e.getImage(i.transformRequest(i.normalizeSpriteURL(t,a,\".png\"),e.ResourceType.SpriteImage),((e,t)=>{c=null,s||(s=e,n=t,h());}));function h(){if(s)o(s);else if(r&&n){const t=e.exported.getImageData(n),i={};for(const o in r){const{width:n,height:s,x:a,y:l,sdf:c,pixelRatio:h,stretchX:u,stretchY:_,content:d}=r[o],p=new e.RGBAImage({width:n,height:s});e.RGBAImage.copy(t,p,{x:a,y:l},{x:0,y:0},{width:n,height:s}),i[o]={data:p,pixelRatio:h,sdf:c,stretchX:u,stretchY:_,content:d};}o(null,i);}}return {cancel(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null);}}}(t,this.map._requestManager,((t,i)=>{if(this._spriteRequest=null,t)this.fire(new e.ErrorEvent(t));else if(i)for(const e in i)this.imageManager.addImage(e,i[e]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast(\"setImages\",this._availableImages),this.dispatcher.broadcast(\"spriteLoaded\",!0),this.fire(new e.Event(\"data\",{dataType:\"style\"}));}));}_validateLayer(t){const i=this.getSource(t.source);if(!i)return;const o=t.sourceLayer;o&&(\"geojson\"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(o))&&this.fire(new e.ErrorEvent(new Error(`Source layer \"${o}\" does not exist on source \"${i.id}\" as specified by style layer \"${t.id}\"`)));}loaded(){if(!this._loaded)return !1;if(Object.keys(this._updatedSources).length)return !1;for(const e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return !1;return !!this.imageManager.isLoaded()}_serializeLayers(e){const t=[];for(const i of e){const e=this._layers[i];\"custom\"!==e.type&&t.push(e.serialize());}return t}hasTransitions(){if(this.light&&this.light.hasTransition())return !0;if(this.fog&&this.fog.hasTransition())return !0;for(const e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return !0;for(const e in this._layers)if(this._layers[e].hasTransition())return !0;return !1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(e){return !!this.terrain&&Kt[e.type]}_checkLoaded(){if(!this._loaded)throw new Error(\"Style is not done loading\")}update(t){if(!this._loaded)return;const i=this._changed;if(this._changed){const e=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);(e.length||i.length)&&this._updateWorkerLayers(e,i);for(const e in this._updatedSources){const t=this._updatedSources[e];\"reload\"===t?this._reloadSource(e):\"clear\"===t&&this._clearSource(e);}this._updateTilesForChangedImages();for(const e in this._updatedPaintProps)this._layers[e].updateTransitions(t);this.light.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this._resetUpdates();}const o={};for(const e in this._sourceCaches){const t=this._sourceCaches[e];o[e]=t.used,t.used=!1;}for(const e of this._order){const i=this._layers[e];if(i.recalculate(t,this._availableImages),!i.isHidden(t.zoom)){const e=this._getLayerSourceCache(i);e&&(e.used=!0);}const o=this.map.painter;if(o){const e=i.getProgramIds();if(!e)continue;const r=i.getProgramConfiguration(t.zoom);for(const t of e)o.useProgram(t,r);}}for(const t in o){const i=this._sourceCaches[t];o[t]!==i.used&&i.getSource().fire(new e.Event(\"data\",{sourceDataType:\"visibility\",dataType:\"source\",sourceId:i.getSource().id}));}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),i&&this.fire(new e.Event(\"data\",{dataType:\"style\"}));}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies([\"icons\",\"patterns\"],e);this._changedImages={};}}_updateWorkerLayers(e,t){this.dispatcher.broadcast(\"updateLayers\",{layers:this._serializeLayers(e),removedIds:t});}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={};}setState(i){if(this._checkLoaded(),qt(this,e.validateStyle(i)))return !1;(i=e.clone$1(i)).layers=Ze(i.layers);const o=function(e,i){if(!e)return [{command:Ve.setStyle,args:[i]}];let o=[];try{if(!t(e.version,i.version))return [{command:Ve.setStyle,args:[i]}];t(e.center,i.center)||o.push({command:Ve.setCenter,args:[i.center]}),t(e.zoom,i.zoom)||o.push({command:Ve.setZoom,args:[i.zoom]}),t(e.bearing,i.bearing)||o.push({command:Ve.setBearing,args:[i.bearing]}),t(e.pitch,i.pitch)||o.push({command:Ve.setPitch,args:[i.pitch]}),t(e.sprite,i.sprite)||o.push({command:Ve.setSprite,args:[i.sprite]}),t(e.glyphs,i.glyphs)||o.push({command:Ve.setGlyphs,args:[i.glyphs]}),t(e.transition,i.transition)||o.push({command:Ve.setTransition,args:[i.transition]}),t(e.light,i.light)||o.push({command:Ve.setLight,args:[i.light]}),t(e.fog,i.fog)||o.push({command:Ve.setFog,args:[i.fog]}),t(e.projection,i.projection)||o.push({command:Ve.setProjection,args:[i.projection]});const r={},n=[];!function(e,i,o,r){let n;for(n in i=i||{},e=e||{})e.hasOwnProperty(n)&&(i.hasOwnProperty(n)||Xe(n,o,r));for(n in i)i.hasOwnProperty(n)&&(e.hasOwnProperty(n)?t(e[n],i[n])||(\"geojson\"===e[n].type&&\"geojson\"===i[n].type&&$e(e,i,n)?o.push({command:Ve.setGeoJSONSourceData,args:[n,i[n].data]}):qe(n,i,o,r)):We(n,i,o));}(e.sources,i.sources,n,r);const s=[];e.layers&&e.layers.forEach((e=>{e.source&&r[e.source]?o.push({command:Ve.removeLayer,args:[e.id]}):s.push(e);}));let a=e.terrain;a&&r[a.source]&&(o.push({command:Ve.setTerrain,args:[void 0]}),a=void 0),o=o.concat(n),t(a,i.terrain)||o.push({command:Ve.setTerrain,args:[i.terrain]}),function(e,i,o){i=i||[];const r=(e=e||[]).map(Ye),n=i.map(Ye),s=e.reduce(Ke,{}),a=i.reduce(Ke,{}),l=r.slice(),c=Object.create(null);let h,u,_,d,p,m,f;for(h=0,u=0;h<r.length;h++)_=r[h],a.hasOwnProperty(_)?u++:(o.push({command:Ve.removeLayer,args:[_]}),l.splice(l.indexOf(_,u),1));for(h=0,u=0;h<n.length;h++)_=n[n.length-1-h],l[l.length-1-h]!==_&&(s.hasOwnProperty(_)?(o.push({command:Ve.removeLayer,args:[_]}),l.splice(l.lastIndexOf(_,l.length-u),1)):u++,m=l[l.length-h],o.push({command:Ve.addLayer,args:[a[_],m]}),l.splice(l.length-h,0,_),c[_]=!0);for(h=0;h<n.length;h++)if(_=n[h],d=s[_],p=a[_],!c[_]&&!t(d,p))if(t(d.source,p.source)&&t(d[\"source-layer\"],p[\"source-layer\"])&&t(d.type,p.type)){for(f in He(d.layout,p.layout,o,_,null,Ve.setLayoutProperty),He(d.paint,p.paint,o,_,null,Ve.setPaintProperty),t(d.filter,p.filter)||o.push({command:Ve.setFilter,args:[_,p.filter]}),t(d.minzoom,p.minzoom)&&t(d.maxzoom,p.maxzoom)||o.push({command:Ve.setLayerZoomRange,args:[_,p.minzoom,p.maxzoom]}),d)d.hasOwnProperty(f)&&\"layout\"!==f&&\"paint\"!==f&&\"filter\"!==f&&\"metadata\"!==f&&\"minzoom\"!==f&&\"maxzoom\"!==f&&(0===f.indexOf(\"paint.\")?He(d[f],p[f],o,_,f.slice(6),Ve.setPaintProperty):t(d[f],p[f])||o.push({command:Ve.setLayerProperty,args:[_,f,p[f]]}));for(f in p)p.hasOwnProperty(f)&&!d.hasOwnProperty(f)&&\"layout\"!==f&&\"paint\"!==f&&\"filter\"!==f&&\"metadata\"!==f&&\"minzoom\"!==f&&\"maxzoom\"!==f&&(0===f.indexOf(\"paint.\")?He(d[f],p[f],o,_,f.slice(6),Ve.setPaintProperty):t(d[f],p[f])||o.push({command:Ve.setLayerProperty,args:[_,f,p[f]]}));}else o.push({command:Ve.removeLayer,args:[_]}),m=l[l.lastIndexOf(_)+1],o.push({command:Ve.addLayer,args:[p,m]});}(s,i.layers,o);}catch(e){console.warn(\"Unable to compute style diff:\",e),o=[{command:Ve.setStyle,args:[i]}];}return o}(this.serialize(),i).filter((e=>!(e.command in Ht)));if(0===o.length)return !1;const r=o.filter((e=>!(e.command in $t)));if(r.length>0)throw new Error(`Unimplemented: ${r.map((e=>e.command)).join(\", \")}.`);return o.forEach((e=>{\"setTransition\"!==e.command&&\"setProjection\"!==e.command&&this[e.command].apply(this,e.args);})),this.stylesheet=i,this._updateMapProjection(),!0}addImage(t,i){return this.getImage(t)?this.fire(new e.ErrorEvent(new Error(\"An image with this name already exists.\"))):(this.imageManager.addImage(t,i),this._afterImageUpdated(t),this)}updateImage(e,t){this.imageManager.updateImage(e,t);}getImage(e){return this.imageManager.getImage(e)}removeImage(t){return this.getImage(t)?(this.imageManager.removeImage(t),this._afterImageUpdated(t),this):this.fire(new e.ErrorEvent(new Error(\"No image with this name exists.\")))}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast(\"setImages\",this._availableImages),this.fire(new e.Event(\"data\",{dataType:\"style\"}));}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(t,i,o={}){if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error(\"There is already a source with this ID\");if(!i.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(i).join(\", \")}.`);if([\"vector\",\"raster\",\"geojson\",\"video\",\"image\"].indexOf(i.type)>=0&&this._validate(e.validateSource,`sources.${t}`,i,null,o))return;this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);const r=ze(t,i,this.dispatcher,this);r.setEventedParent(this,(()=>({isSourceLoaded:this._isSourceCacheLoaded(t),source:r.serialize(),sourceId:t})));const n=i=>{const o=(i?\"symbol:\":\"other:\")+t,n=this._sourceCaches[o]=new e.SourceCache(o,r,i);(i?this._symbolSourceCaches:this._otherSourceCaches)[t]=n,n.style=this,n.onAdd(this.map);};n(!1),\"vector\"!==i.type&&\"geojson\"!==i.type||n(!0),r.onAdd&&r.onAdd(this.map),this._changed=!0;}removeSource(t){this._checkLoaded();const i=this.getSource(t);if(!i)throw new Error(\"There is no source with this ID\");for(const i in this._layers)if(this._layers[i].source===t)return this.fire(new e.ErrorEvent(new Error(`Source \"${t}\" cannot be removed while layer \"${i}\" is using it.`)));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error(`Source \"${t}\" cannot be removed while terrain is using it.`)));const o=this._getSourceCaches(t);for(const t of o)delete this._sourceCaches[t.id],delete this._updatedSources[t.id],t.fire(new e.Event(\"data\",{sourceDataType:\"metadata\",dataType:\"source\",sourceId:t.getSource().id})),t.setEventedParent(null),t.clearTiles();return delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],i.setEventedParent(null),i.onRemove&&i.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0;}getSource(e){const t=this._getSourceCache(e);return t&&t.getSource()}_getSources(){const e=[];for(const t in this._otherSourceCaches){const i=this._getSourceCache(t);i&&e.push(i.getSource());}return e}addLayer(t,i,o={}){this._checkLoaded();const r=t.id;if(this.getLayer(r))return void this.fire(new e.ErrorEvent(new Error(`Layer with id \"${r}\" already exists on this map`)));let n;if(\"custom\"===t.type){if(qt(this,e.validateCustomStyleLayer(t)))return;n=e.createStyleLayer(t);}else {if(\"object\"==typeof t.source&&(this.addSource(r,t.source),t=e.clone$1(t),t=e.extend(t,{source:r})),this._validate(e.validateLayer,`layers.${r}`,t,{arrayIndex:-1},o))return;n=e.createStyleLayer(t),this._validateLayer(n),n.setEventedParent(this,{layer:{id:r}}),this._serializedLayers[n.id]=n.serialize(),this._updateLayerCount(n,!0);}const s=i?this._order.indexOf(i):this._order.length;if(i&&-1===s)return void this.fire(new e.ErrorEvent(new Error(`Layer with id \"${i}\" does not exist on this map.`)));this._order.splice(s,0,r),this._layerOrderChanged=!0,this._layers[r]=n;const a=this._getLayerSourceCache(n);if(this._removedLayers[r]&&n.source&&a&&\"custom\"!==n.type){const e=this._removedLayers[r];delete this._removedLayers[r],e.type!==n.type?this._updatedSources[n.source]=\"clear\":(this._updatedSources[n.source]=\"reload\",a.pause());}this._updateLayer(n),n.onAdd&&n.onAdd(this.map),this._updateDrapeFirstLayers();}moveLayer(t,i){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===i)return;const o=this._order.indexOf(t);this._order.splice(o,1);const r=i?this._order.indexOf(i):this._order.length;i&&-1===r?this.fire(new e.ErrorEvent(new Error(`Layer with id \"${i}\" does not exist on this map.`))):(this._order.splice(r,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers());}removeLayer(t){this._checkLoaded();const i=this._layers[t];if(!i)return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be removed.`)));i.setEventedParent(null),this._updateLayerCount(i,!1);const o=this._order.indexOf(t);this._order.splice(o,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=i,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],i.onRemove&&i.onRemove(this.map),this._updateDrapeFirstLayers();}getLayer(e){return this._layers[e]}hasLayer(e){return e in this._layers}hasLayerType(e){for(const t in this._layers)if(this._layers[t].type===e)return !0;return !1}setLayerZoomRange(t,i,o){this._checkLoaded();const r=this.getLayer(t);r?r.minzoom===i&&r.maxzoom===o||(null!=i&&(r.minzoom=i),null!=o&&(r.maxzoom=o),this._updateLayer(r)):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot have zoom extent.`)));}setFilter(i,o,r={}){this._checkLoaded();const n=this.getLayer(i);if(n){if(!t(n.filter,o))return null==o?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(e.validateFilter,`layers.${n.id}.filter`,o,{layerType:n.type},r)||(n.filter=e.clone$1(o),this._updateLayer(n)))}else this.fire(new e.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be filtered.`)));}getFilter(t){const i=this.getLayer(t);return i&&e.clone$1(i.filter)}setLayoutProperty(i,o,r,n={}){this._checkLoaded();const s=this.getLayer(i);s?t(s.getLayoutProperty(o),r)||(s.setLayoutProperty(o,r,n),this._updateLayer(s)):this.fire(new e.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be styled.`)));}getLayoutProperty(t,i){const o=this.getLayer(t);if(o)return o.getLayoutProperty(i);this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style.`)));}setPaintProperty(i,o,r,n={}){this._checkLoaded();const s=this.getLayer(i);s?t(s.getPaintProperty(o),r)||(s.setPaintProperty(o,r,n)&&this._updateLayer(s),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new e.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be styled.`)));}getPaintProperty(e,t){const i=this.getLayer(e);return i&&i.getPaintProperty(t)}setFeatureState(t,i){this._checkLoaded();const o=t.source,r=t.sourceLayer,n=this.getSource(o);if(!n)return void this.fire(new e.ErrorEvent(new Error(`The source '${o}' does not exist in the map's style.`)));const s=n.type;if(\"geojson\"===s&&r)return void this.fire(new e.ErrorEvent(new Error(\"GeoJSON sources cannot have a sourceLayer parameter.\")));if(\"vector\"===s&&!r)return void this.fire(new e.ErrorEvent(new Error(\"The sourceLayer parameter must be provided for vector source types.\")));void 0===t.id&&this.fire(new e.ErrorEvent(new Error(\"The feature id parameter must be provided.\")));const a=this._getSourceCaches(o);for(const e of a)e.setFeatureState(r,t.id,i);}removeFeatureState(t,i){this._checkLoaded();const o=t.source,r=this.getSource(o);if(!r)return void this.fire(new e.ErrorEvent(new Error(`The source '${o}' does not exist in the map's style.`)));const n=r.type,s=\"vector\"===n?t.sourceLayer:void 0;if(\"vector\"===n&&!s)return void this.fire(new e.ErrorEvent(new Error(\"The sourceLayer parameter must be provided for vector source types.\")));if(i&&\"string\"!=typeof t.id&&\"number\"!=typeof t.id)return void this.fire(new e.ErrorEvent(new Error(\"A feature id is required to remove its specific state property.\")));const a=this._getSourceCaches(o);for(const e of a)e.removeFeatureState(s,t.id,i);}getFeatureState(t){this._checkLoaded();const i=t.source,o=t.sourceLayer,r=this.getSource(i);if(r){if(\"vector\"!==r.type||o)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error(\"The feature id parameter must be provided.\"))),this._getSourceCaches(i)[0].getFeatureState(o,t.id);this.fire(new e.ErrorEvent(new Error(\"The sourceLayer parameter must be provided for vector source types.\")));}else this.fire(new e.ErrorEvent(new Error(`The source '${i}' does not exist in the map's style.`)));}getTransition(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const t={};for(const e in this._sourceCaches){const i=this._sourceCaches[e].getSource();t[i.id]||(t[i.id]=i.serialize());}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:t,layers:this._serializeLayers(this._order)},(e=>void 0!==e))}_updateLayer(e){this._updatedLayers[e.id]=!0;const t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&\"raster\"!==t.getSource().type&&(this._updatedSources[e.source]=\"reload\",t.pause()),this._changed=!0,e.invalidateCompiledFilter();}_flattenAndSortRenderedFeatures(e){const t=e=>\"fill-extrusion\"===this._layers[e].type,i={},o=[];for(let r=this._order.length-1;r>=0;r--){const n=this._order[r];if(t(n)){i[n]=r;for(const t of e){const e=t[n];if(e)for(const t of e)o.push(t);}}}o.sort(((e,t)=>t.intersectionZ-e.intersectionZ));const r=[];for(let n=this._order.length-1;n>=0;n--){const s=this._order[n];if(t(s))for(let e=o.length-1;e>=0;e--){const t=o[e].feature;if(i[t.layer.id]<n)break;r.push(t),o.pop();}else for(const t of e){const e=t[s];if(e)for(const t of e)r.push(t.feature);}}return r}queryRenderedFeatures(t,i,o){i&&i.filter&&this._validate(e.validateFilter,\"queryRenderedFeatures.filter\",i.filter,null,i);const r={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new e.ErrorEvent(new Error(\"parameters.layers must be an Array.\"))),[];for(const t of i.layers){const i=this._layers[t];if(!i)return this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be queried for features.`))),[];r[i.source]=!0;}}const n=[];i.availableImages=this._availableImages;const s=i&&i.layers?i.layers.some((e=>{const t=this.getLayer(e);return t&&t.is3D()})):this.has3DLayers(),a=R.createFromScreenPoints(t,o);for(const e in this._sourceCaches){const t=this._sourceCaches[e].getSource().id;i.layers&&!r[t]||n.push(Re(this._sourceCaches[e],this._layers,this._serializedLayers,a,i,o,s,!!this.map._showQueryGeometry));}return this.placement&&n.push(function(e,t,i,o,r,n,s){const a={},l=n.queryRenderedSymbols(o),c=[];for(const e of Object.keys(l).map(Number))c.push(s[e]);c.sort(Be);for(const i of c){const o=i.featureIndex.lookupSymbolFeatures(l[i.bucketInstanceId],t,i.bucketIndex,i.sourceLayerIndex,r.filter,r.layers,r.availableImages,e);for(const e in o){const t=a[e]=a[e]||[],r=o[e];r.sort(((e,t)=>{const o=i.featureSortOrder;if(o){const i=o.indexOf(e.featureIndex);return o.indexOf(t.featureIndex)-i}return t.featureIndex-e.featureIndex}));for(const e of r)t.push(e);}}for(const t in a)a[t].forEach((o=>{const r=o.feature,n=i(e[t]).getFeatureState(r.layer[\"source-layer\"],r.id);r.source=r.layer.source,r.layer[\"source-layer\"]&&(r.sourceLayer=r.layer[\"source-layer\"]),r.state=n;}));return a}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),a.screenGeometry,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(n)}querySourceFeatures(t,i){i&&i.filter&&this._validate(e.validateFilter,\"querySourceFeatures.filter\",i.filter,null,i);const o=this._getSourceCaches(t);let r=[];for(const e of o)r=r.concat(Oe(e,i));return r}addSourceType(e,t,i){return Jt.getSourceType(e)?i(new Error(`A source type called \"${e}\" already exists.`)):(Jt.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast(\"loadWorkerSource\",{name:e,url:t.workerSourceURL},i):i(null,null))}getLight(){return this.light.getLight()}setLight(e,i={}){this._checkLoaded();const o=this.light.getLight();let r=!1;for(const i in e)if(!t(e[i],o[i])){r=!0;break}if(!r)return;const n=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(e,i),this.light.updateTransitions(n);}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:\"\",exaggeration:0},0);}setTerrain(i,o=1){if(this._checkLoaded(),!i)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast(\"enableTerrain\",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(1===o){if(\"object\"==typeof i.source){const t=\"terrain-dem-src\";this.addSource(t,i.source),i=e.clone$1(i),i=e.extend(i,{source:t});}if(this._validate(e.validateTerrain,\"terrain\",i))return}if(!this.terrain||this.terrain&&o!==this.terrain.drapeRenderMode)this._createTerrain(i,o);else {const o=this.terrain,r=o.get();for(const t of Object.keys(e.spec.terrain))!i.hasOwnProperty(t)&&e.spec.terrain[t].default&&(i[t]=e.spec.terrain[t].default);for(const e in i)if(!t(i[e],r[e])){o.set(i),this.stylesheet.terrain=i;const e=this._setTransitionParameters({duration:0});o.updateTransitions(e);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0;}_createFog(e){const t=this.fog=new L(e,this.map.transform);this.stylesheet.fog=e;const i=this._setTransitionParameters({duration:0});t.updateTransitions(i);}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask((()=>{for(const e of this.map._markers)e._evaluateOpacity();}));}getFog(){return this.fog?this.fog.get():null}setFog(e){if(this._checkLoaded(),!e)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const i=this.fog,o=i.get();0===Object.keys(e).length&&i.set(e);for(const r in e)if(!t(e[r],o[r])){i.set(e),this.stylesheet.fog=e;const t=this._setTransitionParameters({duration:0});i.updateTransitions(t);break}}else this._createFog(e);this._markersNeedUpdate=!0;}_setTransitionParameters(t){return {now:e.exported.now(),transition:e.extend(t,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const e=this._order.filter((e=>this.isLayerDraped(this._layers[e]))),t=this._order.filter((e=>!this.isLayerDraped(this._layers[e])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...e),this._drapedFirstOrder.push(...t);}_createTerrain(e,t){const i=this.terrain=new I(e,t);this.stylesheet.terrain=e,this.dispatcher.broadcast(\"enableTerrain\",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const o=this._setTransitionParameters({duration:0});i.updateTransitions(o);}_force3DLayerUpdate(){for(const e in this._layers){const t=this._layers[e];\"fill-extrusion\"===t.type&&this._updateLayer(t);}}_forceSymbolLayerUpdate(){for(const e in this._layers){const t=this._layers[e];\"symbol\"===t.type&&this._updateLayer(t);}}_validate(t,i,o,r,n={}){return (!n||!1!==n.validate)&&qt(this,t.call(e.validateStyle,e.extend({key:i,style:this.serialize(),value:o,styleSpec:e.spec},r)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off(\"pluginStateChange\",this._rtlTextPluginCallback);for(const e in this._layers)this._layers[e].setEventedParent(null);for(const e in this._sourceCaches)this._sourceCaches[e].clearTiles(),this._sourceCaches[e].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove();}_clearSource(e){const t=this._getSourceCaches(e);for(const e of t)e.clearTiles();}_reloadSource(e){const t=this._getSourceCaches(e);for(const e of t)e.resume(),e.reload();}_reloadSources(){for(const e of this._getSources())e.reload&&e.reload();}_updateSources(e){for(const t in this._sourceCaches)this._sourceCaches[t].update(e);}_generateCollisionBoxes(){for(const e in this._sourceCaches){const t=this._sourceCaches[e];t.resume(),t.reload();}}_updatePlacement(t,i,o,r,n=!1){let s=!1,a=!1;const l={};for(const e of this._order){const i=this._layers[e];if(\"symbol\"!==i.type)continue;if(!l[i.source]){const e=this._getLayerSourceCache(i);if(!e)continue;l[i.source]=e.getRenderableIds(!0).map((t=>e.getTileByID(t))).sort(((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)));}const o=this.crossTileSymbolIndex.addLayer(i,l[i.source],t.center.lng,t.projection);s=s||o;}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),n=n||this._layerOrderChanged||0===o,this._layerOrderChanged&&this.fire(new e.Event(\"neworder\")),(n||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),t.zoom))&&(this.pauseablePlacement=new Gt(t,this._order,n,i,o,r,this.placement,this.fog&&t.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),a=!0),s&&this.pauseablePlacement.placement.setStale()),a||s)for(const e of this._order){const t=this._layers[e];\"symbol\"===t.type&&this.placement.updateLayerOpacities(t,l[t.source]);}return !this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}_releaseSymbolFadeTiles(){for(const e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles();}getImages(e,t,i){this.imageManager.getImages(t.icons,i),this._updateTilesForChangedImages();const o=e=>{e&&e.setDependencies(t.tileID.key,t.type,t.icons);};o(this._otherSourceCaches[t.source]),o(this._symbolSourceCaches[t.source]);}getGlyphs(e,t,i){this.glyphManager.getGlyphs(t.stacks,i);}getResource(t,i,o){return e.makeRequest(i,o)}_getSourceCache(e){return this._otherSourceCaches[e]}_getLayerSourceCache(e){return \"symbol\"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}_getSourceCaches(e){const t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}_isSourceCacheLoaded(t){const i=this._getSourceCaches(t);return 0===i.length?(this.fire(new e.ErrorEvent(new Error(`There is no source with ID '${t}'`))),!1):i.every((e=>e.loaded()))}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast(\"clearCaches\");}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain);}}Jt.getSourceType=function(e){return Le[e]},Jt.setSourceType=function(e,t){Le[e]=t;},Jt.registerForPluginStateChange=e.registerForPluginStateChange;var Qt=\"\\n#define EPSILON 0.0000001\\n#define PI 3.141592653589793\\n#define EXTENT 8192.0\\n#define HALF_PI PI/2.0\\n#define QUARTER_PI PI/4.0\\n#define RAD_TO_DEG 180.0/PI\\n#define DEG_TO_RAD PI/180.0\\n#define GLOBE_RADIUS EXTENT/PI/2.0\",ei=\"attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}\",ti=\"\\n#define ELEVATION_SCALE 7.0\\n#define ELEVATION_OFFSET 450.0\\n#ifdef PROJECTION_GLOBE_VIEW\\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\\n#else\\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\\n#endif\\n#ifdef TERRAIN\\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\\n#else\\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\\n#endif\\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\\n#else\\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\\n#ifdef TERRAIN_DEM_NEAREST_FILTER\\nreturn u_exaggeration*tl;\\n#endif\\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\\n#endif\\n}float prevElevation(vec2 apos) {\\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\\n#else\\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\\n#endif\\n}\\n#ifdef TERRAIN_VERTEX_MORPHING\\nfloat elevation(vec2 apos) {\\n#ifdef ZERO_EXAGGERATION\\nreturn 0.0;\\n#endif\\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\\n#else\\nfloat elevation(vec2 apos) {\\n#ifdef ZERO_EXAGGERATION\\nreturn 0.0;\\n#endif\\nreturn currentElevation(apos);}\\n#endif\\nhighp float unpack_depth(highp vec4 rgba_depth)\\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\\n#else\\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\\n#endif\\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\\n#else\\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\\n#endif\",ii=\"#ifdef FOG\\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\\n#endif\",oi=\"#ifdef FOG\\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\\n#endif\";let ri={},ni={};const si=[];ui(Qt,si),ui(ti,si),ui(ii,si),ui(oi,si),ri=_i(\"\",ti),ni=_i(oi,ii);const ai=_i(\"\\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}\",\"\\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\\n#ifdef PROJECTION_GLOBE_VIEW\\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\\n#ifndef PROJECTED_POS_ON_VIEWPORT\\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\\n#else\\nreturn vec3(0.0);\\n#endif\\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\\n#endif\\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.\"),li=Qt,ci=\"\\n#ifdef GL_ES\\nprecision mediump float;\\n#else\\n\\n#if !defined(lowp)\\n#define lowp\\n#endif\\n\\n#if !defined(mediump)\\n#define mediump\\n#endif\\n\\n#if !defined(highp)\\n#define highp\\n#endif\\n\\n#endif\";var hi={background:_i(\"uniform vec4 u_color;uniform float u_opacity;\\n#ifdef LIGHTING_3D_MODE\\nvarying vec4 v_color;\\n#endif\\nvoid main() {vec4 out_color;\\n#ifdef LIGHTING_3D_MODE\\nout_color=v_color;\\n#else\\nout_color=u_color;\\n#endif\\n#ifdef FOG\\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\\n#endif\\ngl_FragColor=out_color*u_opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\",\"attribute vec2 a_pos;uniform mat4 u_matrix;\\n#ifdef LIGHTING_3D_MODE\\nuniform vec4 u_color;varying vec4 v_color;\\n#endif\\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\\n#ifdef LIGHTING_3D_MODE\\nv_color=apply_lighting(u_color);\\n#endif\\n#ifdef FOG\\nv_fog_pos=fog_position(a_pos);\\n#endif\\n}\"),backgroundPattern:_i(\"uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\\n#ifdef LIGHTING_3D_MODE\\nout_color=apply_lighting(out_color);\\n#endif\\n#ifdef FOG\\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\\n#endif\\ngl_FragColor=out_color*u_opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\",\"uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\\n#ifdef FOG\\nv_fog_pos=fog_position(a_pos);\\n#endif\\n}\"),circle:_i(\"varying vec3 v_data;varying float v_visibility;\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define mediump float radius\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define highp vec4 stroke_color\\n#pragma mapbox: define mediump float stroke_width\\n#pragma mapbox: define lowp float stroke_opacity\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize mediump float radius\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize highp vec4 stroke_color\\n#pragma mapbox: initialize mediump float stroke_width\\n#pragma mapbox: initialize lowp float stroke_opacity\\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\\n#ifdef LIGHTING_3D_MODE\\nout_color=apply_lighting(out_color);\\n#endif\\n#ifdef FOG\\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\\n#endif\\ngl_FragColor=out_color*(v_visibility*opacity_t);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\",\"#define NUM_VISIBILITY_RINGS 2\\n#define INV_SQRT2 0.70710678\\n#define ELEVATION_BIAS 0.0001\\n#define NUM_SAMPLES_PER_RING 16\\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\\n#ifdef PROJECTION_GLOBE_VIEW\\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\\n#endif\\nvarying vec3 v_data;varying float v_visibility;\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define mediump float radius\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define highp vec4 stroke_color\\n#pragma mapbox: define mediump float stroke_width\\n#pragma mapbox: define lowp float stroke_opacity\\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\\n#if defined(TERRAIN)\\nreturn elevation(pos)+ELEVATION_BIAS;\\n#else\\nreturn 0.0;\\n#endif\\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\\n#ifdef PITCH_WITH_MAP\\n#ifdef PROJECTION_GLOBE_VIEW\\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\\n#else\\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\\n#endif\\n#else\\nreturn projected_center+vec4(sample_offset,0,0);\\n#endif\\n}float get_sample_step() {\\n#ifdef PITCH_WITH_MAP\\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\\n#else\\nreturn PI/float(NUM_SAMPLES_PER_RING);\\n#endif\\n}void main(void) {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize mediump float radius\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize highp vec4 stroke_color\\n#pragma mapbox: initialize mediump float stroke_width\\n#pragma mapbox: initialize lowp float stroke_opacity\\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\\n#ifdef PROJECTION_GLOBE_VIEW\\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\\n#else \\nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\\n#endif\\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\\n#ifdef PITCH_WITH_MAP\\n#ifdef SCALE_WITH_MAP\\nview_scale=1.0;\\n#else\\nview_scale=projected_center.w/u_camera_to_center_distance;\\n#endif\\n#else\\n#ifdef SCALE_WITH_MAP\\nview_scale=u_camera_to_center_distance;\\n#else\\nview_scale=projected_center.w;\\n#endif\\n#endif\\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\\n#ifdef TERRAIN\\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\\n#ifdef PITCH_WITH_MAP\\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\\n#else\\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\\n#endif\\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\\n#else\\nvisibility=1.0;\\n#endif\\n#ifdef PROJECTION_GLOBE_VIEW\\nvisibility=1.0;\\n#endif\\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\\n#ifdef FOG\\nv_fog_pos=fog_position(world_center.xyz);\\n#endif\\n}\"),clippingMask:_i(\"void main() {gl_FragColor=vec4(1.0);}\",\"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}\"),heatmap:_i(\"uniform highp float u_intensity;varying vec2 v_extrude;\\n#pragma mapbox: define highp float weight\\n#define GAUSS_COEF 0.3989422804014327\\nvoid main() {\\n#pragma mapbox: initialize highp float weight\\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\\n#ifdef FOG\\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\\n#endif\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\",\"uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\\n#ifdef PROJECTION_GLOBE_VIEW\\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\\n#endif\\nvarying vec2 v_extrude;\\n#pragma mapbox: define highp float weight\\n#pragma mapbox: define mediump float radius\\nconst highp float ZERO=1.0/255.0/16.0;\\n#define GAUSS_COEF 0.3989422804014327\\nvoid main(void) {\\n#pragma mapbox: initialize highp float weight\\n#pragma mapbox: initialize mediump float radius\\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\\n#ifdef PROJECTION_GLOBE_VIEW\\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\\n#else\\npos=vec3(tilePos+extrude,elevation(tilePos));\\n#endif\\ngl_Position=u_matrix*vec4(pos,1);\\n#ifdef FOG\\nv_fog_pos=fog_position(pos);\\n#endif\\n}\"),heatmapTexture:_i(\"uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(0.0);\\n#endif\\n}\",\"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}\"),collisionBox:_i(\"varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}\",\"attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}\"),collisionCircle:_i(\"varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}\",\"attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}\"),debug:_i(\"uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}\",\"attribute vec2 a_pos;\\n#ifdef PROJECTION_GLOBE_VIEW\\nattribute vec3 a_pos_3;\\n#endif\\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\\n#ifdef PROJECTION_GLOBE_VIEW\\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\\n#else\\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\\n#endif\\n}\"),fill:_i(\"#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize lowp float opacity\\nvec4 out_color=color;\\n#ifdef LIGHTING_3D_MODE\\nout_color=apply_lighting(out_color);\\n#endif\\n#ifdef FOG\\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\\n#endif\\ngl_FragColor=out_color*opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\",\"attribute vec2 a_pos;uniform mat4 u_matrix;\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize lowp float opacity\\ngl_Position=u_matrix*vec4(a_pos,0,1);\\n#ifdef FOG\\nv_fog_pos=fog_position(a_pos);\\n#endif\\n}\"),fillOutline:_i(\"varying vec2 v_pos;\\n#pragma mapbox: define highp vec4 outline_color\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 outline_color\\n#pragma mapbox: initialize lowp float opacity\\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\\n#ifdef LIGHTING_3D_MODE\\nout_color=apply_lighting(out_color);\\n#endif\\n#ifdef FOG\\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\\n#endif\\ngl_FragColor=out_color*(alpha*opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\",\"attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\\n#pragma mapbox: define highp vec4 outline_color\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 outline_color\\n#pragma mapbox: initialize lowp float opacity\\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\\n#ifdef FOG\\nv_fog_pos=fog_position(a_pos);\\n#endif\\n}\"),fillOutlinePattern:_i(\"uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp vec4 pattern\\nvoid main() {\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump vec4 pattern\\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\\n#ifdef LIGHTING_3D_MODE\\nout_color=apply_lighting(out_color);\\n#endif\\n#ifdef FOG\\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\\n#endif\\ngl_FragColor=out_color*(alpha*opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\",\"uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp vec4 pattern\\n#pragma mapbox: define lowp float pixel_ratio\\nvoid main() {\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump vec4 pattern\\n#pragma mapbox: initialize lowp float pixel_ratio\\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\\n#ifdef FOG\\nv_fog_pos=fog_position(a_pos);\\n#endif\\n}\"),fillPattern:_i(\"uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp vec4 pattern\\nvoid main() {\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump vec4 pattern\\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\\n#ifdef LIGHTING_3D_MODE\\nout_color=apply_lighting(out_color);\\n#endif\\n#ifdef FOG\\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\\n#endif\\ngl_FragColor=out_color*opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\",\"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp vec4 pattern\\n#pragma mapbox: define lowp float pixel_ratio\\nvoid main() {\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump vec4 pattern\\n#pragma mapbox: initialize lowp float pixel_ratio\\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\\n#ifdef FOG\\nv_fog_pos=fog_position(a_pos);\\n#endif\\n}\"),fillExtrusion:_i(\"varying vec4 v_color;\\n#ifdef RENDER_SHADOWS\\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\\n#endif\\n#ifdef FAUX_AO\\nuniform lowp vec2 u_ao;varying vec3 v_ao;\\n#endif\\n#ifdef ZERO_ROOF_RADIUS\\nvarying vec4 v_roof_color;\\n#endif\\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\\nvarying highp vec3 v_normal;\\n#endif\\nvoid main() {\\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\\nvec3 normal=v_normal;\\n#endif\\nfloat z;vec4 color;\\n#ifdef ZERO_ROOF_RADIUS\\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\\n#else\\ncolor=v_color;\\n#endif\\n#ifdef FAUX_AO\\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\\n#ifdef ZERO_ROOF_RADIUS\\nconcave*=(1.0-z);\\n#endif\\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\\n#endif\\n#ifdef RENDER_SHADOWS\\n#ifdef ZERO_ROOF_RADIUS\\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\\n#endif\\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\\n#endif\\n#ifdef FOG\\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\\n#endif\\ngl_FragColor=color;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\",\"uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\\n#ifdef PROJECTION_GLOBE_VIEW\\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\\n#endif\\nvarying vec4 v_color;\\n#ifdef RENDER_SHADOWS\\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\\n#endif\\n#ifdef ZERO_ROOF_RADIUS\\nvarying vec4 v_roof_color;\\n#endif\\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\\nvarying highp vec3 v_normal;\\n#endif\\n#ifdef FAUX_AO\\nuniform lowp vec2 u_ao;varying vec3 v_ao;\\n#endif\\n#pragma mapbox: define highp float base\\n#pragma mapbox: define highp float height\\n#pragma mapbox: define highp vec4 color\\nvoid main() {\\n#pragma mapbox: initialize highp float base\\n#pragma mapbox: initialize highp float height\\n#pragma mapbox: initialize highp vec4 color\\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\\nv_normal=normal;\\n#endif\\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\\n#if defined(HAS_CENTROID) || defined(TERRAIN)\\ncentroid_pos=a_centroid_pos;\\n#endif\\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\\n#ifdef TERRAIN\\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\\n#else\\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\\n#endif\\n#ifdef PROJECTION_GLOBE_VIEW\\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\\n#endif\\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\\n#ifdef RENDER_SHADOWS\\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\\n#endif\\nfloat NdotL=0.0;float colorvalue=0.0;\\n#ifdef LIGHTING_3D_MODE\\nNdotL=calculate_NdotL(normal);\\n#else\\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\\n#endif\\nif (normal.y !=0.0) {float r=0.84;\\n#ifndef LIGHTING_3D_MODE\\nr=mix(0.7,0.98,1.0-u_lightintensity);\\n#endif\\nNdotL*=(\\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\\n#ifdef FAUX_AO\\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\\n#ifdef TERRAIN\\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\\n#endif\\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\\n#ifdef PROJECTION_GLOBE_VIEW\\ntop_height+=u_height_lift;\\n#endif\\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\\n#endif\\n#ifdef LIGHTING_3D_MODE\\nv_color=apply_lighting(color,NdotL);\\n#else\\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\\n#endif\\nv_color*=u_opacity;\\n#ifdef ZERO_ROOF_RADIUS\\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\\n#ifdef LIGHTING_3D_MODE\\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\\n#else\\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\\n#endif\\nv_roof_color*=u_opacity;\\n#endif\\n#ifdef FOG\\nv_fog_pos=fog_position(pos);\\n#endif\\n}\"),fillExtrusionPattern:_i(\"uniform vec2 u_texsize;uniform sampler2D u_image;\\n#ifdef FAUX_AO\\nuniform lowp vec2 u_ao;varying vec3 v_ao;\\n#endif\\n#ifdef LIGHTING_3D_MODE\\nvarying float v_NdotL;\\n#endif\\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\\n#pragma mapbox: define lowp float base\\n#pragma mapbox: define lowp float height\\n#pragma mapbox: define lowp vec4 pattern\\n#pragma mapbox: define lowp float pixel_ratio\\nvoid main() {\\n#pragma mapbox: initialize lowp float base\\n#pragma mapbox: initialize lowp float height\\n#pragma mapbox: initialize mediump vec4 pattern\\n#pragma mapbox: initialize lowp float pixel_ratio\\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\\n#ifdef LIGHTING_3D_MODE\\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\\n#else\\nout_color=out_color*v_lighting;\\n#endif\\n#ifdef FAUX_AO\\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\\n#endif\\n#ifdef FOG\\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\\n#endif\\ngl_FragColor=out_color;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\",\"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\\n#ifdef PROJECTION_GLOBE_VIEW\\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\\n#endif\\nvarying vec2 v_pos;varying vec4 v_lighting;\\n#ifdef FAUX_AO\\nuniform lowp vec2 u_ao;varying vec3 v_ao;\\n#endif\\n#ifdef LIGHTING_3D_MODE\\nvarying float v_NdotL;\\n#endif\\n#pragma mapbox: define lowp float base\\n#pragma mapbox: define lowp float height\\n#pragma mapbox: define lowp vec4 pattern\\n#pragma mapbox: define lowp float pixel_ratio\\nvoid main() {\\n#pragma mapbox: initialize lowp float base\\n#pragma mapbox: initialize lowp float height\\n#pragma mapbox: initialize mediump vec4 pattern\\n#pragma mapbox: initialize lowp float pixel_ratio\\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\\n#if defined(HAS_CENTROID) || defined(TERRAIN)\\ncentroid_pos=a_centroid_pos;\\n#endif\\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\\n#ifdef TERRAIN\\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\\n#else\\np=vec3(pos_nx.xy,z);\\n#endif\\n#ifdef PROJECTION_GLOBE_VIEW\\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\\n#endif\\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\\n? pos_nx.xy\\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\\n#ifdef LIGHTING_3D_MODE\\nNdotL=calculate_NdotL(normal);\\n#else\\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\\n#endif\\nif (normal.y !=0.0) {float r=0.84;\\n#ifndef LIGHTING_3D_MODE\\nr=mix(0.7,0.98,1.0-u_lightintensity);\\n#endif\\nNdotL*=(\\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\\n#ifdef FAUX_AO\\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\\n#ifdef TERRAIN\\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\\n#endif\\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\\n#ifdef PROJECTION_GLOBE_VIEW\\ntop_height+=u_height_lift;\\n#endif\\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\\n#endif\\n#ifdef LIGHTING_3D_MODE\\nv_NdotL=NdotL;\\n#else\\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\\n#endif \\n#ifdef FOG\\nv_fog_pos=fog_position(p);\\n#endif\\n}\"),hillshadePrepare:_i(\"#ifdef GL_ES\\nprecision highp float;\\n#endif\\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\\nreturn texture2D(u_image,coord).a/4.0;\\n#else\\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\\n#endif\\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\",\"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}\"),hillshade:_i(\"uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\\n#ifdef LIGHTING_3D_MODE\\ngl_FragColor=apply_lighting(gl_FragColor);\\n#endif\\n#ifdef FOG\\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\\n#endif\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\",\"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\\n#ifdef FOG\\nv_fog_pos=fog_position(a_pos);\\n#endif\\n}\"),line:_i(\"uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\\n#ifdef RENDER_LINE_DASH\\nuniform sampler2D u_dash_image;varying vec2 v_tex;\\n#endif\\n#ifdef RENDER_LINE_GRADIENT\\nuniform sampler2D u_gradient_image;\\n#endif\\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float floorwidth\\n#pragma mapbox: define lowp vec4 dash\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize lowp float floorwidth\\n#pragma mapbox: initialize lowp vec4 dash\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\\n#ifdef RENDER_LINE_DASH\\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\\n#endif\\nhighp vec4 out_color;\\n#ifdef RENDER_LINE_GRADIENT\\nout_color=texture2D(u_gradient_image,v_uv.xy);\\n#else\\nout_color=color;\\n#endif\\n#ifdef RENDER_LINE_TRIM_OFFSET\\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);}}\\n#endif\\n#ifdef LIGHTING_3D_MODE\\nout_color=apply_lighting(out_color);\\n#endif\\n#ifdef FOG\\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\\n#endif\\n#ifdef RENDER_LINE_ALPHA_DISCARD\\nif (alpha < u_alpha_discard_threshold) {discard;}\\n#endif\\n#ifdef RENDER_LINE_BORDER\\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\\n#ifdef RENDER_LINE_BORDER_AUTO\\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\\n#else\\nout_color.rgb=mix(u_border_color.rgb,out_color.rgb,smoothAlpha);\\n#endif\\n}\\n#endif\\ngl_FragColor=out_color*(alpha*opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\",\"\\n#define EXTRUDE_SCALE 0.015873016\\nattribute vec2 a_pos_normal;attribute vec4 a_data;\\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\\nattribute highp vec4 a_packed;\\n#endif\\n#ifdef RENDER_LINE_DASH\\nattribute float a_linesofar;\\n#endif\\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\\n#ifdef RENDER_LINE_DASH\\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\\n#endif\\n#ifdef RENDER_LINE_GRADIENT\\nuniform float u_image_height;\\n#endif\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float floorwidth\\n#pragma mapbox: define lowp vec4 dash\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define mediump float gapwidth\\n#pragma mapbox: define lowp float offset\\n#pragma mapbox: define mediump float width\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize lowp float floorwidth\\n#pragma mapbox: initialize lowp vec4 dash\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump float gapwidth\\n#pragma mapbox: initialize lowp float offset\\n#pragma mapbox: initialize mediump float width\\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\\n#ifndef RENDER_TO_TEXTURE\\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\\n#else\\nv_gamma_scale=1.0;\\n#endif\\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\\n#ifdef RENDER_LINE_GRADIENT\\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\\n#else\\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\\n#endif\\n#endif\\n#ifdef RENDER_LINE_DASH\\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\\n#endif\\nv_width2=vec2(outset,inset);\\n#ifdef FOG\\nv_fog_pos=fog_position(pos);\\n#endif\\n}\"),linePattern:_i(\"uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\\n#pragma mapbox: define lowp vec4 pattern\\n#pragma mapbox: define lowp float pixel_ratio\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize mediump vec4 pattern\\n#pragma mapbox: initialize lowp float pixel_ratio\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\\n#ifdef LIGHTING_3D_MODE\\ncolor=apply_lighting(color);\\n#endif\\n#ifdef FOG\\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\\n#endif\\ngl_FragColor=color*(alpha*opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\",\"\\n#define scale 0.015873016\\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float offset\\n#pragma mapbox: define mediump float gapwidth\\n#pragma mapbox: define mediump float width\\n#pragma mapbox: define lowp float floorwidth\\n#pragma mapbox: define lowp vec4 pattern\\n#pragma mapbox: define lowp float pixel_ratio\\nvoid main() {\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize lowp float offset\\n#pragma mapbox: initialize mediump float gapwidth\\n#pragma mapbox: initialize mediump float width\\n#pragma mapbox: initialize lowp float floorwidth\\n#pragma mapbox: initialize mediump vec4 pattern\\n#pragma mapbox: initialize lowp float pixel_ratio\\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\\n#ifndef RENDER_TO_TEXTURE\\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\\n#else\\nv_gamma_scale=1.0;\\n#endif\\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\\n#ifdef FOG\\nv_fog_pos=fog_position(pos);\\n#endif\\n}\"),raster:_i(\"uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\\n#ifdef LIGHTING_3D_MODE\\nout_color=apply_lighting(out_color);\\n#endif\\n#ifdef FOG\\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\\n#endif\\ngl_FragColor=vec4(out_color*color.a,color.a);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\",\"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\\n#ifdef FOG\\nv_fog_pos=fog_position(a_pos);\\n#endif\\n}\"),symbolIcon:_i(\"uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize lowp float opacity\\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\",\"attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\\n#ifdef PROJECTION_GLOBE_VIEW\\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\\n#endif\\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\\n#ifdef PROJECTION_GLOBE_VIEW\\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\\n#endif\\nvarying vec2 v_tex;varying float v_fade_opacity;\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize lowp float opacity\\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\\n#ifdef PROJECTION_GLOBE_VIEW\\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\\n#else\\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\\n#endif\\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\\ncamera_to_anchor_distance/u_camera_to_center_distance :\\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\\n#ifdef PROJECTION_GLOBE_VIEW\\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\\n#else\\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\\n#endif\\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\\n#ifdef PROJECTION_GLOBE_VIEW\\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\\n#else\\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\\n#endif\\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\\n#ifdef TERRAIN\\n#ifdef PITCH_WITH_MAP_TERRAIN\\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\\n#endif\\n#endif\\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\\n#ifdef PROJECTION_GLOBE_VIEW\\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\\n#else\\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\\n#endif\\nfloat projection_transition_fade=1.0;\\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\\n#endif\\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}\"),symbolSDF:_i(\"#define SDF_PX 8.0\\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\\n#pragma mapbox: define highp vec4 fill_color\\n#pragma mapbox: define highp vec4 halo_color\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float halo_width\\n#pragma mapbox: define lowp float halo_blur\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 fill_color\\n#pragma mapbox: initialize highp vec4 halo_color\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize lowp float halo_width\\n#pragma mapbox: initialize lowp float halo_blur\\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\",\"attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\\n#ifdef PROJECTION_GLOBE_VIEW\\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\\n#endif\\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\\n#ifdef PROJECTION_GLOBE_VIEW\\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\\n#endif\\nvarying vec2 v_data0;varying vec3 v_data1;\\n#pragma mapbox: define highp vec4 fill_color\\n#pragma mapbox: define highp vec4 halo_color\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float halo_width\\n#pragma mapbox: define lowp float halo_blur\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 fill_color\\n#pragma mapbox: initialize highp vec4 halo_color\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize lowp float halo_width\\n#pragma mapbox: initialize lowp float halo_blur\\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\\n#ifdef PROJECTION_GLOBE_VIEW\\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\\n#else\\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\\n#endif\\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\\ncamera_to_anchor_distance/u_camera_to_center_distance :\\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\\n#ifdef PROJECTION_GLOBE_VIEW\\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\\n#else\\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\\n#endif\\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\\n#ifdef PROJECTION_GLOBE_VIEW\\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\\n#else\\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\\n#endif\\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\\n#ifdef TERRAIN\\n#ifdef PITCH_WITH_MAP_TERRAIN\\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\\n#endif\\n#endif\\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\\n#ifdef PROJECTION_GLOBE_VIEW\\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\\n#else\\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\\n#endif\\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\\n#endif\\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}\"),symbolTextAndIcon:_i(\"#define SDF_PX 8.0\\n#define SDF 1.0\\n#define ICON 0.0\\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\\n#pragma mapbox: define highp vec4 fill_color\\n#pragma mapbox: define highp vec4 halo_color\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float halo_width\\n#pragma mapbox: define lowp float halo_blur\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 fill_color\\n#pragma mapbox: initialize highp vec4 halo_color\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize lowp float halo_width\\n#pragma mapbox: initialize lowp float halo_blur\\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\",\"attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\\n#ifdef PROJECTION_GLOBE_VIEW\\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\\n#endif\\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\\n#ifdef PROJECTION_GLOBE_VIEW\\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\\n#endif\\nvarying vec4 v_data0;varying vec4 v_data1;\\n#pragma mapbox: define highp vec4 fill_color\\n#pragma mapbox: define highp vec4 halo_color\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float halo_width\\n#pragma mapbox: define lowp float halo_blur\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 fill_color\\n#pragma mapbox: initialize highp vec4 halo_color\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize lowp float halo_width\\n#pragma mapbox: initialize lowp float halo_blur\\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\\n#ifdef PROJECTION_GLOBE_VIEW\\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\\n#else\\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\\n#endif\\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\\ncamera_to_anchor_distance/u_camera_to_center_distance :\\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\\n#ifdef PROJECTION_GLOBE_VIEW\\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\\n#else\\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\\n#endif\\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\\n#ifdef TERRAIN\\n#ifdef PITCH_WITH_MAP_TERRAIN\\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\\n#endif\\n#endif\\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\\n#ifdef PROJECTION_GLOBE_VIEW\\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\\n#else\\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\\n#endif\\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\\n#endif\\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}\"),terrainRaster:_i(\"uniform sampler2D u_image0;varying vec2 v_pos0;\\n#ifdef FOG\\nvarying float v_fog_opacity;\\n#endif\\n#ifdef RENDER_SHADOWS\\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\\n#endif\\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\\n#ifdef RENDER_SHADOWS\\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\\n#endif\\n#ifdef FOG\\n#ifdef ZERO_EXAGGERATION\\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\\n#else\\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\\n#endif\\n#endif\\ngl_FragColor=color;\\n#ifdef TERRAIN_WIREFRAME\\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\\n#endif\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\",\"uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;\\n#ifdef FOG\\nvarying float v_fog_opacity;\\n#endif\\n#ifdef RENDER_SHADOWS\\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\\n#endif\\nconst float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;\\n#ifdef TERRAIN_WIREFRAME\\nelevation+=u_skirt_height*u_skirt_height*wireframeOffset;\\n#endif\\nvec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\\n#ifdef FOG\\n#ifdef ZERO_EXAGGERATION\\nv_fog_pos=fog_position(decodedPos);\\n#else\\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\\n#endif\\n#endif\\n#ifdef RENDER_SHADOWS\\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\\n#endif\\n}\"),terrainDepth:_i(\"#ifdef GL_ES\\nprecision highp float;\\n#endif\\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}\",\"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}\"),skybox:_i(\"\\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\\n#ifdef FOG\\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\\n#endif\\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\",ei),skyboxGradient:_i(\"varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\\n#ifdef FOG\\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\\n#endif\\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\",ei),skyboxCapture:_i(\"\\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\\n#ifdef GL_ES\\nprecision highp float;\\n#endif\\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\\n#define MIE_G                   0.76\\n#define DENSITY_HEIGHT_SCALE_R  8000.0\\n#define DENSITY_HEIGHT_SCALE_M  1200.0\\n#define PLANET_RADIUS           6360e3\\n#define ATMOSPHERE_RADIUS       6420e3\\n#define SAMPLE_STEPS            10\\n#define DENSITY_STEPS           4\\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}\",\"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}\"),globeRaster:_i(\"uniform sampler2D u_image0;varying vec2 v_pos0;\\n#ifndef FOG\\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\\n#endif\\nvoid main() {vec4 color;\\n#ifdef CUSTOM_ANTIALIASING\\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\\n#else\\ncolor=texture2D(u_image0,v_pos0);\\n#endif\\n#ifdef FOG\\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\\n#endif\\ngl_FragColor=color;\\n#ifdef TERRAIN_WIREFRAME\\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\\n#endif\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\",\"uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;\\n#ifdef GLOBE_POLES\\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\\n#else\\nattribute vec2 a_pos;\\n#endif\\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\\n#ifdef GLOBE_POLES\\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\\n#else\\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\\n#endif\\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;\\n#ifdef GLOBE_POLES\\nvec3 up_vector=normalize(globe_pos)*u_tile_up_scale;\\n#else\\nvec3 up_vector=elevationVector(tile_pos);\\n#endif\\nfloat height=elevation(tile_pos);\\n#ifdef TERRAIN_WIREFRAME\\nheight+=wireframeOffset;\\n#endif\\nglobe_pos+=up_vector*height;\\n#ifdef GLOBE_POLES\\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\\n#else\\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\\n#endif\\ngl_Position=u_proj_matrix*interpolated_pos;\\n#ifdef FOG\\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\\n#endif\\n}\"),globeAtmosphere:_i(\"uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\\n#ifdef PROJECTION_GLOBE_VIEW\\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\\n#endif\\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\\n#ifdef PROJECTION_GLOBE_VIEW\\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\\n#else\\nhorizon_angle=horizon_angle_mercator;\\n#endif\\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}\",\"attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}\")};function ui(e,t){const i=e.replace(/\\s*\\/\\/[^\\n]*\\n/g,\"\\n\").split(\"\\n\");for(let e of i)if(e=e.trim(),\"#\"===e[0]&&e.includes(\"if\")&&!e.includes(\"endif\")){e=e.replace(\"#\",\"\").replace(/ifdef|ifndef|elif|if/g,\"\").replace(/!|defined|\\(|\\)|\\|\\||&&/g,\"\").replace(/\\s+/g,\" \").trim();const i=e.split(\" \");for(const e of i)t.includes(e)||t.push(e);}}function _i(e,t){const i=/#pragma mapbox: ([\\w]+) ([\\w]+) ([\\w]+) ([\\w]+)/g,o=t.match(/attribute (highp |mediump |lowp )?([\\w]+) ([\\w]+)/g),r={},n=[...si];return ui(e,n),ui(t,n),{fragmentSource:e=e.replace(i,((e,t,i,o,n)=>(r[n]=!0,\"define\"===t?`\\n#ifndef HAS_UNIFORM_u_${n}\\nvarying ${i} ${o} ${n};\\n#else\\nuniform ${i} ${o} u_${n};\\n#endif\\n`:`\\n#ifdef HAS_UNIFORM_u_${n}\\n    ${i} ${o} ${n} = u_${n};\\n#endif\\n`))),vertexSource:t=t.replace(i,((e,t,i,o,n)=>{const s=\"float\"===o?\"vec2\":\"vec4\",a=n.match(/color/)?\"color\":s;return r[n]?\"define\"===t?`\\n#ifndef HAS_UNIFORM_u_${n}\\nuniform lowp float u_${n}_t;\\nattribute ${i} ${s} a_${n};\\nvarying ${i} ${o} ${n};\\n#else\\nuniform ${i} ${o} u_${n};\\n#endif\\n`:\"vec4\"===a?`\\n#ifndef HAS_UNIFORM_u_${n}\\n    ${n} = a_${n};\\n#else\\n    ${i} ${o} ${n} = u_${n};\\n#endif\\n`:`\\n#ifndef HAS_UNIFORM_u_${n}\\n    ${n} = unpack_mix_${a}(a_${n}, u_${n}_t);\\n#else\\n    ${i} ${o} ${n} = u_${n};\\n#endif\\n`:\"define\"===t?`\\n#ifndef HAS_UNIFORM_u_${n}\\nuniform lowp float u_${n}_t;\\nattribute ${i} ${s} a_${n};\\n#else\\nuniform ${i} ${o} u_${n};\\n#endif\\n`:\"vec4\"===a?`\\n#ifndef HAS_UNIFORM_u_${n}\\n    ${i} ${o} ${n} = a_${n};\\n#else\\n    ${i} ${o} ${n} = u_${n};\\n#endif\\n`:`\\n#ifndef HAS_UNIFORM_u_${n}\\n    ${i} ${o} ${n} = unpack_mix_${a}(a_${n}, u_${n}_t);\\n#else\\n    ${i} ${o} ${n} = u_${n};\\n#endif\\n`})),staticAttributes:o,usedDefines:n}}class di{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null;}bind(e,t,i,o,r,n,s){this.context=e;let a=this.boundPaintVertexBuffers.length!==o.length;for(let e=0;!a&&e<o.length;e++)this.boundPaintVertexBuffers[e]!==o[e]&&(a=!0);let l=this.boundDynamicVertexBuffers.length!==s.length;for(let e=0;!l&&e<s.length;e++)this.boundDynamicVertexBuffers[e]!==s[e]&&(l=!0);if(!e.extVertexArrayObject||!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==i||a||l||this.boundIndexBuffer!==r||this.boundVertexOffset!==n)this.freshBind(t,i,o,r,n,s);else {e.bindVertexArrayOES.set(this.vao);for(const e of s)e&&e.bind();r&&r.dynamicDraw&&r.bind();}}freshBind(e,t,i,o,r,n){let s;const a=e.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=o,this.boundVertexOffset=r,this.boundDynamicVertexBuffers=n;else {s=l.currentNumAttributes||0;for(let e=a;e<s;e++)c.disableVertexAttribArray(e);}t.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,r);for(const t of i)t.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,r);for(const t of n)t&&(t.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,r));o&&o.bind(),l.currentNumAttributes=a;}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null);}}function pi(t,i){const o=Math.pow(2,i.canonical.z),r=i.canonical.y;return [new e.MercatorCoordinate(0,r/o).toLngLat().lat,new e.MercatorCoordinate(0,(r+1)/o).toLngLat().lat]}function mi(t,i,o,r,n,s,a){const l=t.context,c=l.gl,h=o.fbo;if(!h)return;t.prepareDrawTile();const u=t.useProgram(\"hillshade\");l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,h.colorAttachment.get());const _=((e,t,i,o)=>{const r=i.paint.get(\"hillshade-shadow-color\"),n=i.paint.get(\"hillshade-highlight-color\"),s=i.paint.get(\"hillshade-accent-color\");let a=i.paint.get(\"hillshade-illumination-direction\")*(Math.PI/180);\"viewport\"===i.paint.get(\"hillshade-illumination-anchor\")&&(a-=e.transform.angle);const l=!e.options.moving;return {u_matrix:o||e.transform.calculateProjMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:pi(0,t.tileID),u_light:[i.paint.get(\"hillshade-exaggeration\"),a],u_shadow:r,u_highlight:n,u_accent:s}})(t,o,r,t.terrain?i.projMatrix:null);t.prepareDrawProgram(l,u,i.toUnwrapped());const{tileBoundsBuffer:d,tileBoundsIndexBuffer:p,tileBoundsSegments:m}=t.getTileBoundsBuffers(o);u.draw(l,c.TRIANGLES,n,s,a,e.CullFaceMode.disabled,_,r.id,d,p,m);}function fi(t,i,o){if(!i.needsDEMTextureUpload)return;const r=t.context,n=r.gl;r.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||t.getTileTexture(o.stride);const s=o.getPixels();i.demTexture?i.demTexture.update(s,{premultiply:!1}):i.demTexture=new e.Texture(r,s,n.RGBA,{premultiply:!1}),i.needsDEMTextureUpload=!1;}function gi(t,i,o,r,n,s){const a=t.context,l=a.gl;if(!i.dem)return;const c=i.dem;if(a.activeTexture.set(l.TEXTURE1),fi(t,i,c),!i.demTexture)return;i.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const h=c.dim;a.activeTexture.set(l.TEXTURE0);let u=i.fbo;if(!u){const t=new e.Texture(a,{width:h,height:h,data:null},l.RGBA);t.bind(l.LINEAR,l.CLAMP_TO_EDGE),u=i.fbo=a.createFramebuffer(h,h,!0),u.colorAttachment.set(t.texture);}a.bindFramebuffer.set(u.framebuffer),a.viewport.set([0,0,h,h]);const{tileBoundsBuffer:_,tileBoundsIndexBuffer:d,tileBoundsSegments:p}=t.getMercatorTileBoundsBuffers();t.useProgram(\"hillshadePrepare\").draw(a,l.TRIANGLES,r,n,s,e.CullFaceMode.disabled,((t,i)=>{const o=i.stride,r=e.create();return e.ortho(r,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(r,r,[0,-e.EXTENT,0]),{u_matrix:r,u_image:1,u_dimension:[o,o],u_zoom:t.overscaledZ,u_unpack:i.unpackVector}})(i.tileID,c),o.id,_,d,p),i.needsHillshadePrepare=!1;}const vi=t=>({u_matrix:new e.UniformMatrix4f(t),u_image0:new e.Uniform1i(t),u_skirt_height:new e.Uniform1f(t)}),xi=(e,t)=>({u_matrix:e,u_image0:0,u_skirt_height:t}),yi=(e,t,i,o,r,n,s,a,l,c,h,u,_,d)=>({u_proj_matrix:Float32Array.from(e),u_globe_matrix:t,u_normalize_matrix:Float32Array.from(o),u_merc_matrix:i,u_zoom_transition:r,u_merc_center:n,u_image0:0,u_frustum_tl:s,u_frustum_tr:a,u_frustum_br:l,u_frustum_bl:c,u_globe_pos:h,u_globe_radius:u,u_viewport:_,u_grid_matrix:d?Float32Array.from(d):new Float32Array(9)});function bi(e,t){return null!=e&&null!=t&&!(!e.hasData()||!t.hasData())&&null!=e.demTexture&&null!=t.demTexture&&e.tileID.key!==t.tileID.key}const wi=new class{constructor(){this.operations={};}newMorphing(e,t,i,o,r){if(e in this.operations){const t=this.operations[e];t.to.tileID.key!==i.tileID.key&&(t.queued=i);}else this.operations[e]={startTime:o,phase:0,duration:r,from:t,to:i,queued:null};}getMorphValuesForProxy(e){if(!(e in this.operations))return null;const t=this.operations[e];return {from:t.from,to:t.to,phase:t.phase}}update(e){for(const t in this.operations){const i=this.operations[t];for(i.phase=(e-i.startTime)/i.duration;i.phase>=1||!this._validOp(i);)if(!this._nextOp(i,e)){delete this.operations[t];break}}}_nextOp(e,t){return !!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}_validOp(e){return e.from.hasData()&&e.to.hasData()}},Ti={0:null,1:\"TERRAIN_VERTEX_MORPHING\",2:\"TERRAIN_WIREFRAME\"};function Ei(e,t){const i=1<<e.z;return !t&&(0===e.x||e.x===i-1)||0===e.y||e.y===i-1}const Ci=e=>({u_matrix:e});function Ii(t,i,o,r,n){if(n>0){const s=e.exported.now(),a=(s-t.timeAdded)/n,l=i?(s-i.timeAdded)/n:-1,c=o.getSource(),h=r.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),u=!i||Math.abs(i.tileID.overscaledZ-h)>Math.abs(t.tileID.overscaledZ-h),_=u&&t.refreshedUponExpiration?1:e.clamp(u?a:1-l,0,1);return t.refreshedUponExpiration&&a>=1&&(t.refreshedUponExpiration=!1),i?{opacity:1,mix:1-_}:{opacity:_,mix:0}}return {opacity:1,mix:0}}class Mi extends e.SourceCache{constructor(e){const t={type:\"raster-dem\",maxzoom:e.transform.maxZoom},i=new z(Ge(),null),o=ze(\"mock-dem\",t,i,e.style);super(\"mock-dem\",o,!1),o.setEventedParent(this),this._sourceLoaded=!0;}_loadTile(e,t){e.state=\"loaded\",t(null);}}class Si extends e.SourceCache{constructor(e){const t=ze(\"proxy\",{type:\"geojson\",maxzoom:e.transform.maxZoom},new z(Ge(),null),e.style);super(\"proxy\",t,!1),t.setEventedParent(this),this.map=this.getSource().map=e,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={};}update(t,i,o){if(t.freezeTileCoverage)return;this.transform=t;const r=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((i,o)=>{if(i[o.key]=\"\",!this._tiles[o.key]){const i=new e.Tile(o,this._source.tileSize*o.overscaleFactor(),t.tileZoom);i.state=\"loaded\",this._tiles[o.key]=i;}return i}),{});for(const e in this._tiles)e in r||(this.freeFBO(e),this._tiles[e].unloadVectorData(),delete this._tiles[e]);}freeFBO(e){const t=this.proxyCachedFBO[e];if(void 0!==t){const i=Object.values(t);this.renderCachePool.push(...i),delete this.proxyCachedFBO[e];}}deallocRenderCache(){this.renderCache.forEach((e=>e.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={};}}class Di extends e.OverscaledTileID{constructor(e,t,i){super(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y),this.proxyTileKey=t,this.projMatrix=i;}}class Ai extends e.Elevation{constructor(t,i){super(),this.painter=t,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[o,r,n]=function(t){const i=new e.StructArrayLayout4i8,o=new e.StructArrayLayout3ui6,r=131;i.reserve(17161),o.reserve(33800);const n=e.EXTENT/128,s=e.EXTENT+n/2,a=s+n;for(let t=-n;t<a;t+=n)for(let o=-n;o<a;o+=n){const r=o<0||o>s||t<0||t>s?24575:0,n=e.clamp(Math.round(o),0,e.EXTENT),a=e.clamp(Math.round(t),0,e.EXTENT);i.emplaceBack(n+r,a,n,a);}const l=(e,t)=>{const i=t*r+e;o.emplaceBack(i+1,i,i+r),o.emplaceBack(i+r,i+r+1,i+1);};for(let e=1;e<129;e++)for(let t=1;t<129;t++)l(t,e);return [0,129].forEach((e=>{for(let t=0;t<130;t++)l(t,e),l(e,t);})),[i,o,32768]}(),s=t.context;this.gridBuffer=s.createVertexBuffer(o,e.boundsAttributes.members),this.gridIndexBuffer=s.createIndexBuffer(r),this.gridSegments=e.SegmentVector.simpleSegment(0,0,o.length,r.length),this.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,o.length,n),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Si(i.map),this.orthoMatrix=e.create(),e.ortho(this.orthoMatrix,\"globe\"===this.painter.transform.projection.name?.015:0,e.EXTENT,0,e.EXTENT,0,1);const a=s.gl;this._overlapStencilMode=new e.StencilMode({func:a.GEQUAL,mask:255},0,255,a.KEEP,a.KEEP,a.REPLACE),this._previousZoom=t.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=i,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Mi(i.map);}set style(e){e.on(\"data\",this._onStyleDataEvent.bind(this)),e.on(\"neworder\",this._checkRenderCacheEfficiency.bind(this)),this._style=e,this._checkRenderCacheEfficiency();}update(t,i,o){if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;const r=t.terrain.properties;this.sourceCache=0===t.terrain.drapeRenderMode?this._mockSourceCache:t._getSourceCache(r.get(\"source\")),this._exaggeration=r.get(\"exaggeration\");const n=()=>{this.sourceCache.used&&e.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const t=this.getScaledDemTileSize();this.sourceCache.update(i,t,!0),this.resetTileLookupCache(this.sourceCache.id);};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,n(),this._initializing=!0),n(),i.updateElevation(!0,o),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(i),this._emptyDEMTextureDirty=!0;}else this._disable();}resetTileLookupCache(e){this._findCoveringTileCache[e]={};}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==t.efficiency&&e.warnOnce(`Terrain render cache efficiency is not optimal (${t.efficiency}%) and performance\\n                may be affected negatively, consider placing all background, fill and line layers before layer\\n                with id '${t.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`);}_onStyleDataEvent(e){e.coord&&\"source\"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):\"style\"===e.dataType&&(this._invalidateRenderCache=!0);}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const e in this._style._sourceCaches)this._style._sourceCaches[e].usedForTerrain=!1;}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((e=>e.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0);}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const e=2*this.proxySourceCache.getSource().tileSize;return [e,e]}set useVertexMorphing(e){this._useVertexMorphing=e;}updateTileBinding(t){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const i=this.proxySourceCache,o=this.painter.transform;this._initializing&&(this._initializing=0===o._centerAltitude&&-1===this.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(o.center),-1),this._emptyDEMTextureDirty=!this._initializing);const r=this.proxyCoords=i.getIds().map((e=>{const t=i.getTileByID(e).tileID;return t.projMatrix=o.calculateProjMatrix(t.toUnwrapped()),t}));!function(t,i){const o=i.transform.pointCoordinate(i.transform.getCameraPoint()),r=new e.pointGeometry(o.x,o.y);t.sort(((t,i)=>{if(i.overscaledZ-t.overscaledZ)return i.overscaledZ-t.overscaledZ;const o=new e.pointGeometry(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),n=new e.pointGeometry(i.canonical.x+(1<<i.canonical.z)*i.wrap,i.canonical.y),s=r.mult(1<<t.canonical.z);return s.x-=.5,s.y-=.5,s.distSqr(o)-s.distSqr(n)}));}(r,this.painter),this._previousZoom=o.zoom;const n=this.proxyToSource||{};this.proxyToSource={},r.forEach((e=>{this.proxyToSource[e.key]={};})),this.terrainTileForTile={};const s=this._style._sourceCaches;for(const e in s){const i=s[e];if(!i.used)continue;if(i!==this.sourceCache&&this.resetTileLookupCache(i.id),this._setupProxiedCoordsForOrtho(i,t[e],n),i.usedForTerrain)continue;const o=t[e];i.getSource().reparseOverscaled&&this._assignTerrainTiles(o);}this.proxiedCoords[i.id]=r.map((e=>new Di(e,e.key,this.orthoMatrix))),this._assignTerrainTiles(r),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(n),this.renderingToTexture=!1,this._updateTimestamp=e.exported.now();const a={};this._visibleDemTiles=[];for(const e of this.proxyCoords){const t=this.terrainTileForTile[e.key];if(!t)continue;const i=t.tileID.key;i in a||(this._visibleDemTiles.push(t),a[i]=i);}}_assignTerrainTiles(e){this._initializing||e.forEach((e=>{if(this.terrainTileForTile[e.key])return;const t=this._findTileCoveringTileID(e,this.sourceCache);t&&(this.terrainTileForTile[e.key]=t);}));}_prepareDEMTextures(){const e=this.painter.context,t=e.gl;for(const i in this.terrainTileForTile){const o=this.terrainTileForTile[i],r=o.dem;!r||o.demTexture&&!o.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),fi(this.painter,o,r));}}_prepareDemTileUniforms(e,t,i,o){if(!t||null==t.demTexture)return !1;const r=e.tileID.canonical,n=Math.pow(2,t.tileID.canonical.z-r.z),s=o||\"\";return i[`u_dem_tl${s}`]=[r.x*n%1,r.y*n%1],i[`u_dem_scale${s}`]=n,!0}get emptyDEMTexture(){return !this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const t=this.painter.context,i=t.gl;if(!this._emptyDepthBufferTexture){const o=new e.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new e.Texture(t,o,i.RGBA,{premultiply:!1});}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let e=0;const t=this._visibleDemTiles.reduce(((t,i)=>{if(!i.dem)return t;const o=i.dem.tree.minimums[0];return o>0&&e++,t+o}),0);return e?t/e:0}_updateEmptyDEMTexture(){const t=this.painter.context,i=t.gl;t.activeTexture.set(i.TEXTURE2);const o=this._getLoadedAreaMinimum(),r=new e.RGBAImage({width:1,height:1},new Uint8Array(e.DEMData.pack(o,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let n=this._emptyDEMTexture;return n?n.update(r,{premultiply:!1}):n=this._emptyDEMTexture=new e.Texture(t,r,i.RGBA,{premultiply:!1}),n}setupElevationDraw(t,i,o){const r=this.painter.context,n=r.gl,s=(a=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(a),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var a;s.u_dem_size=this.sourceCache.getSource().tileSize,s.u_exaggeration=this.exaggeration();let l=null,c=null,h=1;if(o&&o.morphing&&this._useVertexMorphing){const e=o.morphing.srcDemTile,i=o.morphing.dstDemTile;h=o.morphing.phase,e&&i&&(this._prepareDemTileUniforms(t,e,s,\"_prev\")&&(c=e),this._prepareDemTileUniforms(t,i,s)&&(l=i));}if(c&&l?(r.activeTexture.set(n.TEXTURE2),l.demTexture.bind(n.NEAREST,n.CLAMP_TO_EDGE,n.NEAREST),r.activeTexture.set(n.TEXTURE4),c.demTexture.bind(n.NEAREST,n.CLAMP_TO_EDGE,n.NEAREST),s.u_dem_lerp=h):(l=this.terrainTileForTile[t.tileID.key],r.activeTexture.set(n.TEXTURE2),(this._prepareDemTileUniforms(t,l,s)?l.demTexture:this.emptyDEMTexture).bind(n.NEAREST,n.CLAMP_TO_EDGE)),r.activeTexture.set(n.TEXTURE3),o&&o.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(n.NEAREST,n.CLAMP_TO_EDGE),this._depthFBO&&(s.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(n.NEAREST,n.CLAMP_TO_EDGE),s.u_depth_size_inv=[1,1]),o&&o.useMeterToDem&&l){const t=(1<<l.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;s.u_meter_to_dem=t;}if(o&&o.labelPlaneMatrixInv&&(s.u_label_plane_matrix_inv=o.labelPlaneMatrixInv),i.setTerrainUniformValues(r,s),\"globe\"===this.painter.transform.projection.name){const e=this.globeUniformValues(this.painter.transform,t.tileID.canonical,o&&o.useDenormalizedUpVectorScale);i.setGlobeUniformValues(r,e);}}globeUniformValues(t,i,o){const r=t.projection;return {u_tile_tl_up:r.upVector(i,0,0),u_tile_tr_up:r.upVector(i,e.EXTENT,0),u_tile_br_up:r.upVector(i,e.EXTENT,e.EXTENT),u_tile_bl_up:r.upVector(i,0,e.EXTENT),u_tile_up_scale:o?e.GLOBE_METERS_TO_ECEF:r.upVectorScale(i,t.center.lat,t.worldSize).metersToTile}}renderToBackBuffer(t){const i=this.painter,o=this.painter.context;0!==t.length&&(o.bindFramebuffer.set(null),o.viewport.set([0,0,i.width,i.height]),i.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(t,i,o,r,n){if(\"globe\"===t.transform.projection.name)!function(t,i,o,r,n){const s=t.context,a=s.gl;let l,c;const h=t.options.showTerrainWireframe?2:0,u=t.transform,_=e.globeUseCustomAntiAliasing(t,s,u),d=(e,i)=>{if(c===e)return;const o=[Ti[e],\"PROJECTION_GLOBE_VIEW\"];_&&o.push(\"CUSTOM_ANTIALIASING\"),i&&o.push(Ti[h]),l=t.useProgram(\"globeRaster\",null,o),c=e;},p=t.colorModeForRenderPass(),m=new e.DepthMode(a.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);wi.update(n);const f=e.calculateGlobeMercatorMatrix(u),g=[e.mercatorXfromLng(u.center.lng),e.mercatorYfromLat(u.center.lat)],v=h?[!1,!0]:[!1],x=t.globeSharedBuffers,y=[u.width*e.exported.devicePixelRatio,u.height*e.exported.devicePixelRatio],b=Float32Array.from(u.globeMatrix),w={useDenormalizedUpVectorScale:!0};if(v.forEach((h=>{c=-1;const _=h?a.LINES:a.TRIANGLES;for(const c of r){const r=o.getTile(c),v=e.StencilMode.disabled,T=i.prevTerrainTileForTile[c.key],E=i.terrainTileForTile[c.key];bi(T,E)&&wi.newMorphing(c.key,T,E,n,250),s.activeTexture.set(a.TEXTURE0),r.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE);const C=wi.getMorphValuesForProxy(c.key),I=C?1:0;C&&e.extend$1(w,{morphing:{srcDemTile:C.from,dstDemTile:C.to,phase:e.easeCubicInOut(C.phase)}});const M=e.tileCornersToBounds(c.canonical),S=e.getLatitudinalLod(M.getCenter().lat),D=e.getGridMatrix(c.canonical,M,S,u.worldSize/u._pixelsPerMercatorPixel),A=e.globeNormalizeECEF(e.globeTileBounds(c.canonical)),L=yi(u.projMatrix,b,f,A,e.globeToMercatorTransition(u.zoom),g,u.frustumCorners.TL,u.frustumCorners.TR,u.frustumCorners.BR,u.frustumCorners.BL,u.globeCenterInViewSpace,u.globeRadius,y,D);if(d(I,h),i.setupElevationDraw(r,l,w),t.prepareDrawProgram(s,l,c.toUnwrapped()),x){const[i,o,r]=h?x.getWirefameBuffers(t.context,S):x.getGridBuffers(S);l.draw(s,_,m,v,p,e.CullFaceMode.backCCW,L,\"globe_raster\",i,o,r);}}})),x){const n=[\"GLOBE_POLES\",\"PROJECTION_GLOBE_VIEW\"];_&&n.push(\"CUSTOM_ANTIALIASING\"),l=t.useProgram(\"globeRaster\",null,n);for(const n of r){const{x:r,y:c,z:h}=n.canonical,_=0===c,d=c===(1<<h)-1,[f,v,b,T]=x.getPoleBuffers(h);if(T&&(_||d)){const c=o.getTile(n);s.activeTexture.set(a.TEXTURE0),c.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE);let x=e.globePoleMatrixForTile(h,r,u);const E=e.globeNormalizeECEF(e.globeTileBounds(n.canonical)),C=(t,i)=>t.draw(s,a.TRIANGLES,m,e.StencilMode.disabled,p,e.CullFaceMode.disabled,yi(u.projMatrix,x,x,E,0,g,u.frustumCorners.TL,u.frustumCorners.TR,u.frustumCorners.BR,u.frustumCorners.BL,u.globeCenterInViewSpace,u.globeRadius,y),\"globe_pole_raster\",i,b,T);i.setupElevationDraw(c,l,w),t.prepareDrawProgram(s,l,n.toUnwrapped()),_&&C(l,f),d&&(x=e.scale(e.create(),x,[1,-1,1]),C(l,v));}}}}(t,i,o,r,n);else {const s=t.context,a=s.gl;let l,c;const h=t.options.showTerrainWireframe?2:0,u=(e,i)=>{if(c===e)return;const o=[Ti[e]];i&&o.push(Ti[h]),l=t.useProgram(\"terrainRaster\",null,o),c=e;},_=t.colorModeForRenderPass(),d=new e.DepthMode(a.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);wi.update(n);const p=t.transform,m=6*Math.pow(1.5,22-p.zoom)*i.exaggeration();(h?[!1,!0]:[!1]).forEach((h=>{c=-1;const f=h?a.LINES:a.TRIANGLES,[g,v]=h?i.getWirefameBuffer():[i.gridIndexBuffer,i.gridSegments];for(const c of r){const r=o.getTile(c),x=e.StencilMode.disabled,y=i.prevTerrainTileForTile[c.key],b=i.terrainTileForTile[c.key];bi(y,b)&&wi.newMorphing(c.key,y,b,n,250),s.activeTexture.set(a.TEXTURE0),r.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST);const w=wi.getMorphValuesForProxy(c.key),T=w?1:0;let E;w&&(E={morphing:{srcDemTile:w.from,dstDemTile:w.to,phase:e.easeCubicInOut(w.phase)}});const C=xi(c.projMatrix,Ei(c.canonical,p.renderWorldCopies)?m/10:m);u(T,h),i.setupElevationDraw(r,l,E),t.prepareDrawProgram(s,l,c.toUnwrapped()),l.draw(s,f,d,x,_,e.CullFaceMode.backCCW,C,\"terrain_raster\",i.gridBuffer,g,v);}}));}}(i,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,i.gpuTimingDeferredRenderEnd(),t.splice(0,t.length));}renderBatch(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;const i=this.painter,o=this.painter.context,r=this.proxySourceCache,n=this.proxiedCoords[r.id],s=this._drapedRenderBatches.shift(),a=[],l=i.style.order;let c=0;for(const h of n){const n=r.getTileByID(h.proxyTileKey),u=r.proxyCachedFBO[h.key]?r.proxyCachedFBO[h.key][t]:void 0,_=void 0!==u?r.renderCache[u]:this.pool[c++],d=void 0!==u;if(n.texture=_.tex,d&&!_.dirty){a.push(n.tileID);continue}let p;o.bindFramebuffer.set(_.fb.framebuffer),this.renderedToTile=!1,_.dirty&&(o.clear({color:e.Color.transparent,stencil:0}),_.dirty=!1);for(let e=s.start;e<=s.end;++e){const t=i.style._layers[l[e]];if(t.isHidden(i.transform.zoom))continue;const r=i.style._getLayerSourceCache(t),n=r?this.proxyToSource[h.key][r.id]:[h];if(!n)continue;const s=n;o.viewport.set([0,0,_.fb.width,_.fb.height]),p!==(r?r.id:null)&&(this._setupStencil(_,n,t,r),p=r?r.id:null),i.renderLayer(i,r,t,s);}this.renderedToTile?(_.dirty=!0,a.push(n.tileID)):d||--c,5===c&&(c=0,this.renderToBackBuffer(a));}return this.renderToBackBuffer(a),this.renderingToTexture=!1,o.bindFramebuffer.set(null),o.viewport.set([0,0,i.width,i.height]),s.end+1}postRender(){}renderCacheEfficiency(e){const t=e.order.length;if(0===t)return {efficiency:100};let i,o=0,r=0,n=!1;for(let s=0;s<t;++s){const t=e._layers[e.order[s]];this._style.isLayerDraped(t)?(n&&++o,++r):n||(n=!0,i=t.id);}return 0===r?{efficiency:100}:{efficiency:100*(1-o/r),firstUndrapedLayer:i}}getMinElevationBelowMSL(){let e=0;return this._visibleDemTiles.filter((e=>e.dem)).forEach((t=>{e=Math.min(e,t.dem.tree.minimums[0]);})),0===e?e:(e-30)*this._exaggeration}raycast(e,t,i){if(!this._visibleDemTiles)return null;const o=this._visibleDemTiles.filter((e=>e.dem)).map((o=>{const r=o.tileID,n=1<<r.overscaledZ,{x:s,y:a}=r.canonical,l=s/n,c=(s+1)/n,h=a/n,u=(a+1)/n;return {minx:l,miny:h,maxx:c,maxy:u,t:o.dem.tree.raycastRoot(l,h,c,u,e,t,i),tile:o}}));o.sort(((e,t)=>(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE)));for(const r of o){if(null==r.t)return null;const o=r.tile.dem.tree.raycast(r.minx,r.miny,r.maxx,r.maxy,e,t,i);if(null!=o)return o}return null}_createFBO(){const t=this.painter.context,i=t.gl,o=this.drapeBufferSize;t.activeTexture.set(i.TEXTURE0);const r=new e.Texture(t,{width:o[0],height:o[1],data:null},i.RGBA);r.bind(i.LINEAR,i.CLAMP_TO_EDGE);const n=t.createFramebuffer(o[0],o[1],!1);return n.colorAttachment.set(r.texture),n.depthAttachment=new Ee(t,n.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,o[0],o[1]),this._stencilRef=0,n.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):n.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&i.texParameterf(i.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:n,tex:r,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO());}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return !0;for(const e in this._style._sourceCaches)if(this._style._sourceCaches[e].hasTransition())return !0;return this._style.order.some((e=>{const t=this._style._layers[e],i=t.isHidden(this.painter.transform.zoom);return \"custom\"!==t.type&&!i&&t.hasTransition()}))}_clearRasterFadeFromRenderCache(){let e=!1;for(const t in this._style._sourceCaches)if(this._style._sourceCaches[t]._source instanceof Me){e=!0;break}if(e)for(let e=0;e<this._style.order.length;++e){const t=this._style._layers[this._style.order[e]],i=t.isHidden(this.painter.transform.zoom),o=this._style._getLayerSourceCache(t);if(\"raster\"!==t.type||i||!o)continue;const r=t.paint.get(\"raster-fade-duration\");for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][o.id];if(t)for(const e of t){const t=Ii(o.getTile(e),o.findLoadedParent(e,0),o,this.painter.transform,r);(1!==t.opacity||0!==t.mix)&&this._clearRenderCacheForTile(o.id,e);}}}}_setupDrapedRenderBatches(){const e=this._style.order,t=e.length;if(0===t)return;const i=[];let o,r=0,n=this._style._layers[e[r]];for(;!this._style.isLayerDraped(n)&&n.isHidden(this.painter.transform.zoom)&&++r<t;)n=this._style._layers[e[r]];for(;r<t;++r){const t=this._style._layers[e[r]];t.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(t)?void 0===o&&(o=r):void 0!==o&&(i.push({start:o,end:r-1}),o=void 0));}void 0!==o&&i.push({start:o,end:r-1}),this._drapedRenderBatches=i;}_setupRenderCache(e){const t=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,t.renderCache.length>t.renderCachePool.length){const e=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(let i=0;i<e.length;++i){const o=Object.values(e[i]);t.renderCachePool.push(...o);}}return}this._clearRasterFadeFromRenderCache();const i=this.proxyCoords,o=this._tilesDirty;for(let r=i.length-1;r>=0;r--){const n=i[r];if(t.getTileByID(n.key),void 0!==t.proxyCachedFBO[n.key]){const i=e[n.key],r=this.proxyToSource[n.key];let s=0;for(const e in r){const t=r[e],n=i[e];if(!n||n.length!==t.length||t.some(((t,i)=>t!==n[i]||o[e]&&o[e].hasOwnProperty(t.key)))){s=-1;break}++s;}for(const e in t.proxyCachedFBO[n.key])t.renderCache[t.proxyCachedFBO[n.key][e]].dirty=s<0||s!==Object.values(i).length;}}const r=[...this._drapedRenderBatches];r.sort(((e,t)=>t.end-t.start-(e.end-e.start)));for(const e of r)for(const o of i){if(t.proxyCachedFBO[o.key])continue;let i=t.renderCachePool.pop();void 0===i&&t.renderCache.length<50&&(i=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==i&&(t.proxyCachedFBO[o.key]={},t.proxyCachedFBO[o.key][e.start]=i,t.renderCache[i].dirty=!0);}this._tilesDirty={};}_setupStencil(e,t,i,o){if(!o||!this._sourceTilesOverlap[o.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const r=this.painter.context,n=r.gl;if(t.length<=1)return void(this._overlapStencilType=!1);let s;if(i.isTileClipped())s=t.length,this._overlapStencilMode.test={func:n.EQUAL,mask:255},this._overlapStencilType=\"Clip\";else {if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);s=1,this._overlapStencilMode.test={func:n.GREATER,mask:255},this._overlapStencilType=\"Mask\";}this._stencilRef+s>255&&(r.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=s,this._overlapStencilMode.ref=this._stencilRef,i.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref);}clipOrMaskOverlapStencilType(){return \"Clip\"===this._overlapStencilType||\"Mask\"===this._overlapStencilType}stencilModeForRTTOverlap(t){return this.renderingToTexture&&this._overlapStencilType?(\"Clip\"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):e.StencilMode.disabled}_renderTileClippingMasks(t,i){const o=this.painter,r=this.painter.context,n=r.gl;o._tileClippingMaskIDs={},r.setColorMode(e.ColorMode.disabled),r.setDepthMode(e.DepthMode.disabled);const s=o.useProgram(\"clippingMask\");for(const a of t){const t=o._tileClippingMaskIDs[a.key]=--i;s.draw(r,n.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:n.ALWAYS,mask:0},t,255,n.KEEP,n.KEEP,n.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Ci(a.projMatrix),\"$clipping\",o.tileExtentBuffer,o.quadTriangleIndexBuffer,o.tileExtentSegments);}}pointCoordinate(t){const i=this.painter.transform;if(t.x<0||t.x>i.width||t.y<0||t.y>i.height)return null;const o=[t.x,t.y,1,1];e.transformMat4$1(o,o,i.pixelMatrixInverse),e.scale$1(o,o,1/o[3]),o[0]/=i.worldSize,o[1]/=i.worldSize;const r=i._camera.position,n=e.mercatorZfromAltitude(1,i.center.lat),s=[r[0],r[1],r[2]/n,0],a=e.subtract([],o.slice(0,3),s);e.normalize(a,a);const l=this.raycast(s,a,this._exaggeration);return null!==l&&l?(e.scaleAndAdd(s,s,a,l),s[3]=s[2],s[2]*=n,s):null}drawDepth(){const t=this.painter,i=t.context,o=this.proxySourceCache,r=Math.ceil(t.width),n=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===r&&this._depthFBO.height===n||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const t=i.gl,o=i.createFramebuffer(r,n,!0);i.activeTexture.set(t.TEXTURE0);const s=new e.Texture(i,{width:r,height:n,data:null},t.RGBA);s.bind(t.NEAREST,t.CLAMP_TO_EDGE),o.colorAttachment.set(s.texture);const a=i.createRenderbuffer(i.gl.DEPTH_COMPONENT16,r,n);o.depthAttachment.set(a),this._depthFBO=o,this._depthTexture=s;}i.bindFramebuffer.set(this._depthFBO.framebuffer),i.viewport.set([0,0,r,n]),function(t,i,o,r){if(\"globe\"===t.transform.projection.name)return;const n=t.context,s=n.gl;n.clear({depth:1});const a=t.useProgram(\"terrainDepth\"),l=new e.DepthMode(s.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D);for(const t of r){const r=o.getTile(t),c=xi(t.projMatrix,0);i.setupElevationDraw(r,a),a.draw(n,s.TRIANGLES,l,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,c,\"terrain_depth\",i.gridBuffer,i.gridIndexBuffer,i.gridNoSkirtSegments);}}(t,this,o,this.proxyCoords);}_setupProxiedCoordsForOrtho(e,t,i){if(e.getSource()instanceof Ae)return this._setupProxiedCoordsForImageSource(e,t,i);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};const o=this.proxiedCoords[e.id]=[],r=this.proxyCoords;for(let t=0;t<r.length;t++){const n=r[t],s=this._findTileCoveringTileID(n,e);if(s){const t=this._createProxiedId(n,s,i[n.key]&&i[n.key][e.id]);o.push(t),this.proxyToSource[n.key][e.id]=[t];}}let n=!1;for(let r=0;r<t.length;r++){const s=e.getTile(t[r]);if(!s||!s.hasData())continue;const a=this._findTileCoveringTileID(s.tileID,this.proxySourceCache);if(a&&a.tileID.canonical.z!==s.tileID.canonical.z){const t=this.proxyToSource[a.tileID.key][e.id],r=this._createProxiedId(a.tileID,s,i[a.tileID.key]&&i[a.tileID.key][e.id]);t?t.splice(t.length-1,0,r):this.proxyToSource[a.tileID.key][e.id]=[r],o.push(r),n=!0;}}this._sourceTilesOverlap[e.id]=n;}_setupProxiedCoordsForImageSource(t,i,o){if(!t.getSource().loaded())return;const r=this.proxiedCoords[t.id]=[],n=this.proxyCoords,s=t.getSource(),a=new e.pointGeometry(s.tileID.x,s.tileID.y)._div(1<<s.tileID.z),l=s.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce(((e,t)=>(e.min.x=Math.min(e.min.x,t.x-a.x),e.min.y=Math.min(e.min.y,t.y-a.y),e.max.x=Math.max(e.max.x,t.x-a.x),e.max.y=Math.max(e.max.y,t.y-a.y),e)),{min:new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),c=(t,i)=>{const o=t.wrap+t.canonical.x/(1<<t.canonical.z),r=t.canonical.y/(1<<t.canonical.z),n=e.EXTENT/(1<<t.canonical.z),s=i.wrap+i.canonical.x/(1<<i.canonical.z),a=i.canonical.y/(1<<i.canonical.z);return o+n<s+l.min.x||o>s+l.max.x||r+n<a+l.min.y||r>a+l.max.y};for(let e=0;e<n.length;e++){const s=n[e];for(let e=0;e<i.length;e++){const n=t.getTile(i[e]);if(!n||!n.hasData())continue;if(c(s,n.tileID))continue;const a=this._createProxiedId(s,n,o[s.key]&&o[s.key][t.id]),l=this.proxyToSource[s.key][t.id];l?l.push(a):this.proxyToSource[s.key][t.id]=[a],r.push(a);}}}_createProxiedId(t,i,o){let r=this.orthoMatrix;if(o){const e=o.find((e=>e.key===i.tileID.key));if(e)return e}if(i.tileID.key!==t.key){const o=t.canonical.z-i.tileID.canonical.z;let n,s,a;r=e.create();const l=i.tileID.wrap-t.wrap<<t.overscaledZ;o>0?(n=e.EXTENT>>o,s=n*((i.tileID.canonical.x<<o)-t.canonical.x+l),a=n*((i.tileID.canonical.y<<o)-t.canonical.y)):(n=e.EXTENT<<-o,s=e.EXTENT*(i.tileID.canonical.x-(t.canonical.x+l<<-o)),a=e.EXTENT*(i.tileID.canonical.y-(t.canonical.y<<-o))),e.ortho(r,0,n,0,n,0,1),e.translate(r,r,[s,a,0]);}return new Di(i.tileID,t.key,r)}_findTileCoveringTileID(t,i){let o=i.getTile(t);if(o&&o.hasData())return o;const r=this._findCoveringTileCache[i.id],n=r[t.key];if(o=n?i.getTileByID(n):null,o&&o.hasData()||null===n)return o;let s=o?o.tileID:t,a=s.overscaledZ;const l=i.getSource().minzoom,c=[];if(!n){const r=i.getSource().maxzoom;if(t.canonical.z>=r){const o=t.canonical.z-r;i.getSource().reparseOverscaled?(a=Math.max(t.canonical.z+2,i.transform.tileZoom),s=new e.OverscaledTileID(a,t.wrap,r,t.canonical.x>>o,t.canonical.y>>o)):0!==o&&(a=r,s=new e.OverscaledTileID(a,t.wrap,r,t.canonical.x>>o,t.canonical.y>>o));}s.key!==t.key&&(c.push(s.key),o=i.getTile(s));}const h=e=>{c.forEach((t=>{r[t]=e;})),c.length=0;};for(a-=1;a>=l&&(!o||!o.hasData());a--){o&&h(o.tileID.key);const e=s.calculateScaledKey(a);if(o=i.getTileByID(e),o&&o.hasData())break;const t=r[e];if(null===t)break;void 0===t?c.push(e):o=i.getTileByID(t);}return h(o?o.tileID.key:null),o&&o.hasData()?o:null}findDEMTileFor(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0;}_clearRenderCacheForTile(e,t){let i=this._tilesDirty[e];i||(i=this._tilesDirty[e]={}),i[t.key]=!0;}getWirefameBuffer(){if(!this.wireframeSegments){const t=function(t){let i=0;const o=new e.StructArrayLayout2ui4,r=131;for(let e=1;e<129;e++){for(let t=1;t<129;t++)i=e*r+t,o.emplaceBack(i,i+1),o.emplaceBack(i,i+r),o.emplaceBack(i+1,i+r),128===e&&o.emplaceBack(i+r,i+r+1);o.emplaceBack(i+1,i+1+r);}return o}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(t),this.wireframeSegments=e.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,t.length);}return [this.wireframeIndexBuffer,this.wireframeSegments]}}class Li{static cacheKey(e,t,i,o){let r=`${t}${o?o.cacheKey:\"\"}`;for(const t of i)e.usedDefines.includes(t)&&(r+=`/${t}`);return r}constructor(t,i,o,r,n,s){const a=t.gl;this.program=a.createProgram();const l=function(e){const t=[];for(let i=0;i<e.length;i++){if(null===e[i])continue;const o=e[i].split(\" \");t.push(o.pop());}return t}(o.staticAttributes),c=r?r.getBinderAttributes():[],h=l.concat(c);let u=r?r.defines():[];u=u.concat(s.map((e=>`#define ${e}`)));const _=u.concat(t.extStandardDerivatives?\"#extension GL_OES_standard_derivatives : enable\\n\".concat(ci):ci,ci,li,ai.fragmentSource,ni.fragmentSource,o.fragmentSource).join(\"\\n\"),d=u.concat(\"\\n#ifdef GL_ES\\nprecision highp float;\\n#else\\n\\n#if !defined(lowp)\\n#define lowp\\n#endif\\n\\n#if !defined(mediump)\\n#define mediump\\n#endif\\n\\n#if !defined(highp)\\n#define highp\\n#endif\\n\\n#endif\",li,ai.vertexSource,ni.vertexSource,ri.vertexSource,o.vertexSource).join(\"\\n\"),p=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())return void(this.failedToCreate=!0);a.shaderSource(p,_),a.compileShader(p),a.attachShader(this.program,p);const m=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())this.failedToCreate=!0;else {a.shaderSource(m,d),a.compileShader(m),a.attachShader(this.program,m),this.attributes={},this.numAttributes=h.length;for(let e=0;e<this.numAttributes;e++)h[e]&&(a.bindAttribLocation(this.program,e,h[e]),this.attributes[h[e]]=e);a.linkProgram(this.program),a.deleteShader(m),a.deleteShader(p),this.fixedUniforms=n(t),this.binderUniforms=r?r.getUniforms(t):[],s.includes(\"TERRAIN\")&&(this.terrainUniforms=(t=>({u_dem:new e.Uniform1i(t),u_dem_prev:new e.Uniform1i(t),u_dem_unpack:new e.Uniform4f(t),u_dem_tl:new e.Uniform2f(t),u_dem_scale:new e.Uniform1f(t),u_dem_tl_prev:new e.Uniform2f(t),u_dem_scale_prev:new e.Uniform1f(t),u_dem_size:new e.Uniform1f(t),u_dem_lerp:new e.Uniform1f(t),u_exaggeration:new e.Uniform1f(t),u_depth:new e.Uniform1i(t),u_depth_size_inv:new e.Uniform2f(t),u_meter_to_dem:new e.Uniform1f(t),u_label_plane_matrix_inv:new e.UniformMatrix4f(t)}))(t)),s.includes(\"GLOBE\")&&(this.globeUniforms=(t=>({u_tile_tl_up:new e.Uniform3f(t),u_tile_tr_up:new e.Uniform3f(t),u_tile_br_up:new e.Uniform3f(t),u_tile_bl_up:new e.Uniform3f(t),u_tile_up_scale:new e.Uniform1f(t)}))(t)),s.includes(\"FOG\")&&(this.fogUniforms=(t=>({u_fog_matrix:new e.UniformMatrix4f(t),u_fog_range:new e.Uniform2f(t),u_fog_color:new e.Uniform4f(t),u_fog_horizon_blend:new e.Uniform1f(t),u_fog_temporal_offset:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_globe_transition:new e.Uniform1f(t),u_is_globe:new e.Uniform1i(t),u_viewport:new e.Uniform2f(t)}))(t));}}setTerrainUniformValues(e,t){if(!this.terrainUniforms)return;const i=this.terrainUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)i[e]&&i[e].set(this.program,e,t[e]);}}setGlobeUniformValues(e,t){if(!this.globeUniforms)return;const i=this.globeUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)i[e]&&i[e].set(this.program,e,t[e]);}}setFogUniformValues(e,t){if(!this.fogUniforms)return;const i=this.fogUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)i[e].set(this.program,e,t[e]);}}draw(e,t,i,o,r,n,s,a,l,c,h,u,_,d,p){const m=e.gl;if(this.failedToCreate)return;e.program.set(this.program),e.setDepthMode(i),e.setStencilMode(o),e.setColorMode(r),e.setCullFace(n);for(const e of Object.keys(this.fixedUniforms))this.fixedUniforms[e].set(this.program,e,s[e]);d&&d.setUniforms(this.program,e,this.binderUniforms,u,{zoom:_});const f={[m.LINES]:2,[m.TRIANGLES]:3,[m.LINE_STRIP]:1}[t];for(const i of h.get()){const o=i.vaos||(i.vaos={});(o[a]||(o[a]=new di)).bind(e,this,l,d?d.getPaintVertexBuffers():[],c,i.vertexOffset,p||[]),m.drawElements(t,i.primitiveLength*f,m.UNSIGNED_SHORT,i.primitiveOffset*f*2);}}}function zi(e,t){const i=Math.pow(2,t.tileID.overscaledZ),o=t.tileSize*Math.pow(2,e.transform.tileZoom)/i,r=o*(t.tileID.canonical.x+t.tileID.wrap*i),n=o*t.tileID.canonical.y;return {u_image:0,u_texsize:t.imageAtlasTexture.size,u_tile_units_to_pixels:1/P(t,1,e.transform.tileZoom),u_pixel_coord_upper:[r>>16,n>>16],u_pixel_coord_lower:[65535&r,65535&n]}}const Pi=e.create(),Ri=(t,i,o,r,n,s,a,l,c,h,u)=>{const _=i.style.light,d=_.properties.get(\"position\"),p=[d.x,d.y,d.z],m=e.create$1();\"viewport\"===_.properties.get(\"anchor\")&&(e.fromRotation(m,-i.transform.angle),e.transformMat3(p,p,m));const f=_.properties.get(\"color\"),g=i.transform,v={u_matrix:t,u_lightpos:p,u_lightintensity:_.properties.get(\"intensity\"),u_lightcolor:[f.r,f.g,f.b],u_vertical_gradient:+o,u_opacity:r,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Pi,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:n,u_edge_radius:s};return \"globe\"===g.projection.name&&(v.u_tile_id=[a.canonical.x,a.canonical.y,1<<a.canonical.z],v.u_zoom_transition=c,v.u_inv_rot_matrix=u,v.u_merc_center=h,v.u_up_dir=g.projection.upVector(new e.CanonicalTileID(0,0,0),h[0]*e.EXTENT,h[1]*e.EXTENT),v.u_height_lift=l),v},Oi=(t,i,o,r,n,s,a,l,c,h,u,_)=>{const d=Ri(t,i,o,r,n,s,a,c,h,u,_),p={u_height_factor:-Math.pow(2,a.overscaledZ)/l.tileSize/8};return e.extend(d,zi(i,l),p)},Bi=e=>({u_matrix:e}),ki=(t,i,o)=>e.extend(Bi(t),zi(i,o)),Fi=(e,t)=>({u_matrix:e,u_world:t}),Ui=(t,i,o,r)=>e.extend(ki(t,i,o),{u_world:r}),Ni=e.create(),Gi=(t,i,o,r,n,s)=>{const a=t.transform,l=\"globe\"===a.projection.name;let c;if(\"map\"===s.paint.get(\"circle-pitch-alignment\"))if(l){const t=e.globePixelsToTileUnits(a.zoom,i.canonical)*a._pixelsPerMercatorPixel;c=Float32Array.from([t,0,0,t]);}else c=a.calculatePixelsToTileUnitsMatrix(o);else c=new Float32Array([a.pixelsToGLUnits[0],0,0,a.pixelsToGLUnits[1]]);const h={u_camera_to_center_distance:a.cameraToCenterDistance,u_matrix:t.translatePosMatrix(i.projMatrix,o,s.paint.get(\"circle-translate\"),s.paint.get(\"circle-translate-anchor\")),u_device_pixel_ratio:e.exported.devicePixelRatio,u_extrude_scale:c,u_inv_rot_matrix:Ni,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(l){h.u_inv_rot_matrix=r,h.u_merc_center=n,h.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],h.u_zoom_transition=e.globeToMercatorTransition(a.zoom);const t=n[0]*e.EXTENT,o=n[1]*e.EXTENT;h.u_up_dir=a.projection.upVector(new e.CanonicalTileID(0,0,0),t,o);}return h},ji=e=>{const t=[];return \"map\"===e.paint.get(\"circle-pitch-alignment\")&&t.push(\"PITCH_WITH_MAP\"),\"map\"===e.paint.get(\"circle-pitch-scale\")&&t.push(\"SCALE_WITH_MAP\"),t},Zi=(t,i,o,r)=>{const n=e.EXTENT/o.tileSize;return {u_matrix:t,u_camera_to_center_distance:i.getCameraToCenterDistance(r),u_extrude_scale:[i.pixelsToGLUnits[0]/n,i.pixelsToGLUnits[1]/n]}},Vi=(e,t,i=1)=>({u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:i}),Wi=e.create(),Xi=(t,i,o,r,n,s,a)=>{const l=t.transform,c=\"globe\"===l.projection.name,h=c?e.globePixelsToTileUnits(l.zoom,i.canonical)*l._pixelsPerMercatorPixel:P(o,1,s),u={u_matrix:i.projMatrix,u_extrude_scale:h,u_intensity:a,u_inv_rot_matrix:Wi,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(c){u.u_inv_rot_matrix=r,u.u_merc_center=n,u.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],u.u_zoom_transition=e.globeToMercatorTransition(l.zoom);const t=n[0]*e.EXTENT,o=n[1]*e.EXTENT;u.u_up_dir=l.projection.upVector(new e.CanonicalTileID(0,0,0),t,o);}return u},qi=(e,t,i,o,r,n,s)=>{const a=e.transform,l=a.calculatePixelsToTileUnitsMatrix(t);return {u_matrix:Yi(e,t,i,o),u_pixels_to_tile_units:l,u_device_pixel_ratio:n,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:r,u_texsize:Ki(i)?t.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Hi(t,e.transform),u_alpha_discard_threshold:0,u_trim_offset:s}},$i=(e,t,i,o,r)=>{const n=e.transform;return {u_matrix:Yi(e,t,i,o),u_texsize:t.imageAtlasTexture.size,u_pixels_to_tile_units:n.calculatePixelsToTileUnitsMatrix(t),u_device_pixel_ratio:r,u_image:0,u_tile_units_to_pixels:Hi(t,n),u_units_to_pixels:[1/n.pixelsToGLUnits[0],1/n.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Hi(e,t){return 1/P(e,1,t.tileZoom)}function Yi(e,t,i,o){return e.translatePosMatrix(o||t.tileID.projMatrix,t,i.paint.get(\"line-translate\"),i.paint.get(\"line-translate-anchor\"))}function Ki(e){const t=e.paint.get(\"line-dasharray\").value;return t.value||\"constant\"!==t.kind}const Ji=(e,t,i,o,r,n)=>{return {u_matrix:e,u_tl_parent:t,u_scale_parent:i,u_fade_t:o.mix,u_opacity:o.opacity*r.paint.get(\"raster-opacity\"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get(\"raster-brightness-min\"),u_brightness_high:r.paint.get(\"raster-brightness-max\"),u_saturation_factor:(a=r.paint.get(\"raster-saturation\"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(s=r.paint.get(\"raster-contrast\"),s>0?1/(1-s):1+s),u_spin_weights:Qi(r.paint.get(\"raster-hue-rotate\")),u_perspective_transform:n};var s,a;};function Qi(e){e*=Math.PI/180;const t=Math.sin(e),i=Math.cos(e);return [(2*i+1)/3,(-Math.sqrt(3)*t-i+1)/3,(Math.sqrt(3)*t-i+1)/3]}const eo=e.create(),to=(t,i,o,r,n,s,a,l,c,h,u,_,d,p,m,f)=>{const g=n.transform,v={u_is_size_zoom_constant:+(\"constant\"===t||\"source\"===t),u_is_size_feature_constant:+(\"constant\"===t||\"camera\"===t),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:g.cameraToCenterDistance,u_rotate_symbol:+o,u_aspect_ratio:g.width/g.height,u_fade_change:n.options.fadeDuration?n.symbolFadeChange:1,u_matrix:s,u_label_plane_matrix:a,u_coord_matrix:l,u_is_text:+c,u_pitch_with_map:+r,u_texsize:h,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:eo,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:eo,u_up_vector:[0,-1,0]};return \"globe\"===f.name&&(v.u_tile_id=[u.canonical.x,u.canonical.y,1<<u.canonical.z],v.u_zoom_transition=_,v.u_inv_rot_matrix=p,v.u_merc_center=d,v.u_camera_forward=g._camera.forward(),v.u_ecef_origin=e.globeECEFOrigin(g.globeMatrix,u.toUnwrapped()),v.u_tile_matrix=Float32Array.from(g.globeMatrix),v.u_up_vector=m),v},io=(t,i,o,r,n,s,a,l,c,h,u,_,d,p,m,f,g)=>e.extend(to(t,i,o,r,n,s,a,l,c,h,_,d,p,m,f,g),{u_gamma_scale:r?n.transform.cameraToCenterDistance*Math.cos(n.terrain?0:n.transform._pitch):1,u_device_pixel_ratio:e.exported.devicePixelRatio,u_is_halo:+u}),oo=(t,i,o,r,n,s,a,l,c,h,u,_,d,p,m,f)=>e.extend(io(t,i,o,r,n,s,a,l,!0,c,!0,u,_,d,p,m,f),{u_texsize_icon:h,u_texture_icon:1}),ro=(e,t,i)=>({u_matrix:e,u_opacity:t,u_color:i}),no=(t,i,o,r,n)=>e.extend(function(e,t,i){const o=t.imageManager.getPattern(e.toString()),{width:r,height:n}=t.imageManager.getPixelSize(),s=Math.pow(2,i.tileID.overscaledZ),a=i.tileSize*Math.pow(2,t.transform.tileZoom)/s,l=a*(i.tileID.canonical.x+i.tileID.wrap*s),c=a*i.tileID.canonical.y;return {u_image:0,u_pattern_tl:o.tl,u_pattern_br:o.br,u_texsize:[r,n],u_pattern_size:o.displaySize,u_tile_units_to_pixels:1/P(i,1,t.transform.tileZoom),u_pixel_coord_upper:[l>>16,c>>16],u_pixel_coord_lower:[65535&l,65535&c]}}(r,o,n),{u_matrix:t,u_opacity:i}),so={fillExtrusion:t=>({u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t)}),fillExtrusionPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_height_factor:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t)}),fill:t=>({u_matrix:new e.UniformMatrix4f(t)}),fillPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),fillOutline:t=>({u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t)}),fillOutlinePattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),circle:t=>({u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}),collisionBox:t=>({u_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.Uniform2f(t)}),collisionCircle:t=>({u_matrix:new e.UniformMatrix4f(t),u_inv_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_viewport_size:new e.Uniform2f(t)}),debug:t=>({u_color:new e.UniformColor(t),u_matrix:new e.UniformMatrix4f(t),u_overlay:new e.Uniform1i(t),u_overlay_scale:new e.Uniform1f(t)}),clippingMask:t=>({u_matrix:new e.UniformMatrix4f(t)}),heatmap:t=>({u_extrude_scale:new e.Uniform1f(t),u_intensity:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}),heatmapTexture:t=>({u_image:new e.Uniform1i(t),u_color_ramp:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t)}),hillshade:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_latrange:new e.Uniform2f(t),u_light:new e.Uniform2f(t),u_shadow:new e.UniformColor(t),u_highlight:new e.UniformColor(t),u_accent:new e.UniformColor(t)}),hillshadePrepare:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_dimension:new e.Uniform2f(t),u_zoom:new e.Uniform1f(t),u_unpack:new e.Uniform4f(t)}),line:t=>({u_matrix:new e.UniformMatrix4f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_units_to_pixels:new e.Uniform2f(t),u_dash_image:new e.Uniform1i(t),u_gradient_image:new e.Uniform1i(t),u_image_height:new e.Uniform1f(t),u_texsize:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t),u_trim_offset:new e.Uniform2f(t)}),linePattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_texsize:new e.Uniform2f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_units_to_pixels:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t)}),raster:t=>({u_matrix:new e.UniformMatrix4f(t),u_tl_parent:new e.Uniform2f(t),u_scale_parent:new e.Uniform1f(t),u_fade_t:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_image0:new e.Uniform1i(t),u_image1:new e.Uniform1i(t),u_brightness_low:new e.Uniform1f(t),u_brightness_high:new e.Uniform1f(t),u_saturation_factor:new e.Uniform1f(t),u_contrast_factor:new e.Uniform1f(t),u_spin_weights:new e.Uniform3f(t),u_perspective_transform:new e.Uniform2f(t)}),symbolIcon:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_texture:new e.Uniform1i(t)}),symbolSDF:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_is_halo:new e.Uniform1i(t)}),symbolTextAndIcon:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texsize_icon:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_texture_icon:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_is_halo:new e.Uniform1i(t)}),background:t=>({u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_color:new e.UniformColor(t)}),backgroundPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_pattern_tl:new e.Uniform2f(t),u_pattern_br:new e.Uniform2f(t),u_texsize:new e.Uniform2f(t),u_pattern_size:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),terrainRaster:vi,terrainDepth:vi,skybox:t=>({u_matrix:new e.UniformMatrix4f(t),u_sun_direction:new e.Uniform3f(t),u_cubemap:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}),skyboxGradient:t=>({u_matrix:new e.UniformMatrix4f(t),u_color_ramp:new e.Uniform1i(t),u_center_direction:new e.Uniform3f(t),u_radius:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}),skyboxCapture:t=>({u_matrix_3f:new e.UniformMatrix3f(t),u_sun_direction:new e.Uniform3f(t),u_sun_intensity:new e.Uniform1f(t),u_color_tint_r:new e.Uniform4f(t),u_color_tint_m:new e.Uniform4f(t),u_luminance:new e.Uniform1f(t)}),globeRaster:t=>({u_proj_matrix:new e.UniformMatrix4f(t),u_globe_matrix:new e.UniformMatrix4f(t),u_normalize_matrix:new e.UniformMatrix4f(t),u_merc_matrix:new e.UniformMatrix4f(t),u_zoom_transition:new e.Uniform1f(t),u_merc_center:new e.Uniform2f(t),u_image0:new e.Uniform1i(t),u_grid_matrix:new e.UniformMatrix3f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_viewport:new e.Uniform2f(t)}),globeAtmosphere:t=>({u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_horizon:new e.Uniform1f(t),u_transition:new e.Uniform1f(t),u_fadeout_range:new e.Uniform1f(t),u_color:new e.Uniform4f(t),u_high_color:new e.Uniform4f(t),u_space_color:new e.Uniform4f(t),u_star_intensity:new e.Uniform1f(t),u_star_density:new e.Uniform1f(t),u_star_size:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t),u_horizon_angle:new e.Uniform1f(t),u_rotation_matrix:new e.UniformMatrix4f(t)})};let ao;function lo(t,i,o,r,n,s,a){const l=t.context,c=l.gl,h=t.transform,u=t.useProgram(\"collisionBox\"),_=[];let d=0,p=0;for(let m=0;m<r.length;m++){const f=r[m],g=i.getTile(f),v=g.getBucket(o);if(!v)continue;const x=xt(f,v,h);let y=x;0===n[0]&&0===n[1]||(y=t.translatePosMatrix(x,g,n,s));const b=a?v.textCollisionBox:v.iconCollisionBox,w=v.collisionCircleArray;if(w.length>0){const t=e.create(),i=y;e.mul(t,v.placementInvProjMatrix,h.glCoordMatrix),e.mul(t,t,v.placementViewportMatrix),_.push({circleArray:w,circleOffset:p,transform:i,invTransform:t,projection:v.getProjection()}),d+=w.length/4,p=d;}b&&(t.terrain&&t.terrain.setupElevationDraw(g,u),u.draw(l,c.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,Zi(y,h,g,v.getProjection()),o.id,b.layoutVertexBuffer,b.indexBuffer,b.segments,null,h.zoom,null,[b.collisionVertexBuffer,b.collisionVertexBufferExt]));}if(!a||!_.length)return;const m=t.useProgram(\"collisionCircle\"),f=new e.StructArrayLayout2f1f2i16;f.resize(4*d),f._trim();let g=0;for(const e of _)for(let t=0;t<e.circleArray.length/4;t++){const i=4*t,o=e.circleArray[i+0],r=e.circleArray[i+1],n=e.circleArray[i+2],s=e.circleArray[i+3];f.emplace(g++,o,r,n,s,0),f.emplace(g++,o,r,n,s,1),f.emplace(g++,o,r,n,s,2),f.emplace(g++,o,r,n,s,3);}(!ao||ao.length<2*d)&&(ao=function(t){const i=2*t,o=new e.StructArrayLayout3ui6;o.resize(i),o._trim();for(let e=0;e<i;e++){const t=6*e;o.uint16[t+0]=4*e+0,o.uint16[t+1]=4*e+1,o.uint16[t+2]=4*e+2,o.uint16[t+3]=4*e+2,o.uint16[t+4]=4*e+3,o.uint16[t+5]=4*e+0;}return o}(d));const v=l.createIndexBuffer(ao,!0),x=l.createVertexBuffer(f,e.collisionCircleLayout.members,!0);for(const i of _){const r={u_matrix:i.transform,u_inv_matrix:i.invTransform,u_camera_to_center_distance:(y=h).getCameraToCenterDistance(i.projection),u_viewport_size:[y.width,y.height]};m.draw(l,c.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,r,o.id,x,v,e.SegmentVector.simpleSegment(0,2*i.circleOffset,i.circleArray.length,i.circleArray.length/2),null,h.zoom);}var y;x.destroy(),v.destroy();}const co=e.create();function ho({width:t,height:i,anchor:o,textOffset:r,textScale:n},s){const{horizontalAlign:a,verticalAlign:l}=e.getAnchorAlignment(o),c=-(a-.5)*t,h=-(l-.5)*i,u=e.evaluateVariableOffset(o,r);return new e.pointGeometry((c/n+u[0])*s,(h/n+u[1])*s)}function uo(t,i,o,r,n,s,a,l,c,h,u){const _=t.text.placedSymbolArray,d=t.text.dynamicLayoutVertexArray,p=t.icon.dynamicLayoutVertexArray,m={},f=t.getProjection(),g=yt(l,f,s),v=s.elevation,x=f.upVectorScale(l.canonical,s.center.lat,s.worldSize).metersToTile;d.clear();for(let p=0;p<_.length;p++){const y=_.get(p),{tileAnchorX:b,tileAnchorY:w,numGlyphs:T}=y,E=t.allowVerticalPlacement&&!y.placedOrientation,C=y.hidden||!y.crossTileID||E?null:r[y.crossTileID];if(C){let r=0,_=0,p=0;if(v){const e=v?v.getAtTileOffset(l,b,w):0,[t,i,o]=f.upVector(l.canonical,b,w);r=e*t*x,_=e*i*x,p=e*o*x;}let[E,I,M,S]=rt(y.projectedAnchorX+r,y.projectedAnchorY+_,y.projectedAnchorZ+p,o?g:a);const D=nt(s.getCameraToCenterDistance(f),S);let A=n.evaluateSizeForFeature(t.textSizeData,h,y)*D/e.ONE_EM;o&&(A*=t.tilePixelRatio/c);const L=ho(C,A);o?(({x:E,y:I,z:M}=f.projectTilePoint(b+L.x,w+L.y,l.canonical)),[E,I,M]=rt(E+r,I+_,M+p,a)):(i&&L._rotate(-s.angle),E+=L.x,I+=L.y,M=0);const z=t.allowVerticalPlacement&&y.placedOrientation===e.WritingMode.vertical?Math.PI/2:0;for(let t=0;t<T;t++)e.addDynamicAttributes(d,E,I,M,z);u&&y.associatedIconIndex>=0&&(m[y.associatedIconIndex]={x:E,y:I,z:M,angle:z});}else pt(T,d);}if(u){p.clear();const i=t.icon.placedSymbolArray;for(let t=0;t<i.length;t++){const o=i.get(t),{numGlyphs:r}=o,n=m[t];if(o.hidden||!n)pt(r,p);else {const{x:t,y:i,z:o,angle:s}=n;for(let n=0;n<r;n++)e.addDynamicAttributes(p,t,i,o,s);}}t.icon.dynamicLayoutVertexBuffer.updateData(p);}t.text.dynamicLayoutVertexBuffer.updateData(d);}function _o(e,t,i){return i.iconsInText&&t?\"symbolTextAndIcon\":e?\"symbolSDF\":\"symbolIcon\"}function po(t,i,o,r,n,s,a,l,c,h,u,_){const d=t.context,p=d.gl,m=t.transform,f=\"map\"===l,g=\"map\"===c,v=f&&\"point\"!==o.layout.get(\"symbol-placement\"),x=f&&!g&&!v,y=void 0!==o.layout.get(\"symbol-sort-key\").constantOr(1);let b=!1;const w=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),T=[e.mercatorXfromLng(m.center.lng),e.mercatorYfromLat(m.center.lat)],E=o.layout.get(\"text-variable-anchor\"),C=\"globe\"===m.projection.name,I=[],M=[0,-1,0];let S=M;!C&&!m.mercatorFromTransition||f||(S=function(t){const i=t._camera.getWorldToCamera(t.worldSize,1),o=e.multiply([],i,t.globeMatrix);e.invert(o,o);const r=[0,0,0],n=[0,1,0,0];return e.transformMat4$1(n,n,o),r[0]=n[0],r[1]=n[1],r[2]=n[2],e.normalize(r,r),r}(m));for(const l of r){const r=i.getTile(l),c=r.getBucket(o);if(!c)continue;if(\"mercator\"===c.projection.name&&C)continue;const u=n?c.text:c.icon;if(!u||c.fullyClipped||!u.segments.get().length)continue;const _=u.programConfigurations.get(o.id),d=n||c.sdfIcons,w=n?c.textSizeData:c.iconSizeData,D=g||0!==m.pitch,A=e.evaluateSizeForZoom(w,m.zoom);let L,z,P,R,O=[0,0],B=null;if(n){if(z=r.glyphAtlasTexture,P=p.LINEAR,L=r.glyphAtlasTexture.size,c.iconsInText){O=r.imageAtlasTexture.size,B=r.imageAtlasTexture;const e=\"composite\"===w.kind||\"camera\"===w.kind;R=D||t.options.rotating||t.options.zooming||e?p.LINEAR:p.NEAREST;}}else {const e=1!==o.layout.get(\"icon-size\").constantOr(0)||c.iconsNeedLinear;z=r.imageAtlasTexture,P=d||t.options.rotating||t.options.zooming||e||D?p.LINEAR:p.NEAREST,L=r.imageAtlasTexture.size;}const k=\"globe\"===c.projection.name,F=k?S:M,U=k?e.globeToMercatorTransition(m.zoom):0,N=yt(l,c.getProjection(),m),G=m.calculatePixelsToTileUnitsMatrix(r),j=tt(N,r.tileID.canonical,g,f,m,c.getProjection(),G),Z=t.terrain&&g&&v?e.invert(e.create(),j):co,V=ot(N,r.tileID.canonical,g,f,m,c.getProjection(),G),W=E&&c.hasTextData(),X=\"none\"!==o.layout.get(\"icon-text-fit\")&&W&&c.hasIconData();if(v){const e=m.elevation,i=e?e.getAtTileOffsetFunc(l,m.center.lat,m.worldSize,c.getProjection()):null,o=it(N,r.tileID.canonical,g,f,m,c.getProjection(),G);at(c,N,t,n,o,V,g,h,i,l);}const q=v||n&&E||X,$=t.translatePosMatrix(N,r,s,a),H=q?co:j,Y=t.translatePosMatrix(V,r,s,a,!0),K=c.getProjection().createInversionMatrix(m,l.canonical),J=[];t.terrainRenderModeElevated()&&g&&J.push(\"PITCH_WITH_MAP_TERRAIN\"),k&&J.push(\"PROJECTION_GLOBE_VIEW\"),q&&J.push(\"PROJECTED_POS_ON_VIEWPORT\");const Q=d&&0!==o.paint.get(n?\"text-halo-width\":\"icon-halo-width\").constantOr(1);let ee;ee=d?c.iconsInText?oo(w.kind,A,x,g,t,$,H,Y,L,O,l,U,T,K,F,c.getProjection()):io(w.kind,A,x,g,t,$,H,Y,n,L,!0,l,U,T,K,F,c.getProjection()):to(w.kind,A,x,g,t,$,H,Y,n,L,l,U,T,K,F,c.getProjection());const te={program:t.useProgram(_o(d,n,c),_,J),buffers:u,uniformValues:ee,atlasTexture:z,atlasTextureIcon:B,atlasInterpolation:P,atlasInterpolationIcon:R,isSDF:d,hasHalo:Q,tile:r,labelPlaneMatrixInv:Z};if(y&&c.canOverlap){b=!0;const t=u.segments.get();for(const i of t)I.push({segments:new e.SegmentVector([i]),sortKey:i.sortKey,state:te});}else I.push({segments:u.segments,sortKey:0,state:te});}b&&I.sort(((e,t)=>e.sortKey-t.sortKey));for(const e of I){const i=e.state;if(t.terrain&&t.terrain.setupElevationDraw(i.tile,i.program,{useDepthForOcclusion:!C,labelPlaneMatrixInv:i.labelPlaneMatrixInv}),d.activeTexture.set(p.TEXTURE0),i.atlasTexture.bind(i.atlasInterpolation,p.CLAMP_TO_EDGE),i.atlasTextureIcon&&(d.activeTexture.set(p.TEXTURE1),i.atlasTextureIcon&&i.atlasTextureIcon.bind(i.atlasInterpolationIcon,p.CLAMP_TO_EDGE)),i.isSDF){const r=i.uniformValues;i.hasHalo&&(r.u_is_halo=1,mo(i.buffers,e.segments,o,t,i.program,w,u,_,r)),r.u_is_halo=0;}mo(i.buffers,e.segments,o,t,i.program,w,u,_,i.uniformValues);}}function mo(t,i,o,r,n,s,a,l,c){const h=r.context,u=[t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer,t.globeExtVertexBuffer];n.draw(h,h.gl.TRIANGLES,s,a,l,e.CullFaceMode.disabled,c,o.id,t.layoutVertexBuffer,t.indexBuffer,i,o.paint,r.transform.zoom,t.programConfigurations.get(o.id),u);}function fo(t,i,o,r,n,s,a){const l=t.context.gl,c=o.paint.get(\"fill-pattern\"),h=c&&c.constantOr(1);let u,_,d,p,m;a?(_=h&&!o.getPaintProperty(\"fill-outline-color\")?\"fillOutlinePattern\":\"fillOutline\",u=l.LINES):(_=h?\"fillPattern\":\"fill\",u=l.TRIANGLES);for(const f of r){const r=i.getTile(f);if(h&&!r.patternsLoaded())continue;const g=r.getBucket(o);if(!g)continue;t.prepareDrawTile();const v=g.programConfigurations.get(o.id),x=t.useProgram(_,v);h&&(t.context.activeTexture.set(l.TEXTURE0),r.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),v.updatePaintBuffers());const y=c.constantOr(null);if(y&&r.imageAtlas){const e=r.imageAtlas.patternPositions[y.toString()];e&&v.setConstantPatternPositions(e);}const b=t.translatePosMatrix(f.projMatrix,r,o.paint.get(\"fill-translate\"),o.paint.get(\"fill-translate-anchor\"));if(a){p=g.indexBuffer2,m=g.segments2;const e=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];d=\"fillOutlinePattern\"===_&&h?Ui(b,t,r,e):Fi(b,e);}else p=g.indexBuffer,m=g.segments,d=h?ki(b,t,r):Bi(b);t.prepareDrawProgram(t.context,x,f.toUnwrapped()),x.draw(t.context,u,n,t.stencilModeForClipping(f),s,e.CullFaceMode.disabled,d,o.id,g.layoutVertexBuffer,p,m,o.paint,t.transform.zoom,v);}}function go(t,i,o,r,n,s,a){const l=t.context,c=l.gl,h=t.transform,u=o.paint.get(\"fill-extrusion-pattern\"),_=u.constantOr(1),d=o.paint.get(\"fill-extrusion-opacity\"),p=[o.paint.get(\"fill-extrusion-ambient-occlusion-intensity\"),o.paint.get(\"fill-extrusion-ambient-occlusion-radius\")],m=o.layout.get(\"fill-extrusion-edge-radius\"),f=\"globe\"===h.projection.name?e.fillExtrusionHeightLift():0,g=\"globe\"===h.projection.name,v=g?e.globeToMercatorTransition(h.zoom):0,x=[e.mercatorXfromLng(h.center.lng),e.mercatorYfromLat(h.center.lat)],y=[];g&&(y.push(\"PROJECTION_GLOBE_VIEW\"),t.style.terrainSetForDrapingOnly()&&y.push(\"TERRAIN\")),p[0]>0&&y.push(\"FAUX_AO\");for(const b of r){const r=i.getTile(b),w=r.getBucket(o);if(!w||w.projection.name!==h.projection.name)continue;const T=w.programConfigurations.get(o.id),E=t.useProgram(_?\"fillExtrusionPattern\":\"fillExtrusion\",T,y);if(t.terrain){const e=t.terrain;if(t.style.terrainSetForDrapingOnly())e.setupElevationDraw(r,E,{useMeterToDem:!0});else {if(!w.enableTerrain)continue;if(e.setupElevationDraw(r,E,{useMeterToDem:!0}),vo(l,i,b,w,o,e),!w.centroidVertexBuffer){const e=E.attributes.a_centroid_pos;void 0!==e&&c.vertexAttrib2f(e,0,0);}}}_&&(t.context.activeTexture.set(c.TEXTURE0),r.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),T.updatePaintBuffers());const C=u.constantOr(null);if(C&&r.imageAtlas){const e=r.imageAtlas.patternPositions[C.toString()];e&&T.setConstantPatternPositions(e);}const I=t.translatePosMatrix(b.projMatrix,r,o.paint.get(\"fill-extrusion-translate\"),o.paint.get(\"fill-extrusion-translate-anchor\")),M=h.projection.createInversionMatrix(h,b.canonical),S=o.paint.get(\"fill-extrusion-vertical-gradient\"),D=_?Oi(I,t,S,d,p,m,b,r,f,v,x,M):Ri(I,t,S,d,p,m,b,f,v,x,M);t.prepareDrawProgram(l,E,b.toUnwrapped());const A=[];t.terrain&&A.push(w.centroidVertexBuffer),g&&A.push(w.layoutVertexExtBuffer),E.draw(l,l.gl.TRIANGLES,n,s,a,e.CullFaceMode.backCCW,D,o.id,w.layoutVertexBuffer,w.indexBuffer,w.segments,o.paint,t.transform.zoom,T,A);}}function vo(t,i,o,r,n,s){const a=[t=>{let i=t.canonical.x-1,o=t.wrap;return i<0&&(i=(1<<t.canonical.z)-1,o--),new e.OverscaledTileID(t.overscaledZ,o,t.canonical.z,i,t.canonical.y)},t=>{let i=t.canonical.x+1,o=t.wrap;return i===1<<t.canonical.z&&(i=0,o++),new e.OverscaledTileID(t.overscaledZ,o,t.canonical.z,i,t.canonical.y)},t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1),t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)],l=e=>{const t=i.getSource().minzoom,o=e=>{const t=i.getTileByID(e);if(t&&t.hasData())return t.getBucket(n)},r=[0,-1,1];for(const i of r){if(e.overscaledZ+i<t)continue;const r=o(e.calculateScaledKey(e.overscaledZ+i));if(r)return r}},c=[0,0,0],h=(t,i)=>(c[0]=Math.min(t.min.y,i.min.y),c[1]=Math.max(t.max.y,i.max.y),c[2]=e.EXTENT-i.min.x>t.max.x?i.min.x-e.EXTENT:t.max.x,c),u=(t,i)=>(c[0]=Math.min(t.min.x,i.min.x),c[1]=Math.max(t.max.x,i.max.x),c[2]=e.EXTENT-i.min.y>t.max.y?i.min.y-e.EXTENT:t.max.y,c),_=[(e,t)=>h(e,t),(e,t)=>h(t,e),(e,t)=>u(e,t),(e,t)=>u(t,e)],d=new e.pointGeometry(0,0);let p,m,f;const g=(t,i,r,n,a)=>{const l=[[n?r:t,n?t:r,0],[n?r:i,n?i:r,0]],c=a<0?e.EXTENT+a:a,h=[n?c:(t+i)/2,n?(t+i)/2:c,0];return 0===r&&a<0||0!==r&&a>0?s.getForTilePoints(f,[h],!0,m):l.push(h),s.getForTilePoints(o,l,!0,p),Math.max(l[0][2],l[1][2],h[2])/s.exaggeration()};for(let t=0;t<4;t++){const i=(t<2?1:5)-t,n=r.borders[t];if(0===n.length)continue;const c=f=a[t](o),h=l(c);if(!(h&&h instanceof e.FillExtrusionBucket&&h.enableTerrain))continue;if(r.borderDoneWithNeighborZ[t]===h.canonical.z&&h.borderDoneWithNeighborZ[i]===r.canonical.z)continue;if(m=s.findDEMTileFor(c),!m||!m.dem)continue;if(!p){const e=s.findDEMTileFor(o);if(!e||!e.dem)return;p=e;}const u=h.borders[i];let v=0;const x=h.borderDoneWithNeighborZ[i]!==r.canonical.z;if(r.canonical.z===h.canonical.z){for(let o=0;o<n.length;o++){const s=r.featuresOnBorder[n[o]],a=s.borders[t];let l;for(;v<u.length&&(l=h.featuresOnBorder[u[v]],!(l.borders[i][1]>a[0]+3));)x&&h.encodeCentroid(void 0,l,!1),v++;if(l&&v<u.length){const o=v;let n=0;for(;!(l.borders[i][0]>a[1]-3)&&(n++,++v!==u.length);)l=h.featuresOnBorder[u[v]];if(l=h.featuresOnBorder[u[o]],s.intersectsCount()>1||l.intersectsCount()>1||1!==n){1!==n&&(v=o),r.encodeCentroid(void 0,s,!1),x&&h.encodeCentroid(void 0,l,!1);continue}const c=_[t](s,l),p=t%2?e.EXTENT-1:0;d.x=g(c[0],Math.min(e.EXTENT-1,c[1]),p,t<2,c[2]),d.y=0,r.encodeCentroid(d,s,!1),x&&h.encodeCentroid(d,l,!1);}else r.encodeCentroid(void 0,s,!1);}r.borderDoneWithNeighborZ[t]=h.canonical.z,r.needsCentroidUpdate=!0,x&&(h.borderDoneWithNeighborZ[i]=r.canonical.z,h.needsCentroidUpdate=!0);}else {for(const e of n)r.encodeCentroid(void 0,r.featuresOnBorder[e],!1);if(x){for(const e of u)h.encodeCentroid(void 0,h.featuresOnBorder[e],!1);h.borderDoneWithNeighborZ[i]=r.canonical.z,h.needsCentroidUpdate=!0;}r.borderDoneWithNeighborZ[t]=h.canonical.z,r.needsCentroidUpdate=!0;}}(r.needsCentroidUpdate||!r.centroidVertexBuffer&&0!==r.centroidVertexArray.length)&&r.uploadCentroid(t);}const xo=new e.Color(1,0,0,1),yo=new e.Color(0,1,0,1),bo=new e.Color(0,0,1,1),wo=new e.Color(1,0,1,1),To=new e.Color(0,1,1,1);function Eo(t,i,o){const r=t.context,n=t.transform,s=r.gl,a=\"globe\"===n.projection.name,l=a?[\"PROJECTION_GLOBE_VIEW\"]:null;let c=o.projMatrix;if(a&&e.globeToMercatorTransition(n.zoom)>0){const t=e.transitionTileAABBinECEF(o.canonical,n),i=e.globeDenormalizeECEF(t);c=e.multiply(new Float32Array(16),n.globeMatrix,i),e.multiply(c,n.projMatrix,c);}const h=t.useProgram(\"debug\",null,l),u=i.getTileByID(o.key);t.terrain&&t.terrain.setupElevationDraw(u,h);const _=e.DepthMode.disabled,d=e.StencilMode.disabled,p=t.colorModeForRenderPass(),m=\"$debug\";r.activeTexture.set(s.TEXTURE0),t.emptyTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),a?u._makeGlobeTileDebugBuffers(t.context,n):u._makeDebugTileBoundsBuffers(t.context,n.projection);const f=u._tileDebugBuffer||t.debugBuffer,g=u._tileDebugIndexBuffer||t.debugIndexBuffer,v=u._tileDebugSegments||t.debugSegments;h.draw(r,s.LINE_STRIP,_,d,p,e.CullFaceMode.disabled,Vi(c,e.Color.red),m,f,g,v,null,null,null,[u._globeTileDebugBorderBuffer]);const x=u.latestRawTileData,y=Math.floor((x&&x.byteLength||0)/1024),b=i.getTile(o).tileSize,w=512/Math.min(b,512)*(o.overscaledZ/n.zoom)*.5;let T=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(T+=` => ${o.overscaledZ}`),T+=` ${y}kb`,function(e,t){e.initDebugOverlayCanvas();const i=e.debugOverlayCanvas,o=e.context.gl,r=e.debugOverlayCanvas.getContext(\"2d\");r.clearRect(0,0,i.width,i.height),r.shadowColor=\"white\",r.shadowBlur=2,r.lineWidth=1.5,r.strokeStyle=\"white\",r.textBaseline=\"top\",r.font=\"bold 36px Open Sans, sans-serif\",r.fillText(t,5,5),r.strokeText(t,5,5),e.debugOverlayTexture.update(i),e.debugOverlayTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE);}(t,T);const E=u._tileDebugTextBuffer||t.debugBuffer,C=u._tileDebugTextIndexBuffer||t.quadTriangleIndexBuffer,I=u._tileDebugTextSegments||t.debugSegments;h.draw(r,s.TRIANGLES,_,d,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,Vi(c,e.Color.transparent,w),m,E,C,I,null,null,null,[u._globeTileDebugTextBuffer]);}function Co(e,t,i,o){Mo(e,0,t+i/2,e.transform.width,i,o);}function Io(e,t,i,o){Mo(e,t-i/2,0,i,e.transform.height,o);}function Mo(t,i,o,r,n,s){const a=t.context,l=a.gl;l.enable(l.SCISSOR_TEST),l.scissor(i*e.exported.devicePixelRatio,o*e.exported.devicePixelRatio,r*e.exported.devicePixelRatio,n*e.exported.devicePixelRatio),a.clear({color:s}),l.disable(l.SCISSOR_TEST);}const So=e.createLayout([{name:\"a_pos_3f\",components:3,type:\"Float32\"}]),{members:Do}=So;function Ao(e,t,i,o){e.emplaceBack(t,i,o);}class Lo{constructor(t){this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,Ao(this.vertexArray,-1,-1,1),Ao(this.vertexArray,1,-1,1),Ao(this.vertexArray,-1,1,1),Ao(this.vertexArray,1,1,1),Ao(this.vertexArray,-1,-1,-1),Ao(this.vertexArray,1,-1,-1),Ao(this.vertexArray,-1,1,-1),Ao(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=t.createVertexBuffer(this.vertexArray,Do),this.indexBuffer=t.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12);}}function zo(t,i,o,r,n,s){const a=t.gl,l=i.paint.get(\"sky-atmosphere-color\"),c=i.paint.get(\"sky-atmosphere-halo-color\"),h=i.paint.get(\"sky-atmosphere-sun-intensity\"),u=((e,t,i,o,r)=>({u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:i,u_color_tint_r:[o.r,o.g,o.b,o.a],u_color_tint_m:[r.r,r.g,r.b,r.a],u_luminance:5e-5}))(e.fromMat4(e.create$1(),r),n,h,l,c);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+s,i.skyboxTexture,0),o.draw(t,a.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,u,\"skyboxCapture\",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment);}const Po=e.createLayout([{type:\"Float32\",name:\"a_pos\",components:3},{type:\"Float32\",name:\"a_uv\",components:2}]);class Ro{constructor(t){const i=new e.StructArrayLayout5f20;i.emplaceBack(-1,1,1,0,0),i.emplaceBack(1,1,1,1,0),i.emplaceBack(1,-1,1,1,1),i.emplaceBack(-1,-1,1,0,1);const o=new e.StructArrayLayout3ui6;o.emplaceBack(0,1,2),o.emplaceBack(2,3,0),this.vertexBuffer=t.createVertexBuffer(i,Po.members),this.indexBuffer=t.createIndexBuffer(o),this.segments=e.SegmentVector.simpleSegment(0,0,4,2);}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy();}}const Oo={symbol:function(t,i,o,r,n){if(\"translucent\"!==t.renderPass)return;const s=e.StencilMode.disabled,a=t.colorModeForRenderPass();o.layout.get(\"text-variable-anchor\")&&function(t,i,o,r,n,s,a){const l=i.transform,c=\"map\"===n,h=\"map\"===s;for(const i of t){const t=r.getTile(i),n=t.getBucket(o);if(!n||!n.text||!n.text.segments.get().length)continue;const s=e.evaluateSizeForZoom(n.textSizeData,l.zoom),u=yt(i,n.getProjection(),l),_=l.calculatePixelsToTileUnitsMatrix(t),d=tt(u,t.tileID.canonical,h,c,l,n.getProjection(),_),p=\"none\"!==o.layout.get(\"icon-text-fit\")&&n.hasIconData();if(s){const o=Math.pow(2,l.zoom-t.tileID.overscaledZ);uo(n,c,h,a,e.symbolSize,l,d,i,o,s,p);}}}(r,t,o,i,o.layout.get(\"text-rotation-alignment\"),o.layout.get(\"text-pitch-alignment\"),n),0!==o.paint.get(\"icon-opacity\").constantOr(1)&&po(t,i,o,r,!1,o.paint.get(\"icon-translate\"),o.paint.get(\"icon-translate-anchor\"),o.layout.get(\"icon-rotation-alignment\"),o.layout.get(\"icon-pitch-alignment\"),o.layout.get(\"icon-keep-upright\"),s,a),0!==o.paint.get(\"text-opacity\").constantOr(1)&&po(t,i,o,r,!0,o.paint.get(\"text-translate\"),o.paint.get(\"text-translate-anchor\"),o.layout.get(\"text-rotation-alignment\"),o.layout.get(\"text-pitch-alignment\"),o.layout.get(\"text-keep-upright\"),s,a),i.map.showCollisionBoxes&&(lo(t,i,o,r,o.paint.get(\"text-translate\"),o.paint.get(\"text-translate-anchor\"),!0),lo(t,i,o,r,o.paint.get(\"icon-translate\"),o.paint.get(\"icon-translate-anchor\"),!1));},circle:function(t,i,o,r){if(\"translucent\"!==t.renderPass)return;const n=o.paint.get(\"circle-opacity\"),s=o.paint.get(\"circle-stroke-width\"),a=o.paint.get(\"circle-stroke-opacity\"),l=void 0!==o.layout.get(\"circle-sort-key\").constantOr(1);if(0===n.constantOr(1)&&(0===s.constantOr(1)||0===a.constantOr(1)))return;const c=t.context,h=c.gl,u=t.transform,_=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),d=e.StencilMode.disabled,p=t.colorModeForRenderPass(),m=\"globe\"===u.projection.name,f=[e.mercatorXfromLng(u.center.lng),e.mercatorYfromLat(u.center.lat)],g=[];for(let n=0;n<r.length;n++){const s=r[n],a=i.getTile(s),c=a.getBucket(o);if(!c||c.projection.name!==u.projection.name)continue;const h=c.programConfigurations.get(o.id),_=ji(o);m&&_.push(\"PROJECTION_GLOBE_VIEW\");const d=t.useProgram(\"circle\",h,_),p=c.layoutVertexBuffer,v=c.globeExtVertexBuffer,x=c.indexBuffer,y=u.projection.createInversionMatrix(u,s.canonical),b={programConfiguration:h,program:d,layoutVertexBuffer:p,globeExtVertexBuffer:v,indexBuffer:x,uniformValues:Gi(t,s,a,y,f,o),tile:a};if(l){const t=c.segments.get();for(const i of t)g.push({segments:new e.SegmentVector([i]),sortKey:i.sortKey,state:b});}else g.push({segments:c.segments,sortKey:0,state:b});}l&&g.sort(((e,t)=>e.sortKey-t.sortKey));const v={useDepthForOcclusion:!m};for(const i of g){const{programConfiguration:r,program:n,layoutVertexBuffer:s,globeExtVertexBuffer:a,indexBuffer:l,uniformValues:m,tile:f}=i.state,g=i.segments;t.terrain&&t.terrain.setupElevationDraw(f,n,v),t.prepareDrawProgram(c,n,f.tileID.toUnwrapped()),n.draw(c,h.TRIANGLES,_,d,p,e.CullFaceMode.disabled,m,o.id,s,l,g,o.paint,u.zoom,r,[a]);}},heatmap:function(t,i,o,r){if(0!==o.paint.get(\"heatmap-opacity\"))if(\"offscreen\"===t.renderPass){const n=t.context,s=n.gl,a=e.StencilMode.disabled,l=new e.ColorMode([s.ONE,s.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,i,o){const r=e.gl,n=t.width*o,s=t.height*o;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,n,s]);let a=i.heatmapFbo;if(!a||a&&(a.width!==n||a.height!==s)){a&&a.destroy();const t=r.createTexture();r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),a=i.heatmapFbo=e.createFramebuffer(n,s,!1),function(e,t,i,o,r,n){const s=e.gl;s.texImage2D(s.TEXTURE_2D,0,s.RGBA,r,n,0,s.RGBA,e.extRenderToTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:s.UNSIGNED_BYTE,null),o.colorAttachment.set(i);}(e,0,t,a,n,s);}else r.bindTexture(r.TEXTURE_2D,a.colorAttachment.get()),e.bindFramebuffer.set(a.framebuffer);}(n,t,o,\"globe\"===t.transform.projection.name?.5:.25),n.clear({color:e.Color.transparent});const c=t.transform,h=\"globe\"===c.projection.name,u=h?[\"PROJECTION_GLOBE_VIEW\"]:null,_=h?e.CullFaceMode.frontCCW:e.CullFaceMode.disabled,d=[e.mercatorXfromLng(c.center.lng),e.mercatorYfromLat(c.center.lat)];for(let p=0;p<r.length;p++){const m=r[p];if(i.hasRenderableParent(m))continue;const f=i.getTile(m),g=f.getBucket(o);if(!g||g.projection.name!==c.projection.name)continue;const v=g.programConfigurations.get(o.id),x=t.useProgram(\"heatmap\",v,u),{zoom:y}=t.transform;t.terrain&&t.terrain.setupElevationDraw(f,x),t.prepareDrawProgram(n,x,m.toUnwrapped());const b=c.projection.createInversionMatrix(c,m.canonical);x.draw(n,s.TRIANGLES,e.DepthMode.disabled,a,l,_,Xi(t,m,f,b,d,y,o.paint.get(\"heatmap-intensity\")),o.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,o.paint,t.transform.zoom,v,h?[g.globeExtVertexBuffer]:null);}n.viewport.set([0,0,t.width,t.height]);}else \"translucent\"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,i){const o=t.context,r=o.gl,n=i.heatmapFbo;if(!n)return;o.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,n.colorAttachment.get()),o.activeTexture.set(r.TEXTURE1);let s=i.colorRampTexture;s||(s=i.colorRampTexture=new e.Texture(o,i.colorRamp,r.RGBA)),s.bind(r.LINEAR,r.CLAMP_TO_EDGE),t.useProgram(\"heatmapTexture\").draw(o,r.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,((e,t,i,o)=>({u_image:0,u_color_ramp:1,u_opacity:t.paint.get(\"heatmap-opacity\")}))(0,i),i.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,i.paint,t.transform.zoom);}(t,o));},line:function(t,i,o,r){if(\"translucent\"!==t.renderPass)return;const n=o.paint.get(\"line-opacity\"),s=o.paint.get(\"line-width\");if(0===n.constantOr(1)||0===s.constantOr(1))return;const a=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),c=t.terrain&&t.terrain.renderingToTexture?1:e.exported.devicePixelRatio,h=o.paint.get(\"line-dasharray\"),u=h.constantOr(1),_=o.layout.get(\"line-cap\"),d=o.paint.get(\"line-pattern\"),p=d.constantOr(1),m=o.paint.get(\"line-gradient\"),f=p?\"linePattern\":\"line\",g=t.context,v=g.gl,x=(e=>{const t=[];Ki(e)&&t.push(\"RENDER_LINE_DASH\"),e.paint.get(\"line-gradient\")&&t.push(\"RENDER_LINE_GRADIENT\");const i=e.paint.get(\"line-trim-offset\");0===i[0]&&0===i[1]||t.push(\"RENDER_LINE_TRIM_OFFSET\");const o=e.paint.get(\"line-pattern\").constantOr(1),r=1!==e.paint.get(\"line-opacity\").constantOr(1);return !o&&r&&t.push(\"RENDER_LINE_ALPHA_DISCARD\"),t})(o);let y=x.includes(\"RENDER_LINE_ALPHA_DISCARD\");t.terrain&&t.terrain.clipOrMaskOverlapStencilType()&&(y=!1);for(const n of r){const r=i.getTile(n);if(p&&!r.patternsLoaded())continue;const s=r.getBucket(o);if(!s)continue;t.prepareDrawTile();const b=s.programConfigurations.get(o.id),w=t.useProgram(f,b,x),T=d.constantOr(null);if(T&&r.imageAtlas){const e=r.imageAtlas.patternPositions[T.toString()];e&&b.setConstantPatternPositions(e);}const E=h.constantOr(null),C=_.constantOr(null);if(!p&&E&&C&&r.lineAtlas){const e=r.lineAtlas.getDash(E,C);e&&b.setConstantPatternPositions(e);}let[I,M]=o.paint.get(\"line-trim-offset\");if(\"round\"===C||\"square\"===C){const e=1;I!==M&&(0===I&&(I-=e),1===M&&(M+=e));}const S=t.terrain?n.projMatrix:null,D=p?$i(t,r,o,S,c):qi(t,r,o,S,s.lineClipsArray.length,c,[I,M]);if(m){const r=s.gradients[o.id];let a=r.texture;if(o.gradientVersion!==r.version){let l=256;if(o.stepInterpolant){const o=i.getSource().maxzoom,r=n.canonical.z===o?Math.ceil(1<<t.transform.maxZoom-n.canonical.z):1;l=e.clamp(e.nextPowerOfTwo(s.maxLineLength/e.EXTENT*1024*r),256,g.maxTextureSize);}r.gradient=e.renderColorRamp({expression:o.gradientExpression(),evaluationKey:\"lineProgress\",resolution:l,image:r.gradient||void 0,clips:s.lineClipsArray}),r.texture?r.texture.update(r.gradient):r.texture=new e.Texture(g,r.gradient,v.RGBA),r.version=o.gradientVersion,a=r.texture;}g.activeTexture.set(v.TEXTURE1),a.bind(o.stepInterpolant?v.NEAREST:v.LINEAR,v.CLAMP_TO_EDGE);}u&&(g.activeTexture.set(v.TEXTURE0),r.lineAtlasTexture.bind(v.LINEAR,v.REPEAT),b.updatePaintBuffers()),p&&(g.activeTexture.set(v.TEXTURE0),r.imageAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),b.updatePaintBuffers()),t.prepareDrawProgram(g,w,n.toUnwrapped());const A=i=>{w.draw(g,v.TRIANGLES,a,i,l,e.CullFaceMode.disabled,D,o.id,s.layoutVertexBuffer,s.indexBuffer,s.segments,o.paint,t.transform.zoom,b,[s.layoutVertexBuffer2]);};if(y){const i=t.stencilModeForClipping(n).ref;0===i&&t.terrain&&g.clear({stencil:0});const o={func:v.EQUAL,mask:255};D.u_alpha_discard_threshold=.8,A(new e.StencilMode(o,i,255,v.KEEP,v.KEEP,v.INVERT)),D.u_alpha_discard_threshold=0,A(new e.StencilMode(o,i,255,v.KEEP,v.KEEP,v.KEEP));}else A(t.stencilModeForClipping(n));}y&&(t.resetStencilClippingMasks(),t.terrain&&g.clear({stencil:0}));},fill:function(t,i,o,r){const n=o.paint.get(\"fill-color\"),s=o.paint.get(\"fill-opacity\");if(0===s.constantOr(1))return;const a=t.colorModeForRenderPass(),l=o.paint.get(\"fill-pattern\"),c=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===n.constantOr(e.Color.transparent).a&&1===s.constantOr(0)?\"opaque\":\"translucent\";if(t.renderPass===c){const n=t.depthModeForSublayer(1,\"opaque\"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);fo(t,i,o,r,n,a,!1);}if(\"translucent\"===t.renderPass&&o.paint.get(\"fill-antialias\")){const n=t.depthModeForSublayer(o.getPaintProperty(\"fill-outline-color\")?2:0,e.DepthMode.ReadOnly);fo(t,i,o,r,n,a,!0);}},\"fill-extrusion\":function(t,i,o,r){const n=o.paint.get(\"fill-extrusion-opacity\");if(0!==n&&\"translucent\"===t.renderPass){const s=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==n||o.paint.get(\"fill-extrusion-pattern\").constantOr(1))go(t,i,o,r,s,e.StencilMode.disabled,e.ColorMode.disabled),go(t,i,o,r,s,t.stencilModeFor3D(),t.colorModeForRenderPass()),t.resetStencilClippingMasks();else {const n=t.colorModeForRenderPass();go(t,i,o,r,s,e.StencilMode.disabled,n);}}},hillshade:function(t,i,o,r){if(\"offscreen\"!==t.renderPass&&\"translucent\"!==t.renderPass)return;const n=t.context,s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),a=t.colorModeForRenderPass(),l=t.terrain&&t.terrain.renderingToTexture,[c,h]=\"translucent\"!==t.renderPass||l?[{},r]:t.stencilConfigForOverlap(r);for(const r of h){const n=i.getTile(r);if(n.needsHillshadePrepare&&\"offscreen\"===t.renderPass)gi(t,n,o,s,e.StencilMode.disabled,a);else if(\"translucent\"===t.renderPass){const e=l&&t.terrain?t.terrain.stencilModeForRTTOverlap(r):c[r.overscaledZ];mi(t,r,n,o,s,e,a);}}n.viewport.set([0,0,t.width,t.height]),t.resetStencilClippingMasks();},raster:function(t,i,o,r,n,s){if(\"translucent\"!==t.renderPass)return;if(0===o.paint.get(\"raster-opacity\"))return;if(!r.length)return;const a=t.context,l=a.gl,c=i.getSource(),h=t.useProgram(\"raster\"),u=t.colorModeForRenderPass(),_=t.terrain&&t.terrain.renderingToTexture,[d,p]=c instanceof Ae||_?[{},r]:t.stencilConfigForOverlap(r),m=p[p.length-1].overscaledZ,f=!t.options.moving;for(const r of p){const n=_?e.DepthMode.disabled:t.depthModeForSublayer(r.overscaledZ-m,1===o.paint.get(\"raster-opacity\")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,l.LESS),p=r.toUnwrapped(),g=i.getTile(r);if(_&&(!g||!g.hasData()))continue;const v=_?r.projMatrix:t.transform.calculateProjMatrix(p,f),x=t.terrain&&_?t.terrain.stencilModeForRTTOverlap(r):d[r.overscaledZ],y=s?0:o.paint.get(\"raster-fade-duration\");g.registerFadeDuration(y);const b=i.findLoadedParent(r,0),w=Ii(g,b,i,t.transform,y);let T,E;t.terrain&&t.terrain.prepareDrawTile();const C=\"nearest\"===o.paint.get(\"raster-resampling\")?l.NEAREST:l.LINEAR;a.activeTexture.set(l.TEXTURE0),g.texture.bind(C,l.CLAMP_TO_EDGE),a.activeTexture.set(l.TEXTURE1),b?(b.texture.bind(C,l.CLAMP_TO_EDGE),T=Math.pow(2,b.tileID.overscaledZ-g.tileID.overscaledZ),E=[g.tileID.canonical.x*T%1,g.tileID.canonical.y*T%1]):g.texture.bind(C,l.CLAMP_TO_EDGE);const I=Ji(v,E||[0,0],T||1,w,o,c instanceof Ae?c.perspectiveTransform:[0,0]);if(t.prepareDrawProgram(a,h,p),c instanceof Ae)c.boundsBuffer&&c.boundsSegments&&h.draw(a,l.TRIANGLES,n,e.StencilMode.disabled,u,e.CullFaceMode.disabled,I,o.id,c.boundsBuffer,t.quadTriangleIndexBuffer,c.boundsSegments);else {const{tileBoundsBuffer:i,tileBoundsIndexBuffer:r,tileBoundsSegments:s}=t.getTileBoundsBuffers(g);h.draw(a,l.TRIANGLES,n,x,u,e.CullFaceMode.disabled,I,o.id,i,r,s);}}t.resetStencilClippingMasks();},background:function(t,i,o,r){const n=o.paint.get(\"background-color\"),s=o.paint.get(\"background-opacity\");if(0===s)return;const a=t.context,l=a.gl,c=t.transform,h=c.tileSize,u=o.paint.get(\"background-pattern\");if(t.isPatternMissing(u))return;const _=!u&&1===n.a&&1===s&&t.opaquePassEnabledForLayer()?\"opaque\":\"translucent\";if(t.renderPass!==_)return;const d=e.StencilMode.disabled,p=t.depthModeForSublayer(0,\"opaque\"===_?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),m=t.colorModeForRenderPass(),f=t.useProgram(u?\"backgroundPattern\":\"background\");let g,v=r;v||(g=t.getBackgroundTiles(),v=Object.values(g).map((e=>e.tileID))),u&&(a.activeTexture.set(l.TEXTURE0),t.imageManager.bind(t.context));for(const _ of v){const v=_.toUnwrapped(),x=r?_.projMatrix:t.transform.calculateProjMatrix(v);t.prepareDrawTile();const y=i?i.getTile(_):g?g[_.key]:new e.Tile(_,h,c.zoom,t),b=u?no(x,s,t,u,{tileID:_,tileSize:h}):ro(x,s,n);t.prepareDrawProgram(a,f,v);const{tileBoundsBuffer:w,tileBoundsIndexBuffer:T,tileBoundsSegments:E}=t.getTileBoundsBuffers(y);f.draw(a,l.TRIANGLES,p,d,m,e.CullFaceMode.disabled,b,o.id,w,T,E);}},sky:function(t,i,o){const r=t.transform,n=\"mercator\"===r.projection.name||\"globe\"===r.projection.name?1:e.smoothstep(7,8,r.zoom),s=o.paint.get(\"sky-opacity\")*n;if(0===s)return;const a=t.context,l=o.paint.get(\"sky-type\"),c=new e.DepthMode(a.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),h=t.frameCounter/1e3%1;\"atmosphere\"===l?\"offscreen\"===t.renderPass?o.needsSkyboxCapture(t)&&(function(t,i,o,r){const n=t.context,s=n.gl;let a=i.skyboxFbo;if(!a){a=i.skyboxFbo=n.createFramebuffer(32,32,!1),i.skyboxGeometry=new Lo(n),i.skyboxTexture=n.gl.createTexture(),s.bindTexture(s.TEXTURE_CUBE_MAP,i.skyboxTexture),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_MAG_FILTER,s.LINEAR);for(let e=0;e<6;++e)s.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,s.RGBA,32,32,0,s.RGBA,s.UNSIGNED_BYTE,null);}n.bindFramebuffer.set(a.framebuffer),n.viewport.set([0,0,32,32]);const l=i.getCenter(t,!0),c=t.useProgram(\"skyboxCapture\"),h=new Float64Array(16);e.identity(h),e.rotateY(h,h,.5*-Math.PI),zo(n,i,c,h,l,0),e.identity(h),e.rotateY(h,h,.5*Math.PI),zo(n,i,c,h,l,1),e.identity(h),e.rotateX(h,h,.5*-Math.PI),zo(n,i,c,h,l,2),e.identity(h),e.rotateX(h,h,.5*Math.PI),zo(n,i,c,h,l,3),e.identity(h),zo(n,i,c,h,l,4),e.identity(h),e.rotateY(h,h,Math.PI),zo(n,i,c,h,l,5),n.viewport.set([0,0,t.width,t.height]);}(t,o),o.markSkyboxValid(t)):\"sky\"===t.renderPass&&function(t,i,o,r,n){const s=t.context,a=s.gl,l=t.transform,c=t.useProgram(\"skybox\");s.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_CUBE_MAP,i.skyboxTexture);const h=((e,t,i,o,r)=>({u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:o,u_temporal_offset:r}))(l.skyboxMatrix,i.getCenter(t,!1),0,r,n);t.prepareDrawProgram(s,c),c.draw(s,a.TRIANGLES,o,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,h,\"skybox\",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment);}(t,o,c,s,h):\"gradient\"===l&&\"sky\"===t.renderPass&&function(t,i,o,r,n){const s=t.context,a=s.gl,l=t.transform,c=t.useProgram(\"skyboxGradient\");i.skyboxGeometry||(i.skyboxGeometry=new Lo(s)),s.activeTexture.set(a.TEXTURE0);let h=i.colorRampTexture;h||(h=i.colorRampTexture=new e.Texture(s,i.colorRamp,a.RGBA)),h.bind(a.LINEAR,a.CLAMP_TO_EDGE);const u=((t,i,o,r,n)=>({u_matrix:t,u_color_ramp:0,u_center_direction:i,u_radius:e.degToRad(o),u_opacity:r,u_temporal_offset:n}))(l.skyboxMatrix,i.getCenter(t,!1),i.paint.get(\"sky-gradient-radius\"),r,n);t.prepareDrawProgram(s,c),c.draw(s,a.TRIANGLES,o,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,u,\"skyboxGradient\",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment);}(t,o,c,s,h);},debug:function(e,t,i){for(let o=0;o<i.length;o++)Eo(e,t,i[o]);},custom:function(t,i,o){const r=t.context,n=o.implementation;if(t.transform.projection.unsupportedLayers&&t.transform.projection.unsupportedLayers.includes(\"custom\"))e.warnOnce(\"Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.\");else if(\"offscreen\"===t.renderPass){const e=n.prerender;e&&(t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),e.call(n,r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState());}else if(\"translucent\"===t.renderPass){t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),r.setStencilMode(e.StencilMode.disabled);const i=\"3d\"===n.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);r.setDepthMode(i),n.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState(),r.bindFramebuffer.set(null);}}};class Bo{constructor(t,i){this.context=new Ie(t),this.transform=i,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Xt,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={};}updateTerrain(e,t){const i=!!e&&!!e.terrain&&this.transform.projection.supportsTerrain;if(!(i||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Ai(this,e));const o=this._terrain;this.transform.elevation=i?o:null,o.update(e,this.transform,t);}_updateFog(e){const t=e.fog;if(!t||\"globe\"===this.transform.projection.name||t.getOpacity(this.transform.pitch)<1||t.properties.get(\"horizon-blend\")<.03)return void(this.transform.fogCullDistSq=null);const[i,o]=t.getFovAdjustedRange(this.transform._fov);if(i>o)return void(this.transform.fogCullDistSq=null);const r=i+.78*(o-i);this.transform.fogCullDistSq=r*r;}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(t,i){if(this.width=t*e.exported.devicePixelRatio,this.height=i*e.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const e of this.style.order)this.style._layers[e].resize();}setup(){const t=this.context,i=new e.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(e.EXTENT,0),i.emplaceBack(0,e.EXTENT),i.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(i,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);const o=new e.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(e.EXTENT,0),o.emplaceBack(0,e.EXTENT),o.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(o,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);const r=new e.StructArrayLayout2i4;r.emplaceBack(-1,-1),r.emplaceBack(1,-1),r.emplaceBack(-1,1),r.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(r,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);const n=new e.StructArrayLayout4i8;n.emplaceBack(0,0,0,0),n.emplaceBack(e.EXTENT,0,e.EXTENT,0),n.emplaceBack(0,e.EXTENT,0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.mercatorBoundsBuffer=t.createVertexBuffer(n,e.boundsAttributes.members),this.mercatorBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);const s=new e.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(s);const a=new e.StructArrayLayout1ui2;for(const e of [0,1,3,2,0])a.emplaceBack(e);this.debugIndexBuffer=t.createIndexBuffer(a),this.emptyTexture=new e.Texture(t,new e.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),t.gl.RGBA),this.identityMat=e.create();const l=this.context.gl;this.stencilClearMode=new e.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(e.window.performance.now()),this.atmosphereBuffer=new Ro(this.context);}getMercatorTileBoundsBuffers(){return {tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(e){return e._makeTileBoundsBuffers(this.context,this.transform.projection),e._tileBoundsBuffer?{tileBoundsBuffer:e._tileBoundsBuffer,tileBoundsIndexBuffer:e._tileBoundsIndexBuffer,tileBoundsSegments:e._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const t=this.context,i=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram(\"clippingMask\").draw(t,i.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,Ci(this.identityMat),\"$clipping\",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments);}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={});}_renderTileClippingMasks(t,i,o){if(!i||this.currentStencilSource===i.id||!t.isTileClipped()||!o||0===o.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let e=!1;for(const t of o)if(void 0===this._tileClippingMaskIDs[t.key]){e=!0;break}if(!e)return}this.currentStencilSource=i.id;const r=this.context,n=r.gl;this.nextStencilID+o.length>256&&this.clearStencil(),r.setColorMode(e.ColorMode.disabled),r.setDepthMode(e.DepthMode.disabled);const s=this.useProgram(\"clippingMask\");this._tileClippingMaskIDs={};for(const t of o){const o=i.getTile(t),a=this._tileClippingMaskIDs[t.key]=this.nextStencilID++,{tileBoundsBuffer:l,tileBoundsIndexBuffer:c,tileBoundsSegments:h}=this.getTileBoundsBuffers(o);s.draw(r,n.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:n.ALWAYS,mask:0},a,255,n.KEEP,n.KEEP,n.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Ci(t.projMatrix),\"$clipping\",l,c,h);}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,i=this.context.gl;return new e.StencilMode({func:i.NOTEQUAL,mask:255},t,255,i.KEEP,i.KEEP,i.REPLACE)}stencilModeForClipping(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);const i=this.context.gl;return new e.StencilMode({func:i.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,i.KEEP,i.KEEP,i.REPLACE)}stencilConfigForOverlap(t){const i=this.context.gl,o=t.sort(((e,t)=>t.overscaledZ-e.overscaledZ)),r=o[o.length-1].overscaledZ,n=o[0].overscaledZ-r+1;if(n>1){this.currentStencilSource=void 0,this.nextStencilID+n>256&&this.clearStencil();const t={};for(let o=0;o<n;o++)t[o+r]=new e.StencilMode({func:i.GEQUAL,mask:255},o+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=n,[t,o]}return [{[r]:e.StencilMode.disabled},o]}colorModeForRenderPass(){const t=this.context.gl;if(this._showOverdrawInspector){const i=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(i,i,i,0),[!0,!0,!0,!0])}return \"opaque\"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}depthModeForSublayer(t,i,o){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;const r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(o||this.context.gl.LEQUAL,i,[r,r])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,i){this.style=t,this.options=i,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();const o=this.style.order,r=this.style._sourceCaches;for(const e in r){const t=r[e];t.used&&t.prepare(this.context);}const n={},s={},a={};for(const e in r){const t=r[e];n[e]=t.getVisibleCoordinates(),s[e]=n[e].slice().reverse(),a[e]=t.getVisibleCoordinates(!0).reverse();}this.opaquePassCutoff=1/0;for(let e=0;e<o.length;e++)if(this.style._layers[o[e]].is3D()){this.opaquePassCutoff=e;break}if(this.terrain&&(this.terrain.updateTileBinding(a),this.opaquePassCutoff=0),\"globe\"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new e.GlobeSharedBuffers(this.context)),e.isMapAuthenticated(this.context.gl)){this.renderPass=\"offscreen\";for(const e of o){const i=this.style._layers[e],o=t._getLayerSourceCache(i);if(!i.hasOffscreenPass()||i.isHidden(this.transform.zoom))continue;const r=o?s[o.id]:void 0;(\"custom\"===i.type||i.isSky()||r&&r.length)&&this.renderLayer(this,o,i,r);}if(this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:i.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.renderPass=\"opaque\",!this.terrain)for(this.currentLayer=o.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[o[this.currentLayer]],i=t._getLayerSourceCache(e);if(e.isSky())continue;const r=i?s[i.id]:void 0;this._renderTileClippingMasks(e,i,r),this.renderLayer(this,i,e,r);}if(this.style.fog&&this.transform.projection.supportsFog&&function(t,i){const o=t.context,r=o.gl,n=t.transform,s=new e.DepthMode(r.LEQUAL,e.DepthMode.ReadOnly,[0,1]),a=t.useProgram(\"globeAtmosphere\",null,\"globe\"===n.projection.name?[\"PROJECTION_GLOBE_VIEW\",\"FOG\"]:[\"FOG\"]),l=e.globeToMercatorTransition(n.zoom),c=i.properties.get(\"color\").toArray01(),h=i.properties.get(\"high-color\").toArray01(),u=i.properties.get(\"space-color\").toArray01PremultipliedAlpha(),_=e.identity$1([]);e.rotateY$1(_,_,-e.degToRad(n._center.lng)),e.rotateX$1(_,_,e.degToRad(n._center.lat)),e.rotateZ$1(_,_,n.angle),e.rotateX$1(_,_,-n._pitch);const d=e.fromQuat(new Float32Array(16),_),p=e.mapValue(i.properties.get(\"star-intensity\"),0,1,0,.25),m=5e-4,f=e.mapValue(i.properties.get(\"horizon-blend\"),0,1,m,.25),g=e.globeUseCustomAntiAliasing(t,o,n)&&f===m?n.worldSize/(2*Math.PI*1.025)-1:n.globeRadius,v=t.frameCounter/1e3%1,x=e.length(n.globeCenterInViewSpace),y=Math.sqrt(Math.pow(x,2)-Math.pow(g,2)),b=Math.acos(y/x),w=((t,i,o,r,n,s,a,l,c,h,u,_,d,p)=>({u_frustum_tl:t,u_frustum_tr:i,u_frustum_br:o,u_frustum_bl:r,u_horizon:n,u_transition:s,u_fadeout_range:a,u_color:l,u_high_color:c,u_space_color:h,u_star_intensity:u,u_star_size:5*e.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:_,u_horizon_angle:d,u_rotation_matrix:p}))(n.frustumCorners.TL,n.frustumCorners.TR,n.frustumCorners.BR,n.frustumCorners.BL,n.frustumCorners.horizon,l,f,c,h,u,p,v,b,d);t.prepareDrawProgram(o,a);const T=t.atmosphereBuffer;T&&a.draw(o,r.TRIANGLES,s,e.StencilMode.disabled,e.ColorMode.alphaBlended,e.CullFaceMode.backCW,w,\"skybox\",T.vertexBuffer,T.indexBuffer,T.segments);}(this,this.style.fog),this.renderPass=\"sky\",(e.globeToMercatorTransition(this.transform.zoom)>0||\"globe\"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<o.length;this.currentLayer++){const e=this.style._layers[o[this.currentLayer]],i=t._getLayerSourceCache(e);e.isSky()&&this.renderLayer(this,i,e,i?s[i.id]:void 0);}for(this.renderPass=\"translucent\",this.currentLayer=0;this.currentLayer<o.length;){const e=this.style._layers[o[this.currentLayer]],i=t._getLayerSourceCache(e);if(e.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(e)){if(e.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const r=i?(\"symbol\"===e.type?a:s)[i.id]:void 0;this._renderTileClippingMasks(e,i,i?n[i.id]:void 0),this.renderLayer(this,i,e,r),++this.currentLayer;}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let i=null;e.values(this.style._layers).forEach((e=>{const o=t._getLayerSourceCache(e);o&&!e.isHidden(this.transform.zoom)&&(!i||i.getSource().maxzoom<o.getSource().maxzoom)&&(i=o);})),i&&this.options.showTileBoundaries&&Oo.debug(this,i,i.getVisibleCoordinates());}this.options.showPadding&&function(e){const t=e.transform.padding;Co(e,e.transform.height-(t.top||0),3,xo),Co(e,t.bottom||0,3,yo),Io(e,t.left||0,3,bo),Io(e,e.transform.width-(t.right||0),3,wo);const i=e.transform.centerPoint;!function(e,t,i,o){Mo(e,t-1,i-10,2,20,o),Mo(e,t-10,i-1,20,2,o);}(e,i.x,e.transform.height-i.y,To);}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy());}}renderLayer(e,t,i,o){i.isHidden(this.transform.zoom)||(\"background\"===i.type||\"sky\"===i.type||\"custom\"===i.type||o&&o.length)&&(this.id=i.id,this.gpuTimingStart(i),e.transform.projection.unsupportedLayers&&e.transform.projection.unsupportedLayers.includes(i.type)||Oo[i.type](e,t,i,o,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd());}gpuTimingStart(e){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;let i=this.gpuTimers[e.id];i||(i=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),i.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,i.query);}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const e=this.context.extTimerQuery,t=e.createQueryEXT();this.deferredRenderGpuTimeQueries.push(t),e.beginQueryEXT(e.TIME_ELAPSED_EXT,t);}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT);}gpuTimingEnd(){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT);}collectGpuTimers(){const e=this.gpuTimers;return this.gpuTimers={},e}collectDeferredRenderGpuQueries(){const e=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],e}queryGpuTimers(e){const t={};for(const i in e){const o=e[i],r=this.context.extTimerQuery,n=r.getQueryObjectEXT(o.query,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(o.query),t[i]=n;}return t}queryGpuTimeDeferredRender(e){if(!this.options.gpuTimingDeferredRender)return 0;const t=this.context.extTimerQuery;let i=0;for(const o of e)i+=t.getQueryObjectEXT(o,t.QUERY_RESULT_EXT)/1e6,t.deleteQueryEXT(o);return i}translatePosMatrix(t,i,o,r,n){if(!o[0]&&!o[1])return t;const s=n?\"map\"===r?this.transform.angle:0:\"viewport\"===r?-this.transform.angle:0;if(s){const e=Math.sin(s),t=Math.cos(s);o=[o[0]*t-o[1]*e,o[0]*e+o[1]*t];}const a=[n?o[0]:P(i,o[0],this.transform.zoom),n?o[1]:P(i,o[1],this.transform.zoom),0],l=new Float32Array(16);return e.translate(l,t,a),l}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e];}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){return null===e||void 0!==e&&!this.imageManager.getPattern(e.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const e=this.terrain&&this.terrain.renderingToTexture,t=this.terrain&&0===this.terrain.exaggeration(),i=this.style&&this.style.fog,o=[];return this.terrainRenderModeElevated()&&o.push(\"TERRAIN\"),\"globe\"===this.transform.projection.name&&o.push(\"GLOBE\"),t&&o.push(\"ZERO_EXAGGERATION\"),i&&!e&&0!==i.getOpacity(this.transform.pitch)&&o.push(\"FOG\"),e&&o.push(\"RENDER_TO_TEXTURE\"),this._showOverdrawInspector&&o.push(\"OVERDRAW_INSPECTOR\"),o}useProgram(e,t,i){this.cache=this.cache||{};const o=i||[],r=this.currentGlobalDefines().concat(o),n=Li.cacheKey(hi[e],e,r,t);return this.cache[n]||(this.cache[n]=new Li(this.context,e,hi[e],t,so[e],r)),this.cache[n]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault();}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD);}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement(\"canvas\"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA));}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy();}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile();}prepareDrawProgram(t,i,o){if(this.terrain&&this.terrain.renderingToTexture)return;const r=this.style.fog;if(r){const n=r.getOpacity(this.transform.pitch),s=((t,i,o,r,n,s,a,l,c,h,u)=>{const _=t.transform,d=i.properties.get(\"color\").toArray01();d[3]=r;const p=t.frameCounter/1e3%1;return {u_fog_matrix:o?_.calculateFogTileMatrix(o):t.identityMat,u_fog_range:i.getFovAdjustedRange(_._fov),u_fog_color:d,u_fog_horizon_blend:i.properties.get(\"horizon-blend\"),u_fog_temporal_offset:p,u_frustum_tl:n,u_frustum_tr:s,u_frustum_br:a,u_frustum_bl:l,u_globe_pos:c,u_globe_radius:h,u_viewport:u,u_globe_transition:e.globeToMercatorTransition(_.zoom),u_is_globe:+(\"globe\"===_.projection.name)}})(this,r,o,n,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*e.exported.devicePixelRatio,this.transform.height*e.exported.devicePixelRatio]);i.setFogUniformValues(t,s);}}setTileLoadedFlag(e){this.tileLoaded=e;}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1;}canvasCopy(){const e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}getCanvasCopiesAndTimestamps(){return {canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return !1;const e=this.style&&this.style.fog;return !!e&&0!==e.getOpacity(this.transform.pitch)}getBackgroundTiles(){const t=this._backgroundTiles,i=this._backgroundTiles={},o=this.transform.coveringTiles({tileSize:512});for(const r of o)i[r.key]=t[r.key]||new e.Tile(r,512,this.transform.tileZoom,this);return i}clearBackgroundTiles(){this._backgroundTiles={};}}class ko{constructor(e=0,t=0,i=0,o=0){if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(i)||i<0||isNaN(o)||o<0)throw new Error(\"Invalid value for edge-insets, top, bottom, left and right must all be numbers\");this.top=e,this.bottom=t,this.left=i,this.right=o;}interpolate(t,i,o){return null!=i.top&&null!=t.top&&(this.top=e.number(t.top,i.top,o)),null!=i.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,i.bottom,o)),null!=i.left&&null!=t.left&&(this.left=e.number(t.left,i.left,o)),null!=i.right&&null!=t.right&&(this.right=e.number(t.right,i.right,o)),this}getCenter(t,i){const o=e.clamp((this.left+t-this.right)/2,0,t),r=e.clamp((this.top+i-this.bottom)/2,0,i);return new e.pointGeometry(o,r)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new ko(this.top,this.bottom,this.left,this.right)}toJSON(){return {top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Fo(t,i){const o=e.getColumn(t,3);e.fromQuat(t,i),e.setColumn(t,3,o);}function Uo(t,i){const o=e.identity$1([]);return e.rotateZ$1(o,o,-i),e.rotateX$1(o,o,-t),o}function No(t,i){const o=[t[0],t[1],0],r=[i[0],i[1],0];if(e.length(o)>=1e-15){const t=e.normalize([],o);e.scale$2(r,t,e.dot(r,t)),i[0]=r[0],i[1]=r[1];}const n=e.cross([],i,t);if(e.len(n)<1e-15)return null;const s=Math.atan2(-n[1],n[0]);return Uo(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),s)}class Go{constructor(e,t){this.position=e,this.orientation=t;}get position(){return this._position}set position(t){if(t){const i=t instanceof e.MercatorCoordinate?t:new e.MercatorCoordinate(t[0],t[1],t[2]);this._renderWorldCopies&&(i.x=e.wrap(i.x,0,1)),this._position=i;}else this._position=null;}lookAtPoint(t,i){if(this.orientation=null,!this.position)return;const o=this._elevation?this._elevation.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(t)):0,r=this.position,n=e.MercatorCoordinate.fromLngLat(t,o),s=[n.x-r.x,n.y-r.y,n.z-r.z];i||(i=[0,0,1]),i[2]=Math.abs(i[2]),this.orientation=No(s,i);}setPitchBearing(t,i){this.orientation=Uo(e.degToRad(t),e.degToRad(-i));}}class jo{constructor(t,i){this._transform=e.identity([]),this.orientation=i,this.position=t;}get mercatorPosition(){const t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}get position(){const t=e.getColumn(this._transform,3);return [t[0],t[1],t[2]]}set position(t){var i;t&&e.setColumn(this._transform,3,[(i=t)[0],i[1],i[2],1]);}get orientation(){return this._orientation}set orientation(t){this._orientation=t||e.identity$1([]),t&&Fo(this._transform,this._orientation);}getPitchBearing(){const e=this.forward(),t=this.right();return {bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}setPitchBearing(e,t){this._orientation=Uo(e,t),Fo(this._transform,this._orientation);}forward(){const t=e.getColumn(this._transform,2);return [-t[0],-t[1],-t[2]]}up(){const t=e.getColumn(this._transform,1);return [-t[0],-t[1],-t[2]]}right(){const t=e.getColumn(this._transform,0);return [t[0],t[1],t[2]]}getCameraToWorld(t,i){const o=new Float64Array(16);return e.invert(o,this.getWorldToCamera(t,i)),o}getWorldToCameraPosition(t,i,o){const r=this.position;e.scale$2(r,r,-t);const n=new Float64Array(16);return e.fromScaling(n,[o,o,o]),e.translate(n,n,r),n[10]*=i,n}getWorldToCamera(t,i){const o=new Float64Array(16),r=new Float64Array(4),n=this.position;return e.conjugate(r,this._orientation),e.scale$2(n,n,-t),e.fromQuat(o,r),e.translate(o,o,n),o[1]*=-1,o[5]*=-1,o[9]*=-1,o[13]*=-1,o[8]*=i,o[9]*=i,o[10]*=i,o[11]*=i,o}getCameraToClipPerspective(t,i,o,r){const n=new Float64Array(16);return e.perspective(n,t,i,o,r),n}getDistanceToElevation(t,i=!1){const o=0===t?0:e.mercatorZfromAltitude(t,i?e.latFromMercatorY(this.position[1]):this.position[1]),r=this.forward();return (o-this.position[2])/r[2]}clone(){return new jo([...this.position],[...this.orientation])}}function Zo(t,i){const o=Wo(t.projection,t.zoom,t.width,t.height),r=function(t,i,o,r,n){const s=new e.LngLat(o.lng-180*Xo,o.lat),a=new e.LngLat(o.lng+180*Xo,o.lat),l=t.project(s.lng,s.lat),c=t.project(a.lng,a.lat),h=-Math.atan2(c.y-l.y,c.x-l.x),u=e.MercatorCoordinate.fromLngLat(o);u.y=e.clamp(u.y,-.999975,.999975);const _=u.toLngLat(),d=t.project(_.lng,_.lat),p=e.MercatorCoordinate.fromLngLat(_);p.x+=Xo;const m=p.toLngLat(),f=t.project(m.lng,m.lat),g=$o(f.x-d.x,f.y-d.y,h),v=e.MercatorCoordinate.fromLngLat(_);v.y+=Xo;const x=v.toLngLat(),y=t.project(x.lng,x.lat),b=$o(y.x-d.x,y.y-d.y,h),w=Math.abs(g.x)/Math.abs(b.y),T=e.identity([]);e.rotateZ(T,T,-h*(1-(n?0:r)));const E=e.identity([]);return e.scale(E,E,[1,1-(1-w)*r,1]),E[4]=-b.x/b.y*r,e.rotateZ(E,E,h),e.multiply(E,T,E),E}(t.projection,0,t.center,o,i),n=Vo(t);return e.scale(r,r,[n,n,1]),r}function Vo(t){const i=t.projection,o=Wo(t.projection,t.zoom,t.width,t.height),r=qo(i,t.center),n=qo(i,e.LngLat.convert(i.center));return Math.pow(2,r*o+(1-o)*n)}function Wo(t,i,o,r,n=1/0){const s=t.range;if(!s)return 0;const a=Math.min(n,Math.max(o,r)),l=Math.log(a/1024)/Math.LN2;return e.smoothstep(s[0]+l,s[1]+l,i)}const Xo=1/4e4;function qo(t,i){const o=e.clamp(i.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),r=new e.LngLat(i.lng-180*Xo,o),n=new e.LngLat(i.lng+180*Xo,o),s=t.project(r.lng,o),a=t.project(n.lng,o),l=e.MercatorCoordinate.fromLngLat(r),c=e.MercatorCoordinate.fromLngLat(n),h=a.x-s.x,u=a.y-s.y,_=c.x-l.x,d=c.y-l.y,p=Math.sqrt((_*_+d*d)/(h*h+u*u));return Math.log(p)/Math.LN2}function $o(e,t,i){const o=Math.cos(i),r=Math.sin(i);return {x:e*o-t*r,y:e*r+t*o}}class Ho{constructor(t,i,o,r,n,s,a){this.tileSize=512,this._renderWorldCopies=void 0===n||n,this._minZoom=t||0,this._maxZoom=i||22,this._minPitch=null==o?0:o,this._maxPitch=null==r?60:r,this.setProjection(s),this.setMaxBounds(a),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new ko,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new jo,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference=\"ground\",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1;}clone(){const e=new Ho(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,e.tileSize=this.tileSize,e.mercatorFromTransition=this.mercatorFromTransition,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._seaLevelZoom=this._seaLevelZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._nearZ=this._nearZ,e._farZ=this._farZ,e._averageElevation=this._averageElevation,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e.frustumCorners=this.frustumCorners,e}get elevation(){return this._elevation}set elevation(e){this._elevation!==e&&(this._elevation=e,this._updateCameraOnTerrain(),this._calcMatrices());}updateElevation(e,t=!1){const i=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||i)&&this._updateCameraOnTerrain(),(e||i)&&this._constrainCamera(t),this._calcMatrices();}getProjection(){return e.pick(this.projection,[\"name\",\"center\",\"parallels\"])}setProjection(i){this.projectionOptions=i||{name:\"mercator\"};const o=this.projection?this.getProjection():void 0;this.projection=e.getProjection(this.projectionOptions);const r=!t(o,this.getProjection());return r&&this._calcMatrices(),this.mercatorFromTransition=!1,r}setMercatorFromTransition(){const t=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:\"mercator\"},this.projection=e.getProjection({name:\"mercator\"});const i=t!==this.projection.name;return i&&this._calcMatrices(),i}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e));}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e));}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e));}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e));}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e;}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get cameraWorldSize(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return e.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.pointGeometry(this.width,this.height)}get bearing(){return e.wrap(this.rotation,-180,180)}set bearing(e){this.rotation=e;}get rotation(){return -this.angle/Math.PI*180}set rotation(t){const i=-t*Math.PI/180;var o;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=(o=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(o[1]=0,o[2]=0),o[0]=1,o[3]=1,o),function(e,t,i){var o=t[0],r=t[1],n=t[2],s=t[3],a=Math.sin(i),l=Math.cos(i);e[0]=o*l+n*a,e[1]=r*l+s*a,e[2]=o*-a+n*l,e[3]=r*-a+s*l;}(this.rotationMatrix,this.rotationMatrix,this.angle));}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const i=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices());}get aspect(){return this.width/this.height}get fovX(){return this._fov}get fovY(){const e=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/e)}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=e.degToRad(t),this._calcMatrices());}get averageElevation(){return this._averageElevation}set averageElevation(e){this._averageElevation=e,this._calcFogMatrices(),this._distanceTileDataCache={};}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices());}_setZoom(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom;}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const e=this._elevation;this._centerAltitude=e.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=e.exaggeration(),this._updateSeaLevelZoom();}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize));}sampleAverageElevation(){if(!this._elevation)return 0;const t=this._elevation,i=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],o=this.horizonLineFromTop();let r=0,n=0;for(let s=0;s<i.length;s++){const a=new e.pointGeometry(i[s][0]*this.width,o+i[s][1]*(this.height-o)),l=t.pointCoordinate(a);if(!l)continue;const c=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);r+=l[3]*c,n+=c;}return 0===n?NaN:r/n}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&(\"ground\"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices());}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const e=this._seaLevelZoom,t=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),i=this.pixelsPerMeter/this.worldSize*t,o=this._mercatorZfromZoom(e),r=this._mercatorZfromZoom(this._maxZoom),n=Math.max(o-i,r);this._setZoom(this._zoomFromMercatorZ(n));}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices());}computeZoomRelativeTo(t){const i=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));let o;o=t.z<this._camera.position[2]?[i.x,i.y,i.z]:[t.x,t.y,t.z];const r=e.length(e.sub([],this._camera.position,o));return e.clamp(this._zoomFromMercatorZ(r),this._minZoom,this._maxZoom)}setFreeCameraOptions(t){if(!this.height)return;if(!t.position&&!t.orientation)return;this._updateCameraState();let i=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(i=this._setCameraOrientation(t.orientation)),t.position){const o=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(o,this._camera.position)||(this._setCameraPosition(o),i=!0);}i&&(this._updateStateFromCamera(),this.recenterOnTerrain());}getFreeCameraOptions(){this._updateCameraState();const t=this._camera.position,i=new Go;return i.position=new e.MercatorCoordinate(t[0],t[1],t[2]),i.orientation=this._camera.orientation,i._elevation=this.elevation,i._renderWorldCopies=this.renderWorldCopies,i}_setCameraOrientation(t){if(!e.length$1(t))return !1;e.normalize$1(t,t);const i=e.transformQuat([],[0,0,-1],t),o=e.transformQuat([],[0,-1,0],t);if(o[2]<0)return !1;const r=No(i,o);return !!r&&(this._camera.orientation=r,!0)}_setCameraPosition(t){const i=this.zoomScale(this.minZoom)*this.tileSize,o=this.zoomScale(this.maxZoom)*this.tileSize,r=this.cameraToCenterDistance;t[2]=e.clamp(t[2],r/o,r/i),this._camera.position=t;}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,i){this._unmodified=!1,this._edgeInsets.interpolate(e,t,i),this._constrain(),this._calcMatrices();}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(t){const i=[new e.UnwrappedTileID(0,t)];if(this.renderWorldCopies){const o=this.pointCoordinate(new e.pointGeometry(0,0)),r=this.pointCoordinate(new e.pointGeometry(this.width,0)),n=this.pointCoordinate(new e.pointGeometry(this.width,this.height)),s=this.pointCoordinate(new e.pointGeometry(0,this.height)),a=Math.floor(Math.min(o.x,r.x,n.x,s.x)),l=Math.floor(Math.max(o.x,r.x,n.x,s.x)),c=1;for(let o=a-c;o<=l+c;o++)0!==o&&i.push(new e.UnwrappedTileID(o,t));}return i}coveringTiles(t){let i=this.coveringZoomLevel(t);const o=i,r=this.elevation&&!t.isTerrainDEM,n=\"mercator\"===this.projection.name;if(void 0!==t.minzoom&&i<t.minzoom)return [];void 0!==t.maxzoom&&i>t.maxzoom&&(i=t.maxzoom);const s=this.locationCoordinate(this.center),a=this.center.lat,l=1<<i,c=[l*s.x,l*s.y,0],h=\"globe\"===this.projection.name,u=!h,_=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i,u),d=h?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),p=l*e.mercatorZfromAltitude(1,this.center.lat),m=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),f=[l*d.x,l*d.y,m*(u?1:p)],g=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),v=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?i:0,x=t.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,y=t.isTerrainDEM?-x:this._elevation?this._elevation.getMinElevationBelowMSL():0,b=this.projection.isReprojectedInTileSpace?Vo(this):1,w=t=>{const i=1/4e4,o=new e.MercatorCoordinate(t.x+i,t.y,t.z),r=new e.MercatorCoordinate(t.x,t.y+i,t.z),n=t.toLngLat(),s=o.toLngLat(),a=r.toLngLat(),l=this.locationCoordinate(n),c=this.locationCoordinate(s),h=this.locationCoordinate(a),u=Math.hypot(c.x-l.x,c.y-l.y),_=Math.hypot(h.x-l.x,h.y-l.y);return Math.sqrt(u*_)*b/i},T=t=>{const i=x,o=y;return {aabb:e.tileAABB(this,l,0,0,0,t,o,i,this.projection),zoom:0,x:0,y:0,minZ:o,maxZ:i,wrap:t,fullyVisible:!1}},E=[];let C=[];const I=i,M=t.reparseOverscaled?o:i,S=e=>e*e,D=S((m-this._centerAltitude)*p),A=e=>{if(!this._elevation||!e.tileID||!n)return;const t=this._elevation.getMinMaxForTile(e.tileID),i=e.aabb;t?(i.min[2]=t.min,i.max[2]=t.max,i.center[2]=(i.min[2]+i.max[2])/2):(e.shouldSplit=L(e),e.shouldSplit||(i.min[2]=i.max[2]=i.center[2]=this._centerAltitude));},L=t=>{if(t.zoom<v)return !0;if(t.zoom===I)return !1;if(null!=t.shouldSplit)return t.shouldSplit;const i=t.aabb.distanceX(f),n=t.aabb.distanceY(f);let s=D,l=1;if(h){s=S(t.aabb.distanceZ(f));const i=Math.pow(2,t.zoom),o=e.latFromMercatorY((t.y+1)/i),r=e.latFromMercatorY(t.y/i),n=Math.min(Math.max(a,o),r),c=e.circumferenceAtLatitude(n)/e.circumferenceAtLatitude(a);if(l=n===a?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,c/this._mercatorScaleRatio),this.zoom<=e.GLOBE_ZOOM_THRESHOLD_MIN&&t.zoom===I-1&&c>=.9)return !0}else if(r&&(s=S(t.aabb.distanceZ(f)*p)),this.projection.isReprojectedInTileSpace&&o<=5){const i=Math.pow(2,t.zoom),o=w(new e.MercatorCoordinate((t.x+.5)/i,(t.y+.5)/i));l=o>.85?1:o;}const c=i*i+n*n+s,u=S((1<<I-t.zoom)*g*l*((e,t)=>{if(t*S(.707)<e)return 1;const i=Math.sqrt(t/e);return i/(1.4144271570014144+(Math.pow(1.1,i-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(s,D),c));return c<u};if(this.renderWorldCopies)for(let e=1;e<=3;e++)E.push(T(-e)),E.push(T(e));for(E.push(T(0));E.length>0;){const o=E.pop(),s=o.x,a=o.y;let u=o.fullyVisible;if(!u){const e=o.aabb.intersects(_);if(0===e)continue;u=2===e;}if(o.zoom!==I&&L(o))for(let t=0;t<4;t++){const i=(s<<1)+t%2,c=(a<<1)+(t>>1),_={aabb:n?o.aabb.quadrant(t):e.tileAABB(this,l,o.zoom+1,i,c,o.wrap,o.minZ,o.maxZ,this.projection),zoom:o.zoom+1,x:i,y:c,wrap:o.wrap,fullyVisible:u,tileID:void 0,shouldSplit:void 0,minZ:o.minZ,maxZ:o.maxZ};r&&!h&&(_.tileID=new e.OverscaledTileID(o.zoom+1===I?M:o.zoom+1,o.wrap,o.zoom+1,i,c),A(_)),E.push(_);}else {const r=o.zoom===I?M:o.zoom;if(t.minzoom&&t.minzoom>r)continue;const n=c[0]-(.5+s+(o.wrap<<o.zoom))*(1<<i-o.zoom),l=c[1]-.5-a,h=o.tileID?o.tileID:new e.OverscaledTileID(r,o.wrap,o.zoom,s,a);C.push({tileID:h,distanceSq:n*n+l*l});}}if(this.fogCullDistSq){const i=this.fogCullDistSq,o=this.horizonLineFromTop();C=C.filter((r=>{const n=[0,0,0,1],s=[e.EXTENT,e.EXTENT,0,1],a=this.calculateFogTileMatrix(r.tileID.toUnwrapped());e.transformMat4$1(n,n,a),e.transformMat4$1(s,s,a);const l=e.getAABBPointSquareDist(n,s);if(0===l)return !0;let c=!1;const h=this._elevation;if(h&&l>i&&0!==o){const i=this.calculateProjMatrix(r.tileID.toUnwrapped());let n;t.isTerrainDEM||(n=h.getMinMaxForTile(r.tileID)),n||(n={min:y,max:x});const s=e.furthestTileCorner(this.rotation),a=[s[0]*e.EXTENT,s[1]*e.EXTENT,n.max];e.transformMat4(a,a,i),c=(1-a[1])*this.height*.5<o;}return l<i||c}));}return C.sort(((e,t)=>e.distanceSq-t.distanceSq)).map((e=>e.tileID))}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices();}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(t){const i=e.clamp(t.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),o=this.projection.project(t.lng,i);return new e.pointGeometry(o.x*this.worldSize,o.y*this.worldSize)}unproject(e){return this.projection.unproject(e.x/this.worldSize,e.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(t,i){let o,r;const n=this.centerPoint;if(\"globe\"===this.projection.name){const e=this.worldSize;o=(i.x-n.x)/e,r=(i.y-n.y)/e;}else {const e=this.pointCoordinate(i),t=this.pointCoordinate(n);o=e.x-t.x,r=e.y-t.y;}const s=this.locationCoordinate(t);this.setLocation(new e.MercatorCoordinate(s.x-o,s.y-r));}setLocation(e){this.center=this.coordinateLocation(e),this.projection.wrap&&(this.center=this.center.wrap());}locationPoint(e){return this.projection.locationPoint(this,e)}locationPoint3D(e){return this.projection.locationPoint(this,e,!0)}pointLocation(e){return this.coordinateLocation(this.pointCoordinate(e))}pointLocation3D(e){return this.coordinateLocation(this.pointCoordinate3D(e))}locationCoordinate(t,i){const o=i?e.mercatorZfromAltitude(i,t.lat):void 0,r=this.projection.project(t.lng,t.lat);return new e.MercatorCoordinate(r.x,r.y,o)}coordinateLocation(e){return this.projection.unproject(e.x,e.y)}pointRayIntersection(t,i){const o=null!=i?i:this._centerAltitude,r=[t.x,t.y,0,1],n=[t.x,t.y,1,1];e.transformMat4$1(r,r,this.pixelMatrixInverse),e.transformMat4$1(n,n,this.pixelMatrixInverse);const s=n[3];e.scale$1(r,r,1/r[3]),e.scale$1(n,n,1/s);const a=r[2],l=n[2];return {p0:r,p1:n,t:a===l?0:(o-a)/(l-a)}}screenPointToMercatorRay(t){const i=[t.x,t.y,0,1],o=[t.x,t.y,1,1];return e.transformMat4$1(i,i,this.pixelMatrixInverse),e.transformMat4$1(o,o,this.pixelMatrixInverse),e.scale$1(i,i,1/i[3]),e.scale$1(o,o,1/o[3]),i[2]=e.mercatorZfromAltitude(i[2],this._center.lat)*this.worldSize,o[2]=e.mercatorZfromAltitude(o[2],this._center.lat)*this.worldSize,e.scale$1(i,i,1/this.worldSize),e.scale$1(o,o,1/this.worldSize),new e.Ray([i[0],i[1],i[2]],e.normalize([],e.sub([],o,i)))}rayIntersectionCoordinate(t){const{p0:i,p1:o,t:r}=t,n=e.mercatorZfromAltitude(i[2],this._center.lat),s=e.mercatorZfromAltitude(o[2],this._center.lat);return new e.MercatorCoordinate(e.number(i[0],o[0],r)/this.worldSize,e.number(i[1],o[1],r)/this.worldSize,e.number(n,s,r))}pointCoordinate(e,t=this._centerAltitude){return this.projection.pointCoordinate(this,e.x,e.y,t)}pointCoordinate3D(t){if(!this.elevation)return this.pointCoordinate(t);let i=this.projection.pointCoordinate3D(this,t.x,t.y);if(i)return new e.MercatorCoordinate(i[0],i[1],i[2]);let o=0,r=this.horizonLineFromTop();if(t.y>r)return this.pointCoordinate(t);const n=.02*r,s=t.clone();for(let t=0;t<10&&r-o>n;t++){s.y=e.number(o,r,.66);const t=this.projection.pointCoordinate3D(this,s.x,s.y);t?(r=s.y,i=t):o=s.y;}return i?new e.MercatorCoordinate(i[0],i[1],i[2]):this.pointCoordinate(t)}isPointAboveHorizon(e){return this.projection.isPointAboveHorizon(this,e)}_coordinatePoint(t,i){const o=i&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,r=[t.x*this.worldSize,t.y*this.worldSize,o+t.toAltitude(),1];return e.transformMat4$1(r,r,this.pixelMatrix),r[3]>0?new e.pointGeometry(r[0]/r[3],r[1]/r[3]):new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getGlobeBounds(){const{top:t,left:i}=this._edgeInsets,o=this.height-this._edgeInsets.bottom,r=this.width-this._edgeInsets.right,n=this.pointCoordinate3D(new e.pointGeometry(i,t)),s=this.pointCoordinate3D(new e.pointGeometry(r,t)),a=this.pointCoordinate3D(new e.pointGeometry(r,o)),l=this.pointCoordinate3D(new e.pointGeometry(i,o));let c=Math.min(n.x,l.x),h=Math.max(s.x,a.x),u=Math.min(n.y,s.y),_=Math.max(l.y,a.y);const d=Math.pow(2,-this.zoom)/16,p=(t,i,o,r)=>{const n=(t+o)/2,s=(i+r)/2,a=new e.pointGeometry(n,s),l=this.pointCoordinate3D(a),m=Math.max(0,c-l.x,u-l.y,l.x-h,l.y-_);c=Math.min(c,l.x),h=Math.max(h,l.x),u=Math.min(u,l.y),_=Math.max(_,l.y),m>d&&(p(t,i,n,s),p(n,s,o,r));};p(i,t,r,t),p(r,t,r,o),p(r,o,i,o),p(i,o,i,t);const[m,f]=e.polesInViewport(this),g=m||f,v=m?90:e.latFromMercatorY(u),x=g?180:e.lngFromMercatorX(h),y=f?-90:e.latFromMercatorY(_),b=g?-180:e.lngFromMercatorX(c);return new e.LngLatBounds(new e.LngLat(b,y),new e.LngLat(x,v))}_getBounds(t,i){if(\"globe\"===this.projection.name)return this._getGlobeBounds();const o=new e.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),r=new e.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),n=new e.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),s=new e.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let a=this.pointCoordinate(o,t),l=this.pointCoordinate(r,t);const c=this.pointCoordinate(n,i),h=this.pointCoordinate(s,i),u=(e,t)=>(t.y-e.y)/(t.x-e.x);return a.y>1&&l.y>=0?a=new e.MercatorCoordinate((1-h.y)/u(h,a)+h.x,1):a.y<0&&l.y<=1&&(a=new e.MercatorCoordinate(-h.y/u(h,a)+h.x,0)),l.y>1&&a.y>=0?l=new e.MercatorCoordinate((1-c.y)/u(c,l)+c.x,1):l.y<0&&a.y<=1&&(l=new e.MercatorCoordinate(-c.y/u(c,l)+c.x,0)),(new e.LngLatBounds).extend(this.coordinateLocation(a)).extend(this.coordinateLocation(l)).extend(this.coordinateLocation(h)).extend(this.coordinateLocation(c))}_getBounds3D(){const e=this.elevation;if(!e.visibleDemTiles.length||e.isUsingMockSource())return this._getBounds(0,0);const t=e.visibleDemTiles.reduce(((e,t)=>{if(t.dem){const i=t.dem.tree;e.min=Math.min(e.min,i.minimums[0]),e.max=Math.max(e.max,i.maximums[0]);}return e}),{min:Number.MAX_VALUE,max:0});return this._getBounds(t.min*e.exaggeration(),t.max*e.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(e=!0){const t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,i=this.height/2-t*(1-this._horizonShift);return e?Math.max(0,i):i}getMaxBounds(){return this.maxBounds}setMaxBounds(t){this.maxBounds=t,this.minLat=-e.MAX_MERCATOR_LATITUDE,this.maxLat=e.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,t&&(this.minLat=t.getSouth(),this.maxLat=t.getNorth(),this.minLng=t.getWest(),this.maxLng=t.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=e.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=e.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=e.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=e.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain();}calculatePosMatrix(e,t){return this.projection.createTileMatrix(this,t,e)}calculateDistanceTileData(t){const i=t.key,o=this._distanceTileDataCache;if(o[i])return o[i];const r=t.canonical,n=1/this.height,s=this.cameraWorldSize,a=s/this.zoomScale(r.z),l=(r.x+Math.pow(2,r.z)*t.wrap)*a,c=r.y*a,h=this.point;h.x*=s/this.worldSize,h.y*=s/this.worldSize;const u=this.angle,_=Math.sin(-u),d=-Math.cos(-u);return o[i]={bearing:[_,d],center:[(h.x-l)*n,(h.y-c)*n],scale:a/e.EXTENT*n},o[i]}calculateFogTileMatrix(t){const i=t.key,o=this._fogTileMatrixCache;if(o[i])return o[i];const r=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,t);return e.multiply(r,this.worldToFogMatrix,r),o[i]=new Float32Array(r),o[i]}calculateProjMatrix(t,i=!1){const o=t.key,r=i?this._alignedProjMatrixCache:this._projMatrixCache;if(r[o])return r[o];const n=this.calculatePosMatrix(t,this.worldSize);return e.multiply(n,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:i?this.alignedProjMatrix:this.projMatrix,n),r[o]=new Float32Array(n),r[o]}calculatePixelsToTileUnitsMatrix(t){const i=t.tileID.key,o=this._pixelsToTileUnitsCache;if(o[i])return o[i];const r=function(t,i){const{scale:o}=t.tileTransform,r=o*e.EXTENT/(t.tileSize*Math.pow(2,i.zoom-t.tileID.overscaledZ+t.tileID.canonical.z));return n=new Float32Array(4),l=(s=i.inverseAdjustmentMatrix)[1],c=s[2],h=s[3],_=(a=[r,r])[1],n[0]=s[0]*(u=a[0]),n[1]=l*u,n[2]=c*_,n[3]=h*_,n;var n,s,a,l,c,h,u,_;}(t,this);return o[i]=r,o[i]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation||\"globe\"===this.projection.name)return;const t=this._elevation;this._updateCameraState();const i=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,o=this._computeCameraPosition(i),r=this._camera.forward(),n=e.mercatorZfromAltitude(1,this._center.lat);o[2]/=n,r[2]/=n,e.normalize(r,r);const s=t.raycast(o,r,t.exaggeration());if(s){const t=e.scaleAndAdd([],o,r,s),i=new e.MercatorCoordinate(t[0],t[1],e.mercatorZfromAltitude(t[2],e.latFromMercatorY(t[1]))),a=(i.z+e.length([i.x-o[0],i.y-o[1],i.z-o[2]*n]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(a),this._centerAltitude=i.toAltitude(),this._center=this.coordinateLocation(i),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices();}}_constrainCamera(t=!1){if(!this._elevation)return;const i=this._elevation,o=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,r=this._computeCameraPosition(o),n=i.getAtPointOrZero(new e.MercatorCoordinate(...r)),s=this.pixelsPerMeter/this.worldSize*n,a=this._minimumHeightOverTerrain(),l=r[2]-s;if(l<=a)if(l<0||t){const t=this.locationCoordinate(this._center,this._centerAltitude),i=[r[0],r[1],t.z-r[2]],o=e.length(i);i[2]-=(a-l)/this._pixelsPerMercatorPixel;const n=e.length(i);if(0===n)return;e.scale$2(i,i,o/n*this._pixelsPerMercatorPixel),this._camera.position=[r[0],r[1],t.z*this._pixelsPerMercatorPixel-i[2]],this._updateStateFromCamera();}else this._isCameraConstrained=!0;}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const t=\"globe\"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||t){const i=this.center;return i.lat=e.clamp(i.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!t)&&(i.lng=e.clamp(i.lng,this.minLng,this.maxLng)),this.center=i,void(this._constraining=!1)}const i=this._unmodified,{x:o,y:r}=this.point;let n=0,s=o,a=r;const l=this.width/2,c=this.height/2,h=this.worldMinY*this.scale,u=this.worldMaxY*this.scale;if(r-c<h&&(a=h+c),r+c>u&&(a=u-c),u-h<this.height&&(n=Math.max(n,this.height/(u-h)),a=(u+h)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const e=this.worldMinX*this.scale,t=this.worldMaxX*this.scale,i=this.worldSize/2-(e+t)/2;s=(o+i+this.worldSize)%this.worldSize-i,s-l<e&&(s=e+l),s+l>t&&(s=t-l),t-e<this.width&&(n=Math.max(n,this.width/(t-e)),s=(t+e)/2);}s===o&&a===r||(this.center=this.unproject(new e.pointGeometry(s,a))),n&&(this.zoom+=this.scaleZoom(n)),this._constrainCamera(),this._unmodified=i,this._constraining=!1;}_minZoomForBounds(){let e=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(e=Math.max(e,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),e}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,i=this.pixelsPerMeter;\"globe\"===this.projection.name&&(this._mercatorScaleRatio=e.mercatorZfromAltitude(1,this.center.lat)/e.mercatorZfromAltitude(1,e.GLOBE_SCALE_MATCH_LATITUDE));const o=Wo(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,o),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const r=this._camera.getWorldToCamera(this.worldSize,\"meters\"===this.projection.zAxisUnit?i:1),n=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);n[8]=2*-t.x/this.width,n[9]=2*t.y/this.height;let s=e.mul([],n,r);if(this.projection.isReprojectedInTileSpace){const t=this.locationCoordinate(this.center),i=e.identity([]);e.translate(i,i,[t.x*this.worldSize,t.y*this.worldSize,0]),e.multiply(i,i,Zo(this)),e.translate(i,i,[-t.x*this.worldSize,-t.y*this.worldSize,0]),e.multiply(s,s,i),this.inverseAdjustmentMatrix=function(e){const t=Zo(e,!0);return v([],[t[0],t[1],t[4],t[5]])}(this);}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=e.scale([],s,[this.worldSize,this.worldSize,this.worldSize/i,1]),this.projMatrix=s,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);const a=e.invert([],n);this.frustumCorners=e.FrustumCorners.fromInvProjectionMatrix(a,this.horizonLineFromTop(),this.height);const l=new Float32Array(16);e.identity(l),e.scale(l,l,[1,-1,1]),e.rotateX(l,l,this._pitch),e.rotateZ(l,l,this.angle);const c=e.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),h=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;c[8]=2*-t.x/this.width,c[9]=2*(t.y+h)/this.height,this.skyboxMatrix=e.multiply(l,c,l);const u=this.point,_=u.x,d=u.y,p=this.width%2/2,m=this.height%2/2,f=Math.cos(this.angle),g=Math.sin(this.angle),x=_-Math.round(_)+f*p+g*m,y=d-Math.round(d)+f*m+g*p,b=new Float64Array(s);if(e.translate(b,b,[x>.5?x-1:x,y>.5?y-1:y,0]),this.alignedProjMatrix=b,s=e.create(),e.scale(s,s,[this.width/2,-this.height/2,1]),e.translate(s,s,[1,-1,0]),this.labelPlaneMatrix=s,s=e.create(),e.scale(s,s,[1,-1,1]),e.translate(s,s,[-1,-1,0]),e.scale(s,s,[2/this.width,2/this.height,1]),this.glCoordMatrix=s,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},s=e.invert(new Float64Array(16),this.pixelMatrix),!s)throw new Error(\"failed to invert matrix\");if(this.pixelMatrixInverse=s,\"globe\"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=e.calculateGlobeMatrix(this);const t=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=e.transformMat4(t,t,r),this.globeRadius=this.worldSize/2/Math.PI-1;}else this.globeMatrix=s;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={};}_calcFogMatrices(){this._fogTileMatrixCache={};const t=this.cameraWorldSizeForFog,i=this.cameraPixelsPerMeter,o=this._camera.position,r=1/this.height/this._pixelsPerMercatorPixel,n=[t,t,i];e.scale$2(n,n,r),e.scale$2(o,o,-1),e.multiply$2(o,o,n);const s=e.create();e.translate(s,s,o),e.scale(s,s,n),this.mercatorFogMatrix=s,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,i,r);}_computeCameraPosition(e){const t=(e=e||this.pixelsPerMeter)/this.pixelsPerMeter,i=this._camera.forward(),o=this.point,r=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*t-e/this.worldSize*this._centerAltitude;return [o.x/this.worldSize-i[0]*r,o.y/this.worldSize-i[1]*r,e/this.worldSize*this._centerAltitude-i[2]*r]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition());}_translateCameraConstrained(t){const i=this._maxCameraBoundsDistance()*Math.cos(this._pitch),o=this._camera.position[2],r=t[2];let n=1;this.projection.wrap&&(this.center=this.center.wrap()),r>0&&(n=Math.min((i-o)/r,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,n),this._updateStateFromCamera();}_updateStateFromCamera(){const t=this._camera.position,i=this._camera.forward(),{pitch:o,bearing:r}=this._camera.getPitchBearing(),n=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,s=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),a=Math.max((t[2]-n)/Math.cos(o),s),l=this._zoomFromMercatorZ(a);e.scaleAndAdd(t,t,i,a),this._pitch=e.clamp(o,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(r,-Math.PI,Math.PI),this._setZoom(e.clamp(l,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new e.MercatorCoordinate(t[0],t[1],t[2])),this._unmodified=!1,this._constrain(),this._calcMatrices();}_worldSizeFromZoom(e){return Math.pow(2,e)*this.tileSize}_mercatorZfromZoom(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}_minimumHeightOverTerrain(){const e=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(e)}_zoomFromMercatorZ(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}zoomFromMercatorZAdjusted(e){const t=t=>{const i=this.getCameraToCenterDistance(this.projection,t);return this.scaleZoom(i/(e*this.tileSize))};let i,o=t(this.zoom),r=Math.abs(o-t(o));for(;i!==r;)o=t(o),i=r,r=Math.abs(o-t(o));return o}_terrainEnabled(){return !(!this._elevation||!this.projection.supportsTerrain&&(e.warnOnce(\"Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain.\"),1))}anyCornerOffEdge(t,i){const o=Math.min(t.x,i.x),r=Math.max(t.x,i.x),n=Math.min(t.y,i.y),s=Math.max(t.y,i.y);if(n<this.horizonLineFromTop(!1))return !0;if(\"mercator\"!==this.projection.name)return !1;const a=[new e.pointGeometry(o,n),new e.pointGeometry(r,s),new e.pointGeometry(o,s),new e.pointGeometry(r,n)],l=this.renderWorldCopies?-3:0,c=this.renderWorldCopies?4:1;for(const e of a){const t=this.pointRayIntersection(e);if(t.t<0)return !0;const i=this.rayIntersectionCoordinate(t);if(i.x<l||i.y<0||i.x>c||i.y>1)return !0}return !1}isHorizonVisible(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new e.pointGeometry(0,0),new e.pointGeometry(this.width,this.height))}zoomDeltaToMovement(t,i){const o=e.length(e.sub([],this._camera.position,t)),r=this._zoomFromMercatorZ(o)+i;return o-this._mercatorZfromZoom(r)}getCameraPoint(){if(\"globe\"===this.projection.name){const t=function([t,i,o],r){const n=[t,i,o,1];e.transformMat4$1(n,n,r);const s=n[3]=Math.max(n[3],1e-6);return n[0]/=s,n[1]/=s,n[2]/=s,n}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new e.pointGeometry(t[0],t[1])}{const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.pointGeometry(0,t))}}getCameraToCenterDistance(e,t=this.zoom){const i=Wo(e,t,this.width,this.height,1024),o=e.pixelSpaceConversion(this.center.lat,this.worldSize,i);return .5/Math.tan(.5*this._fov)*this.height*o}getWorldToCameraMatrix(){const t=this._camera.getWorldToCamera(this.worldSize,\"meters\"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return \"globe\"===this.projection.name&&e.multiply(t,t,this.globeMatrix),t}}function Yo(e,t){let i=!1,o=null;const r=()=>{o=null,i&&(e(),o=setTimeout(r,t),i=!1);};return ()=>(i=!0,o||r(),o)}class Ko{constructor(t){this._hashName=t&&encodeURIComponent(t),e.bindAll([\"_getCurrentHash\",\"_onHashChange\",\"_updateHash\"],this),this._updateHash=Yo(this._updateHashUnthrottled.bind(this),300);}addTo(t){return this._map=t,e.window.addEventListener(\"hashchange\",this._onHashChange,!1),t.on(\"moveend\",this._updateHash),this}remove(){return this._map?(this._map.off(\"moveend\",this._updateHash),e.window.removeEventListener(\"hashchange\",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const t=this._map;if(!t)return \"\";const i=Jo(t);if(this._hashName){const t=this._hashName;let o=!1;const r=e.window.location.hash.slice(1).split(\"&\").map((e=>{const r=e.split(\"=\")[0];return r===t?(o=!0,`${r}=${i}`):e})).filter((e=>e));return o||r.push(`${t}=${i}`),`#${r.join(\"&\")}`}return `#${i}`}_getCurrentHash(){const t=e.window.location.hash.replace(\"#\",\"\");if(this._hashName){let e;return t.split(\"&\").map((e=>e.split(\"=\"))).forEach((t=>{t[0]===this._hashName&&(e=t);})),(e&&e[1]||\"\").split(\"/\")}return t.split(\"/\")}_onHashChange(){const e=this._map;if(!e)return !1;const t=this._getCurrentHash();if(t.length>=3&&!t.some((e=>isNaN(e)))){const i=e.dragRotate.isEnabled()&&e.touchZoomRotate.isEnabled()?+(t[3]||0):e.getBearing();return e.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:i,pitch:+(t[4]||0)}),!0}return !1}_updateHashUnthrottled(){const t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());e.window.history.replaceState(e.window.history.state,null,t);}}function Jo(e,t){const i=e.getCenter(),o=Math.round(100*e.getZoom())/100,r=Math.ceil((o*Math.LN2+Math.log(512/360/.5))/Math.LN10),n=Math.pow(10,r),s=Math.round(i.lng*n)/n,a=Math.round(i.lat*n)/n,l=e.getBearing(),c=e.getPitch();let h=t?`/${s}/${a}/${o}`:`${o}/${a}/${s}`;return (l||c)&&(h+=\"/\"+Math.round(10*l)/10),c&&(h+=`/${Math.round(c)}`),h}const Qo={linearity:.3,easing:e.bezier(0,0,.3,1)},er=e.extend({deceleration:2500,maxSpeed:1400},Qo),tr=e.extend({deceleration:20,maxSpeed:1400},Qo),ir=e.extend({deceleration:1e3,maxSpeed:360},Qo),or=e.extend({deceleration:1e3,maxSpeed:90},Qo);class rr{constructor(e){this._map=e,this.clear();}clear(){this._inertiaBuffer=[];}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:t});}_drainInertiaBuffer(){const t=this._inertiaBuffer,i=e.exported.now();for(;t.length>0&&i-t[0].time>160;)t.shift();}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const i={zoom:0,bearing:0,pitch:0,pan:new e.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:e}of this._inertiaBuffer)i.zoom+=e.zoomDelta||0,i.bearing+=e.bearingDelta||0,i.pitch+=e.pitchDelta||0,e.panDelta&&i.pan._add(e.panDelta),e.around&&(i.around=e.around),e.pinchAround&&(i.pinchAround=e.pinchAround);const o=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,r={};if(i.pan.mag()){const n=sr(i.pan.mag(),o,e.extend({},er,t||{}));r.offset=i.pan.mult(n.amount/i.pan.mag()),r.center=this._map.transform.center,nr(r,n);}if(i.zoom){const e=sr(i.zoom,o,tr);r.zoom=this._map.transform.zoom+e.amount,nr(r,e);}if(i.bearing){const t=sr(i.bearing,o,ir);r.bearing=this._map.transform.bearing+e.clamp(t.amount,-179,179),nr(r,t);}if(i.pitch){const e=sr(i.pitch,o,or);r.pitch=this._map.transform.pitch+e.amount,nr(r,e);}if(r.zoom||r.bearing){const e=void 0===i.pinchAround?i.around:i.pinchAround;r.around=e?this._map.unproject(e):this._map.getCenter();}return this.clear(),r.noMoveStart=!0,r}}function nr(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing);}function sr(t,i,o){const{maxSpeed:r,linearity:n,deceleration:s}=o,a=e.clamp(t*n/(i/1e3),-r,r),l=Math.abs(a)/(s*n);return {easing:o.easing,duration:1e3*l,amount:a*(l/2)}}class ar extends e.Event{preventDefault(){this._defaultPrevented=!0;}get defaultPrevented(){return this._defaultPrevented}constructor(t,i,o,r={}){const n=p(i.getCanvasContainer(),o),s=i.unproject(n);super(t,e.extend({point:n,lngLat:s,originalEvent:o},r)),this._defaultPrevented=!1,this.target=i;}}class lr extends e.Event{preventDefault(){this._defaultPrevented=!0;}get defaultPrevented(){return this._defaultPrevented}constructor(t,i,o){const r=\"touchend\"===t?o.changedTouches:o.touches,n=m(i.getCanvasContainer(),r),s=n.map((e=>i.unproject(e))),a=n.reduce(((e,t,i,o)=>e.add(t.div(o.length))),new e.pointGeometry(0,0));super(t,{points:n,point:a,lngLats:s,lngLat:i.unproject(a),originalEvent:o}),this._defaultPrevented=!1;}}class cr extends e.Event{preventDefault(){this._defaultPrevented=!0;}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,i){super(e,{originalEvent:i}),this._defaultPrevented=!1;}}class hr{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance;}reset(){this._mousedownPos=void 0;}wheel(e){return this._firePreventable(new cr(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new ar(e.type,this._map,e))}mouseup(e){this._map.fire(new ar(e.type,this._map,e));}preclick(t){const i=e.extend({},t);i.type=\"preclick\",this._map.fire(new ar(i.type,this._map,i));}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||(this.preclick(e),this._map.fire(new ar(e.type,this._map,e)));}dblclick(e){return this._firePreventable(new ar(e.type,this._map,e))}mouseover(e){this._map.fire(new ar(e.type,this._map,e));}mouseout(e){this._map.fire(new ar(e.type,this._map,e));}touchstart(e){return this._firePreventable(new lr(e.type,this._map,e))}touchmove(e){this._map.fire(new lr(e.type,this._map,e));}touchend(e){this._map.fire(new lr(e.type,this._map,e));}touchcancel(e){this._map.fire(new lr(e.type,this._map,e));}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return {}}isEnabled(){return !0}isActive(){return !1}enable(){}disable(){}}class ur{constructor(e){this._map=e;}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0;}mousemove(e){this._map.fire(new ar(e.type,this._map,e));}mousedown(){this._delayContextMenu=!0;}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ar(\"contextmenu\",this._map,this._contextMenuEvent)),delete this._contextMenuEvent);}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new ar(e.type,this._map,e)),this._map.listens(\"contextmenu\")&&e.preventDefault();}isEnabled(){return !0}isActive(){return !1}enable(){}disable(){}}class _r{constructor(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1;}isEnabled(){return !!this._enabled}isActive(){return !!this._active}enable(){this.isEnabled()||(this._enabled=!0);}disable(){this.isEnabled()&&(this._enabled=!1);}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(h(),this._startPos=this._lastPos=t,this._active=!0);}mousemoveWindow(e,t){if(!this._active)return;const i=t,o=this._startPos,r=this._lastPos;if(!o||!r||r.equals(i)||!this._box&&i.dist(o)<this._clickTolerance)return;this._lastPos=i,this._box||(this._box=n(\"div\",\"mapboxgl-boxzoom\",this._container),this._container.classList.add(\"mapboxgl-crosshair\"),this._fireEvent(\"boxzoomstart\",e));const s=Math.min(o.x,i.x),a=Math.max(o.x,i.x),l=Math.min(o.y,i.y),c=Math.max(o.y,i.y);this._map._requestDomTask((()=>{this._box&&(this._box.style.transform=`translate(${s}px,${l}px)`,this._box.style.width=a-s+\"px\",this._box.style.height=c-l+\"px\");}));}mouseupWindow(t,i){if(!this._active)return;const o=this._startPos,r=i;if(o&&0===t.button){if(this.reset(),d(),o.x!==r.x||o.y!==r.y)return this._map.fire(new e.Event(\"boxzoomend\",{originalEvent:t})),{cameraAnimation:e=>e.fitScreenCoordinates(o,r,this._map.getBearing(),{linear:!1})};this._fireEvent(\"boxzoomcancel\",t);}}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent(\"boxzoomcancel\",e));}blur(){this.reset();}reset(){this._active=!1,this._container.classList.remove(\"mapboxgl-crosshair\"),this._box&&(this._box.remove(),this._box=null),u(),delete this._startPos,delete this._lastPos;}_fireEvent(t,i){return this._map.fire(new e.Event(t,{originalEvent:i}))}}function dr(e,t){const i={};for(let o=0;o<e.length;o++)i[e[o].identifier]=t[o];return i}class pr{constructor(e){this.reset(),this.numTouches=e.numTouches;}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1;}touchstart(t,i,o){(this.centroid||o.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=t.timeStamp),o.length===this.numTouches&&(this.centroid=function(t){const i=new e.pointGeometry(0,0);for(const e of t)i._add(e);return i.div(t.length)}(i),this.touches=dr(o,i)));}touchmove(e,t,i){if(this.aborted||!this.centroid)return;const o=dr(i,t);for(const e in this.touches){const t=this.touches[e],i=o[e];(!i||i.dist(t)>30)&&(this.aborted=!0);}}touchend(e,t,i){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class mr{constructor(e){this.singleTap=new pr(e),this.numTaps=e.numTaps,this.reset();}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset();}touchstart(e,t,i){this.singleTap.touchstart(e,t,i);}touchmove(e,t,i){this.singleTap.touchmove(e,t,i);}touchend(e,t,i){const o=this.singleTap.touchend(e,t,i);if(o){const t=e.timeStamp-this.lastTime<500,i=!this.lastTap||this.lastTap.dist(o)<30;if(t&&i||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=o,this.count===this.numTaps)return this.reset(),o}}}class fr{constructor(){this._zoomIn=new mr({numTouches:1,numTaps:2}),this._zoomOut=new mr({numTouches:2,numTaps:1}),this.reset();}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset();}touchstart(e,t,i){this._zoomIn.touchstart(e,t,i),this._zoomOut.touchstart(e,t,i);}touchmove(e,t,i){this._zoomIn.touchmove(e,t,i),this._zoomOut.touchmove(e,t,i);}touchend(e,t,i){const o=this._zoomIn.touchend(e,t,i),r=this._zoomOut.touchend(e,t,i);return o?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(o)},{originalEvent:e})}):r?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(r)},{originalEvent:e})}):void 0}touchcancel(){this.reset();}enable(){this._enabled=!0;}disable(){this._enabled=!1,this.reset();}isEnabled(){return this._enabled}isActive(){return this._active}}const gr={0:1,2:2};class vr{constructor(e){this.reset(),this._clickTolerance=e.clickTolerance||1;}blur(){this.reset();}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0;}_correctButton(e,t){return !1}_move(e,t){return {}}mousedown(e,t){if(this._lastPoint)return;const i=f(e);this._correctButton(e,i)&&(this._lastPoint=t,this._eventButton=i);}mousemoveWindow(e,t){const i=this._lastPoint;if(i)if(e.preventDefault(),null!=this._eventButton&&function(e,t){const i=gr[t];return void 0===e.buttons||(e.buttons&i)!==i}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(i,t)}mouseupWindow(e){this._lastPoint&&f(e)===this._eventButton&&(this._moved&&d(),this.reset());}enable(){this._enabled=!0;}disable(){this._enabled=!1,this.reset();}isEnabled(){return this._enabled}isActive(){return this._active}}class xr extends vr{mousedown(e,t){super.mousedown(e,t),this._lastPoint&&(this._active=!0);}_correctButton(e,t){return 0===t&&!e.ctrlKey}_move(e,t){return {around:t,panDelta:t.sub(e)}}}class yr extends vr{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const i=.8*(t.x-e.x);if(i)return this._active=!0,{bearingDelta:i}}contextmenu(e){e.preventDefault();}}class br extends vr{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const i=-.5*(t.y-e.y);if(i)return this._active=!0,{pitchDelta:i}}contextmenu(e){e.preventDefault();}}class wr{constructor(t,i){this._map=t,this._el=t.getCanvasContainer(),this._minTouches=1,this._clickTolerance=i.clickTolerance||1,this.reset(),e.bindAll([\"_addTouchPanBlocker\",\"_showTouchPanBlockerAlert\"],this);}reset(){this._active=!1,this._touches={},this._sum=new e.pointGeometry(0,0);}touchstart(e,t,i){return this._calculateTransform(e,t,i)}touchmove(t,i,o){if(this._active&&!(o.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===o.length&&!e.isFullscreen())return void this._showTouchPanBlockerAlert();\"hidden\"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility=\"hidden\",clearTimeout(this._alertTimer));}return t.cancelable&&t.preventDefault(),this._calculateTransform(t,i,o)}}touchend(e,t,i){this._calculateTransform(e,t,i),this._active&&i.length<this._minTouches&&this.reset();}touchcancel(){this.reset();}_calculateTransform(t,i,o){o.length>0&&(this._active=!0);const r=dr(o,i),n=new e.pointGeometry(0,0),s=new e.pointGeometry(0,0);let a=0;for(const e in r){const t=r[e],i=this._touches[e];i&&(n._add(t),s._add(t.sub(i)),a++,r[e]=t);}if(this._touches=r,a<this._minTouches||!s.mag())return;const l=s.div(a);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:n.div(a),panDelta:l}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add(\"mapboxgl-touch-pan-blocker-override\",\"mapboxgl-scrollable-page\"));}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove(\"mapboxgl-touch-pan-blocker-override\",\"mapboxgl-scrollable-page\")),this.reset();}isEnabled(){return !!this._enabled}isActive(){return !!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=n(\"div\",\"mapboxgl-touch-pan-blocker\",this._map._container),this._alertContainer.textContent=this._map._getUIString(\"TouchPanBlocker.Message\"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`);}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility=\"visible\",this._alertContainer.classList.add(\"mapboxgl-touch-pan-blocker-show\"),this._alertContainer.setAttribute(\"role\",\"alert\"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove(\"mapboxgl-touch-pan-blocker-show\"),this._alertContainer.setAttribute(\"role\",\"null\");}),500);}}class Tr{constructor(){this.reset();}reset(){this._active=!1,this._firstTwoTouches=void 0;}_start(e){}_move(e,t,i){return {}}touchstart(e,t,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([t[0],t[1]]));}touchmove(e,t,i){const o=this._firstTwoTouches;if(!o)return;e.preventDefault();const[r,n]=o,s=Er(i,t,r),a=Er(i,t,n);if(!s||!a)return;const l=this._aroundCenter?null:s.add(a).div(2);return this._move([s,a],l,e)}touchend(e,t,i){if(!this._firstTwoTouches)return;const[o,r]=this._firstTwoTouches,n=Er(i,t,o),s=Er(i,t,r);n&&s||(this._active&&d(),this.reset());}touchcancel(){this.reset();}enable(e){this._enabled=!0,this._aroundCenter=!!e&&\"center\"===e.around;}disable(){this._enabled=!1,this.reset();}isEnabled(){return this._enabled}isActive(){return this._active}}function Er(e,t,i){for(let o=0;o<e.length;o++)if(e[o].identifier===i)return t[o]}function Cr(e,t){return Math.log(e/t)/Math.LN2}class Ir extends Tr{reset(){super.reset(),this._distance=0,this._startDistance=0;}_start(e){this._startDistance=this._distance=e[0].dist(e[1]);}_move(e,t){const i=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Cr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Cr(this._distance,i),pinchAround:t}}}function Mr(e,t){return 180*e.angleWith(t)/Math.PI}class Sr extends Tr{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0;}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1]);}_move(e,t){const i=this._vector;if(this._vector=e[0].sub(e[1]),i&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Mr(this._vector,i),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,i=this._startVector;if(!i)return !1;const o=Mr(e,i);return Math.abs(o)<t}}function Dr(e){return Math.abs(e.y)>Math.abs(e.x)}class Ar extends Tr{constructor(e){super(),this._map=e;}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0;}_start(e){this._lastPoints=e,Dr(e[0].sub(e[1]))&&(this._valid=!1);}_move(t,i,o){const r=this._lastPoints;if(!r)return;const n=t[0].sub(r[0]),s=t[1].sub(r[1]);return this._map._cooperativeGestures&&!e.isFullscreen()&&o.touches.length<3||(this._valid=this.gestureBeginsVertically(n,s,o.timeStamp),!this._valid)?void 0:(this._lastPoints=t,this._active=!0,{pitchDelta:(n.y+s.y)/2*-.5})}gestureBeginsVertically(e,t,i){if(void 0!==this._valid)return this._valid;const o=e.mag()>=2,r=t.mag()>=2;if(!o&&!r)return;if(!o||!r)return null==this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;const n=e.y>0==t.y>0;return Dr(e)&&Dr(t)&&n}}const Lr={panStep:100,bearingStep:15,pitchStep:10};class zr{constructor(){const e=Lr;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1;}blur(){this.reset();}reset(){this._active=!1;}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,i=0,o=0,r=0,n=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?i=-1:(e.preventDefault(),r=-1);break;case 39:e.shiftKey?i=1:(e.preventDefault(),r=1);break;case 38:e.shiftKey?o=1:(e.preventDefault(),n=-1);break;case 40:e.shiftKey?o=-1:(e.preventDefault(),n=1);break;default:return}return this._rotationDisabled&&(i=0,o=0),{cameraAnimation:s=>{const a=s.getZoom();s.easeTo({duration:300,easeId:\"keyboardHandler\",easing:Pr,zoom:t?Math.round(a)+t*(e.shiftKey?2:1):a,bearing:s.getBearing()+i*this._bearingStep,pitch:s.getPitch()+o*this._pitchStep,offset:[-r*this._panStep,-n*this._panStep],center:s.getCenter()},{originalEvent:e});}}}enable(){this._enabled=!0;}disable(){this._enabled=!1,this.reset();}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0;}enableRotation(){this._rotationDisabled=!1;}}function Pr(e){return e*(2-e)}const Rr=4.000244140625;class Or{constructor(t,i){this._map=t,this._el=t.getCanvasContainer(),this._handler=i,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll([\"_onTimeout\",\"_addScrollZoomBlocker\",\"_showBlockerAlert\"],this);}setZoomRate(e){this._defaultZoomRate=e;}setWheelZoomRate(e){this._wheelZoomRate=e;}isEnabled(){return !!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return !!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&\"center\"===e.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker());}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()));}wheel(t){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(t.ctrlKey||t.metaKey||this.isZooming()||e.isFullscreen()))return void this._showBlockerAlert();\"hidden\"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility=\"hidden\",clearTimeout(this._alertTimer));}let i=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const o=e.exported.now(),r=o-(this._lastWheelEventTime||0);this._lastWheelEventTime=o,0!==i&&i%Rr==0?this._type=\"wheel\":0!==i&&Math.abs(i)<4?this._type=\"trackpad\":r>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(r*i)<200?\"trackpad\":\"wheel\",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),t.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=t,this._delta-=i,this._active||this._start(t)),t.preventDefault();}_onTimeout(e){this._type=\"wheel\",this._delta-=this._lastValue,this._active||this._start(e);}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const t=p(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame());}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const t=this._map.transform;\"wheel\"===this._type&&t.projection.wrap&&(t._center.lng>=180||t._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const i=()=>t._terrainEnabled()&&this._aroundCoord?t.computeZoomRelativeTo(this._aroundCoord):t.zoom;if(0!==this._delta){const e=\"wheel\"===this._type&&Math.abs(this._delta)>Rr?this._wheelZoomRate:this._defaultZoomRate;let o=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==o&&(o=1/o);const r=i(),n=Math.pow(2,r),s=\"number\"==typeof this._targetZoom?t.zoomScale(this._targetZoom):n;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(s*o))),\"wheel\"===this._type&&(this._startZoom=r,this._easing=this._smoothOutEasing(200)),this._delta=0;}const o=\"number\"==typeof this._targetZoom?this._targetZoom:i(),r=this._startZoom,n=this._easing;let s,a=!1;if(\"wheel\"===this._type&&r&&n){const t=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),i=n(t);s=e.number(r,o,i),t<1?this._frameId||(this._frameId=!0):a=!0;}else s=o,a=!0;return this._active=!0,a&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout;}),200)),{noInertia:!0,needsRenderFrame:!a,zoomDelta:s-i(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let i=e.ease;if(this._prevEase){const t=this._prevEase,o=(e.exported.now()-t.start)/t.duration,r=t.easing(o+.01)-t.easing(o),n=.27/Math.sqrt(r*r+1e-4)*.01,s=Math.sqrt(.0729-n*n);i=e.bezier(n,s,.25,1);}return this._prevEase={start:e.exported.now(),duration:t,easing:i},i}blur(){this.reset();}reset(){this._active=!1;}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=n(\"div\",\"mapboxgl-scroll-zoom-blocker\",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(e.window.navigator.userAgent)?this._map._getUIString(\"ScrollZoomBlocker.CmdMessage\"):this._map._getUIString(\"ScrollZoomBlocker.CtrlMessage\"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`);}_showBlockerAlert(){this._alertContainer.style.visibility=\"visible\",this._alertContainer.classList.add(\"mapboxgl-scroll-zoom-blocker-show\"),this._alertContainer.setAttribute(\"role\",\"alert\"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove(\"mapboxgl-scroll-zoom-blocker-show\"),this._alertContainer.setAttribute(\"role\",\"null\");}),200);}}class Br{constructor(e,t){this._clickZoom=e,this._tapZoom=t;}enable(){this._clickZoom.enable(),this._tapZoom.enable();}disable(){this._clickZoom.disable(),this._tapZoom.disable();}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class kr{constructor(){this.reset();}reset(){this._active=!1;}blur(){this.reset();}dblclick(e,t){return e.preventDefault(),{cameraAnimation:i=>{i.easeTo({duration:300,zoom:i.getZoom()+(e.shiftKey?-1:1),around:i.unproject(t)},{originalEvent:e});}}}enable(){this._enabled=!0;}disable(){this._enabled=!1,this.reset();}isEnabled(){return this._enabled}isActive(){return this._active}}class Fr{constructor(){this._tap=new mr({numTouches:1,numTaps:1}),this.reset();}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset();}touchstart(e,t,i){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=t[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(e,t,i));}touchmove(e,t,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;const o=t[0],r=o.y-this._swipePoint.y;return this._swipePoint=o,e.preventDefault(),this._active=!0,{zoomDelta:r/128}}}else this._tap.touchmove(e,t,i);}touchend(e,t,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(e,t,i)&&(this._tapTime=e.timeStamp);}touchcancel(){this.reset();}enable(){this._enabled=!0;}disable(){this._enabled=!1,this.reset();}isEnabled(){return this._enabled}isActive(){return this._active}}class Ur{constructor(e,t,i){this._el=e,this._mousePan=t,this._touchPan=i;}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add(\"mapboxgl-touch-drag-pan\");}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove(\"mapboxgl-touch-drag-pan\");}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Nr{constructor(e,t,i){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=i;}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable();}disable(){this._mouseRotate.disable(),this._mousePitch.disable();}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Gr{constructor(e,t,i,o){this._el=e,this._touchZoom=t,this._touchRotate=i,this._tapDragZoom=o,this._rotationDisabled=!1,this._enabled=!0;}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add(\"mapboxgl-touch-zoom-rotate\");}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove(\"mapboxgl-touch-zoom-rotate\");}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable();}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable();}}const jr=e=>e.zoom||e.drag||e.pitch||e.rotate;class Zr extends e.Event{}class Vr{constructor(){this.constants=[1,1,.01],this.radius=0;}setup(t,i){const o=e.sub([],i,t);this.radius=e.length(o[2]<0?e.div([],o,this.constants):[o[0],o[1],0]);}projectRay(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$1(t,t,this.constants);const i=e.scale$2([],t,this.radius);if(i[2]>0){const t=e.scale$2([],[0,0,1],e.dot(i,[0,0,1])),o=e.scale$2([],e.normalize([],[i[0],i[1],0]),this.radius),r=e.add([],i,e.scale$2([],e.sub([],e.add([],o,t),i),2));i[0]=r[0],i[1]=r[1];}return i}}function Wr(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class Xr{constructor(t,i){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new rr(t),this._bearingSnap=i.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Vr,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(i),e.bindAll([\"handleEvent\",\"handleWindowEvent\"],this);const o=this._el;this._listeners=[[o,\"touchstart\",{passive:!0}],[o,\"touchmove\",{passive:!1}],[o,\"touchend\",void 0],[o,\"touchcancel\",void 0],[o,\"mousedown\",void 0],[o,\"mousemove\",void 0],[o,\"mouseup\",void 0],[e.window.document,\"mousemove\",{capture:!0}],[e.window.document,\"mouseup\",void 0],[o,\"mouseover\",void 0],[o,\"mouseout\",void 0],[o,\"dblclick\",void 0],[o,\"click\",void 0],[o,\"keydown\",{capture:!1}],[o,\"keyup\",void 0],[o,\"wheel\",{passive:!1}],[o,\"contextmenu\",void 0],[e.window,\"blur\",void 0]];for(const[t,i,o]of this._listeners)t.addEventListener(i,t===e.window.document?this.handleWindowEvent:this.handleEvent,o);}destroy(){for(const[t,i,o]of this._listeners)t.removeEventListener(i,t===e.window.document?this.handleWindowEvent:this.handleEvent,o);}_addDefaultHandlers(e){const t=this._map,i=t.getCanvasContainer();this._add(\"mapEvent\",new hr(t,e));const o=t.boxZoom=new _r(t,e);this._add(\"boxZoom\",o);const r=new fr,n=new kr;t.doubleClickZoom=new Br(n,r),this._add(\"tapZoom\",r),this._add(\"clickZoom\",n);const s=new Fr;this._add(\"tapDragZoom\",s);const a=t.touchPitch=new Ar(t);this._add(\"touchPitch\",a);const l=new yr(e),c=new br(e);t.dragRotate=new Nr(e,l,c),this._add(\"mouseRotate\",l,[\"mousePitch\"]),this._add(\"mousePitch\",c,[\"mouseRotate\"]);const h=new xr(e),u=new wr(t,e);t.dragPan=new Ur(i,h,u),this._add(\"mousePan\",h),this._add(\"touchPan\",u,[\"touchZoom\",\"touchRotate\"]);const _=new Sr,d=new Ir;t.touchZoomRotate=new Gr(i,d,_,s),this._add(\"touchRotate\",_,[\"touchPan\",\"touchZoom\"]),this._add(\"touchZoom\",d,[\"touchPan\",\"touchRotate\"]),this._add(\"blockableMapEvent\",new ur(t));const p=t.scrollZoom=new Or(t,this);this._add(\"scrollZoom\",p,[\"mousePan\"]);const m=t.keyboard=new zr;this._add(\"keyboard\",m);for(const i of [\"boxZoom\",\"doubleClickZoom\",\"tapDragZoom\",\"touchPitch\",\"dragRotate\",\"dragPan\",\"touchZoomRotate\",\"scrollZoom\",\"keyboard\"])e.interactive&&e[i]&&t[i].enable(e[i]);}_add(e,t,i){this._handlers.push({handlerName:e,handler:t,allowed:i}),this._handlersById[e]=t;}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[];}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return !0;return !1}isZooming(){return !!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return !!this._eventsInProgress.rotate}isMoving(){return !!jr(this._eventsInProgress)||this.isZooming()}_isDragging(){return !!this._eventsInProgress.drag}_blockedByActive(e,t,i){for(const o in e)if(o!==i&&(!t||t.indexOf(o)<0))return !0;return !1}handleWindowEvent(e){this.handleEvent(e,`${e.type}Window`);}_getMapTouches(e){const t=[];for(const i of e)this._el.contains(i.target)&&t.push(i);return t}handleEvent(e,t){this._updatingCamera=!0;const i=\"renderFrame\"===e.type,o=i?void 0:e,r={needsRenderFrame:!1},n={},s={},a=e.touches?this._getMapTouches(e.touches):void 0,l=a?m(this._el,a):i?void 0:p(this._el,e);for(const{handlerName:i,handler:c,allowed:h}of this._handlers){if(!c.isEnabled())continue;let u;this._blockedByActive(s,h,i)?c.reset():c[t||e.type]&&(u=c[t||e.type](e,l,a),this.mergeHandlerResult(r,n,u,i,o),u&&u.needsRenderFrame&&this._triggerRenderFrame()),(u||c.isActive())&&(s[i]=c);}const c={};for(const e in this._previousActiveHandlers)s[e]||(c[e]=o);this._previousActiveHandlers=s,(Object.keys(c).length||Wr(r))&&(this._changes.push([r,n,c]),this._triggerRenderFrame()),(Object.keys(s).length||Wr(r))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:h}=r;h&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],h(this._map));}mergeHandlerResult(t,i,o,r,n){if(!o)return;e.extend(t,o);const s={handlerName:r,originalEvent:o.originalEvent||n};void 0!==o.zoomDelta&&(i.zoom=s),void 0!==o.panDelta&&(i.drag=s),void 0!==o.pitchDelta&&(i.pitch=s),void 0!==o.bearingDelta&&(i.rotate=s);}_applyChanges(){const t={},i={},o={};for(const[r,n,s]of this._changes)r.panDelta&&(t.panDelta=(t.panDelta||new e.pointGeometry(0,0))._add(r.panDelta)),r.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+r.zoomDelta),r.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+r.bearingDelta),r.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+r.pitchDelta),void 0!==r.around&&(t.around=r.around),void 0!==r.aroundCoord&&(t.aroundCoord=r.aroundCoord),void 0!==r.pinchAround&&(t.pinchAround=r.pinchAround),r.noInertia&&(t.noInertia=r.noInertia),e.extend(i,n),e.extend(o,s);this._updateMapTransform(t,i,o),this._changes=[];}_updateMapTransform(t,i,o){const r=this._map,n=r.transform,s=e=>[e.x,e.y,e.z];if((e=>{const t=this._eventsInProgress.drag;return t&&!this._handlersById[t.handlerName].isActive()})()&&!Wr(t)){const e=n.zoom;n.cameraElevationReference=\"sea\",n.recenterOnTerrain(),n.cameraElevationReference=\"ground\",e!==n.zoom&&this._map._update(!0);}if(n._isCameraConstrained&&r._stop(!0),!Wr(t))return void this._fireEvents(i,o,!0);let{panDelta:a,zoomDelta:l,bearingDelta:c,pitchDelta:h,around:u,aroundCoord:_,pinchAround:d}=t;n._isCameraConstrained&&(l>0&&(l=0),n._isCameraConstrained=!1),void 0!==d&&(u=d),(e=>i.drag&&!this._eventsInProgress.drag)()&&u&&(this._dragOrigin=s(n.pointCoordinate3D(u)),this._trackingEllipsoid.setup(n._camera.position,this._dragOrigin)),n.cameraElevationReference=\"sea\",r._stop(!0),u=u||r.transform.centerPoint,c&&(n.bearing+=c),h&&(n.pitch+=h),n._updateCameraState();const p=[0,0,0];if(a)if(\"mercator\"===n.projection.name){const e=this._trackingEllipsoid.projectRay(n.screenPointToMercatorRay(u).dir),t=this._trackingEllipsoid.projectRay(n.screenPointToMercatorRay(u.sub(a)).dir);p[0]=t[0]-e[0],p[1]=t[1]-e[1];}else {const t=n.pointCoordinate(u);if(\"globe\"===n.projection.name){a=a.rotate(-n.angle);const i=n._pixelsPerMercatorPixel/n.worldSize;p[0]=-a.x*e.mercatorScale(e.latFromMercatorY(t.y))*i,p[1]=-a.y*e.mercatorScale(n.center.lat)*i;}else {const e=n.pointCoordinate(u.sub(a));t&&e&&(p[0]=e.x-t.x,p[1]=e.y-t.y);}}const m=n.zoom,f=[0,0,0];if(l){const t=s(_||n.pointCoordinate3D(u)),i={dir:e.normalize([],e.sub([],t,n._camera.position))};if(i.dir[2]<0){const o=n.zoomDeltaToMovement(t,l);e.scale$2(f,i.dir,o);}}const g=e.add(p,p,f);n._translateCameraConstrained(g),l&&Math.abs(n.zoom-m)>1e-4&&n.recenterOnTerrain(),n.cameraElevationReference=\"ground\",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(i,o,!0);}_fireEvents(t,i,o){const r=jr(this._eventsInProgress),n=jr(t),s={};for(const e in t){const{originalEvent:i}=t[e];this._eventsInProgress[e]||(s[`${e}start`]=i),this._eventsInProgress[e]=t[e];}!r&&n&&this._fireEvent(\"movestart\",n.originalEvent);for(const e in s)this._fireEvent(e,s[e]);n&&this._fireEvent(\"move\",n.originalEvent);for(const e in t){const{originalEvent:i}=t[e];this._fireEvent(e,i);}const a={};let l;for(const e in this._eventsInProgress){const{handlerName:t,originalEvent:o}=this._eventsInProgress[e];this._handlersById[t].isActive()||(delete this._eventsInProgress[e],l=i[t]||o,a[`${e}end`]=l);}for(const e in a)this._fireEvent(e,a[e]);const c=jr(this._eventsInProgress);if(o&&(r||n)&&!c){this._updatingCamera=!0;const t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),i=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;t?(i(t.bearing||this._map.getBearing())&&(t.bearing=0),this._map.easeTo(t,{originalEvent:l})):(this._map.fire(new e.Event(\"moveend\",{originalEvent:l})),i(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1;}}_fireEvent(t,i){this._map.fire(new e.Event(t,i?{originalEvent:i}:{}));}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{this._frameId=void 0,this.handleEvent(new Zr(\"renderFrame\",{timeStamp:e})),this._applyChanges();}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame());}}const qr=\"map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.\";class $r extends e.Evented{constructor(t,i){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=i.bearingSnap,e.bindAll([\"_renderFrameCallback\"],this);}getCenter(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(t,i,o){return t=e.pointGeometry.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},i),o)}panTo(t,i,o){return this.easeTo(e.extend({center:t},i),o)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(t,i,o){return this.easeTo(e.extend({zoom:t},i),o)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(t,i,o){return this.easeTo(e.extend({bearing:t},i),o)}resetNorth(t,i){return this.rotateTo(0,e.extend({duration:1e3},t),i),this}resetNorthPitch(t,i){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),i),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(t,i){t=e.LngLatBounds.convert(t);const o=i&&i.bearing||0,r=i&&i.pitch||0,n=t.getNorthWest(),s=t.getSouthEast();return this._cameraForBounds(this.transform,n,s,o,r,i)}_extendCameraOptions(t){const i={top:0,bottom:0,right:0,left:0};if(\"number\"==typeof(t=e.extend({padding:i,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){const e=t.padding;t.padding={top:e,bottom:e,right:e,left:e};}return t.padding=e.extend(i,t.padding),t}_minimumAABBFrustumDistance(e,t){const i=t.max[0]-t.min[0],o=t.max[1]-t.min[1];return i/o>e.aspect?i/(2*Math.tan(.5*e.fovX)*e.aspect):o/(2*Math.tan(.5*e.fovY)*e.aspect)}_cameraForBoundsOnGlobe(t,i,o,r,n,s){const a=t.clone(),l=this._extendCameraOptions(s);a.bearing=r,a.pitch=n;const c=e.LngLat.convert(i),h=e.LngLat.convert(o),u=.5*(c.lat+h.lat),_=.5*(c.lng+h.lng),d=e.latLngToECEF(u,_),p=e.normalize([],d),m=e.normalize([],e.cross([],p,[0,1,0])),f=e.cross([],m,p),g=[m[0],m[1],m[2],0,f[0],f[1],f[2],0,p[0],p[1],p[2],0,0,0,0,1],v=[d,e.latLngToECEF(c.lat,c.lng),e.latLngToECEF(h.lat,c.lng),e.latLngToECEF(h.lat,h.lng),e.latLngToECEF(c.lat,h.lng),e.latLngToECEF(u,c.lng),e.latLngToECEF(u,h.lng),e.latLngToECEF(c.lat,_),e.latLngToECEF(h.lat,_)];let x=e.Aabb.fromPoints(v.map((t=>[e.dot(m,t),e.dot(f,t),e.dot(p,t)])));const y=e.transformMat4([],x.center,g);0===e.squaredLength(y)&&e.set(y,0,0,1),e.normalize(y,y),e.scale$2(y,y,e.GLOBE_RADIUS),a.center=e.ecefToLatLng(y);const b=a.getWorldToCameraMatrix(),w=e.invert(new Float64Array(16),b);x=e.Aabb.applyTransform(x,e.multiply([],b,g)),e.transformMat4(y,y,b);const T=.5*(x.max[2]-x.min[2]),E=this._minimumAABBFrustumDistance(a,x),C=e.scale$2([],[0,0,1],T),I=e.add(C,y,C),M=E+(0===a.pitch?0:e.distance(y,I)),S=a.globeCenterInViewSpace,D=e.sub([],y,[S[0],S[1],S[2]]);e.normalize(D,D),e.scale$2(D,D,M);const A=e.add([],y,D);e.transformMat4(A,A,w);const L=e.earthRadius/e.GLOBE_RADIUS,z=e.length(A),P=e.mercatorZfromAltitude(z*L-e.earthRadius,0),R=Math.min(a.zoomFromMercatorZAdjusted(P),l.maxZoom);return R>.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(a.setProjection({name:\"mercator\"}),a.zoom=R,this._cameraForBounds(a,i,o,r,n,s)):{center:a.center,zoom:R,bearing:r,pitch:n}}queryTerrainElevation(t,i){const o=this.transform.elevation;return o?(i=e.extend({},{exaggerated:!0},i),o.getAtPoint(e.MercatorCoordinate.fromLngLat(t),null,i.exaggerated)):null}_cameraForBounds(t,i,o,r,n,s){if(\"globe\"===t.projection.name)return this._cameraForBoundsOnGlobe(t,i,o,r,n,s);const a=t.clone(),l=this._extendCameraOptions(s),c=a.padding;a.bearing=r,a.pitch=n;const h=e.LngLat.convert(i),u=e.LngLat.convert(o),_=new e.LngLat(h.lng,u.lat),d=new e.LngLat(u.lng,h.lat),p=a.project(h),m=a.project(u),f=this.queryTerrainElevation(h),g=this.queryTerrainElevation(u),v=this.queryTerrainElevation(_),x=this.queryTerrainElevation(d),y=[[p.x,p.y,Math.min(f||0,g||0,v||0,x||0)],[m.x,m.y,Math.max(f||0,g||0,v||0,x||0)]];let b=e.Aabb.fromPoints(y);const w=a.getWorldToCameraMatrix(),T=e.invert(new Float64Array(16),w);b=e.Aabb.applyTransform(b,w);const E=e.sub([],b.max,b.min),C=c.left||0,I=c.right||0,M=c.bottom||0,S=c.top||0,{left:D,right:A,top:L,bottom:z}=l.padding,P=.5*(C+I),R=.5*(S+M),O=Math.min(a.scaleZoom(a.scale*Math.min((a.width-(C+I+D+A))/E[0],(a.height-(M+S+z+L))/E[1])),l.maxZoom),B=a.scale/a.zoomScale(O);b=new e.Aabb([b.min[0]-(D+P)*B,b.min[1]-(z+R)*B,b.min[2]],[b.max[0]+(A+P)*B,b.max[1]+(L+R)*B,b.max[2]]);const k=.5*E[2],F=this._minimumAABBFrustumDistance(a,b),U=[0,0,1,0];e.transformMat4$1(U,U,w),e.normalize$2(U,U);const N=e.scale$2([],U,F+k),G=e.add([],b.center,N),j=(\"number\"==typeof l.offset.x&&\"number\"==typeof l.offset.y?new e.pointGeometry(l.offset.x,l.offset.y):e.pointGeometry.convert(l.offset)).rotate(-e.degToRad(r));b.center[0]-=j.x*B,b.center[1]+=j.y*B,e.transformMat4(b.center,b.center,T),e.transformMat4(G,G,T);const Z=[b.center[0],b.center[1],G[2]*a.pixelsPerMeter];e.scale$2(Z,Z,1/a.worldSize);const V=e.lngFromMercatorX(Z[0]),W=e.latFromMercatorY(Z[1]),X=Math.min(a._zoomFromMercatorZ(Z[2]),l.maxZoom),q=new e.LngLat(V,W);return a.mercatorFromTransition&&X<.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(a.setProjection({name:\"globe\"}),a.zoom=X,this._cameraForBounds(a,i,o,r,n,s)):{center:q,zoom:X,bearing:r,pitch:n}}fitBounds(e,t,i){const o=this.cameraForBounds(e,t);return this._fitInternal(o,t,i)}fitScreenCoordinates(t,i,o,r,n){const s=e.pointGeometry.convert(t),a=e.pointGeometry.convert(i),l=new e.pointGeometry(Math.min(s.x,a.x),Math.min(s.y,a.y)),c=new e.pointGeometry(Math.max(s.x,a.x),Math.max(s.y,a.y));if(\"mercator\"===this.transform.projection.name&&this.transform.anyCornerOffEdge(s,a))return this;const h=this.transform.pointLocation3D(l),u=this.transform.pointLocation3D(c),_=this.transform.pointLocation3D(new e.pointGeometry(l.x,c.y)),d=this.transform.pointLocation3D(new e.pointGeometry(c.x,l.y)),p=[Math.min(h.lng,u.lng,_.lng,d.lng),Math.min(h.lat,u.lat,_.lat,d.lat)],m=[Math.max(h.lng,u.lng,_.lng,d.lng),Math.max(h.lat,u.lat,_.lat,d.lat)],f=r&&r.pitch?r.pitch:this.getPitch(),g=this._cameraForBounds(this.transform,p,m,o,f,r);return this._fitInternal(g,r,n)}_fitInternal(t,i,o){return t?(delete(i=e.extend(t,i)).padding,i.linear?this.easeTo(i,o):this.flyTo(i,o)):this}jumpTo(t,i){this.stop();const o=t.preloadOnly?this.transform.clone():this.transform;let r=!1,n=!1,s=!1;return \"zoom\"in t&&o.zoom!==+t.zoom&&(r=!0,o.zoom=+t.zoom),void 0!==t.center&&(o.center=e.LngLat.convert(t.center)),\"bearing\"in t&&o.bearing!==+t.bearing&&(n=!0,o.bearing=+t.bearing),\"pitch\"in t&&o.pitch!==+t.pitch&&(s=!0,o.pitch=+t.pitch),null==t.padding||o.isPaddingEqual(t.padding)||(o.padding=t.padding),t.preloadOnly?(this._preloadTiles(o),this):(this.fire(new e.Event(\"movestart\",i)).fire(new e.Event(\"move\",i)),r&&this.fire(new e.Event(\"zoomstart\",i)).fire(new e.Event(\"zoom\",i)).fire(new e.Event(\"zoomend\",i)),n&&this.fire(new e.Event(\"rotatestart\",i)).fire(new e.Event(\"rotate\",i)).fire(new e.Event(\"rotateend\",i)),s&&this.fire(new e.Event(\"pitchstart\",i)).fire(new e.Event(\"pitch\",i)).fire(new e.Event(\"pitchend\",i)),this.fire(new e.Event(\"moveend\",i)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||e.warnOnce(qr),this.transform.getFreeCameraOptions()}setFreeCameraOptions(t,i){const o=this.transform;if(!o.projection.supportsFreeCamera)return e.warnOnce(qr),this;this.stop();const r=o.zoom,n=o.pitch,s=o.bearing;o.setFreeCameraOptions(t);const a=r!==o.zoom,l=n!==o.pitch,c=s!==o.bearing;return this.fire(new e.Event(\"movestart\",i)).fire(new e.Event(\"move\",i)),a&&this.fire(new e.Event(\"zoomstart\",i)).fire(new e.Event(\"zoom\",i)).fire(new e.Event(\"zoomend\",i)),c&&this.fire(new e.Event(\"rotatestart\",i)).fire(new e.Event(\"rotate\",i)).fire(new e.Event(\"rotateend\",i)),l&&this.fire(new e.Event(\"pitchstart\",i)).fire(new e.Event(\"pitch\",i)).fire(new e.Event(\"pitchend\",i)),this.fire(new e.Event(\"moveend\",i)),this}easeTo(t,i){this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.exported.prefersReducedMotion)&&(t.duration=0);const o=this.transform,r=this.getZoom(),n=this.getBearing(),s=this.getPitch(),a=this.getPadding(),l=\"zoom\"in t?+t.zoom:r,c=\"bearing\"in t?this._normalizeBearing(t.bearing,n):n,h=\"pitch\"in t?+t.pitch:s,u=\"padding\"in t?t.padding:o.padding,_=e.pointGeometry.convert(t.offset);let d,p,m;if(\"globe\"===o.projection.name){const i=e.MercatorCoordinate.fromLngLat(o.center),r=_.rotate(-o.angle);i.x+=r.x/o.worldSize,i.y+=r.y/o.worldSize;const n=i.toLngLat(),s=e.LngLat.convert(t.center||n);this._normalizeCenter(s),d=o.centerPoint.add(r),p=new e.pointGeometry(i.x,i.y).mult(o.worldSize),m=new e.pointGeometry(e.mercatorXfromLng(s.lng),e.mercatorYfromLat(s.lat)).mult(o.worldSize).sub(p);}else {d=o.centerPoint.add(_);const i=o.pointLocation(d),r=e.LngLat.convert(t.center||i);this._normalizeCenter(r),p=o.project(i),m=o.project(r).sub(p);}const f=o.zoomScale(l-r);let g,v;t.around&&(g=e.LngLat.convert(t.around),v=o.locationPoint(g));const x=this._zooming||l!==r,y=this._rotating||n!==c,b=this._pitching||h!==s,w=!o.isPaddingEqual(u),T=o=>T=>{if(x&&(o.zoom=e.number(r,l,T)),y&&(o.bearing=e.number(n,c,T)),b&&(o.pitch=e.number(s,h,T)),w&&(o.interpolatePadding(a,u,T),d=o.centerPoint.add(_)),g)o.setLocationAtPoint(g,v);else {const e=o.zoomScale(o.zoom-r),t=l>r?Math.min(2,f):Math.max(.5,f),i=Math.pow(t,1-T),n=o.unproject(p.add(m.mult(T*i)).mult(e));o.setLocationAtPoint(o.renderWorldCopies?n.wrap():n,d);}return t.preloadOnly||this._fireMoveEvents(i),o};if(t.preloadOnly){const e=this._emulate(T,t.duration,o);return this._preloadTiles(e),this}const E={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=x,this._rotating=y,this._pitching=b,this._padding=w,this._easeId=t.easeId,this._prepareEase(i,t.noMoveStart,E),this._ease(T(o),(e=>{o.recenterOnTerrain(),this._afterEase(i,e);}),t),this}_prepareEase(t,i,o={}){this._moving=!0,this.transform.cameraElevationReference=\"sea\",i||o.moving||this.fire(new e.Event(\"movestart\",t)),this._zooming&&!o.zooming&&this.fire(new e.Event(\"zoomstart\",t)),this._rotating&&!o.rotating&&this.fire(new e.Event(\"rotatestart\",t)),this._pitching&&!o.pitching&&this.fire(new e.Event(\"pitchstart\",t));}_fireMoveEvents(t){this.fire(new e.Event(\"move\",t)),this._zooming&&this.fire(new e.Event(\"zoom\",t)),this._rotating&&this.fire(new e.Event(\"rotate\",t)),this._pitching&&this.fire(new e.Event(\"pitch\",t));}_afterEase(t,i){if(this._easeId&&i&&this._easeId===i)return;this._easeId=void 0,this.transform.cameraElevationReference=\"ground\";const o=this._zooming,r=this._rotating,n=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,o&&this.fire(new e.Event(\"zoomend\",t)),r&&this.fire(new e.Event(\"rotateend\",t)),n&&this.fire(new e.Event(\"pitchend\",t)),this.fire(new e.Event(\"moveend\",t));}flyTo(t,i){if(!t.essential&&e.exported.prefersReducedMotion){const o=e.pick(t,[\"center\",\"zoom\",\"bearing\",\"pitch\",\"around\"]);return this.jumpTo(o,i)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);const o=this.transform,r=this.getZoom(),n=this.getBearing(),s=this.getPitch(),a=this.getPadding(),l=\"zoom\"in t?e.clamp(+t.zoom,o.minZoom,o.maxZoom):r,c=\"bearing\"in t?this._normalizeBearing(t.bearing,n):n,h=\"pitch\"in t?+t.pitch:s,u=\"padding\"in t?t.padding:o.padding,_=o.zoomScale(l-r),d=e.pointGeometry.convert(t.offset);let p=o.centerPoint.add(d);const m=o.pointLocation(p),f=e.LngLat.convert(t.center||m);this._normalizeCenter(f);const g=o.project(m),v=o.project(f).sub(g);let x=t.curve;const y=Math.max(o.width,o.height),b=y/_,w=v.mag();if(\"minZoom\"in t){const i=e.clamp(Math.min(t.minZoom,r,l),o.minZoom,o.maxZoom),n=y/o.zoomScale(i-r);x=Math.sqrt(n/w*2);}const T=x*x;function E(e){const t=(b*b-y*y+(e?-1:1)*T*T*w*w)/(2*(e?b:y)*T*w);return Math.log(Math.sqrt(t*t+1)-t)}function C(e){return (Math.exp(e)-Math.exp(-e))/2}function I(e){return (Math.exp(e)+Math.exp(-e))/2}const M=E(0);let S=function(e){return I(M)/I(M+x*e)},D=function(e){return y*((I(M)*(C(t=M+x*e)/I(t))-C(M))/T)/w;var t;},A=(E(1)-M)/x;if(Math.abs(w)<1e-6||!isFinite(A)){if(Math.abs(y-b)<1e-6)return this.easeTo(t,i);const e=b<y?-1:1;A=Math.abs(Math.log(b/y))/x,D=function(){return 0},S=function(t){return Math.exp(e*x*t)};}t.duration=\"duration\"in t?+t.duration:1e3*A/(\"screenSpeed\"in t?+t.screenSpeed/x:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0);const L=n!==c,z=h!==s,P=!o.isPaddingEqual(u),R=o=>_=>{const m=_*A,x=1/S(m);o.zoom=1===_?l:r+o.scaleZoom(x),L&&(o.bearing=e.number(n,c,_)),z&&(o.pitch=e.number(s,h,_)),P&&(o.interpolatePadding(a,u,_),p=o.centerPoint.add(d));const y=1===_?f:o.unproject(g.add(v.mult(D(m))).mult(x));return o.setLocationAtPoint(o.renderWorldCopies?y.wrap():y,p),o._updateCameraOnTerrain(),t.preloadOnly||this._fireMoveEvents(i),o};if(t.preloadOnly){const e=this._emulate(R,t.duration,o);return this._preloadTiles(e),this}return this._zooming=!0,this._rotating=L,this._pitching=z,this._padding=P,this._prepareEase(i,!1),this._ease(R(o),(()=>this._afterEase(i)),t),this}isEasing(){return !!this._easeFrameId}stop(){return this._stop()}_stop(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const e=this._onEaseEnd;this._onEaseEnd=void 0,e.call(this,t);}if(!e){const e=this.handlers;e&&e.stop(!1);}return this}_ease(t,i,o){!1===o.animate||0===o.duration?(t(1),i()):(this._easeStart=e.exported.now(),this._easeOptions=o,this._onEaseFrame=t,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback));}_renderFrameCallback(){const t=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1),i=this._onEaseFrame;i&&i(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop();}_normalizeBearing(t,i){t=e.wrap(t,-180,180);const o=Math.abs(t-i);return Math.abs(t-360-i)<o&&(t-=360),Math.abs(t+360-i)<o&&(t+=360),t}_normalizeCenter(e){const t=this.transform;if(!t.renderWorldCopies||t.maxBounds)return;const i=e.lng-t.center.lng;e.lng+=i>180?-360:i<-180?360:0;}_emulate(e,t,i){const o=Math.ceil(15*t/1e3),r=[],n=e(i.clone());for(let e=0;e<=o;e++){const t=n(e/o);r.push(t.clone());}return r}}class Hr{constructor(t={}){this.options=t,e.bindAll([\"_toggleAttribution\",\"_updateEditLink\",\"_updateData\",\"_updateCompact\"],this);}getDefaultPosition(){return \"bottom-right\"}onAdd(e){const t=this.options&&this.options.compact;return this._map=e,this._container=n(\"div\",\"mapboxgl-ctrl mapboxgl-ctrl-attrib\"),this._compactButton=n(\"button\",\"mapboxgl-ctrl-attrib-button\",this._container),n(\"span\",\"mapboxgl-ctrl-icon\",this._compactButton).setAttribute(\"aria-hidden\",\"true\"),this._compactButton.type=\"button\",this._compactButton.addEventListener(\"click\",this._toggleAttribution),this._setElementTitle(this._compactButton,\"ToggleAttribution\"),this._innerContainer=n(\"div\",\"mapboxgl-ctrl-attrib-inner\",this._container),this._innerContainer.setAttribute(\"role\",\"list\"),t&&this._container.classList.add(\"mapboxgl-compact\"),this._updateAttributions(),this._updateEditLink(),this._map.on(\"styledata\",this._updateData),this._map.on(\"sourcedata\",this._updateData),this._map.on(\"moveend\",this._updateEditLink),void 0===t&&(this._map.on(\"resize\",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off(\"styledata\",this._updateData),this._map.off(\"sourcedata\",this._updateData),this._map.off(\"moveend\",this._updateEditLink),this._map.off(\"resize\",this._updateCompact),this._map=void 0,this._attribHTML=void 0;}_setElementTitle(e,t){const i=this._map._getUIString(`AttributionControl.${t}`);e.setAttribute(\"aria-label\",i),e.removeAttribute(\"title\"),e.firstElementChild&&e.firstElementChild.setAttribute(\"title\",i);}_toggleAttribution(){this._container.classList.contains(\"mapboxgl-compact-show\")?(this._container.classList.remove(\"mapboxgl-compact-show\"),this._compactButton.setAttribute(\"aria-expanded\",\"false\")):(this._container.classList.add(\"mapboxgl-compact-show\"),this._compactButton.setAttribute(\"aria-expanded\",\"true\"));}_updateEditLink(){let t=this._editLink;t||(t=this._editLink=this._container.querySelector(\".mapbox-improve-map\"));const i=[{key:\"owner\",value:this.styleOwner},{key:\"id\",value:this.styleId},{key:\"access_token\",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){const o=i.reduce(((e,t,o)=>(t.value&&(e+=`${t.key}=${t.value}${o<i.length-1?\"&\":\"\"}`),e)),\"?\");t.href=`${e.config.FEEDBACK_URL}/${o}#${Jo(this._map,!0)}`,t.rel=\"noopener nofollow\",this._setElementTitle(t,\"MapFeedback\");}}_updateData(e){!e||\"metadata\"!==e.sourceDataType&&\"visibility\"!==e.sourceDataType&&\"style\"!==e.dataType||(this._updateAttributions(),this._updateEditLink());}_updateAttributions(){if(!this._map.style)return;let e=[];if(this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id;}const t=this._map.style._sourceCaches;for(const i in t){const o=t[i];if(o.used){const t=o.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution);}}e.sort(((e,t)=>e.length-t.length)),e=e.filter(((t,i)=>{for(let o=i+1;o<e.length;o++)if(e[o].indexOf(t)>=0)return !1;return !0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=[...this.options.customAttribution,...e]:e.unshift(this.options.customAttribution));const i=e.join(\" | \");i!==this._attribHTML&&(this._attribHTML=i,e.length?(this._innerContainer.innerHTML=i,this._container.classList.remove(\"mapboxgl-attrib-empty\")):this._container.classList.add(\"mapboxgl-attrib-empty\"),this._editLink=null);}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add(\"mapboxgl-compact\"):this._container.classList.remove(\"mapboxgl-compact\",\"mapboxgl-compact-show\");}}class Yr{constructor(){e.bindAll([\"_updateLogo\",\"_updateCompact\"],this);}onAdd(e){this._map=e,this._container=n(\"div\",\"mapboxgl-ctrl\");const t=n(\"a\",\"mapboxgl-ctrl-logo\");return t.target=\"_blank\",t.rel=\"noopener nofollow\",t.href=\"https://www.mapbox.com/\",t.setAttribute(\"aria-label\",this._map._getUIString(\"LogoControl.Title\")),t.setAttribute(\"rel\",\"noopener nofollow\"),this._container.appendChild(t),this._container.style.display=\"none\",this._map.on(\"sourcedata\",this._updateLogo),this._updateLogo(),this._map.on(\"resize\",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off(\"sourcedata\",this._updateLogo),this._map.off(\"resize\",this._updateCompact);}getDefaultPosition(){return \"bottom-left\"}_updateLogo(e){e&&\"metadata\"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?\"block\":\"none\");}_logoRequired(){if(!this._map.style)return !0;const e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return !0;for(const t in e){const i=e[t].getSource();if(i.hasOwnProperty(\"mapbox_logo\")&&!i.mapbox_logo)return !1}return !0}_updateCompact(){const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add(\"mapboxgl-compact\"):t.classList.remove(\"mapboxgl-compact\");}}}class Kr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1;}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,i=t?this._queue.concat(t):this._queue;for(const t of i)if(t.id===e)return void(t.cancelled=!0)}run(e=0){const t=this._currentlyRunning=this._queue;this._queue=[];for(const i of t)if(!i.cancelled&&(i.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1;}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[];}}function Jr(t,i,o){if(t=new e.LngLat(t.lng,t.lat),i){const r=new e.LngLat(t.lng-360,t.lat),n=new e.LngLat(t.lng+360,t.lat),s=360*Math.ceil(Math.abs(t.lng-o.center.lng)/360),a=o.locationPoint(t).distSqr(i),l=i.x<0||i.y<0||i.x>o.width||i.y>o.height;o.locationPoint(r).distSqr(i)<a&&(l||Math.abs(r.lng-o.center.lng)<s)?t=r:o.locationPoint(n).distSqr(i)<a&&(l||Math.abs(n.lng-o.center.lng)<s)&&(t=n);}for(;Math.abs(t.lng-o.center.lng)>180;){const e=o.locationPoint(t);if(e.x>=0&&e.y>=0&&e.x<=o.width&&e.y<=o.height)break;t.lng>o.center.lng?t.lng-=360:t.lng+=360;}return t}const Qr={center:\"translate(-50%,-50%)\",top:\"translate(-50%,0)\",\"top-left\":\"translate(0,0)\",\"top-right\":\"translate(-100%,0)\",bottom:\"translate(-50%,-100%)\",\"bottom-left\":\"translate(0,-100%)\",\"bottom-right\":\"translate(-100%,-100%)\",left:\"translate(0,-50%)\",right:\"translate(-100%,-50%)\"};class en extends e.Evented{constructor(t,i){if(super(),(t instanceof e.window.HTMLElement||i)&&(t=e.extend({element:t},i)),e.bindAll([\"_update\",\"_onMove\",\"_onUp\",\"_addDragHandler\",\"_onMapClick\",\"_onKeyPress\",\"_clearFadeTimer\"],this),this._anchor=t&&t.anchor||\"center\",this._color=t&&t.color||\"#3FB1CE\",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state=\"inactive\",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||\"auto\",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment||\"auto\",this._updateMoving=()=>this._update(!0),this._occludedOpacity=t&&t.occludedOpacity||.2,t&&t.element)this._element=t.element,this._offset=e.pointGeometry.convert(t&&t.offset||[0,0]);else {this._defaultMarker=!0,this._element=n(\"div\");const i=41,o=27,r=s(\"svg\",{display:\"block\",height:i*this._scale+\"px\",width:o*this._scale+\"px\",viewBox:`0 0 ${o} ${i}`},this._element),a=s(\"radialGradient\",{id:\"shadowGradient\"},s(\"defs\",{},r));s(\"stop\",{offset:\"10%\",\"stop-opacity\":.4},a),s(\"stop\",{offset:\"100%\",\"stop-opacity\":.05},a),s(\"ellipse\",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:\"url(#shadowGradient)\"},r),s(\"path\",{fill:this._color,d:\"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z\"},r),s(\"path\",{opacity:.25,d:\"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z\"},r),s(\"circle\",{fill:\"white\",cx:13.5,cy:13.5,r:5.5},r),this._offset=e.pointGeometry.convert(t&&t.offset||[0,-14]);}this._element.hasAttribute(\"aria-label\")||this._element.setAttribute(\"aria-label\",\"Map marker\"),this._element.classList.add(\"mapboxgl-marker\"),this._element.addEventListener(\"dragstart\",(e=>{e.preventDefault();})),this._element.addEventListener(\"mousedown\",(e=>{e.preventDefault();}));const o=this._element.classList;for(const e in Qr)o.remove(`mapboxgl-marker-anchor-${e}`);o.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null;}addTo(e){return e===this._map||(this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on(\"move\",this._updateMoving),e.on(\"moveend\",this._update),e.on(\"remove\",this._clearFadeTimer),e._addMarker(this),this.setDraggable(this._draggable),this._update(),e.on(\"click\",this._onMapClick)),this}remove(){const e=this._map;return e&&(e.off(\"click\",this._onMapClick),e.off(\"move\",this._updateMoving),e.off(\"moveend\",this._update),e.off(\"mousedown\",this._addDragHandler),e.off(\"touchstart\",this._addDragHandler),e.off(\"mouseup\",this._onUp),e.off(\"touchend\",this._onUp),e.off(\"mousemove\",this._onMove),e.off(\"touchmove\",this._onMove),e.off(\"remove\",this._clearFadeTimer),e._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute(\"role\"),this._element.removeEventListener(\"keypress\",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute(\"tabindex\")),e){if(!(\"offset\"in e.options)){const t=38.1,i=13.5,o=Math.sqrt(Math.pow(i,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],\"top-left\":[0,0],\"top-right\":[0,0],bottom:[0,-t],\"bottom-left\":[o,-1*(t-i+o)],\"bottom-right\":[-o,-1*(t-i+o)],left:[i,-1*(t-i)],right:[-i,-1*(t-i)]}:this._offset;}this._popup=e,e._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute(\"role\",\"button\"),this._originalTabIndex=this._element.getAttribute(\"tabindex\"),this._originalTabIndex||this._element.setAttribute(\"tabindex\",\"0\"),this._element.addEventListener(\"keypress\",this._onKeyPress),this._element.setAttribute(\"aria-expanded\",\"false\");}return this}_onKeyPress(e){const t=e.code,i=e.charCode||e.keyCode;\"Space\"!==t&&\"Enter\"!==t&&32!==i&&13!==i||this.togglePopup();}_onMapClick(e){const t=e.originalEvent.target,i=this._element;this._popup&&(t===i||i.contains(t))&&this.togglePopup();}getPopup(){return this._popup}togglePopup(){const e=this._popup;return e?(e.isOpen()?(e.remove(),this._element.setAttribute(\"aria-expanded\",\"false\")):this._map&&(e.addTo(this._map),this._element.setAttribute(\"aria-expanded\",\"true\")),this):this}_behindTerrain(){const e=this._map,t=this._pos;if(!e||!t)return !1;const i=e.unproject(t),o=e.getFreeCameraOptions();if(!o.position)return !1;const r=o.position.toLngLat();return r.distanceTo(i)<.9*r.distanceTo(this._lngLat)}_evaluateOpacity(){const t=this._map;if(!t)return;const i=this._pos;if(!i||i.x<0||i.x>t.transform.width||i.y<0||i.y>t.transform.height)return void this._clearFadeTimer();const o=t.unproject(i);let r;t._showingGlobe()&&e.isLngLatBehindGlobe(t.transform,this._lngLat)?r=0:(r=1-t._queryFogOpacity(o),t.transform._terrainEnabled()&&t.getTerrain()&&this._behindTerrain()&&(r*=this._occludedOpacity)),this._element.style.opacity=`${r}`,this._element.style.pointerEvents=r>0?\"auto\":\"none\",this._popup&&this._popup._setOpacity(r),this._fadeTimer=null;}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null);}_updateDOM(){const e=this._pos;if(!e||!this._map)return;const t=this._offset.mult(this._scale);this._element.style.transform=`\\n            translate(${e.x}px,${e.y}px)\\n            ${Qr[this._anchor]}\\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\\n            translate(${t.x}px,${t.y}px)\\n        `;}_calculateXYTransform(){const t=this._pos,i=this._map,o=this.getPitchAlignment();if(!i||!t||\"map\"!==o)return \"\";if(!i._showingGlobe()){const e=i.getPitch();return e?`rotateX(${e}deg)`:\"\"}const r=e.radToDeg(e.globeTiltAtLngLat(i.transform,this._lngLat)),n=t.sub(e.globeCenterToScreenPoint(i.transform)),s=Math.abs(n.x)+Math.abs(n.y);if(0===s)return \"\";const a=r/s;return `rotateX(${-n.y*a}deg) rotateY(${n.x*a}deg)`}_calculateZTransform(){const t=this._pos,i=this._map;if(!i||!t)return \"\";let o=0;const r=this.getRotationAlignment();if(\"map\"===r)if(i._showingGlobe()){const t=i.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),r=i.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(t);o=e.radToDeg(Math.atan2(r.y,r.x))-90;}else o=-i.getBearing();else if(\"horizon\"===r){const r=e.smoothstep(4,6,i.getZoom()),n=e.globeCenterToScreenPoint(i.transform);n.y+=r*i.transform.height;const s=t.sub(n),a=e.radToDeg(Math.atan2(s.y,s.x));o=(a>90?a-270:a+90)*(1-r);}return o+=this._rotation,o?`rotateZ(${o}deg)`:\"\"}_update(t){e.window.cancelAnimationFrame(this._updateFrameId);const i=this._map;i&&(i.transform.renderWorldCopies&&(this._lngLat=Jr(this._lngLat,this._pos,i.transform)),this._pos=i.project(this._lngLat),!0===t?this._updateFrameId=e.window.requestAnimationFrame((()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM());})):this._pos=this._pos.round(),i._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(i._showingGlobe()||i.getTerrain()||i.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)));})));}getOffset(){return this._offset}setOffset(t){return this._offset=e.pointGeometry.convert(t),this._update(),this}_onMove(t){const i=this._map;if(!i)return;const o=this._pointerdownPos,r=this._positionDelta;if(o&&r){if(!this._isDragging){const e=this._clickTolerance||i._clickTolerance;if(t.point.dist(o)<e)return;this._isDragging=!0;}this._pos=t.point.sub(r),this._lngLat=i.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents=\"none\",\"pending\"===this._state&&(this._state=\"active\",this.fire(new e.Event(\"dragstart\"))),this.fire(new e.Event(\"drag\"));}}_onUp(){this._element.style.pointerEvents=\"auto\",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const t=this._map;t&&(t.off(\"mousemove\",this._onMove),t.off(\"touchmove\",this._onMove)),\"active\"===this._state&&this.fire(new e.Event(\"dragend\")),this._state=\"inactive\";}_addDragHandler(e){const t=this._map,i=this._pos;t&&i&&this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(i),this._pointerdownPos=e.point,this._state=\"pending\",t.on(\"mousemove\",this._onMove),t.on(\"touchmove\",this._onMove),t.once(\"mouseup\",this._onUp),t.once(\"touchend\",this._onUp));}setDraggable(e){this._draggable=!!e;const t=this._map;return t&&(e?(t.on(\"mousedown\",this._addDragHandler),t.on(\"touchstart\",this._addDragHandler)):(t.off(\"mousedown\",this._addDragHandler),t.off(\"touchstart\",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||\"auto\",this._update(),this}getRotationAlignment(){return \"auto\"===this._rotationAlignment||\"horizon\"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?\"viewport\":this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e||\"auto\",this._update(),this}getPitchAlignment(){return \"auto\"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(e){return this._occludedOpacity=e||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const tn={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:\"\",maxWidth:\"240px\"},on=[\"a[href]\",\"[tabindex]:not([tabindex='-1'])\",\"[contenteditable]:not([contenteditable='false'])\",\"button:not([disabled])\",\"input:not([disabled])\",\"select:not([disabled])\",\"textarea:not([disabled])\"].join(\", \");function rn(t=new e.pointGeometry(0,0),i=\"bottom\"){if(\"number\"==typeof t){const o=Math.round(Math.sqrt(.5*Math.pow(t,2)));switch(i){case\"top\":return new e.pointGeometry(0,t);case\"top-left\":return new e.pointGeometry(o,o);case\"top-right\":return new e.pointGeometry(-o,o);case\"bottom\":return new e.pointGeometry(0,-t);case\"bottom-left\":return new e.pointGeometry(o,-o);case\"bottom-right\":return new e.pointGeometry(-o,-o);case\"left\":return new e.pointGeometry(t,0);case\"right\":return new e.pointGeometry(-t,0)}return new e.pointGeometry(0,0)}return t instanceof e.pointGeometry||Array.isArray(t)?e.pointGeometry.convert(t):e.pointGeometry.convert(t[i]||[0,0])}class nn{constructor(e){this.jumpTo(e);}getValue(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;const i=e.easeCubicInOut((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-i)+this._end*i}isEasing(e){return e>=this._startTime&&e<=this._endTime}jumpTo(e){this._startTime=-1/0,this._endTime=-1/0,this._start=e,this._end=e;}easeTo(e,t,i){this._start=this.getValue(t),this._end=e,this._startTime=t,this._endTime=t+i;}}const sn={\"AttributionControl.ToggleAttribution\":\"Toggle attribution\",\"AttributionControl.MapFeedback\":\"Map feedback\",\"FullscreenControl.Enter\":\"Enter fullscreen\",\"FullscreenControl.Exit\":\"Exit fullscreen\",\"GeolocateControl.FindMyLocation\":\"Find my location\",\"GeolocateControl.LocationNotAvailable\":\"Location not available\",\"LogoControl.Title\":\"Mapbox logo\",\"Map.Title\":\"Map\",\"NavigationControl.ResetBearing\":\"Reset bearing to north\",\"NavigationControl.ZoomIn\":\"Zoom in\",\"NavigationControl.ZoomOut\":\"Zoom out\",\"ScrollZoomBlocker.CtrlMessage\":\"Use ctrl + scroll to zoom the map\",\"ScrollZoomBlocker.CmdMessage\":\"Use ⌘ + scroll to zoom the map\",\"TouchPanBlocker.Message\":\"Use two fingers to move the map\"},an={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:\"sans-serif\",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},ln={showCompass:!0,showZoom:!0,visualizePitch:!1};class cn{constructor(t,i,o=!1){this._clickTolerance=10,this.element=i,this.mouseRotate=new yr({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,o&&(this.mousePitch=new br({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.bindAll([\"mousedown\",\"mousemove\",\"mouseup\",\"touchstart\",\"touchmove\",\"touchend\",\"reset\"],this),i.addEventListener(\"mousedown\",this.mousedown),i.addEventListener(\"touchstart\",this.touchstart,{passive:!1}),i.addEventListener(\"touchmove\",this.touchmove),i.addEventListener(\"touchend\",this.touchend),i.addEventListener(\"touchcancel\",this.reset);}down(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),h();}move(e,t){const i=this.map,o=this.mouseRotate.mousemoveWindow(e,t),r=o&&o.bearingDelta;if(r&&i.setBearing(i.getBearing()+r),this.mousePitch){const o=this.mousePitch.mousemoveWindow(e,t),r=o&&o.pitchDelta;r&&i.setPitch(i.getPitch()+r);}}off(){const e=this.element;e.removeEventListener(\"mousedown\",this.mousedown),e.removeEventListener(\"touchstart\",this.touchstart,{passive:!1}),e.removeEventListener(\"touchmove\",this.touchmove),e.removeEventListener(\"touchend\",this.touchend),e.removeEventListener(\"touchcancel\",this.reset),this.offTemp();}offTemp(){u(),e.window.removeEventListener(\"mousemove\",this.mousemove),e.window.removeEventListener(\"mouseup\",this.mouseup);}mousedown(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),p(this.element,t)),e.window.addEventListener(\"mousemove\",this.mousemove),e.window.addEventListener(\"mouseup\",this.mouseup);}mousemove(e){this.move(e,p(this.element,e));}mouseup(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp();}touchstart(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=m(this.element,e.targetTouches)[0],this.down({type:\"mousedown\",button:0,ctrlKey:!0,preventDefault:()=>e.preventDefault()},this._startPos));}touchmove(e){1!==e.targetTouches.length?this.reset():(this._lastPos=m(this.element,e.targetTouches)[0],this.move({preventDefault:()=>e.preventDefault()},this._lastPos));}touchend(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset();}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp();}}const hn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},un={maxWidth:100,unit:\"metric\"};function _n(e,t,i){const o=dn(t),r=o/t,n={kilometer:\"km\",meter:\"m\",mile:\"mi\",foot:\"ft\",\"nautical-mile\":\"nm\"}[i];this._map._requestDomTask((()=>{this._container.style.width=e*r+\"px\",this._container.innerHTML=`${o}&nbsp;${n}`;}));}function dn(e){const t=Math.pow(10,`${Math.floor(e)}`.length-1);let i=e/t;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:i>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(i),t*i}const pn={version:e.version,supported:i,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:class extends $r{constructor(t){if(e.LivePerformanceUtils.mark(e.PerformanceMarkers.create),null!=(t=e.extend({},an,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error(\"maxZoom must be greater than or equal to minZoom\");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error(\"maxPitch must be greater than or equal to minPitch\");if(null!=t.minPitch&&t.minPitch<0)throw new Error(\"minPitch must be greater than or equal to 0\");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error(\"maxPitch must be less than or equal to 85\");if(t.antialias&&e.isSafariWithAntialiasingBug(e.window)&&(t.antialias=!1,e.warnOnce(\"Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609\")),super(new Ho(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t),this._interactive=t.interactive,this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=t.crossSourceCollisions,this._collectResourceTiming=t.collectResourceTiming,this._optimizeForTerrain=t.optimizeForTerrain,this._language=this._parseLanguage(t.language),this._worldview=t.worldview,this._renderTaskQueue=new Kr,this._domRenderTaskQueue=new Kr,this._controls=[],this._markers=[],this._popups=[],this._mapId=e.uniqueId(),this._locale=e.extend({},sn,t.locale),this._clickTolerance=t.clickTolerance,this._cooperativeGestures=t.cooperativeGestures,this._performanceMetricsCollection=t.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new nn(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new e.RequestManager(t.transformRequest,t.accessToken,t.testMode),this._silenceAuthErrors=!!t.testMode,\"string\"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error(`Container '${t.container}' not found.`)}else {if(!(t.container instanceof e.window.HTMLElement))throw new Error(\"Invalid type: 'container' must be a String or HTMLElement.\");this._container=t.container;}if(this._container.childNodes.length>0&&e.warnOnce(\"The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead.\"),t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll([\"_onWindowOnline\",\"_onWindowResize\",\"_onVisibilityChange\",\"_onMapScroll\",\"_contextLost\",\"_contextRestored\"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error(\"Failed to initialize WebGL.\");this.on(\"move\",(()=>this._update(!1))),this.on(\"moveend\",(()=>this._update(!1))),this.on(\"zoom\",(()=>this._update(!0))),void 0!==e.window&&(e.window.addEventListener(\"online\",this._onWindowOnline,!1),e.window.addEventListener(\"resize\",this._onWindowResize,!1),e.window.addEventListener(\"orientationchange\",this._onWindowResize,!1),e.window.addEventListener(\"webkitfullscreenchange\",this._onWindowResize,!1),e.window.addEventListener(\"visibilitychange\",this._onVisibilityChange,!1)),this.handlers=new Xr(this,t),this._localFontFamily=t.localFontFamily,this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),t.projection&&this.setProjection(t.projection),this._hash=t.hash&&new Ko(\"string\"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),t.attributionControl&&this.addControl(new Hr({customAttribution:t.customAttribution})),this._logoControl=new Yr,this.addControl(this._logoControl,t.logoPosition),this.on(\"style.load\",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet);})),this.on(\"data\",(t=>{this._update(\"style\"===t.dataType),this.fire(new e.Event(`${t.dataType}data`,t));})),this.on(\"dataloading\",(t=>{this.fire(new e.Event(`${t.dataType}dataloading`,t));}));}_getMapId(){return this._mapId}addControl(t,i){if(void 0===i&&(i=t.getDefaultPosition?t.getDefaultPosition():\"top-right\"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error(\"Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.\")));const o=t.onAdd(this);this._controls.push(t);const r=this._controlPositions[i];return -1!==i.indexOf(\"bottom\")?r.insertBefore(o,r.firstChild):r.appendChild(o),this}removeControl(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error(\"Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.\")));const i=this._controls.indexOf(t);return i>-1&&this._controls.splice(i,1),t.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(t){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const i=!this._moving;return i&&this.fire(new e.Event(\"movestart\",t)).fire(new e.Event(\"move\",t)),this.fire(new e.Event(\"resize\",t)),i&&this.fire(new e.Event(\"moveend\",t)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t?this.setZoom(t):this.fire(new e.Event(\"zoomstart\")).fire(new e.Event(\"zoom\")).fire(new e.Event(\"zoomend\")),this;throw new Error(\"minZoom must be between -2 and the current maxZoom, inclusive\")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t?this.setZoom(t):this.fire(new e.Event(\"zoomstart\")).fire(new e.Event(\"zoom\")).fire(new e.Event(\"zoomend\")),this;throw new Error(\"maxZoom must be greater than the current minZoom\")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error(\"minPitch must be greater than or equal to 0\");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t?this.setPitch(t):this.fire(new e.Event(\"pitchstart\")).fire(new e.Event(\"pitch\")).fire(new e.Event(\"pitchend\")),this;throw new Error(\"minPitch must be between 0 and the current maxPitch, inclusive\")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?85:t)>85)throw new Error(\"maxPitch must be less than or equal to 85\");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t?this.setPitch(t):this.fire(new e.Event(\"pitchstart\")).fire(new e.Event(\"pitch\")).fire(new e.Event(\"pitchend\")),this;throw new Error(\"maxPitch must be greater than or equal to minPitch\")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(t){return \"auto\"===t?e.window.navigator.language:Array.isArray(t)?0===t.length?void 0:t.map((t=>\"auto\"===t?e.window.navigator.language:t)):t}setLanguage(e){const t=this._parseLanguage(e);if(!this.style||t===this._language)return this;this._language=t,this.style._reloadSources();for(const e of this._controls)e._setLanguage&&e._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(e){return this.style&&e!==this._worldview?(this._worldview=e,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:\"globe\",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return \"globe\"===this.transform.projection.name}setProjection(e){return this._lazyInitEmptyStyle(),e?\"string\"==typeof e&&(e={name:e}):e=null,this._useExplicitProjection=!!e,this._prioritizeAndUpdateProjection(e,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(\"globe\"!==this.getProjection().name)return;const t=this.transform,i=t.projection.name;let o;\"globe\"===i&&t.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?(t.setMercatorFromTransition(),o=!0):\"mercator\"===i&&t.zoom<e.GLOBE_ZOOM_THRESHOLD_MAX&&(t.setProjection({name:\"globe\"}),o=!0),o&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate());}_prioritizeAndUpdateProjection(e,t){return this._updateProjection(e||t||{name:\"mercator\"})}_updateProjection(t){let i;if(i=\"globe\"===t.name&&this.transform.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(t),this.style.applyProjectionUpdate(),i){this.painter.clearBackgroundTiles();for(const e in this.style._sourceCaches)this.style._sourceCaches[e].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0);}return this}project(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}unproject(t){return this.transform.pointLocation3D(e.pointGeometry.convert(t))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(e,t,i){if(\"mouseenter\"===e||\"mouseover\"===e){let o=!1;const r=r=>{const n=t.filter((e=>this.getLayer(e))),s=n.length?this.queryRenderedFeatures(r.point,{layers:n}):[];s.length?o||(o=!0,i.call(this,new ar(e,this,r.originalEvent,{features:s}))):o=!1;},n=()=>{o=!1;};return {layers:new Set(t),listener:i,delegates:{mousemove:r,mouseout:n}}}if(\"mouseleave\"===e||\"mouseout\"===e){let o=!1;const r=r=>{const n=t.filter((e=>this.getLayer(e)));(n.length?this.queryRenderedFeatures(r.point,{layers:n}):[]).length?o=!0:o&&(o=!1,i.call(this,new ar(e,this,r.originalEvent)));},n=t=>{o&&(o=!1,i.call(this,new ar(e,this,t.originalEvent)));};return {layers:new Set(t),listener:i,delegates:{mousemove:r,mouseout:n}}}{const o=e=>{const o=t.filter((e=>this.getLayer(e))),r=o.length?this.queryRenderedFeatures(e.point,{layers:o}):[];r.length&&(e.features=r,i.call(this,e),delete e.features);};return {layers:new Set(t),listener:i,delegates:{[e]:o}}}}on(e,t,i){if(void 0===i)return super.on(e,t);Array.isArray(t)||(t=[t]);const o=this._createDelegatedListener(e,t,i);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(o);for(const e in o.delegates)this.on(e,o.delegates[e]);return this}once(e,t,i){if(void 0===i)return super.once(e,t);Array.isArray(t)||(t=[t]);const o=this._createDelegatedListener(e,t,i);for(const e in o.delegates)this.once(e,o.delegates[e]);return this}off(e,t,i){if(void 0===i)return super.off(e,t);t=new Set(Array.isArray(t)?t:[t]);const o=(e,t)=>{if(e.size!==t.size)return !1;for(const i of e)if(!t.has(i))return !1;return !0},r=this._delegatedListeners?this._delegatedListeners[e]:void 0;return r&&(e=>{for(let r=0;r<e.length;r++){const n=e[r];if(n.listener===i&&o(n.layers,t)){for(const e in n.delegates)this.off(e,n.delegates[e]);return e.splice(r,1),this}}})(r),this}queryRenderedFeatures(t,i){return this.style?(void 0!==i||void 0===t||t instanceof e.pointGeometry||Array.isArray(t)||(i=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],i=i||{},this.transform)):[]}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}setStyle(t,i){return !1!==(i=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&i.localFontFamily===this._localFontFamily&&this.style&&t?(this._diffStyle(t,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._localFontFamily=i.localFontFamily,this._updateStyle(t,i))}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),e&&(this.style=new Jt(this,t||{}),this.style.setEventedParent(this,{style:this.style}),\"string\"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Jt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty());}_diffStyle(t,i){if(\"string\"==typeof t){const o=this._requestManager.normalizeStyleURL(t),r=this._requestManager.transformRequest(o,e.ResourceType.Style);e.getJSON(r,((t,o)=>{t?this.fire(new e.ErrorEvent(t)):o&&this._updateDiff(o,i);}));}else \"object\"==typeof t&&this._updateDiff(t,i);}_updateDiff(t,i){try{this.style.setState(t)&&this._update(!0);}catch(o){e.warnOnce(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(t,i);}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(e.warnOnce(\"There is no style added to the map.\"),!1)}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(e){return !!this.style&&this.style._isSourceCacheLoaded(e)}areTilesLoaded(){const e=this.style&&this.style._sourceCaches;for(const t in e){const i=e[t]._tiles;for(const e in i){const t=i[e];if(\"loaded\"!==t.state&&\"errored\"!==t.state)return !1}}return !0}addSourceType(e,t,i){this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,i);}removeSource(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(t,i,{pixelRatio:o=1,sdf:r=!1,stretchX:n,stretchY:s,content:a}={}){if(this._lazyInitEmptyStyle(),i instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&i instanceof e.window.ImageBitmap){const{width:l,height:c,data:h}=e.exported.getImageData(i);this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},h),pixelRatio:o,stretchX:n,stretchY:s,content:a,sdf:r,version:0});}else if(void 0===i.width||void 0===i.height)this.fire(new e.ErrorEvent(new Error(\"Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`\")));else {const{width:l,height:c}=i,h=i;this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},new Uint8Array(h.data)),pixelRatio:o,stretchX:n,stretchY:s,content:a,sdf:r,version:0,userImage:h}),h.onAdd&&h.onAdd(this,t);}}updateImage(t,i){const o=this.style.getImage(t);if(!o)return void this.fire(new e.ErrorEvent(new Error(\"The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.\")));const r=i instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&i instanceof e.window.ImageBitmap?e.exported.getImageData(i):i,{width:n,height:s}=r;void 0!==n&&void 0!==s?n===o.data.width&&s===o.data.height?(o.data.replace(r.data,!(i instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&i instanceof e.window.ImageBitmap)),this.style.updateImage(t,o)):this.fire(new e.ErrorEvent(new Error(`The width and height of the updated image (${n}, ${s})\\n                must be that same as the previous version of the image\\n                (${o.data.width}, ${o.data.height})`))):this.fire(new e.ErrorEvent(new Error(\"Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`\")));}hasImage(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error(\"Missing required image id\"))),!1)}removeImage(e){this.style.removeImage(e);}loadImage(t,i){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),((t,o)=>{i(t,o instanceof e.window.HTMLImageElement?e.exported.getImageData(o):o);}));}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}setLayerZoomRange(e,t,i){return this.style.setLayerZoomRange(e,t,i),this._update(!0)}setFilter(e,t,i={}){return this.style.setFilter(e,t,i),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,i,o={}){return this.style.setPaintProperty(e,t,i,o),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,i,o={}){return this.style.setLayoutProperty(e,t,i,o),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setLight(e,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(e){return this._lazyInitEmptyStyle(),!e&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(e),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(e){return this._lazyInitEmptyStyle(),this.style.setFog(e),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(t){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(e.LngLat.convert(t),this.transform):0}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}_updateContainerDimensions(){if(!this._container)return;const t=this._container.getBoundingClientRect().width||400,i=this._container.getBoundingClientRect().height||300;let o,r,n,s=this._container;for(;s&&(!r||!n);){const t=e.window.getComputedStyle(s).transform;t&&\"none\"!==t&&(o=t.match(/matrix.*\\((.+)\\)/)[1].split(\", \"),o[0]&&\"0\"!==o[0]&&\"1\"!==o[0]&&(r=o[0]),o[3]&&\"0\"!==o[3]&&\"1\"!==o[3]&&(n=o[3])),s=s.parentElement;}this._containerWidth=r?Math.abs(t/r):t,this._containerHeight=n?Math.abs(i/n):i;}_detectMissingCSS(){\"rgb(250, 128, 114)\"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue(\"background-color\")&&e.warnOnce(\"This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.\");}_setupContainer(){const e=this._container;e.classList.add(\"mapboxgl-map\"),(this._missingCSSCanary=n(\"div\",\"mapboxgl-canary\",e)).style.visibility=\"hidden\",this._detectMissingCSS();const t=this._canvasContainer=n(\"div\",\"mapboxgl-canvas-container\",e);this._interactive&&t.classList.add(\"mapboxgl-interactive\"),this._canvas=n(\"canvas\",\"mapboxgl-canvas\",t),this._canvas.addEventListener(\"webglcontextlost\",this._contextLost,!1),this._canvas.addEventListener(\"webglcontextrestored\",this._contextRestored,!1),this._canvas.setAttribute(\"tabindex\",\"0\"),this._canvas.setAttribute(\"aria-label\",this._getUIString(\"Map.Title\")),this._canvas.setAttribute(\"role\",\"region\"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const i=this._controlContainer=n(\"div\",\"mapboxgl-control-container\",e),o=this._controlPositions={};[\"top-left\",\"top-right\",\"bottom-left\",\"bottom-right\"].forEach((e=>{o[e]=n(\"div\",`mapboxgl-ctrl-${e}`,i);})),this._container.addEventListener(\"scroll\",this._onMapScroll,!1);}_resizeCanvas(t,i){const o=e.exported.devicePixelRatio||1;this._canvas.width=o*Math.ceil(t),this._canvas.height=o*Math.ceil(i),this._canvas.style.width=`${t}px`,this._canvas.style.height=`${i}px`;}_addMarker(e){this._markers.push(e);}_removeMarker(e){const t=this._markers.indexOf(e);-1!==t&&this._markers.splice(t,1);}_addPopup(e){this._popups.push(e);}_removePopup(e){const t=this._popups.indexOf(e);-1!==t&&this._popups.splice(t,1);}_setupPainter(){const t=e.extend({},i.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),o=this._canvas.getContext(\"webgl\",t)||this._canvas.getContext(\"experimental-webgl\",t);o?(e.storeAuthState(o,!0),this.painter=new Bo(o,this.transform),this.on(\"data\",(e=>{\"source\"===e.dataType&&this.painter.setTileLoadedFlag(!0);})),e.exported$1.testSupport(o)):this.fire(new e.ErrorEvent(new Error(\"Failed to initialize WebGL\")));}_contextLost(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event(\"webglcontextlost\",{originalEvent:t}));}_contextRestored(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event(\"webglcontextrestored\",{originalEvent:t}));}_onMapScroll(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return !this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e);}_requestDomTask(e){!this.loaded()||this.loaded()&&!this.isMoving()?e():this._domRenderTaskQueue.add(e);}_render(t){let i;const o=this.painter.context.extTimerQuery,r=e.exported.now();if(this.listens(\"gpu-timing-frame\")&&(i=o.createQueryEXT(),o.beginQueryEXT(o.TIME_ELAPSED_EXT,i)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],e.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],e.window.performance.now())),this._renderTaskQueue.run(t),this._domRenderTaskQueue.run(t),this._removed)return;this._updateProjectionTransition();const n=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const t=this.transform.zoom,i=this.transform.pitch,o=e.exported.now(),r=new e.EvaluationParameters(t,{now:o,fadeDuration:n,pitch:i,transition:this.style.getTransition()});this.style.update(r);}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let s=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),s=this._updateAverageElevation(r),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):s=this._updateAverageElevation(r),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,n,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:n,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens(\"gpu-timing-layer\"),gpuTimingDeferredRender:!!this.listens(\"gpu-timing-deferred-render\"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event(\"render\")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event(\"load\"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),i){const t=e.exported.now()-r;o.endQueryEXT(o.TIME_ELAPSED_EXT,i),setTimeout((()=>{const n=o.getQueryObjectEXT(i,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(i),this.fire(new e.Event(\"gpu-timing-frame\",{cpuTime:t,gpuTime:n})),e.window.performance.mark(\"frame-gpu\",{startTime:r,detail:{gpuTime:n}});}),50);}if(this.listens(\"gpu-timing-layer\")){const t=this.painter.collectGpuTimers();setTimeout((()=>{const i=this.painter.queryGpuTimers(t);this.fire(new e.Event(\"gpu-timing-layer\",{layerTimes:i}));}),50);}if(this.listens(\"gpu-timing-deferred-render\")){const t=this.painter.collectDeferredRenderGpuQueries();setTimeout((()=>{const i=this.painter.queryGpuTimeDeferredRender(t);this.fire(new e.Event(\"gpu-timing-deferred-render\",{gpuTime:i}));}),50);}const a=this._sourcesDirty||this._styleDirty||this._placementDirty||s;if(a||this._repaint)this.triggerRepaint();else {const t=!this.isMoving()&&this.loaded();if(t&&(s=this._updateAverageElevation(r,!0)),s)this.triggerRepaint();else if(this._triggerFrame(!1),t&&(this.fire(new e.Event(\"idle\")),this._isInitialLoad=!1,this.speedIndexTiming)){const t=this._calculateSpeedIndex();this.fire(new e.Event(\"speedindexcompleted\",{speedIndex:t})),this.speedIndexTiming=!1;}}!this._loaded||this._fullyLoaded||a||(this._fullyLoaded=!0,e.LivePerformanceUtils.mark(e.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&e.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate());}_forceMarkerAndPopupUpdate(e){for(const t of this._markers)e&&!this.getRenderWorldCopies()&&(t._lngLat=t._lngLat.wrap()),t._update();for(const t of this._popups)!e||this.getRenderWorldCopies()||t._trackPointer||(t._lngLat=t._lngLat.wrap()),t._update();}_updateAverageElevation(e,t=!1){const i=e=>(this.transform.averageElevation=e,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&i(0);if((t||e-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(e)){const t=this.transform.averageElevation;let o=this.transform.sampleAverageElevation(),r=!1;this.transform.elevation&&(r=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(o)?o=0:this._averageElevationLastSampledAt=e;const n=Math.abs(t-o);if(n>1){if(this._isInitialLoad||r)return this._averageElevation.jumpTo(o),i(o);this._averageElevation.easeTo(o,e,300);}else if(n>1e-4)return this._averageElevation.jumpTo(o),i(o)}return !!this._averageElevation.isEasing(e)&&i(this._averageElevation.getValue(e))}_authenticate(){e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(t=>{if(t&&(t.message===e.AUTH_ERR_MSG||401===t.status)){const t=this.painter.context.gl;e.storeAuthState(t,!1),this._logoControl instanceof Yr&&this._logoControl._updateLogo(),t&&t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT|t.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new e.ErrorEvent(new Error(\"A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/\")));}})),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}));}_updateTerrain(){const e=this._isDragging();this.painter.updateTerrain(this.style,e);}_calculateSpeedIndex(){const e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());const i=this.painter.context.gl,o=i.createFramebuffer();function r(e){i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,e,0);const t=new Uint8Array(i.drawingBufferWidth*i.drawingBufferHeight*4);return i.readPixels(0,0,i.drawingBufferWidth,i.drawingBufferHeight,i.RGBA,i.UNSIGNED_BYTE,t),t}return i.bindFramebuffer(i.FRAMEBUFFER,o),this._canvasPixelComparison(r(e),t.canvasCopies.map(r),t.timeStamps)}_canvasPixelComparison(e,t,i){let o=i[1]-i[0];const r=e.length/4;for(let n=0;n<t.length;n++){const s=t[n];let a=0;for(let t=0;t<s.length;t+=4)s[t]===e[t]&&s[t+1]===e[t+1]&&s[t+2]===e[t+2]&&s[t+3]===e[t+3]&&(a+=1);o+=(i[n+2]-i[n+1])*(1-a/r);}return o}remove(){this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener(\"resize\",this._onWindowResize,!1),e.window.removeEventListener(\"orientationchange\",this._onWindowResize,!1),e.window.removeEventListener(\"webkitfullscreenchange\",this._onWindowResize,!1),e.window.removeEventListener(\"online\",this._onWindowOnline,!1),e.window.removeEventListener(\"visibilitychange\",this._onVisibilityChange,!1));const t=this.painter.context.gl.getExtension(\"WEBGL_lose_context\");t&&t.loseContext(),this._canvas.removeEventListener(\"webglcontextlost\",this._contextLost,!1),this._canvas.removeEventListener(\"webglcontextrestored\",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove(\"mapboxgl-map\"),this._container.removeEventListener(\"scroll\",this._onMapScroll,!1),e.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new e.Event(\"remove\"));}triggerRepaint(){this._triggerFrame(!0);}_triggerFrame(t){this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.exported.frame((e=>{const t=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,t&&this._render(e);})));}_preloadTiles(t){const i=this.style?Object.values(this.style._sourceCaches):[];return e.asyncAll(i,((e,i)=>e._preloadTiles(t,i)),(()=>{this.triggerRepaint();})),this}_onWindowOnline(){this._update();}_onWindowResize(e){this._trackResize&&this.resize({originalEvent:e})._update();}_onVisibilityChange(){\"hidden\"===e.window.document.visibilityState&&this._visibilityHidden++;}get showTileBoundaries(){return !!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update());}get showTerrainWireframe(){return !!this._showTerrainWireframe}set showTerrainWireframe(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._update());}get speedIndexTiming(){return !!this._speedIndexTiming}set speedIndexTiming(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update());}get showPadding(){return !!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update());}get showCollisionBoxes(){return !!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update());}get showOverdrawInspector(){return !!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update());}get repaint(){return !!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint());}get vertices(){return !!this._vertices}set vertices(e){this._vertices=e,this._update();}get showTileAABBs(){return !!this._showTileAABBs}set showTileAABBs(e){this._showTileAABBs!==e&&(this._showTileAABBs=e,e&&this._update());}_setCacheLimits(t,i){e.setCacheLimits(t,i);}get version(){return e.version}},NavigationControl:class{constructor(t){this.options=e.extend({},ln,t),this._container=n(\"div\",\"mapboxgl-ctrl mapboxgl-ctrl-group\"),this._container.addEventListener(\"contextmenu\",(e=>e.preventDefault())),this.options.showZoom&&(e.bindAll([\"_setButtonTitle\",\"_updateZoomButtons\"],this),this._zoomInButton=this._createButton(\"mapboxgl-ctrl-zoom-in\",(e=>{this._map&&this._map.zoomIn({},{originalEvent:e});})),n(\"span\",\"mapboxgl-ctrl-icon\",this._zoomInButton).setAttribute(\"aria-hidden\",\"true\"),this._zoomOutButton=this._createButton(\"mapboxgl-ctrl-zoom-out\",(e=>{this._map&&this._map.zoomOut({},{originalEvent:e});})),n(\"span\",\"mapboxgl-ctrl-icon\",this._zoomOutButton).setAttribute(\"aria-hidden\",\"true\")),this.options.showCompass&&(e.bindAll([\"_rotateCompassArrow\"],this),this._compass=this._createButton(\"mapboxgl-ctrl-compass\",(e=>{const t=this._map;t&&(this.options.visualizePitch?t.resetNorthPitch({},{originalEvent:e}):t.resetNorth({},{originalEvent:e}));})),this._compassIcon=n(\"span\",\"mapboxgl-ctrl-icon\",this._compass),this._compassIcon.setAttribute(\"aria-hidden\",\"true\"));}_updateZoomButtons(){const e=this._map;if(!e)return;const t=e.getZoom(),i=t===e.getMaxZoom(),o=t===e.getMinZoom();this._zoomInButton.disabled=i,this._zoomOutButton.disabled=o,this._zoomInButton.setAttribute(\"aria-disabled\",i.toString()),this._zoomOutButton.setAttribute(\"aria-disabled\",o.toString());}_rotateCompassArrow(){const e=this._map;if(!e)return;const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(e.transform.pitch*(Math.PI/180)),.5)}) rotateX(${e.transform.pitch}deg) rotateZ(${e.transform.angle*(180/Math.PI)}deg)`:`rotate(${e.transform.angle*(180/Math.PI)}deg)`;e._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=t);}));}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,\"ZoomIn\"),this._setButtonTitle(this._zoomOutButton,\"ZoomOut\"),e.on(\"zoom\",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,\"ResetBearing\"),this.options.visualizePitch&&e.on(\"pitch\",this._rotateCompassArrow),e.on(\"rotate\",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new cn(e,this._compass,this.options.visualizePitch)),this._container}onRemove(){const e=this._map;e&&(this._container.remove(),this.options.showZoom&&e.off(\"zoom\",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&e.off(\"pitch\",this._rotateCompassArrow),e.off(\"rotate\",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0);}_createButton(e,t){const i=n(\"button\",e,this._container);return i.type=\"button\",i.addEventListener(\"click\",t),i}_setButtonTitle(e,t){if(!this._map)return;const i=this._map._getUIString(`NavigationControl.${t}`);e.setAttribute(\"aria-label\",i),e.firstElementChild&&e.firstElementChild.setAttribute(\"title\",i);}},GeolocateControl:class extends e.Evented{constructor(t){super(),this.options=e.extend({geolocation:e.window.navigator.geolocation},hn,t),e.bindAll([\"_onSuccess\",\"_onError\",\"_onZoom\",\"_finish\",\"_setupUI\",\"_updateCamera\",\"_updateMarker\",\"_updateMarkerRotation\",\"_onDeviceOrientation\"],this),this._updateMarkerRotationThrottled=Yo(this._updateMarkerRotation,20),this._numberOfWatches=0;}onAdd(e){return this._map=e,this._container=n(\"div\",\"mapboxgl-ctrl mapboxgl-ctrl-group\"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off(\"zoom\",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1;}_checkGeolocationSupport(t){const i=(e=!!this.options.geolocation)=>{this._supportsGeolocation=e,t(e);};void 0!==this._supportsGeolocation?t(this._supportsGeolocation):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:\"geolocation\"}).then((e=>i(\"denied\"!==e.state))).catch((()=>i())):i();}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),i=e.coords;return !!t&&(i.longitude<t.getWest()||i.longitude>t.getEast()||i.latitude<t.getSouth()||i.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case\"WAITING_ACTIVE\":this._watchState=\"ACTIVE_ERROR\",this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-active\"),this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-active-error\");break;case\"ACTIVE_LOCK\":this._watchState=\"ACTIVE_ERROR\",this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-active\"),this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-active-error\"),this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-waiting\");break;case\"BACKGROUND\":this._watchState=\"BACKGROUND_ERROR\",this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-background\"),this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-background-error\"),this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-waiting\");}}_onSuccess(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event(\"outofmaxbounds\",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case\"WAITING_ACTIVE\":case\"ACTIVE_LOCK\":case\"ACTIVE_ERROR\":this._watchState=\"ACTIVE_LOCK\",this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-waiting\"),this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-active-error\"),this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-active\");break;case\"BACKGROUND\":case\"BACKGROUND_ERROR\":this._watchState=\"BACKGROUND\",this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-waiting\"),this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-background-error\"),this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-background\");}this.options.showUserLocation&&\"OFF\"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&\"ACTIVE_LOCK\"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove(\"mapboxgl-user-location-dot-stale\"),this.fire(new e.Event(\"geolocate\",t)),this._finish();}}_updateCamera(t){const i=new e.LngLat(t.coords.longitude,t.coords.latitude),o=t.coords.accuracy,r=this._map.getBearing(),n=e.extend({bearing:r},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(o),n,{geolocateSource:!0});}_updateMarker(t){if(t){const i=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius();}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove();}_updateCircleRadius(){const t=this._map.transform,i=e.mercatorZfromAltitude(1,t._center.lat)*t.worldSize,o=Math.ceil(2*this._accuracy*i);this._circleElement.style.width=`${o}px`,this._circleElement.style.height=`${o}px`;}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius();}_updateMarkerRotation(){this._userLocationDotMarker&&\"number\"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add(\"mapboxgl-user-location-show-heading\")):(this._dotElement.classList.remove(\"mapboxgl-user-location-show-heading\"),this._userLocationDotMarker.setRotation(0));}_onError(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState=\"OFF\",this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-waiting\"),this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-active\"),this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-active-error\"),this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-background\"),this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-background-error\"),this._geolocateButton.disabled=!0;const e=this._map._getUIString(\"GeolocateControl.LocationNotAvailable\");this._geolocateButton.setAttribute(\"aria-label\",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute(\"title\",e),void 0!==this._geolocationWatchID&&this._clearWatch();}else {if(3===t.code&&this._noTimeout)return;this._setErrorState();}\"OFF\"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add(\"mapboxgl-user-location-dot-stale\"),this.fire(new e.Event(\"error\",t)),this._finish();}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0;}_setupUI(t){if(void 0!==this._map){if(this._container.addEventListener(\"contextmenu\",(e=>e.preventDefault())),this._geolocateButton=n(\"button\",\"mapboxgl-ctrl-geolocate\",this._container),n(\"span\",\"mapboxgl-ctrl-icon\",this._geolocateButton).setAttribute(\"aria-hidden\",\"true\"),this._geolocateButton.type=\"button\",!1===t){e.warnOnce(\"Geolocation support is not available so the GeolocateControl will be disabled.\");const t=this._map._getUIString(\"GeolocateControl.LocationNotAvailable\");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute(\"aria-label\",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute(\"title\",t);}else {const e=this._map._getUIString(\"GeolocateControl.FindMyLocation\");this._geolocateButton.setAttribute(\"aria-label\",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute(\"title\",e);}this.options.trackUserLocation&&(this._geolocateButton.setAttribute(\"aria-pressed\",\"false\"),this._watchState=\"OFF\"),this.options.showUserLocation&&(this._dotElement=n(\"div\",\"mapboxgl-user-location\"),this._dotElement.appendChild(n(\"div\",\"mapboxgl-user-location-dot\")),this._dotElement.appendChild(n(\"div\",\"mapboxgl-user-location-heading\")),this._userLocationDotMarker=new en({element:this._dotElement,rotationAlignment:\"map\",pitchAlignment:\"map\"}),this._circleElement=n(\"div\",\"mapboxgl-user-location-accuracy-circle\"),this._accuracyCircleMarker=new en({element:this._circleElement,pitchAlignment:\"map\"}),this.options.trackUserLocation&&(this._watchState=\"OFF\"),this._map.on(\"zoom\",this._onZoom)),this._geolocateButton.addEventListener(\"click\",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on(\"movestart\",(t=>{t.geolocateSource||\"ACTIVE_LOCK\"!==this._watchState||t.originalEvent&&\"resize\"===t.originalEvent.type||(this._watchState=\"BACKGROUND\",this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-background\"),this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-active\"),this.fire(new e.Event(\"trackuserlocationend\")));}));}}_onDeviceOrientation(e){this._userLocationDotMarker&&(e.webkitCompassHeading?this._heading=e.webkitCompassHeading:!0===e.absolute&&(this._heading=-1*e.alpha),this._updateMarkerRotationThrottled());}trigger(){if(!this._setup)return e.warnOnce(\"Geolocate control triggered before added to a map\"),!1;if(this.options.trackUserLocation){switch(this._watchState){case\"OFF\":this._watchState=\"WAITING_ACTIVE\",this.fire(new e.Event(\"trackuserlocationstart\"));break;case\"WAITING_ACTIVE\":case\"ACTIVE_LOCK\":case\"ACTIVE_ERROR\":case\"BACKGROUND_ERROR\":this._numberOfWatches--,this._noTimeout=!1,this._watchState=\"OFF\",this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-waiting\"),this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-active\"),this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-active-error\"),this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-background\"),this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-background-error\"),this.fire(new e.Event(\"trackuserlocationend\"));break;case\"BACKGROUND\":this._watchState=\"ACTIVE_LOCK\",this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-background\"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event(\"trackuserlocationstart\"));}switch(this._watchState){case\"WAITING_ACTIVE\":this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-waiting\"),this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-active\");break;case\"ACTIVE_LOCK\":this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-active\");break;case\"ACTIVE_ERROR\":this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-waiting\"),this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-active-error\");break;case\"BACKGROUND\":this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-background\");break;case\"BACKGROUND_ERROR\":this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-waiting\"),this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-background-error\");}if(\"OFF\"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-waiting\"),this._geolocateButton.setAttribute(\"aria-pressed\",\"true\"),this._numberOfWatches++,this._numberOfWatches>1?(e={maximumAge:6e5,timeout:0},this._noTimeout=!0):(e=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,e),this.options.showUserHeading&&this._addDeviceOrientationListener();}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return !0}_addDeviceOrientationListener(){const t=()=>{e.window.addEventListener(\"ondeviceorientationabsolute\"in e.window?\"deviceorientationabsolute\":\"deviceorientation\",this._onDeviceOrientation);};void 0!==e.window.DeviceMotionEvent&&\"function\"==typeof e.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((e=>{\"granted\"===e&&t();})).catch(console.error):t();}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),e.window.removeEventListener(\"deviceorientation\",this._onDeviceOrientation),e.window.removeEventListener(\"deviceorientationabsolute\",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-waiting\"),this._geolocateButton.setAttribute(\"aria-pressed\",\"false\"),this.options.showUserLocation&&this._updateMarker(null);}},AttributionControl:Hr,ScaleControl:class{constructor(t){this.options=e.extend({},un,t),function(){try{return new Intl.NumberFormat(\"en\",{style:\"unit\",unitDisplay:\"narrow\",unit:\"meter\"}),!0}catch(e){return !1}}()||(this._setScale=_n.bind(this)),e.bindAll([\"_update\",\"_setScale\",\"setUnit\"],this);}getDefaultPosition(){return \"bottom-left\"}_update(){const e=this.options.maxWidth||100,t=this._map,i=t._containerHeight/2,o=t._containerWidth/2-e/2,r=t.unproject([o,i]),n=t.unproject([o+e,i]),s=r.distanceTo(n);if(\"imperial\"===this.options.unit){const t=3.2808*s;t>5280?this._setScale(e,t/5280,\"mile\"):this._setScale(e,t,\"foot\");}else \"nautical\"===this.options.unit?this._setScale(e,s/1852,\"nautical-mile\"):s>=1e3?this._setScale(e,s/1e3,\"kilometer\"):this._setScale(e,s,\"meter\");}_setScale(e,t,i){const o=dn(t),r=o/t;this._map._requestDomTask((()=>{this._container.style.width=e*r+\"px\",this._container.innerHTML=\"nautical-mile\"!==i?new Intl.NumberFormat(this._language,{style:\"unit\",unitDisplay:\"narrow\",unit:i}).format(o):`${o}&nbsp;nm`;}));}onAdd(e){return this._map=e,this._language=e.getLanguage(),this._container=n(\"div\",\"mapboxgl-ctrl mapboxgl-ctrl-scale\",e.getContainer()),this._container.dir=\"auto\",this._map.on(\"move\",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off(\"move\",this._update),this._map=void 0;}_setLanguage(e){this._language=e,this._update();}setUnit(e){this.options.unit=e,this._update();}},FullscreenControl:class{constructor(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof e.window.HTMLElement?this._container=t.container:e.warnOnce(\"Full screen control 'container' must be a DOM element.\")),e.bindAll([\"_onClickFullscreen\",\"_changeIcon\"],this),\"onfullscreenchange\"in e.window.document?this._fullscreenchange=\"fullscreenchange\":\"onwebkitfullscreenchange\"in e.window.document&&(this._fullscreenchange=\"webkitfullscreenchange\");}onAdd(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=n(\"div\",\"mapboxgl-ctrl mapboxgl-ctrl-group\"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display=\"none\",e.warnOnce(\"This device does not support fullscreen mode.\")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon);}_checkFullscreenSupport(){return !(!e.window.document.fullscreenEnabled&&!e.window.document.webkitFullscreenEnabled)}_setupUI(){const t=this._fullscreenButton=n(\"button\",\"mapboxgl-ctrl-fullscreen\",this._controlContainer);n(\"span\",\"mapboxgl-ctrl-icon\",t).setAttribute(\"aria-hidden\",\"true\"),t.type=\"button\",this._updateTitle(),this._fullscreenButton.addEventListener(\"click\",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon);}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute(\"aria-label\",e),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute(\"title\",e);}_getTitle(){return this._map._getUIString(this._isFullscreen()?\"FullscreenControl.Exit\":\"FullscreenControl.Enter\")}_isFullscreen(){return this._fullscreen}_changeIcon(){(e.window.document.fullscreenElement||e.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(\"mapboxgl-ctrl-shrink\"),this._fullscreenButton.classList.toggle(\"mapboxgl-ctrl-fullscreen\"),this._updateTitle());}_onClickFullscreen(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen();}},Popup:class extends e.Evented{constructor(t){super(),this.options=e.extend(Object.create(tn),t),e.bindAll([\"_update\",\"_onClose\",\"remove\",\"_onMouseEvent\"],this),this._classList=new Set(t&&t.className?t.className.trim().split(/\\s+/):[]);}addTo(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&t.on(\"preclick\",this._onClose),this.options.closeOnMove&&t.on(\"move\",this._onClose),t.on(\"remove\",this.remove),this._update(),t._addPopup(this),this._focusFirstElement(),this._trackPointer?(t.on(\"mousemove\",this._onMouseEvent),t.on(\"mouseup\",this._onMouseEvent),t._canvasContainer.classList.add(\"mapboxgl-track-pointer\")):t.on(\"move\",this._update),this.fire(new e.Event(\"open\")),this}isOpen(){return !!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const t=this._map;return t&&(t.off(\"move\",this._update),t.off(\"move\",this._onClose),t.off(\"preclick\",this._onClose),t.off(\"click\",this._onClose),t.off(\"remove\",this.remove),t.off(\"mousemove\",this._onMouseEvent),t.off(\"mouseup\",this._onMouseEvent),t.off(\"drag\",this._onMouseEvent),t._canvasContainer&&t._canvasContainer.classList.remove(\"mapboxgl-track-pointer\"),t._removePopup(this),this._map=void 0),this.fire(new e.Event(\"close\")),this}getLngLat(){return this._lngLat}setLngLat(t){this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update();const i=this._map;return i&&(i.on(\"move\",this._update),i.off(\"mousemove\",this._onMouseEvent),i._canvasContainer.classList.remove(\"mapboxgl-track-pointer\")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const e=this._map;return e&&(e.off(\"move\",this._update),e.on(\"mousemove\",this._onMouseEvent),e.on(\"drag\",this._onMouseEvent),e._canvasContainer.classList.add(\"mapboxgl-track-pointer\")),this}getElement(){return this._container}setText(t){return this.setDOMContent(e.window.document.createTextNode(t))}setHTML(t){const i=e.window.document.createDocumentFragment(),o=e.window.document.createElement(\"body\");let r;for(o.innerHTML=t;r=o.firstChild,r;)i.appendChild(r);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){let t=this._content;if(t)for(;t.hasChildNodes();)t.firstChild&&t.removeChild(t.firstChild);else t=this._content=n(\"div\",\"mapboxgl-popup-content\",this._container||void 0);if(t.appendChild(e),this.options.closeButton){const e=this._closeButton=n(\"button\",\"mapboxgl-popup-close-button\",t);e.type=\"button\",e.setAttribute(\"aria-label\",\"Close popup\"),e.setAttribute(\"aria-hidden\",\"true\"),e.innerHTML=\"&#215;\",e.addEventListener(\"click\",this._onClose);}return this._update(),this._focusFirstElement(),this}addClassName(e){return this._classList.add(e),this._updateClassList(),this}removeClassName(e){return this._classList.delete(e),this._updateClassList(),this}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){let t;return this._classList.delete(e)?t=!1:(this._classList.add(e),t=!0),this._updateClassList(),t}_onMouseEvent(e){this._update(e.point);}_getAnchor(e){if(this.options.anchor)return this.options.anchor;const t=this._map,i=this._container,o=this._pos;if(!t||!i||!o)return \"bottom\";const r=i.offsetWidth,n=i.offsetHeight,s=o.x<r/2,a=o.x>t.transform.width-r/2;if(o.y+e<n)return s?\"top-left\":a?\"top-right\":\"top\";if(o.y>t.transform.height-n){if(s)return \"bottom-left\";if(a)return \"bottom-right\"}return s?\"left\":a?\"right\":\"bottom\"}_updateClassList(){const e=this._container;if(!e)return;const t=[...this._classList];t.push(\"mapboxgl-popup\"),this._anchor&&t.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&t.push(\"mapboxgl-popup-track-pointer\"),e.className=t.join(\" \");}_update(t){const i=this._map,o=this._content;if(!i||!this._lngLat&&!this._trackPointer||!o)return;let r=this._container;if(r||(r=this._container=n(\"div\",\"mapboxgl-popup\",i.getContainer()),this._tip=n(\"div\",\"mapboxgl-popup-tip\",r),r.appendChild(o)),this.options.maxWidth&&r.style.maxWidth!==this.options.maxWidth&&(r.style.maxWidth=this.options.maxWidth),i.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Jr(this._lngLat,this._pos,i.transform)),!this._trackPointer||t){const e=this._pos=this._trackPointer&&t?t:i.project(this._lngLat),o=rn(this.options.offset),r=this._anchor=this._getAnchor(o.y),n=rn(this.options.offset,r),s=e.add(n).round();i._requestDomTask((()=>{this._container&&r&&(this._container.style.transform=`${Qr[r]} translate(${s.x}px,${s.y}px)`);}));}if(!this._marker&&i._showingGlobe()){const t=e.isLngLatBehindGlobe(i.transform,this._lngLat)?0:1;this._setOpacity(t);}this._updateClassList();}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(on);e&&e.focus();}_onClose(){this.remove();}_setOpacity(e){this._container&&(this._container.style.opacity=`${e}`),this._content&&(this._content.style.pointerEvents=e?\"auto\":\"none\");}},Marker:en,Style:Jt,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.pointGeometry,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:Go,Evented:e.Evented,config:e.config,prewarm:function(){Ge().acquire(Fe);},clearPrewarmedResources:function(){const e=Ne;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(Fe),Ne=null):console.warn(\"Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()\"));},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t;},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t;},get workerCount(){return Ue.workerCount},set workerCount(e){Ue.workerCount=e;},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t;},clearStorage(t){e.clearTileCache(t);},workerUrl:\"\",workerClass:null,setNow:e.exported.setNow,restoreNow:e.exported.restoreNow};return pn}));\n\n//\n\nvar mapboxgl$1 = mapboxgl;\n\nreturn mapboxgl$1;\n\n}));\n//# sourceMappingURL=mapbox-gl.js.map\n","import { urlAlphabet } from './url-alphabet/index.js'\nlet random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nlet customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nlet customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nlet nanoid = (size = 21) =>\n  crypto.getRandomValues(new Uint8Array(size)).reduce((id, byte) => {\n    byte &= 63\n    if (byte < 36) {\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte > 62) {\n      id += '-'\n    } else {\n      id += '_'\n    }\n    return id\n  }, '')\nexport { nanoid, customAlphabet, customRandom, urlAlphabet, random }\n","let urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\nexport { urlAlphabet }\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","!function(root, name, make) {\r\n  if (typeof module != 'undefined' && module.exports) module.exports = make()\r\n  else root[name] = make()\r\n}(this, 'subtag', function() {\r\n\r\n  var empty = ''\r\n  var pattern = /^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/\r\n\r\n  function match(tag) {\r\n    return tag.match(pattern) || []\r\n  }\r\n\r\n  function split(tag) {\r\n    return match(tag).filter(function(v, i) { return v && i })\r\n  }\r\n\r\n  function api(tag) {\r\n    tag = match(tag)\r\n    return {\r\n      language: tag[1] || empty,\r\n      extlang: tag[2] || empty,\r\n      script: tag[3] || empty,\r\n      region: tag[4] || empty\r\n    }\r\n  }\r\n\r\n  function expose(target, key, value) {\r\n    Object.defineProperty(target, key, {\r\n      value: value,\r\n      enumerable: true\r\n    })\r\n  }\r\n\r\n  function part(position, pattern, type) {\r\n    function method(tag) {\r\n      return match(tag)[position] || empty\r\n    }\r\n    expose(method, 'pattern', pattern)\r\n    expose(api, type, method)\r\n  }\r\n\r\n  part(1, /^[a-zA-Z]{2,3}$/, 'language')\r\n  part(2, /^[a-zA-Z]{3}$/, 'extlang')\r\n  part(3, /^[a-zA-Z]{4}$/, 'script')\r\n  part(4, /^[a-zA-Z]{2}$|^[0-9]{3}$/, 'region')\r\n\r\n  expose(api, 'split', split)\r\n\r\n  return api\r\n});\r\n","'use strict';\n\n/**\n * A typeahead component for inputs\n * @class Suggestions\n *\n * @param {HTMLInputElement} el A valid HTML input element\n * @param {Array} data An array of data used for results\n * @param {Object} options\n * @param {Number} [options.limit=5] Max number of results to display in the auto suggest list.\n * @param {Number} [options.minLength=2] Number of characters typed into an input to trigger suggestions.\n * @param {Boolean} [options.hideOnBlur=true] If `true`, hides the suggestions when focus is lost.\n * @return {Suggestions} `this`\n * @example\n * // in the browser\n * var input = document.querySelector('input');\n * var data = [\n *   'Roy Eldridge',\n *   'Roy Hargrove',\n *   'Rex Stewart'\n * ];\n *\n * new Suggestions(input, data);\n *\n * // with options\n * var input = document.querySelector('input');\n * var data = [{\n *   name: 'Roy Eldridge',\n *   year: 1911\n * }, {\n *   name: 'Roy Hargrove',\n *   year: 1969\n * }, {\n *   name: 'Rex Stewart',\n *   year: 1907\n * }];\n *\n * var typeahead = new Suggestions(input, data, {\n *   filter: false, // Disable filtering\n *   minLength: 3, // Number of characters typed into an input to trigger suggestions.\n *   limit: 3, //  Max number of results to display.\n *   hideOnBlur: false // Don't hide results when input loses focus\n * });\n *\n * // As we're passing an object of an arrays as data, override\n * // `getItemValue` by specifying the specific property to search on.\n * typeahead.getItemValue = function(item) { return item.name };\n *\n * input.addEventListener('change', function() {\n *   console.log(typeahead.selected); // Current selected item.\n * });\n *\n * // With browserify\n * var Suggestions = require('suggestions');\n *\n * new Suggestions(input, data);\n */\nvar Suggestions = require('./src/suggestions');\nmodule.exports = Suggestions;\n\nif (typeof window !== 'undefined') {\n  window.Suggestions = Suggestions;\n}\n","'use strict';\n\nvar List = function(component) {\n  this.component = component;\n  this.items = [];\n  this.active = 0;\n  this.wrapper = document.createElement('div');\n  this.wrapper.className = 'suggestions-wrapper';\n  this.element = document.createElement('ul');\n  this.element.className = 'suggestions';\n  this.wrapper.appendChild(this.element);\n\n  // selectingListItem is set to true in the time between the mousedown and mouseup when clicking an item in the list\n  // mousedown on a list item will cause the input to blur which normally hides the list, so this flag is used to keep\n  // the list open until the mouseup\n  this.selectingListItem = false;\n\n  component.el.parentNode.insertBefore(this.wrapper, component.el.nextSibling);\n  return this;\n};\n\nList.prototype.show = function() {\n  this.element.style.display = 'block';\n};\n\nList.prototype.hide = function() {\n  this.element.style.display = 'none';\n};\n\nList.prototype.add = function(item) {\n  this.items.push(item);\n};\n\nList.prototype.clear = function() {\n  this.items = [];\n  this.active = 0;\n};\n\nList.prototype.isEmpty = function() {\n  return !this.items.length;\n};\n\nList.prototype.isVisible = function() {\n  return this.element.style.display === 'block';\n};\n\nList.prototype.draw = function() {\n  this.element.innerHTML = '';\n\n  if (this.items.length === 0) {\n    this.hide();\n    return;\n  }\n\n  for (var i = 0; i < this.items.length; i++) {\n    this.drawItem(this.items[i], this.active === i);\n  }\n\n  this.show();\n};\n\nList.prototype.drawItem = function(item, active) {\n  var li = document.createElement('li'),\n    a = document.createElement('a');\n\n  if (active) li.className += ' active';\n\n  a.innerHTML = item.string;\n\n  li.appendChild(a);\n  this.element.appendChild(li);\n\n  li.addEventListener('mousedown', function() {\n    this.selectingListItem = true;\n  }.bind(this));\n\n  li.addEventListener('mouseup', function() {\n    this.handleMouseUp.call(this, item);\n  }.bind(this));\n};\n\nList.prototype.handleMouseUp = function(item) {\n  this.selectingListItem = false;\n  this.component.value(item.original);\n  this.clear();\n  this.draw();\n};\n\nList.prototype.move = function(index) {\n  this.active = index;\n  this.draw();\n};\n\nList.prototype.previous = function() {\n  this.move(this.active === 0 ? this.items.length - 1 : this.active - 1);\n};\n\nList.prototype.next = function() {\n  this.move(this.active === this.items.length - 1 ? 0 : this.active + 1);\n};\n\nList.prototype.drawError = function(msg){\n  var li = document.createElement('li');\n\n  li.innerHTML = msg;\n\n  this.element.appendChild(li);\n  this.show();\n}\n\nmodule.exports = List;\n","'use strict';\n\nvar extend = require('xtend');\nvar fuzzy = require('fuzzy');\nvar List = require('./list');\n\nvar Suggestions = function(el, data, options) {\n  options = options || {};\n\n  this.options = extend({\n    minLength: 2,\n    limit: 5,\n    filter: true,\n    hideOnBlur: true\n  }, options);\n\n  this.el = el;\n  this.data = data || [];\n  this.list = new List(this);\n\n  this.query = '';\n  this.selected = null;\n\n  this.list.draw();\n\n  this.el.addEventListener('keyup', function(e) {\n    this.handleKeyUp(e.keyCode);\n  }.bind(this), false);\n\n  this.el.addEventListener('keydown', function(e) {\n    this.handleKeyDown(e);\n  }.bind(this));\n\n  this.el.addEventListener('focus', function() {\n    this.handleFocus();\n  }.bind(this));\n\n  this.el.addEventListener('blur', function() {\n    this.handleBlur();\n  }.bind(this));\n\n  this.el.addEventListener('paste', function(e) {\n    this.handlePaste(e);\n  }.bind(this));\n\n  // use user-provided render function if given, otherwise just use the default\n  this.render = (this.options.render) ? this.options.render.bind(this) : this.render.bind(this)\n\n  this.getItemValue = (this.options.getItemValue) ? this.options.getItemValue.bind(this) : this.getItemValue.bind(this);\n\n  return this;\n};\n\nSuggestions.prototype.handleKeyUp = function(keyCode) {\n  // 40 - DOWN\n  // 38 - UP\n  // 27 - ESC\n  // 13 - ENTER\n  // 9 - TAB\n\n  if (keyCode === 40 ||\n      keyCode === 38 ||\n      keyCode === 27 ||\n      keyCode === 13 ||\n      keyCode === 9) return;\n\n  this.handleInputChange(this.el.value);\n};\n\nSuggestions.prototype.handleKeyDown = function(e) {\n  switch (e.keyCode) {\n    case 13: // ENTER\n    case 9: // TAB\n      if (!this.list.isEmpty()) {\n        if (this.list.isVisible()) {\n          e.preventDefault();\n        }\n        this.value(this.list.items[this.list.active].original);\n        this.list.hide();\n      }\n    break;\n    case 27: // ESC\n      if (!this.list.isEmpty()) this.list.hide();\n    break;\n    case 38: // UP\n      this.list.previous();\n    break;\n    case 40: // DOWN\n      this.list.next();\n    break;\n  }\n};\n\nSuggestions.prototype.handleBlur = function() {\n  if (!this.list.selectingListItem && this.options.hideOnBlur) {\n    this.list.hide();\n  }\n};\n\nSuggestions.prototype.handlePaste = function(e) {\n  if (e.clipboardData) {\n    this.handleInputChange(e.clipboardData.getData('Text'));\n  } else {\n    var self = this;\n    setTimeout(function () {\n      self.handleInputChange(e.target.value);\n    }, 100);\n  }\n};\n\nSuggestions.prototype.handleInputChange = function(query) {\n  this.query = this.normalize(query);\n\n  this.list.clear();\n\n  if (this.query.length < this.options.minLength) {\n    this.list.draw();\n    return;\n  }\n\n  this.getCandidates(function(data) {\n    for (var i = 0; i < data.length; i++) {\n      this.list.add(data[i]);\n      if (i === (this.options.limit - 1)) break;\n    }\n    this.list.draw();\n  }.bind(this));\n};\n\nSuggestions.prototype.handleFocus = function() {\n  if (!this.list.isEmpty()) this.list.show();\n  this.list.selectingListItem = false;\n};\n\n/**\n * Update data previously passed\n *\n * @param {Array} revisedData\n */\nSuggestions.prototype.update = function(revisedData) {\n  this.data = revisedData;\n  this.handleKeyUp();\n};\n\n/**\n * Clears data\n */\nSuggestions.prototype.clear = function() {\n  this.data = [];\n  this.list.clear();\n};\n\n/**\n * Normalize the results list and input value for matching\n *\n * @param {String} value\n * @return {String}\n */\nSuggestions.prototype.normalize = function(value) {\n  value = value.toLowerCase();\n  return value;\n};\n\n/**\n * Evaluates whether an array item qualifies as a match with the current query\n *\n * @param {String} candidate a possible item from the array passed\n * @param {String} query the current query\n * @return {Boolean}\n */\nSuggestions.prototype.match = function(candidate, query) {\n  return candidate.indexOf(query) > -1;\n};\n\nSuggestions.prototype.value = function(value) {\n  this.selected = value;\n  this.el.value = this.getItemValue(value);\n\n  if (document.createEvent) {\n    var e = document.createEvent('HTMLEvents');\n    e.initEvent('change', true, false);\n    this.el.dispatchEvent(e);\n  } else {\n    this.el.fireEvent('onchange');\n  }\n};\n\nSuggestions.prototype.getCandidates = function(callback) {\n  var options = {\n    pre: '<strong>',\n    post: '</strong>',\n    extract: function(d) { return this.getItemValue(d); }.bind(this)\n  };\n  var results;\n  if(this.options.filter){\n    results = fuzzy.filter(this.query, this.data, options);\n\n    results = results.map(function(item){\n      return {\n        original: item.original,\n        string: this.render(item.original, item.string)\n      };\n    }.bind(this))\n  }else{\n    results = this.data.map(function(d) {\n      var renderedString = this.render(d);\n      return {\n        original: d,\n        string: renderedString\n      };\n    }.bind(this));\n  }\n  callback(results);\n};\n\n/**\n * For a given item in the data array, return what should be used as the candidate string\n *\n * @param {Object|String} item an item from the data array\n * @return {String} item\n */\nSuggestions.prototype.getItemValue = function(item) {\n  return item;\n};\n\n/**\n * For a given item in the data array, return a string of html that should be rendered in the dropdown\n * @param {Object|String} item an item from the data array\n * @param {String} sourceFormatting a string that has pre-formatted html that should be passed directly through the render function \n * @return {String} html\n */\nSuggestions.prototype.render = function(item, sourceFormatting) {\n  if (sourceFormatting){\n    // use existing formatting on the source string\n    return sourceFormatting;\n  }\n  var boldString = (item.original) ? this.getItemValue(item.original) : this.getItemValue(item);\n  var indexString = this.normalize(boldString);\n  var indexOfQuery = indexString.lastIndexOf(this.query);\n  while (indexOfQuery > -1) {\n    var endIndexOfQuery = indexOfQuery + this.query.length;\n    boldString = boldString.slice(0, indexOfQuery) + '<strong>' + boldString.slice(indexOfQuery, endIndexOfQuery) + '</strong>' + boldString.slice(endIndexOfQuery);\n    indexOfQuery = indexString.slice(0, indexOfQuery).lastIndexOf(this.query);\n  }\n  return boldString\n}\n\n/**\n * Render an custom error message in the suggestions list\n * @param {String} msg An html string to render as an error message\n */\nSuggestions.prototype.renderError = function(msg){\n  this.list.drawError(msg);\n}\n\nmodule.exports = Suggestions;\n","/* globals __webpack_amd_options__ */\nmodule.exports = __webpack_amd_options__;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n","import { useState, useRef, useEffect } from 'react';\r\nimport { MapContextProvider } from '../contexts/MapContext';\r\n\r\n// https://www.npmjs.com/package/mapbox-gl\r\nimport mapboxgl from 'mapbox-gl';\r\nimport 'mapbox-gl/dist/mapbox-gl.css';\r\n\r\nimport { useFullscreenControl } from './controls/FullscreenControl';\r\nimport { useMapboxGeocoder } from './controls/MapboxGeocoder';\r\nimport { useGeolocateControl } from './controls/GeolocateControl';\r\nimport { useNavigationControl } from './controls/NavigationControl';\r\nimport { useScaleControl } from './controls/ScaleControl';\r\nimport { useMapboxDraw } from './controls/MapboxDraw';\r\n\r\nexport default function Map(props) {\r\n  const {\r\n    mapboxStyle,\r\n    interactive,\r\n\r\n    longitude,\r\n    latitute,\r\n    zoom,\r\n    bearing,\r\n\r\n    outMap,\r\n    outMapboxDraw,\r\n    outLongitude,\r\n    outLatitute,\r\n    outZoom,\r\n    outBearing,\r\n\r\n    onLoaded,\r\n    onMoved,\r\n    onClick,\r\n    onClickLongitude,\r\n    onClickLatitude,\r\n\r\n    style,\r\n    children,\r\n  } = props;\r\n\r\n  const containerRef = useRef(null);\r\n  const [map, setMap] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!containerRef.current) return;\r\n\r\n    const accessToken = Noodl.getProjectSettings().mapboxAccessToken;\r\n    mapboxgl.accessToken = accessToken;\r\n\r\n    // You can also send in a JSON string for a custom style\r\n    let mapStyle = mapboxStyle || 'mapbox://styles/mapbox/streets-v12';\r\n    if (mapStyle.startsWith(\"{\")) {\r\n      try {\r\n        mapStyle = JSON.parse(mapStyle);\r\n      } catch (error) {\r\n        console.error(\"Failed to parse Map Style\", error);\r\n      }\r\n    }\r\n\r\n    const map = new mapboxgl.Map({\r\n      container: containerRef.current,\r\n      style: mapStyle,\r\n      center: [longitude || 0, latitute || 0],\r\n      zoom: zoom || 0,\r\n      bearing,\r\n      interactive\r\n    });\r\n\r\n    const resizeObserver = new ResizeObserver(() => {\r\n      map.resize()\r\n    }); \r\n    resizeObserver.observe(containerRef.current)\r\n\r\n    setMap(map);\r\n    outMap(map);\r\n\r\n    map.on('move', () => {\r\n      const { lng, lat } = map.getCenter();\r\n      outLongitude(lng);\r\n      outLatitute(lat);\r\n      outZoom(map.getZoom());\r\n      outBearing(map.getBearing());\r\n      onMoved();\r\n    });\r\n\r\n    map.on('load', () => {\r\n      onLoaded();\r\n    })\r\n    \r\n    map.on('click', (e) => {\r\n      onClickLongitude(e.lngLat.lng);\r\n      onClickLatitude(e.lngLat.lat);\r\n      onClick();\r\n    });\r\n\r\n    return function () {\r\n      map.remove();\r\n      resizeObserver.disconnect();\r\n    }\r\n  }, [containerRef]);\r\n\r\n  useEffect(() => {\r\n    if (!map) return;\r\n    map.flyTo({ center: [longitude || 0, latitute || 0] });\r\n  }, [map, longitude, latitute]);\r\n\r\n  useEffect(() => {\r\n    if (!map) return;\r\n    map.flyTo({ zoom: zoom || 0 });\r\n  }, [map, zoom]);\r\n\r\n  useEffect(() => {\r\n    if (!map) return;\r\n    map.flyTo({ bearing: bearing || 0 });\r\n  }, [map, bearing]);\r\n\r\n  // TODO: There is an issue where the controls will show up in the order they are added.\r\n\r\n  // Add controls\r\n  useMapboxGeocoder(map, props);\r\n  useFullscreenControl(map, props);\r\n  useGeolocateControl(map, props);\r\n  useNavigationControl(map, props);\r\n  useScaleControl(map, props);\r\n  const { draw } = useMapboxDraw(map, props);\r\n\r\n  return (\r\n    <div style={{...{width: '100%', height: '100%'}, ...style}}>\r\n      <div style={{width: '100%', height: '100%'}} ref={containerRef} />\r\n      {containerRef && map && (\r\n        <MapContextProvider map={map} draw={draw}>\r\n          <div style={{width: '100%', height: '100%'}}>{children}</div>\r\n        </MapContextProvider>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useRef, useEffect } from 'react';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport { AddControlPositionEnumType } from '../../constants';\r\n\r\nexport const DynamicPorts = [\r\n  {\r\n    condition: \"c_FullscreenControlEnable = true\",\r\n    inputs: [\r\n      \"c_FullscreenControlPosition\",\r\n    ]\r\n  }\r\n]\r\n\r\n// https://docs.mapbox.com/mapbox-gl-js/api/markers/#fullscreencontrol\r\nexport const Inputs = {\r\n  c_FullscreenControlEnable: {\r\n    displayName: 'Enable Fullscreen',\r\n    type: 'boolean',\r\n    group: 'Controls - Fullscreen',\r\n    default: false\r\n  },\r\n  c_FullscreenControlPosition: {\r\n    displayName: 'Fullscreen Position',\r\n    type: AddControlPositionEnumType,\r\n    group: 'Controls - Fullscreen',\r\n    default: 'top-right'\r\n  },\r\n}\r\n\r\nexport function useFullscreenControl(\r\n  map,\r\n  {\r\n    c_FullscreenControlEnable,\r\n    c_FullscreenControlPosition,\r\n  }\r\n) {\r\n  useEffect(() => {\r\n    if (!map) return;\r\n    if (!c_FullscreenControlEnable) return;\r\n\r\n    const control = new mapboxgl.FullscreenControl();\r\n    map.addControl(control, c_FullscreenControlPosition);\r\n\r\n    return function () {\r\n      // Solve the issue with reseting the input\r\n      try {\r\n        map.removeControl(control);\r\n      } catch {}\r\n    };\r\n  }, [\r\n    map,\r\n    c_FullscreenControlEnable,\r\n    c_FullscreenControlPosition,\r\n  ]);\r\n}\r\n","import { useState, useRef, useEffect } from 'react';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport { AddControlPositionEnumType } from '../../constants';\r\n\r\nexport const DynamicPorts = [\r\n  {\r\n    condition: \"c_GeolocateControlEnable = true\",\r\n    inputs: [\r\n      \"c_GeolocateControlPosition\",\r\n      \"c_GeolocateControlShowAccuracyCircle\",\r\n      \"c_GeolocateControlShowUserHeading\",\r\n      \"c_GeolocateControlShowUserLocation\",\r\n      \"c_GeolocateControlTrackUserLocation\",\r\n    ]\r\n  }\r\n]\r\n\r\n// https://docs.mapbox.com/mapbox-gl-js/api/markers/#geolocatecontrol\r\nexport const Inputs = {\r\n  c_GeolocateControlEnable: {\r\n    displayName: 'Enable Geolocate',\r\n    type: 'boolean',\r\n    group: 'Controls - Geolocate',\r\n    default: false\r\n  },\r\n  c_GeolocateControlPosition: {\r\n    displayName: 'Geolocate Position',\r\n    type: AddControlPositionEnumType,\r\n    group: 'Controls - Geolocate',\r\n    default: 'top-right'\r\n  },\r\n  c_GeolocateControlShowAccuracyCircle: {\r\n    displayName: 'Show Accuracy Circle',\r\n    tooltip: \"A transparent circle will be drawn around the user location indicating the accuracy (95% confidence level) of the user's location.\",\r\n    type: 'boolean',\r\n    group: 'Controls - Geolocate',\r\n    default: true\r\n  },\r\n  c_GeolocateControlShowUserHeading: {\r\n    displayName: 'Show User Heading',\r\n    tooltip: \"An arrow will be drawn next to the user location dot indicating the device's heading.\",\r\n    type: 'boolean',\r\n    group: 'Controls - Geolocate',\r\n    default: false\r\n  },\r\n  c_GeolocateControlShowUserLocation: {\r\n    displayName: 'Show User Location',\r\n    tooltip: \"A dot will be shown on the map at the user's location.\",\r\n    type: 'boolean',\r\n    group: 'Controls - Geolocate',\r\n    default: true\r\n  },\r\n  c_GeolocateControlTrackUserLocation: {\r\n    displayName: 'Track User Location',\r\n    tooltip: \"The control becomes a toggle button and when active the map will receive updates to the user's location as it changes.\",\r\n    type: 'boolean',\r\n    group: 'Controls - Geolocate',\r\n    default: true\r\n  },\r\n}\r\n\r\nexport function useGeolocateControl(\r\n  map,\r\n  {\r\n    c_GeolocateControlEnable,\r\n    c_GeolocateControlPosition,\r\n    c_GeolocateControlShowAccuracyCircle,\r\n    c_GeolocateControlShowUserHeading,\r\n    c_GeolocateControlShowUserLocation,\r\n    c_GeolocateControlTrackUserLocation,\r\n  }\r\n) {\r\n  useEffect(() => {\r\n    if (!map) return;\r\n    if (!c_GeolocateControlEnable) return;\r\n\r\n    const control = new mapboxgl.GeolocateControl({\r\n      // fitBoundsOptions:\r\n      // geolocation:\r\n      positionOptions: {\r\n        enableHighAccuracy: true\r\n      },\r\n      showAccuracyCircle: c_GeolocateControlShowAccuracyCircle,\r\n      showUserHeading: c_GeolocateControlShowUserHeading,\r\n      showUserLocation: c_GeolocateControlShowUserLocation,\r\n      trackUserLocation: c_GeolocateControlTrackUserLocation,\r\n    });\r\n\r\n    map.addControl(control, c_GeolocateControlPosition);\r\n\r\n    return function () {\r\n      // Solve the issue with reseting the input\r\n      try {\r\n        map.removeControl(control);\r\n      } catch {}\r\n    };\r\n  }, [\r\n    map,\r\n    c_GeolocateControlEnable,\r\n    c_GeolocateControlPosition,\r\n    c_GeolocateControlShowAccuracyCircle,\r\n    c_GeolocateControlShowUserHeading,\r\n    c_GeolocateControlShowUserLocation,\r\n    c_GeolocateControlTrackUserLocation,\r\n  ]);\r\n}\r\n","import { useState, useRef, useEffect } from 'react';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport { AddControlPositionEnumType } from '../../constants';\r\n\r\n// https://github.com/mapbox/mapbox-gl-draw/tree/main\r\nimport MapboxDraw from \"@mapbox/mapbox-gl-draw\";\r\nimport '@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css';\r\n\r\nexport const DynamicPorts = []\r\n\r\nexport const Inputs = {\r\n  c_MapboxDrawEnable: {\r\n    displayName: 'Enable Mapbox Draw',\r\n    type: 'boolean',\r\n    group: 'Controls - Mapbox Draw',\r\n    default: false\r\n  },\r\n  c_MapboxDrawPosition: {\r\n    displayName: 'Geolocate Position',\r\n    type: AddControlPositionEnumType,\r\n    group: 'Controls - Mapbox Draw',\r\n    default: 'top-right'\r\n  },\r\n  c_MapboxDrawKeybindings: {\r\n    displayName: 'Enable Draw Keybindings',\r\n    type: 'boolean',\r\n    group: 'Controls - Mapbox Draw',\r\n    default: true\r\n  },\r\n  c_MapboxDrawTouch: {\r\n    displayName: 'Enable Draw Touch',\r\n    type: 'boolean',\r\n    group: 'Controls - Mapbox Draw',\r\n    default: true\r\n  },\r\n  c_MapboxDrawBoxSelect: {\r\n    displayName: 'Enable Draw Box Select',\r\n    type: 'boolean',\r\n    group: 'Controls - Mapbox Draw',\r\n    default: true\r\n  },\r\n  c_MapboxDrawDisplayControls: {\r\n    displayName: 'Display Draw Controls',\r\n    type: 'boolean',\r\n    group: 'Controls - Mapbox Draw',\r\n    default: true\r\n  },\r\n\r\n  c_MapboxDrawControlPoints: {\r\n    displayName: 'Points',\r\n    type: 'boolean',\r\n    group: 'Controls - Mapbox Draw - Controls',\r\n    default: false\r\n  },\r\n  c_MapboxDrawControlLineString: {\r\n    displayName: 'Line String',\r\n    type: 'boolean',\r\n    group: 'Controls - Mapbox Draw - Controls',\r\n    default: false\r\n  },\r\n  c_MapboxDrawControlPloygon: {\r\n    displayName: 'Polygon',\r\n    type: 'boolean',\r\n    group: 'Controls - Mapbox Draw - Controls',\r\n    default: true\r\n  },\r\n  c_MapboxDrawControlTrash: {\r\n    displayName: 'Trash',\r\n    type: 'boolean',\r\n    group: 'Controls - Mapbox Draw - Controls',\r\n    default: true\r\n  },\r\n  c_MapboxDrawControlCombineFeatures: {\r\n    displayName: 'Combine Features',\r\n    type: 'boolean',\r\n    group: 'Controls - Mapbox Draw - Controls',\r\n    default: false\r\n  },\r\n  c_MapboxDrawControlUncombineFeatures: {\r\n    displayName: 'Uncombine Features',\r\n    type: 'boolean',\r\n    group: 'Controls - Mapbox Draw - Controls',\r\n    default: false\r\n  },\r\n}\r\n\r\nexport function useMapboxDraw(\r\n  map,\r\n  {\r\n    c_MapboxDrawEnable,\r\n    c_MapboxDrawPosition,\r\n    c_MapboxDrawKeybindings,\r\n    c_MapboxDrawTouch,\r\n    c_MapboxDrawBoxSelect,\r\n    c_MapboxDrawDisplayControls,\r\n    c_MapboxDrawControlPoints,\r\n    c_MapboxDrawControlLineString,\r\n    c_MapboxDrawControlPloygon,\r\n    c_MapboxDrawControlTrash,\r\n    c_MapboxDrawControlCombineFeatures,\r\n    c_MapboxDrawControlUncombineFeatures,\r\n\r\n    outMapboxDraw,\r\n  }\r\n) {\r\n  const [draw, setDraw] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!map) return;\r\n    if (!c_MapboxDrawEnable) return;\r\n\r\n    // https://github.com/mapbox/mapbox-gl-draw/blob/main/docs/API.md#options\r\n    const control = new MapboxDraw({\r\n      keybindings: c_MapboxDrawKeybindings,\r\n      touchEnabled: c_MapboxDrawTouch,\r\n      boxSelect: c_MapboxDrawBoxSelect,\r\n      controls: {\r\n        point: c_MapboxDrawControlPoints,\r\n        line_string: c_MapboxDrawControlLineString,\r\n        polygon: c_MapboxDrawControlPloygon,\r\n        trash: c_MapboxDrawControlTrash,\r\n        combine_features: c_MapboxDrawControlCombineFeatures,\r\n        uncombine_features: c_MapboxDrawControlUncombineFeatures\r\n      },\r\n      displayControlsDefault: c_MapboxDrawDisplayControls,\r\n      // styles: undefined,\r\n    });\r\n    \r\n    map.addControl(control, c_MapboxDrawPosition);\r\n\r\n    setDraw(control);\r\n    outMapboxDraw(control);\r\n\r\n    return function () {\r\n      // Solve the issue with reseting the input\r\n      try {\r\n        map.removeControl(control);\r\n      } catch {}\r\n    };\r\n  }, [\r\n    map,\r\n    c_MapboxDrawPosition,\r\n    c_MapboxDrawKeybindings,\r\n    c_MapboxDrawTouch,\r\n    c_MapboxDrawBoxSelect,\r\n    c_MapboxDrawDisplayControls,\r\n    c_MapboxDrawControlPoints,\r\n    c_MapboxDrawControlLineString,\r\n    c_MapboxDrawControlPloygon,\r\n    c_MapboxDrawControlTrash,\r\n    c_MapboxDrawControlCombineFeatures,\r\n    c_MapboxDrawControlUncombineFeatures,\r\n  ]);\r\n\r\n  return { draw }\r\n}\r\n","import { useState, useRef, useEffect } from 'react';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport { AddControlPositionEnumType } from '../../constants';\r\n\r\n// https://www.npmjs.com/package/@mapbox/mapbox-gl-geocoder\r\n// https://docs.mapbox.com/help/tutorials/geocode-and-sort-stores/\r\nimport MapboxGeocoder from '@mapbox/mapbox-gl-geocoder';\r\nimport '@mapbox/mapbox-gl-geocoder/dist/mapbox-gl-geocoder.css';\r\n\r\nexport const DynamicPorts = []\r\n\r\n// https://github.com/mapbox/mapbox-gl-geocoder/blob/main/API.md#mapboxgeocoder\r\nexport const Inputs = {\r\n  c_GeocoderEnable: {\r\n    displayName: 'Enable Geocoder',\r\n    type: 'boolean',\r\n    group: 'Controls - Geocoder',\r\n    default: false\r\n  },\r\n  c_GeocoderPosition: {\r\n    displayName: 'Geocoder Position',\r\n    type: AddControlPositionEnumType,\r\n    group: 'Controls - Geocoder',\r\n    default: 'top-right'\r\n  },\r\n  c_GeocoderPlaceholder: {\r\n    displayName: 'Placeholder',\r\n    type: 'string',\r\n    group: 'Controls - Geocoder',\r\n    default: 'Search'\r\n  },\r\n  c_GeocoderShowMarker: {\r\n    displayName: 'Show Marker',\r\n    type: 'boolean',\r\n    group: 'Controls - Geocoder',\r\n    default: true\r\n  },\r\n}\r\n\r\nexport function useMapboxGeocoder(\r\n  map,\r\n  {\r\n    c_GeocoderEnable,\r\n    c_GeocoderPosition,\r\n    c_GeocoderPlaceholder,\r\n    c_GeocoderShowMarker,\r\n  }\r\n) {\r\n  useEffect(() => {\r\n    if (!map) return;\r\n    if (!c_GeocoderEnable) return;\r\n\r\n    const control = new MapboxGeocoder({\r\n      accessToken: mapboxgl.accessToken,\r\n      mapboxgl: mapboxgl,\r\n      placeholder: c_GeocoderPlaceholder,\r\n      marker: c_GeocoderShowMarker,\r\n    });\r\n\r\n    map.addControl(control, c_GeocoderPosition);\r\n\r\n    return function () {\r\n      // Solve the issue with reseting the input\r\n      try {\r\n        map.removeControl(control);\r\n      } catch {}\r\n    };\r\n  }, [\r\n    map,\r\n    c_GeocoderEnable,\r\n    c_GeocoderPosition,\r\n    c_GeocoderPlaceholder,\r\n    c_GeocoderShowMarker,\r\n  ]);\r\n}\r\n","import { useState, useRef, useEffect } from 'react';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport { AddControlPositionEnumType } from '../../constants';\r\n\r\nexport const DynamicPorts = [\r\n  {\r\n    condition: \"c_NavigationControlEnable = true\",\r\n    inputs: [\r\n      \"c_NavigationControlPosition\",\r\n      \"c_NavigationControlShowCompass\",\r\n      \"c_NavigationControlShowZoom\",\r\n      \"c_NavigationControlVisualizePitch\",\r\n    ]\r\n  }\r\n]\r\n\r\n// https://docs.mapbox.com/mapbox-gl-js/api/markers/#navigationcontrol\r\nexport const Inputs = {\r\n  c_NavigationControlEnable: {\r\n    displayName: 'Enable Navigation',\r\n    type: 'boolean',\r\n    group: 'Controls - Navigation',\r\n    default: false\r\n  },\r\n  c_NavigationControlPosition: {\r\n    displayName: 'Navigation Position',\r\n    type: AddControlPositionEnumType,\r\n    group: 'Controls - Navigation',\r\n    default: 'top-right'\r\n  },\r\n  c_NavigationControlShowCompass: {\r\n    displayName: 'Show Compass',\r\n    type: 'boolean',\r\n    group: 'Controls - Navigation',\r\n    default: true\r\n  },\r\n  c_NavigationControlShowZoom: {\r\n    displayName: 'Show Zoom',\r\n    type: 'boolean',\r\n    group: 'Controls - Navigation',\r\n    default: true\r\n  },\r\n  c_NavigationControlVisualizePitch: {\r\n    displayName: 'Visualize Pitch',\r\n    type: 'boolean',\r\n    group: 'Controls - Navigation',\r\n    default: false\r\n  },\r\n}\r\n\r\nexport function useNavigationControl(\r\n  map,\r\n  {\r\n    c_NavigationControlEnable,\r\n    c_NavigationControlPosition,\r\n    c_NavigationControlShowCompass,\r\n    c_NavigationControlShowZoom,\r\n    c_NavigationControlVisualizePitch,\r\n  }\r\n) {\r\n  useEffect(() => {\r\n    if (!map) return;\r\n    if (!c_NavigationControlEnable) return;\r\n\r\n    const control = new mapboxgl.NavigationControl({\r\n      showCompass: c_NavigationControlShowCompass,\r\n      showZoom: c_NavigationControlShowZoom,\r\n      visualizePitch: c_NavigationControlVisualizePitch\r\n    });\r\n\r\n    map.addControl(control, c_NavigationControlPosition);\r\n\r\n    return function () {\r\n      // Solve the issue with reseting the input\r\n      try {\r\n        map.removeControl(control);\r\n      } catch {}\r\n    };\r\n  }, [\r\n    map,\r\n    c_NavigationControlEnable,\r\n    c_NavigationControlPosition,\r\n    c_NavigationControlShowCompass,\r\n    c_NavigationControlShowZoom,\r\n    c_NavigationControlVisualizePitch,\r\n  ]);\r\n}\r\n","import { useState, useRef, useEffect } from 'react';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport { AddControlPositionEnumType } from '../../constants';\r\n\r\nexport const DynamicPorts = [\r\n  {\r\n    condition: \"c_ScaleControlEnable = true\",\r\n    inputs: [\r\n      \"c_ScaleControlPosition\",\r\n      \"c_ScaleControlMaxWidth\",\r\n      \"c_ScaleControlUnit\",\r\n    ]\r\n  }\r\n]\r\n\r\n// https://docs.mapbox.com/mapbox-gl-js/api/markers/#scalecontrol\r\nexport const Inputs = {\r\n  c_ScaleControlEnable: {\r\n    displayName: 'Enable Scale',\r\n    type: 'boolean',\r\n    group: 'Controls - Scale',\r\n    default: false\r\n  },\r\n  c_ScaleControlPosition: {\r\n    displayName: 'Scale Position',\r\n    type: AddControlPositionEnumType,\r\n    group: 'Controls - Scale',\r\n    default: 'bottom-right'\r\n  },\r\n  c_ScaleControlMaxWidth: {\r\n    displayName: 'Max Width',\r\n    type: \"number\",\r\n    group: 'Controls - Scale',\r\n    default: 100,\r\n  },\r\n  c_ScaleControlUnit: {\r\n    displayName: 'Unit',\r\n    type: {\r\n      name: \"enum\",\r\n      enums: [\r\n        {\r\n          value: \"imperial\",\r\n          label: \"Imperial\",\r\n        },\r\n        {\r\n          value: \"metric\",\r\n          label: \"Metric\",\r\n        },\r\n        {\r\n          value: \"nautical\",\r\n          label: \"Nautical\",\r\n        },\r\n      ]\r\n    },\r\n    group: 'Controls - Scale',\r\n    default: \"metric\",\r\n  },\r\n}\r\n\r\nexport function useScaleControl(\r\n  map,\r\n  {\r\n    c_ScaleControlEnable,\r\n    c_ScaleControlPosition,\r\n    c_ScaleControlMaxWidth,\r\n    c_ScaleControlUnit,\r\n  }\r\n) {\r\n  useEffect(() => {\r\n    if (!map) return;\r\n    if (!c_ScaleControlEnable) return;\r\n\r\n    const control = new mapboxgl.ScaleControl({\r\n      maxWidth: c_ScaleControlMaxWidth,\r\n      unit: c_ScaleControlUnit,\r\n    });\r\n\r\n    map.addControl(control, c_ScaleControlPosition);\r\n\r\n    return function () {\r\n      // Solve the issue with reseting the input\r\n      try {\r\n        map.removeControl(control);\r\n      } catch {}\r\n    };\r\n  }, [\r\n    map,\r\n    c_ScaleControlEnable,\r\n    c_ScaleControlPosition,\r\n    c_ScaleControlMaxWidth,\r\n    c_ScaleControlUnit,\r\n  ]);\r\n}\r\n","\r\n// https://docs.mapbox.com/mapbox-gl-js/api/map/#map#addcontrol\r\nexport const AddControlPositionEnumType = {\r\n  name: \"enum\",\r\n  enums: [\r\n    {\r\n      value: \"top-left\",\r\n      label: \"Top Left\",\r\n    },\r\n    {\r\n      value: \"top-right\",\r\n      label: \"Top Right\",\r\n    },\r\n    {\r\n      value: \"bottom-left\",\r\n      label: \"Bottom Left\",\r\n    },\r\n    {\r\n      value: \"bottom-right\",\r\n      label: \"Bottom Right\",\r\n    },\r\n  ]\r\n}\r\n","import React, { createContext, useContext, useEffect, useMemo, useState } from 'react';\r\n\r\nconst MapContext = createContext({\r\n  map: null,\r\n  draw: null,\r\n});\r\n\r\nexport function MapContextProvider({ children, map, draw }) {\r\n  return (\r\n    <MapContext.Provider\r\n      value={{\r\n        map,\r\n        draw\r\n      }}\r\n    >\r\n      {children}\r\n    </MapContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useMapContext() {\r\n  const context = useContext(MapContext);\r\n\r\n  if (context === undefined) {\r\n    throw new Error('useMapContext must be a child of MapContextProvider');\r\n  }\r\n\r\n  return context;\r\n}\r\n","import {\r\n  defineModule\r\n} from '@noodl/noodl-sdk';\r\n\r\nimport MapboxNode from './reactNodes/map';\r\nimport MapboxMarker from './reactNodes/marker';\r\nimport MapboxPolygon from './reactNodes/polygon';\r\n\r\nNoodl.defineModule({\r\n  reactNodes: [\r\n    MapboxNode,\r\n    MapboxMarker,\r\n    MapboxPolygon,\r\n  ],\r\n  nodes: [],\r\n  settings: [{\r\n    name: 'mapboxAccessToken',\r\n    type: 'string',\r\n    displayName: 'Mapbox Access Token',\r\n    plug: 'input',\r\n    group: 'Mapbox'\r\n  }],\r\n  setup() {\r\n\r\n  }\r\n});\r\n","import { defineReactNode } from '@noodl/noodl-sdk';\r\n\r\nimport { AddControlPositionEnumType } from '../constants';\r\n\r\nimport MapComponent from '../components/Map';\r\nimport * as FullscreenControl from '../components/controls/FullscreenControl';\r\nimport * as MapboxGeocoder from '../components/controls/MapboxGeocoder';\r\nimport * as GeolocateControl from '../components/controls/GeolocateControl';\r\nimport * as NavigationControl from '../components/controls/NavigationControl';\r\nimport * as ScaleControl from '../components/controls/ScaleControl';\r\nimport * as MapboxDraw from '../components/controls/MapboxDraw';\r\n\r\nexport default defineReactNode({\r\n  name: 'Mapbox Map',\r\n  category: 'Mapbox',\r\n  docs: 'https://docs.noodl.net/library/modules/mapbox/mapbox-map',\r\n  getReactComponent() {\r\n    return MapComponent;\r\n  },\r\n  initialize() {\r\n    const accessToken = Noodl.getProjectSettings().mapboxAccessToken;\r\n    if (!accessToken) {\r\n      this.sendWarning('access-token-missing', 'No access token. Please specify one in project settings and reload');\r\n    } else {\r\n      this.clearWarnings();\r\n    }\r\n  },\r\n  dynamicports: [\r\n    ...FullscreenControl.DynamicPorts,\r\n    ...MapboxGeocoder.DynamicPorts,\r\n    ...NavigationControl.DynamicPorts,\r\n    ...ScaleControl.DynamicPorts,\r\n    ...MapboxDraw.DynamicPorts,\r\n  ],\r\n  inputProps: {\r\n    //options\r\n    mapboxStyle: {\r\n      displayName: 'Style',\r\n      group: 'Options',\r\n      type: 'string',\r\n      default: 'mapbox://styles/mapbox/streets-v12'\r\n    },\r\n    interactive: {\r\n      displayName: 'Interactive',\r\n      type: 'boolean',\r\n      default: true\r\n    },\r\n\r\n    //coordinates and zoom\r\n    longitude: {\r\n      displayName: 'Longitude',\r\n      type: 'number',\r\n      group: 'Coordinates',\r\n      default: 0\r\n    },\r\n    latitute: {\r\n      displayName: 'Latitude',\r\n      type: 'number',\r\n      group: 'Coordinates',\r\n      default: 0\r\n    },\r\n    zoom: {\r\n      displayName: 'Zoom',\r\n      type: 'number',\r\n      group: 'Coordinates',\r\n      default: 0\r\n    },\r\n    bearing: {\r\n      displayName: 'Bearing',\r\n      type: 'number',\r\n      group: 'Coordinates',\r\n      default: 0\r\n    },\r\n\r\n    // Controls\r\n    ...FullscreenControl.Inputs,\r\n    ...MapboxGeocoder.Inputs,\r\n    ...GeolocateControl.Inputs,\r\n    ...NavigationControl.Inputs,\r\n    ...ScaleControl.Inputs,\r\n    ...MapboxDraw.Inputs,\r\n  },\r\n  // signals: {\r\n  //   centerOnUser: {\r\n  //     displayName: 'Center on user',\r\n  //     group: 'Actions',\r\n  //     signal() {\r\n  //       this.geolocate && this.geolocate.trigger();\r\n  //     }\r\n  //   }\r\n  // },\r\n  outputProps: {\r\n    outMap: {\r\n      displayName: 'Mapbox Object',\r\n      type: 'object',\r\n      group: 'Mapbox'\r\n    },\r\n    outMapboxDraw: {\r\n      displayName: 'Mapbox Draw Object',\r\n      type: 'object',\r\n      group: 'Mapbox'\r\n    },\r\n\r\n    outLongitude: {\r\n      displayName: 'Longitude',\r\n      type: 'number',\r\n      group: 'Coordinates'\r\n    },\r\n    outLatitute: {\r\n      displayName: 'Latitude',\r\n      type: 'number',\r\n      group: 'Coordinates'\r\n    },\r\n    outZoom: {\r\n      displayName: 'Zoom',\r\n      type: 'number',\r\n      group: 'Coordinates'\r\n    },\r\n    outBearing: {\r\n      displayName: 'Bearing',\r\n      type: 'number',\r\n      group: 'Coordinates',\r\n      default: 0\r\n    },\r\n\r\n    onLoaded: {\r\n      displayName: 'Map Loaded',\r\n      type: 'signal',\r\n      group: 'Events'\r\n    },\r\n    onMoved: {\r\n      displayName: 'Map Moved',\r\n      type: 'signal',\r\n      group: 'Events'\r\n    },\r\n\r\n    // Map Clicked\r\n    onClick: {\r\n      displayName: 'Click',\r\n      type: 'signal',\r\n      group: 'Map Clicked'\r\n    },\r\n    onClickLongitude: {\r\n      displayName: 'Longitude',\r\n      type: 'number',\r\n      group: 'Map Clicked',\r\n      editorName: 'Clicked Longitude'\r\n    },\r\n    onClickLatitude: {\r\n      displayName: 'Latitude',\r\n      type: 'number',\r\n      group: 'Map Clicked',\r\n      editorName: 'Clicked Latitude'\r\n    },\r\n  }\r\n})\r\n","import {\r\n  defineReactNode\r\n} from '@noodl/noodl-sdk';\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { useMapContext } from '../contexts/MapContext';\r\n\r\nimport mapboxgl from 'mapbox-gl';\r\n\r\nexport default defineReactNode({\r\n  name: 'Mapbox Marker',\r\n  category: 'Mapbox',\r\n  docs: 'https://docs.noodl.net/library/modules/mapbox/mapbox-map',\r\n  getReactComponent() {\r\n    return function ({\r\n      color,\r\n      geopoint,\r\n      longitude,\r\n      latitude,\r\n      draggable,\r\n      rotation,\r\n      rotationAlignment,\r\n      pitchAlignment,\r\n      offsetX,\r\n      offsetY,\r\n      occludedOpacity,\r\n\r\n      outLongitude,\r\n      outlatitude,\r\n\r\n      onDragStart,\r\n      onDrag,\r\n      onDragEnd,\r\n\r\n      children\r\n    }) {\r\n      const mapContext = useMapContext();\r\n      const containerRef = useRef(null);\r\n      const [marker, setMarker] = useState(null);\r\n\r\n      useEffect(() => {\r\n        if (!mapContext.map) return;\r\n\r\n        const newMarker = new mapboxgl.Marker({\r\n          color,\r\n          element: containerRef.current\r\n        });\r\n\r\n        if (geopoint) {\r\n          newMarker.setLngLat([geopoint.longitude, geopoint.latitude]);\r\n        } else {\r\n          newMarker.setLngLat([longitude, latitude]);\r\n        }\r\n        newMarker.addTo(mapContext.map);\r\n\r\n        function updateLngLat() {\r\n          const { lng, lat } = newMarker.getLngLat();\r\n          outLongitude(lng);\r\n          outlatitude(lat);\r\n        }\r\n\r\n        newMarker.on(\"dragstart\", () => {\r\n          updateLngLat();\r\n          onDragStart();\r\n        });\r\n\r\n        newMarker.on(\"drag\", () => {\r\n          updateLngLat();\r\n          onDrag();\r\n        });\r\n\r\n        newMarker.on(\"dragend\",() => {\r\n          updateLngLat();\r\n          onDragEnd();\r\n        });\r\n\r\n        updateLngLat();\r\n        setMarker(newMarker);\r\n\r\n        return function () {\r\n          newMarker.remove();\r\n          setMarker(null);\r\n        }\r\n      }, [color, containerRef, children]);\r\n\r\n      if (marker) {\r\n        if (geopoint) {\r\n          marker.setLngLat([geopoint.longitude, geopoint.latitude]);\r\n        } else {\r\n          marker.setLngLat([longitude, latitude]);\r\n        }\r\n        marker.setDraggable(draggable)\r\n        marker.setRotation(rotation)\r\n        marker.setRotationAlignment(rotationAlignment)\r\n        marker.setPitchAlignment(pitchAlignment)\r\n        marker.setOffset([offsetX, offsetY])\r\n      }\r\n\r\n      if (children) {\r\n        // Have to wrap the containerRef, since Mapbox will delete the DOM element.\r\n        return (\r\n          <div>\r\n            <div ref={containerRef}>{children}</div>\r\n          </div>\r\n        )\r\n      }\r\n\r\n      return null;\r\n    };\r\n  },\r\n  initialize() {},\r\n  inputProps: {\r\n    color: {\r\n      displayName: 'Color',\r\n      type: 'color',\r\n      group: 'General',\r\n      default: \"#3FB1CE\"\r\n    },\r\n    geopoint: {\r\n      displayName: 'Geopoint',\r\n      type: 'object',\r\n      group: 'Coordinates',\r\n      default: undefined\r\n    },\r\n    longitude: {\r\n      displayName: 'Longitude',\r\n      type: 'number',\r\n      group: 'Coordinates',\r\n      default: 0\r\n    },\r\n    latitude: {\r\n      displayName: 'Latitude',\r\n      type: 'number',\r\n      group: 'Coordinates',\r\n      default: 0\r\n    },\r\n    draggable: {\r\n      displayName: 'Draggable',\r\n      type: 'boolean',\r\n      group: 'General',\r\n      default: false\r\n    },\r\n    rotation: {\r\n      displayName: 'Rotation',\r\n      type: 'number',\r\n      group: 'General',\r\n      default: 0\r\n    },\r\n    rotationAlignment: {\r\n      displayName: 'Rotation Alignment',\r\n      type: {\r\n        name: \"enum\",\r\n        enums: [\r\n          {\r\n            label: \"Auto\",\r\n            value: \"auto\"\r\n          },\r\n          {\r\n            label: \"Viewport\",\r\n            value: \"viewport\"\r\n          },\r\n          {\r\n            label: \"Map\",\r\n            value: \"map\"\r\n          },\r\n          {\r\n            label: \"Horizon\",\r\n            value: \"horizon\"\r\n          }\r\n        ]\r\n      },\r\n      group: \"General\",\r\n      default: \"auto\"\r\n    },\r\n    pitchAlignment: {\r\n      displayName: 'Pitch Alignment',\r\n      type: {\r\n        name: \"enum\",\r\n        enums: [\r\n          {\r\n            label: \"Auto\",\r\n            value: \"auto\"\r\n          },\r\n          {\r\n            label: \"Viewport\",\r\n            value: \"viewport\"\r\n          },\r\n          {\r\n            label: \"Map\",\r\n            value: \"map\"\r\n          },\r\n          {\r\n            label: \"Horizon\",\r\n            value: \"horizon\"\r\n          }\r\n        ]\r\n      },\r\n      group: \"General\",\r\n      default: \"auto\"\r\n    },\r\n    offsetX: {\r\n      displayName: 'Offset X',\r\n      type: 'number',\r\n      group: 'General',\r\n      default: 0\r\n    },\r\n    offsetX: {\r\n      displayName: 'Offset X',\r\n      type: 'number',\r\n      group: 'General',\r\n      default: 0\r\n    },\r\n    offsetY: {\r\n      displayName: 'Offset Y',\r\n      type: 'number',\r\n      group: 'General',\r\n      default: 0\r\n    },\r\n  },\r\n  outputProps: {\r\n    outLongitude: {\r\n      displayName: 'Longitude',\r\n      type: 'number',\r\n      group: 'Coordinates'\r\n    },\r\n    outlatitude: {\r\n      displayName: 'Latitude',\r\n      type: 'number',\r\n      group: 'Coordinates'\r\n    },\r\n\r\n    onDragStart: {\r\n      displayName: 'Drag Start',\r\n      type: 'signal',\r\n      group: 'Events',\r\n    },\r\n    onDrag: {\r\n      displayName: 'Drag',\r\n      type: 'signal',\r\n      group: 'Events',\r\n    },\r\n    onDragEnd: {\r\n      displayName: 'Drag End',\r\n      type: 'signal',\r\n      group: 'Events',\r\n    },\r\n  },\r\n  changed: {},\r\n  signals: {},\r\n  methods: {},\r\n})\r\n","import {\r\n  defineReactNode\r\n} from '@noodl/noodl-sdk';\r\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\r\nimport { useMapContext } from '../contexts/MapContext';\r\n\r\nimport mapboxgl from 'mapbox-gl';\r\n\r\nfunction guid() {\r\n  function s4() {\r\n    return Math.floor((1 + Math.random()) * 0x10000)\r\n      .toString(16)\r\n      .substring(1);\r\n  }\r\n  return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\r\n}\r\n\r\nexport default defineReactNode({\r\n  name: 'Mapbox Polygon',\r\n  category: 'Mapbox',\r\n  docs: 'https://docs.noodl.net/library/modules/mapbox/mapbox-map',\r\n  allowChildren: false,\r\n  getReactComponent() {\r\n    return function ({\r\n      coordinates,\r\n      enabled,\r\n\r\n      outMapbox,\r\n      outMapboxDraw,\r\n      outFeatureId,\r\n      outCoordinates,\r\n      outCenter,\r\n      outCentroid,\r\n      outArea,\r\n\r\n      onUpdated,\r\n      onSelected,\r\n      onUnselected,\r\n    }) {\r\n      const mapContext = useMapContext();\r\n      const containerRef = useRef(null);\r\n      const [featureId, setFeatureId] = useState(null);\r\n\r\n      if (mapContext) {\r\n        outMapbox(mapContext.map);\r\n        outMapboxDraw(mapContext.draw);\r\n      }\r\n      \r\n      useEffect(() => {\r\n        if (!mapContext.draw) return;\r\n\r\n        // Create a unique id for this feature\r\n        const id = guid();\r\n\r\n        let wasSelected = false;\r\n        function onSelectionChange(e) {\r\n          //   const features = e.features.filter((x) => x.id !== featureId.current);\r\n          //   mapContext.draw.changeMode('simple_select', { featureIds: features.map((x) => x.id) });\r\n          //   return;\r\n          // }\r\n\r\n          const feature = e.features.find((x) => x.id === id);\r\n          if (feature && feature.properties.enabled === false) {\r\n            const otherFeaturesIds = e.features\r\n              .filter((x) => x.id !== id)\r\n              .map((x) => x.id);\r\n\r\n            mapContext.draw.changeMode('simple_select', { featureIds: otherFeaturesIds });\r\n            return;\r\n          }\r\n\r\n          if (feature) {\r\n            wasSelected = true;\r\n            onSelected();\r\n          } else if (wasSelected) {\r\n            wasSelected = false;\r\n            onUnselected();\r\n          }\r\n        }\r\n\r\n        function onUpdate(e) {\r\n          const features = e.features.filter((x) => x.id === id);\r\n          if (features.length > 0) {\r\n            const updated = features[0];\r\n            outCoordinates(updated.geometry.coordinates);\r\n            onUpdated();\r\n          }\r\n        }\r\n\r\n        // Create the feature\r\n        const feature = {\r\n          id,\r\n          type: 'Feature',\r\n          properties: {},\r\n          geometry: {\r\n            type: 'Polygon',\r\n            coordinates: coordinates || [[0, 0]]\r\n          }\r\n        }\r\n\r\n        mapContext.draw.add(feature);\r\n        outFeatureId(id);\r\n        setFeatureId(id);\r\n\r\n        // Register the events\r\n        const onselectionchange = (e) => onSelectionChange(e);\r\n        const onupdate = (e) => onUpdate(e);\r\n\r\n        mapContext.map.on('draw.selectionchange', onselectionchange);\r\n        mapContext.map.on('draw.update', onupdate);\r\n\r\n        return function () {\r\n          try {\r\n            mapContext.map?.off('draw.selectionchange', onselectionchange);\r\n            mapContext.map?.off('draw.update', onupdate);\r\n            mapContext.draw?.delete(id);\r\n          } catch (_) {\r\n            // noop\r\n          }\r\n        }\r\n      }, [containerRef]);\r\n\r\n      if (mapContext.draw && featureId) {\r\n        const feature = mapContext.draw.get(featureId);\r\n        if (feature) {\r\n          if (coordinates) feature.geometry.coordinates = coordinates;\r\n          feature.properties.enabled = enabled;\r\n          feature.properties.active = enabled.toString();\r\n          mapContext.draw.add(feature);\r\n        }\r\n      }\r\n\r\n      return null;\r\n    };\r\n  },\r\n  initialize() {},\r\n  inputProps: {\r\n    coordinates: {\r\n      displayName: 'Coordinates',\r\n      type: 'number',\r\n      group: 'Coordinates'\r\n    },\r\n    enabled: {\r\n      displayName: 'Enabled',\r\n      type: 'boolean',\r\n      group: 'General',\r\n      default: true\r\n    },\r\n  },\r\n  outputProps: {\r\n    outMapbox: {\r\n      displayName: 'Mapbox Object',\r\n      type: 'object',\r\n      group: 'Mapbox'\r\n    },\r\n    outMapboxDraw: {\r\n      displayName: 'Mapbox Draw Object',\r\n      type: 'object',\r\n      group: 'Mapbox'\r\n    },\r\n\r\n    outFeatureId: {\r\n      displayName: 'Feature Id',\r\n      type: 'string',\r\n      group: 'Data'\r\n    },\r\n    outCoordinates: {\r\n      displayName: 'Coordinates',\r\n      type: 'array',\r\n      tsdef: '[lat: number, lon: number][]',\r\n      group: 'Data'\r\n    },\r\n    outCenter: {\r\n      displayName: 'Center',\r\n      type: 'number',\r\n      group: 'Data',\r\n      tooltip: 'The absolute center point of all Coordinates.'\r\n    },\r\n    outCentroid: {\r\n      displayName: 'Centroid',\r\n      type: 'number',\r\n      group: 'Data',\r\n      tooltip: 'The centroid of all Coordinates.'\r\n    },\r\n    outArea: {\r\n      displayName: 'Area',\r\n      type: 'number',\r\n      group: 'Data',\r\n      tooltip: 'Area in square meters.'\r\n    },\r\n\r\n    onUpdated: {\r\n      displayName: 'Updated',\r\n      type: 'signal',\r\n      group: 'Events',\r\n    },\r\n    onSelected: {\r\n      displayName: 'Selected',\r\n      type: 'signal',\r\n      group: 'Events',\r\n    },\r\n    onUnselected: {\r\n      displayName: 'Unselected',\r\n      type: 'signal',\r\n      group: 'Events',\r\n    },\r\n  },\r\n  changed: {},\r\n  signals: {\r\n    Edit() {\r\n      const draw = this._outputs.outMapboxDraw.value;\r\n      if (!draw) return;\r\n\r\n      const featureId = this._outputs.outFeatureId.value;\r\n      if (!featureId) return;\r\n      \r\n      draw.changeMode('direct_select', { featureId });\r\n    }\r\n  },\r\n  methods: {},\r\n})\r\n","module.exports = React;"],"sourceRoot":""}